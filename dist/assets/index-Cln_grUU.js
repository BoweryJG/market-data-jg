var e=Object.defineProperty,t=(t,r,s)=>((t,r,s)=>r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s)(t,"symbol"!=typeof r?r+"":r,s);import{k as r,s,C as i,a as n,B as a,b as o,u as l,j as c,c as d,T as h,R as u,F as p,M as m,S as g,I as f,d as x,e as y,f as v,A as b,P as j,g as w,h as _,D as k,W as C,i as S,l as T,m as P,G as A,n as E,E as I,o as $,p as M,q as R,r as O,t as D,v as z,L,w as F,x as B,y as N,z as W,H as U,J as V,K as q,N as G,O as H,Q as K,U as Y,V as J,X,Y as Q,Z,_ as ee,$ as te,a0 as re,a1 as se,a2 as ie,a3 as ne,a4 as ae,a5 as oe,a6 as le,a7 as ce,a8 as de,a9 as he,aa as ue,ab as pe,ac as me,ad as ge,ae as fe,af as xe,ag as ye,ah as ve,ai as be,aj as je,ak as we,al as _e,am as ke,an as Ce,ao as Se,ap as Te,aq as Pe,ar as Ae,as as Ee,at as Ie,au as $e,av as Me,aw as Re,ax as Oe,ay as De,az as ze,aA as Le,aB as Fe,aC as Be,aD as Ne,aE as We,aF as Ue,aG as Ve,aH as qe,aI as Ge,aJ as He,aK as Ke,aL as Ye,aM as Je,aN as Xe,aO as Qe,aP as Ze,aQ as et,aR as tt,aS as rt,aT as st,aU as it,aV as nt,aW as at,aX as ot,aY as lt,aZ as ct,a_ as dt,a$ as ht,b0 as ut,b1 as pt,b2 as mt,b3 as gt,b4 as ft,b5 as xt,b6 as yt,b7 as vt,b8 as bt,b9 as jt,ba as wt,bb as _t,bc as kt,bd as Ct,be as St,bf as Tt,bg as Pt,bh as At,bi as Et,bj as It,bk as $t,bl as Mt,bm as Rt,bn as Ot,bo as Dt,bp as zt,bq as Lt,br as Ft,bs as Bt,bt as Nt,bu as Wt,bv as Ut,bw as Vt,bx as qt,by as Gt,bz as Ht,bA as Kt,bB as Yt,bC as Jt,bD as Xt,bE as Qt,bF as Zt,bG as er,bH as tr,bI as rr,bJ as sr,bK as ir,bL as nr,bM as ar,bN as or,bO as lr,bP as cr,bQ as dr,bR as hr,bS as ur,bT as pr,bU as mr,bV as gr,bW as fr,bX as xr,bY as yr,bZ as vr,b_ as br,b$ as jr,c0 as wr,c1 as _r,c2 as kr,c3 as Cr,c4 as Sr,c5 as Tr,c6 as Pr,c7 as Ar,c8 as Er,c9 as Ir,ca as $r,cb as Mr,cc as Rr,cd as Or,ce as Dr,cf as zr,cg as Lr,ch as Fr,ci as Br,cj as Nr,ck as Wr,cl as Ur,cm as Vr,cn as qr,co as Gr,cp as Hr,cq as Kr,cr as Yr,cs as Jr,ct as Xr,cu as Qr,cv as Zr,cw as es,cx as ts,cy as rs,cz as ss,cA as is,cB as ns,cC as as,cD as os,cE as ls,cF as cs,cG as ds,cH as hs,cI as us,cJ as ps,cK as ms,cL as gs,cM as fs,cN as xs,cO as ys,cP as vs,cQ as bs,cR as js,cS as ws,cT as _s}from"./mui-vendor-BMM5r6gQ.js";import{r as ks,a as Cs,g as Ss,d as Ts,c as Ps,u as As,e as Es,L as Is,f as $s,B as Ms,h as Rs,i as Os,N as Ds}from"./react-vendor-BE2XepEq.js";import{_ as zs,c as Ls}from"./three-vendor-C6v_LHak.js";import{a as Fs,v as Bs}from"./utils-CHuG9evz.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const Ns=r`
  0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 0, 0, 0.7); }
  70% { transform: scale(1.05); box-shadow: 0 0 0 10px rgba(255, 0, 0, 0); }
  100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 0, 0, 0); }
`,Ws=r`
  from { transform: translateX(-100%); opacity: 0; }
  to { transform: translateX(0); opacity: 1; }
`;r`
  0% { box-shadow: 0 0 5px rgba(0, 123, 255, 0.5); }
  50% { box-shadow: 0 0 20px rgba(0, 123, 255, 0.8), 0 0 30px rgba(0, 123, 255, 0.6); }
  100% { box-shadow: 0 0 5px rgba(0, 123, 255, 0.5); }
`;const Us=s(i,{shouldForwardProp:e=>"priority"!==e})(({theme:e,priority:t})=>({position:"relative",overflow:"visible",background:"hot"===t?`linear-gradient(135deg, ${n(e.palette.error.main,.1)}, ${n(e.palette.warning.main,.1)})`:"warm"===t?`linear-gradient(135deg, ${n(e.palette.warning.main,.1)}, ${n(e.palette.success.main,.1)})`:n(e.palette.background.paper,.9),border:`2px solid ${"hot"===t?e.palette.error.main:"warm"===t?e.palette.warning.main:e.palette.divider}`,..."hot"===t&&{animation:`${Ns} 2s infinite`,"&::before":{content:'"ðŸ”¥"',position:"absolute",top:-10,right:-10,fontSize:"24px",animation:`${Ns} 1s infinite`}},transition:"all 0.3s ease",cursor:"pointer","&:hover":{transform:"translateY(-4px) scale(1.02)",boxShadow:e.shadows[20]}})),Vs=s(i,{shouldForwardProp:e=>"trend"!==e})(({theme:e,trend:t})=>({height:"100%",background:"up"===t?`linear-gradient(135deg, ${n(e.palette.success.main,.05)}, ${n(e.palette.success.light,.1)})`:"down"===t?`linear-gradient(135deg, ${n(e.palette.error.main,.05)}, ${n(e.palette.error.light,.1)})`:e.palette.background.paper,border:`1px solid ${n(e.palette.divider,.1)}`,transition:"all 0.2s ease","&:hover":{transform:"scale(1.02)",boxShadow:e.shadows[4]}})),qs=s(a)(({theme:e})=>({borderRadius:2*e.shape.borderRadius,textTransform:"none",fontWeight:600,padding:"8px 20px",transition:"all 0.2s ease","&:hover":{transform:"translateY(-2px)",boxShadow:e.shadows[8]}})),Gs=s(o)(({theme:e})=>({display:"inline-flex",alignItems:"center",gap:e.spacing(.5),"& .live-dot":{width:8,height:8,borderRadius:"50%",backgroundColor:e.palette.error.main,animation:`${Ns} 1.5s infinite`}})),Hs=s(o)(({theme:e})=>({position:"relative",height:40,background:n(e.palette.primary.main,.1),borderRadius:2*e.shape.borderRadius,overflow:"hidden","& .progress-bar":{height:"100%",background:`linear-gradient(90deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,transition:"width 0.5s ease",display:"flex",alignItems:"center",justifyContent:"flex-end",paddingRight:e.spacing(2),color:e.palette.primary.contrastText,fontWeight:"bold"},"& .milestone":{position:"absolute",top:0,bottom:0,width:2,background:e.palette.divider,"&::after":{content:"attr(data-label)",position:"absolute",bottom:-20,left:"50%",transform:"translateX(-50%)",fontSize:"0.75rem",color:e.palette.text.secondary,whiteSpace:"nowrap"}}})),Ks=()=>{const[e,t]=ks.useState(0),[r,s]=ks.useState(null),[Se,Te]=ks.useState([]),[Pe,Ae]=ks.useState(!1),[Ee,Ie]=ks.useState(!1),[$e,Me]=ks.useState(!1),[Re,Oe]=ks.useState({briefing:!0,opportunities:!0,activities:!1,insights:!1}),De=l(),ze=[{id:"1",practice:"Advanced Dental Care",doctor:"Dr. Sarah Martinez",priority:"hot",score:92,reason:"Actively researching implant systems - viewed 5 competitor sites yesterday",nextAction:"Call within 2 hours - mention the new Zimmer Biomet special",value:125e3,lastContact:"3 days ago",category:"Implants",signal:"Web activity spike",timeToClose:14,competitors:["Nobel Biocare","Straumann"],specialties:["Oral Surgery","Prosthodontics"],patientVolume:1200,decisionTimeframe:"This quarter"},{id:"2",practice:"Smile Innovations",doctor:"Dr. James Chen",priority:"hot",score:88,reason:"Budget approved for Q4 - $200K allocated for new equipment",nextAction:"Schedule demo this week - bring the portable scanner",value:2e5,lastContact:"1 week ago",category:"Digital Workflow",signal:"Budget release",timeToClose:21,specialties:["General Dentistry","Cosmetic"],patientVolume:2500,decisionTimeframe:"Next 30 days"},{id:"3",practice:"Aesthetic Excellence",doctor:"Dr. Emily Johnson",priority:"warm",score:75,reason:"Competitor contract expires next month - dissatisfied with support",nextAction:"Send competitive comparison + schedule lunch meeting",value:85e3,lastContact:"2 weeks ago",category:"Lasers",signal:"Contract expiration",timeToClose:35,competitors:["Cutera","Candela"],specialties:["Dermatology","Med Spa"],patientVolume:800}],Le=[{id:"1",type:"search",title:'Dr. Martinez searching "implant systems comparison"',description:"Viewed Nobel Biocare and Straumann sites. Spent 12 min on pricing pages.",action:"Call now",timestamp:new Date(Date.now()-18e5),value:125e3,urgent:!0},{id:"2",type:"budget",title:"Q4 budgets released - 12 practices in territory",description:"$1.2M total available budget identified across your accounts",action:"View list",timestamp:new Date(Date.now()-72e5),value:12e5},{id:"3",type:"competitor",title:"Nobel Biocare announced 15% price increase",description:"Effective Jan 1st - opportunity to position our value prop",action:"Get talk track",timestamp:new Date(Date.now()-144e5)},{id:"4",type:"expansion",title:"Smile Innovations adding 2 new operatories",description:"Construction starts next month - perfect timing for equipment package",action:"Schedule visit",timestamp:new Date(Date.now()-864e5),value:3e5}],Fe={visits:4,calls:12,emails:20,demos:2,completed:{visits:1,calls:5,emails:8,demos:0}},Be={current:142500,nextTier:15e4,nextTierBonus:5e3,ytd:285e3},Ne=e=>{Oe(t=>({...t,[e]:!t[e]}))},We=e=>{switch(e){case"search":return c.jsx(Ce,{color:"error"});case"budget":return c.jsx(ke,{color:"success"});case"competitor":return c.jsx(ae,{color:"warning"});case"expansion":return c.jsx(ve,{color:"info"});case"risk":return c.jsx(_e,{color:"error"});default:return c.jsx(we,{})}},Ue=e=>{const t=Math.floor((Date.now()-e.getTime())/1e3/60);if(t<60)return`${t}m ago`;const r=Math.floor(t/60);return r<24?`${r}h ago`:`${Math.floor(r/24)}d ago`};return c.jsxs(d,{maxWidth:"xl",sx:{mt:2,mb:2,position:"relative"},children:[c.jsxs(o,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(o,{children:[c.jsxs(h,{variant:"h4",sx:{fontWeight:"bold",display:"flex",alignItems:"center",gap:1},children:[c.jsx(u,{color:"primary"}),"Sales Command Center",c.jsxs(Gs,{children:[c.jsx("span",{className:"live-dot"}),c.jsx(h,{variant:"caption",color:"error",children:"LIVE"})]})]}),c.jsxs(h,{variant:"subtitle1",color:"text.secondary",children:["Thursday, Nov 14 â€¢ Territory: West Coast â€¢ ",ze.filter(e=>"hot"===e.priority).length," hot leads active"]})]}),c.jsxs(o,{sx:{display:"flex",gap:1},children:[c.jsx(p,{control:c.jsx(g,{checked:Ee,onChange:e=>Ie(e.target.checked)}),label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[c.jsx(m,{fontSize:"small"})," Voice"]})}),c.jsx(f,{color:"primary",children:c.jsx(x,{})}),c.jsx(f,{children:c.jsx(y,{})})]})]}),c.jsx(i,{sx:{mb:2,background:`linear-gradient(135deg, ${n(De.palette.primary.main,.05)}, ${n(De.palette.secondary.main,.05)})`},children:c.jsxs(v,{sx:{pb:2},children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[c.jsxs(o,{children:[c.jsxs(h,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(b,{color:"primary"}),"Commission Tracker"]}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["$",(Be.nextTier-Be.current).toLocaleString()," to next tier = $",Be.nextTierBonus.toLocaleString()," bonus"]})]}),c.jsxs(o,{sx:{textAlign:"right"},children:[c.jsxs(h,{variant:"h5",color:"primary",sx:{fontWeight:"bold"},children:["$",Be.current.toLocaleString()]}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["YTD: $",Be.ytd.toLocaleString()]})]})]}),c.jsxs(Hs,{children:[c.jsxs(o,{className:"progress-bar",sx:{width:Be.current/Be.nextTier*100+"%"},children:[Math.round(Be.current/Be.nextTier*100),"%"]}),c.jsx(o,{className:"milestone",style:{left:"50%"},"data-label":"$75K"}),c.jsx(o,{className:"milestone",style:{left:"100%"},"data-label":"$150K"})]})]})}),c.jsx(j,{sx:{mb:2},children:c.jsxs(w,{value:e,onChange:(e,r)=>t(r),variant:"fullWidth",children:[c.jsx(_,{label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(k,{})," Today's Plan"]})}),c.jsx(_,{label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(C,{})," Hot Leads"]})}),c.jsx(_,{label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(S,{})," Pipeline"]})}),c.jsx(_,{label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(T,{})," Intelligence"]})})]})}),0===e&&c.jsx(P,{in:0===e,children:c.jsxs(A,{container:!0,spacing:2,children:[c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[c.jsxs(h,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(E,{color:"primary"}),"Morning Briefing"]}),c.jsx(f,{size:"small",onClick:()=>Ne("briefing"),children:Re.briefing?c.jsx(I,{}):c.jsx($,{})})]}),c.jsx(M,{in:Re.briefing,children:c.jsxs(A,{container:!0,spacing:2,children:[c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(R,{severity:"success",icon:c.jsx(D,{}),children:[c.jsx(O,{children:"Yesterday's Win"}),"Closed Smile Innovations - $125K deal! ðŸŽ‰"]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(R,{severity:"warning",icon:c.jsx(z,{}),children:[c.jsx(O,{children:"Time Sensitive"}),"3 contracts expire this month - action needed"]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(R,{severity:"info",icon:c.jsx(L,{}),children:[c.jsx(O,{children:"Pro Tip"}),"Best time to visit Dr. Chen: 2-4 PM (after procedures)"]})})]})})]})})}),c.jsx(A,{item:!0,xs:12,md:8,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(F,{color:"primary"}),"Today's Activities"]}),c.jsx(A,{container:!0,spacing:2,children:Object.entries(Fe.completed).map(([e,t])=>{return c.jsx(A,{item:!0,xs:6,md:3,children:c.jsxs(o,{sx:{textAlign:"center"},children:[c.jsx(h,{variant:"caption",color:"text.secondary",sx:{textTransform:"capitalize"},children:e}),c.jsxs(o,{sx:{position:"relative",display:"inline-flex"},children:[c.jsx(B,{variant:"determinate",value:t/Fe[e]*100,size:60,thickness:4,sx:{color:(r=t/Fe[e]*100,r>=100?De.palette.success.main:r>=75?De.palette.warning.main:De.palette.error.main)}}),c.jsx(o,{sx:{position:"absolute",inset:0,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(h,{variant:"caption",component:"div",color:"text.secondary",children:[t,"/",Fe[e]]})})]})]})},e);var r})}),c.jsx(N,{sx:{my:2}}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Optimized route saves 47 min â€¢ Next: Advanced Dental Care (12 min away)"}),c.jsx(a,{variant:$e?"outlined":"contained",size:"small",startIcon:c.jsx(W,{}),onClick:()=>Me(!$e),children:$e?"View Route":"Start Navigation"})]})]})})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsx(i,{sx:{height:"100%"},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(U,{color:"secondary"}),"AI Says"]}),c.jsxs(V,{spacing:2,children:[c.jsxs(j,{sx:{p:2,background:n(De.palette.secondary.main,.05)},children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,color:"secondary",children:"ðŸŽ¯ Focus on These Today:"}),c.jsx(h,{variant:"body2",children:"1. Dr. Martinez - Call before 11 AM"}),c.jsx(h,{variant:"body2",children:"2. Bring iPad for Smile Innovations demo"}),c.jsx(h,{variant:"body2",children:"3. Mention Nobel price increase to fence-sitters"})]}),c.jsx(a,{fullWidth:!0,variant:"outlined",startIcon:c.jsx(q,{}),sx:{borderStyle:"dashed"},children:"Get More Suggestions"})]})]})})}),c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[c.jsxs(h,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(G,{color:"error"}),"Live Opportunity Feed",c.jsx(H,{label:"4 new",size:"small",color:"error"})]}),c.jsx(f,{size:"small",onClick:()=>Ne("opportunities"),children:Re.opportunities?c.jsx(I,{}):c.jsx($,{})})]}),c.jsx(M,{in:Re.opportunities,children:c.jsx(K,{children:Le.map((e,t)=>c.jsxs(Cs.Fragment,{children:[t>0&&c.jsx(N,{}),c.jsxs(Y,{sx:{py:2,animation:e.urgent?`${Ws} 0.5s ease`:void 0,background:e.urgent?n(De.palette.error.main,.05):void 0},children:[c.jsx(J,{children:c.jsx(X,{sx:{bgcolor:e.urgent?"error.main":"primary.main"},children:We(e.type)})}),c.jsx(Q,{primary:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(h,{variant:"subtitle2",children:e.title}),e.urgent&&c.jsx(ee,{color:"error",fontSize:"small"})]}),secondary:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:e.description}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mt:.5},children:[c.jsx(Z,{fontSize:"small",color:"action"}),c.jsx(h,{variant:"caption",color:"text.secondary",children:Ue(e.timestamp)}),e.value&&c.jsxs(c.Fragment,{children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"â€¢"}),c.jsxs(h,{variant:"caption",color:"success.main",sx:{fontWeight:"bold"},children:["$",e.value.toLocaleString()]})]})]})]})}),c.jsx(te,{children:c.jsx(qs,{variant:e.urgent?"contained":"outlined",size:"small",color:e.urgent?"error":"primary",children:e.action})})]})]},e.id))})})]})})})]})}),1===e&&c.jsx(P,{in:1===e,children:c.jsxs(A,{container:!0,spacing:2,children:[c.jsx(A,{item:!0,xs:12,children:c.jsxs(h,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(ee,{color:"error"}),"If you only visit 3 practices today, visit these:"]})}),ze.map((e,t)=>c.jsx(A,{item:!0,xs:12,children:c.jsx(re,{in:!0,style:{transitionDelay:100*t+"ms"},children:c.jsx(Us,{priority:e.priority,onClick:()=>s(e),children:c.jsx(v,{children:c.jsxs(A,{container:!0,spacing:2,alignItems:"center",children:[c.jsxs(A,{item:!0,xs:12,md:8,children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:1},children:[c.jsxs(o,{children:[c.jsxs(h,{variant:"h6",sx:{display:"flex",alignItems:"center",gap:1},children:[e.practice,c.jsx(H,{label:`${e.score}% close probability`,size:"small",color:"hot"===e.priority?"error":"warm"===e.priority?"warning":"default"})]}),c.jsxs(h,{variant:"subtitle2",color:"text.secondary",children:[e.doctor," â€¢ ",e.specialties?.join(", ")," â€¢ ",e.patientVolume," patients/year"]})]}),c.jsx(H,{label:`$${(e.value/1e3).toFixed(0)}K`,color:"success",sx:{fontWeight:"bold"}})]}),c.jsx(R,{severity:"hot"===e.priority?"error":"warning",icon:c.jsx(se,{}),sx:{mb:1},children:e.reason}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsxs(h,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:.5},children:[c.jsx(ie,{fontSize:"small",color:"action"}),e.category]}),c.jsxs(h,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:.5},children:[c.jsx(z,{fontSize:"small",color:"action"}),"Close in ",e.timeToClose," days"]}),c.jsxs(h,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:.5},children:[c.jsx(ne,{fontSize:"small",color:"action"}),"Last: ",e.lastContact]}),e.competitors&&c.jsxs(h,{variant:"body2",sx:{display:"flex",alignItems:"center",gap:.5},children:[c.jsx(ae,{fontSize:"small",color:"action"}),"vs. ",e.competitors.join(", ")]})]})]}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:1},children:[c.jsxs(R,{severity:"info",sx:{py:.5},children:[c.jsx(h,{variant:"subtitle2",children:"Next Action:"}),c.jsx(h,{variant:"body2",children:e.nextAction})]}),c.jsxs(o,{sx:{display:"flex",gap:1},children:[c.jsx(qs,{variant:"contained",size:"small",startIcon:c.jsx(oe,{}),fullWidth:!0,children:"Call Now"}),c.jsx(qs,{variant:"outlined",size:"small",startIcon:c.jsx(le,{}),fullWidth:!0,children:"Email"}),c.jsx(f,{color:"primary",size:"small",children:c.jsx(ce,{})})]})]})})]})})})})},e.id)),c.jsx(A,{item:!0,xs:12,children:c.jsxs(A,{container:!0,spacing:2,children:[c.jsx(A,{item:!0,xs:6,md:3,children:c.jsx(Vs,{trend:"up",children:c.jsxs(v,{children:[c.jsx(h,{variant:"h4",color:"success.main",children:"87%"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Win Rate (30d)"}),c.jsx(H,{label:"+12% vs last month",size:"small",color:"success",sx:{mt:1}})]})})}),c.jsx(A,{item:!0,xs:6,md:3,children:c.jsx(Vs,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"h4",children:"14"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Avg Days to Close"}),c.jsx(H,{label:"3 days faster",size:"small",sx:{mt:1}})]})})}),c.jsx(A,{item:!0,xs:6,md:3,children:c.jsx(Vs,{trend:"up",children:c.jsxs(v,{children:[c.jsx(h,{variant:"h4",color:"primary",children:"$2.4M"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Pipeline Value"}),c.jsx(H,{label:"23 opportunities",size:"small",sx:{mt:1}})]})})}),c.jsx(A,{item:!0,xs:6,md:3,children:c.jsx(Vs,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"h4",children:"#2"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Team Ranking"}),c.jsx(H,{label:"Top 10%",size:"small",color:"success",sx:{mt:1}})]})})})]})})]})}),c.jsxs(de,{ariaLabel:"Quick actions",sx:{position:"fixed",bottom:16,right:16},icon:c.jsx(ge,{}),children:[c.jsx(he,{icon:c.jsx(m,{}),tooltipTitle:"Voice Note",onClick:()=>{}}),c.jsx(he,{icon:c.jsx(ue,{}),tooltipTitle:"Scan Card",onClick:()=>{}}),c.jsx(he,{icon:c.jsx(pe,{}),tooltipTitle:"Quick Note",onClick:()=>{}}),c.jsx(he,{icon:c.jsx(me,{}),tooltipTitle:"Log Activity",onClick:()=>{}})]}),c.jsx(fe,{open:!!r,onClose:()=>s(null),maxWidth:"md",fullWidth:!0,children:r&&c.jsxs(c.Fragment,{children:[c.jsx(xe,{children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx(h,{variant:"h6",children:r.practice}),c.jsx(H,{label:`$${(r.value/1e3).toFixed(0)}K opportunity`,color:"success"})]})}),c.jsx(ye,{children:c.jsxs(K,{children:[c.jsxs(Y,{children:[c.jsx(J,{children:c.jsx(X,{sx:{bgcolor:"error.main"},children:c.jsx(oe,{})})}),c.jsx(Q,{primary:"Call to discuss implant options",secondary:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Mention Zimmer Biomet promotion and Nobel price increase"}),c.jsx(h,{variant:"caption",color:"primary",children:"Today"})]})})]}),c.jsx(N,{}),c.jsxs(Y,{children:[c.jsx(J,{children:c.jsx(X,{sx:{bgcolor:"primary.main"},children:c.jsx(ve,{})})}),c.jsx(Q,{primary:"In-person demo",secondary:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Bring sample kit and iPad for virtual surgery planning"}),c.jsx(h,{variant:"caption",color:"primary",children:"Tomorrow"})]})})]}),c.jsx(N,{}),c.jsxs(Y,{children:[c.jsx(J,{children:c.jsx(X,{sx:{bgcolor:"success.main"},children:c.jsx(me,{})})}),c.jsx(Q,{primary:"Close deal",secondary:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Finance options ready, implementation team on standby"}),c.jsx(h,{variant:"caption",color:"primary",children:"Next Week"})]})})]})]})}),c.jsxs(be,{children:[c.jsx(a,{onClick:()=>s(null),children:"Close"}),c.jsx(a,{variant:"contained",startIcon:c.jsx(je,{}),children:"Start Call Script"})]})]})})]})};Ks.displayName="ActionableSalesDashboard";var Ys={},Js={};const Xs=Ss(Se);var Qs;function Zs(){return Qs||(Qs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),Object.defineProperty(e,"default",{enumerable:!0,get:function(){return t.createSvgIcon}});var t=Xs}(Js)),Js}var ei=Te;Object.defineProperty(Ys,"__esModule",{value:!0});var ti=Ys.default=void 0,ri=ei(Zs()),si=c;ti=Ys.default=(0,ri.default)((0,si.jsx)("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp");var ii={},ni=Te;Object.defineProperty(ii,"__esModule",{value:!0});var ai=ii.default=void 0,oi=ni(Zs()),li=c;ai=ii.default=(0,oi.default)((0,li.jsx)("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney");var ci={},di=Te;Object.defineProperty(ci,"__esModule",{value:!0});var hi=ci.default=void 0,ui=di(Zs()),pi=c;hi=ci.default=(0,ui.default)((0,pi.jsx)("path",{d:"M11 7h2v2h-2zm0 4h2v6h-2zm1-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8"}),"InfoOutlined");var mi={},gi=Te;Object.defineProperty(mi,"__esModule",{value:!0});var fi=mi.default=void 0,xi=gi(Zs()),yi=c;fi=mi.default=(0,xi.default)((0,yi.jsx)("path",{d:"M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10m2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99m0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99z"}),"PieChart");const vi=e=>null==e?"N/A":e>=1e3?`$${(e/1e3).toFixed(1)}B`:`$${e.toFixed(1)}M`,bi=e=>null==e?"N/A":e>=1e3?`$${(e/1e3).toFixed(1)} billion`:`$${e.toFixed(1)} million`,ji=r`
  0% { opacity: 1; }
  50% { opacity: 0.7; }
  100% { opacity: 1; }
`,wi=({dentalProcedures:e,aestheticProcedures:t,selectedIndustry:r})=>{const s=ks.useMemo(()=>"dental"===r?e:t,[r,e,t]),n=ks.useMemo(()=>s.reduce((e,t)=>e+(Number(t.market_size_usd_millions)||0),0),[s]),[a,l]=ks.useState(n);ks.useEffect(()=>{l(n);const e=setInterval(()=>{l(n+.1*(Math.random()-.5))},2e3);return()=>clearInterval(e)},[n]);const d=ks.useMemo(()=>{const e=s.filter(e=>null!=e.yearly_growth_percentage);return 0===e.length?null:e.reduce((e,t)=>e+(Number(t.yearly_growth_percentage)||0),0)/e.length},[s]),u=ks.useMemo(()=>{const e=new Map;return s.forEach(t=>{const r=t.category||t.clinical_category||"Unknown",s=Number(t.market_size_usd_millions)||0;e.set(r,(e.get(r)||0)+s)}),Array.from(e.entries()).sort((e,t)=>t[1]-e[1]).slice(0,5)},[s]),p=u.length>0?u[0][1]:0;return c.jsx(i,{elevation:3,children:c.jsxs(v,{children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[c.jsxs(h,{variant:"h6",gutterBottom:!0,children:["Market Size Overview - ",r.charAt(0).toUpperCase()+r.slice(1)," Industry"]}),c.jsx(Pe,{title:"Market sizes are shown in millions/billions of US dollars. Data is based on latest industry research.",children:c.jsx(hi,{color:"action",fontSize:"small"})})]}),c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(j,{elevation:0,sx:{p:2,bgcolor:"background.default",height:"100%",borderRadius:2},children:[c.jsxs(o,{display:"flex",alignItems:"center",mb:1,children:[c.jsx(ai,{color:"primary",sx:{mr:1}}),c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Market Size"})]}),c.jsxs(o,{display:"flex",alignItems:"baseline",children:[c.jsx(h,{variant:"h4",sx:{mt:1,mb:1},children:vi(a)}),c.jsx(Pe,{title:bi(a),children:c.jsx(hi,{sx:{ml:1,fontSize:"0.9rem",color:"text.secondary",cursor:"help"}})})]}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["Across ",s.length," procedures"]})]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(j,{elevation:0,sx:{p:2,bgcolor:"background.default",height:"100%",borderRadius:2},children:[c.jsxs(o,{display:"flex",alignItems:"center",mb:1,children:[c.jsx(ti,{color:"primary",sx:{mr:1}}),c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Average Annual Growth"})]}),c.jsx(h,{variant:"h4",sx:{mt:1,mb:1},children:(m=d,null==m?"N/A":`${m>0?"+":""}${m.toFixed(1)}%`)}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Year-over-year market expansion"})]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(j,{elevation:0,sx:{p:2,bgcolor:"background.default",height:"100%",borderRadius:2},children:[c.jsxs(o,{display:"flex",alignItems:"center",mb:1,children:[c.jsx(fi,{color:"primary",sx:{mr:1}}),c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Market Composition"})]}),c.jsxs(h,{variant:"h4",sx:{mt:1,mb:1},children:[u.length," Categories"]}),c.jsx(h,{variant:"body2",color:"text.secondary",children:u.length>0?`Largest: ${u[0][0]}`:"No categories found"})]})})]}),c.jsx(N,{sx:{my:3}}),c.jsx(h,{variant:"subtitle1",gutterBottom:!0,sx:{mt:2},children:"Top Categories by Market Size"}),c.jsx(o,{sx:{mt:2},children:u.map(([e,t],r)=>c.jsxs(o,{sx:{mb:2},children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:.5,children:[c.jsx(h,{variant:"body2",children:e}),c.jsxs(o,{display:"flex",alignItems:"center",children:[c.jsx(h,{variant:"body2",fontWeight:"medium",children:vi(t)}),c.jsx(Pe,{title:bi(t),children:c.jsx(hi,{sx:{ml:1,fontSize:"0.9rem",color:"text.secondary",cursor:"help"}})})]})]}),c.jsx(Ae,{variant:"determinate",value:t/p*100,sx:{height:8,borderRadius:2,bgcolor:"background.paper","& .MuiLinearProgress-bar":{bgcolor:0===r?"primary.main":1===r?"info.main":2===r?"success.main":3===r?"warning.main":"secondary.main",animation:`${ji} 2s infinite`,"@media (prefers-reduced-motion: reduce)":{animation:"none"}}}})]},e))}),c.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:2,display:"block"},children:"Note: Market sizes are in US dollars. Source: Latest industry research data, 2025."})]})});var m};wi.displayName="MarketSizeOverview";let _i=class extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}},ki=class extends _i{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}},Ci=class extends _i{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}},Si=class extends _i{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}};var Ti,Pi;(Pi=Ti||(Ti={})).Any="any",Pi.ApNortheast1="ap-northeast-1",Pi.ApNortheast2="ap-northeast-2",Pi.ApSouth1="ap-south-1",Pi.ApSoutheast1="ap-southeast-1",Pi.ApSoutheast2="ap-southeast-2",Pi.CaCentral1="ca-central-1",Pi.EuCentral1="eu-central-1",Pi.EuWest1="eu-west-1",Pi.EuWest2="eu-west-2",Pi.EuWest3="eu-west-3",Pi.SaEast1="sa-east-1",Pi.UsEast1="us-east-1",Pi.UsWest1="us-west-1",Pi.UsWest2="us-west-2";var Ai=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};let Ei=class{constructor(e,{headers:t={},customFetch:r,region:s=Ti.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zs(async()=>{const{default:e}=await Promise.resolve().then(()=>Ui);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return Ai(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:n}=t;let a,o={},{region:l}=t;l||(l=this.region),l&&"any"!==l&&(o["x-region"]=l),n&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(o["Content-Type"]="application/octet-stream",a=n):"string"==typeof n?(o["Content-Type"]="text/plain",a=n):"undefined"!=typeof FormData&&n instanceof FormData?a=n:(o["Content-Type"]="application/json",a=JSON.stringify(n)));const c=yield this.fetch(`${this.url}/${e}`,{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},o),this.headers),s),body:a}).catch(e=>{throw new ki(e)}),d=c.headers.get("x-relay-error");if(d&&"true"===d)throw new Ci(c);if(!c.ok)throw new Si(c);let h,u=(null!==(r=c.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return h="application/json"===u?yield c.json():"application/octet-stream"===u?yield c.blob():"text/event-stream"===u?c:"multipart/form-data"===u?yield c.formData():yield c.text(),{data:h,error:null}}catch(s){return{data:null,error:s}}})}};var Ii={},$i={},Mi={},Ri={},Oi={},Di={},zi=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const Li=zi.fetch,Fi=zi.fetch.bind(zi),Bi=zi.Headers,Ni=zi.Request,Wi=zi.Response,Ui=Object.freeze(Object.defineProperty({__proto__:null,Headers:Bi,Request:Ni,Response:Wi,default:Fi,fetch:Li},Symbol.toStringTag,{value:"Module"})),Vi=Ss(Ui);var qi={};Object.defineProperty(qi,"__esModule",{value:!0});let Gi=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};qi.default=Gi;var Hi=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Di,"__esModule",{value:!0});const Ki=Hi(Vi),Yi=Hi(qi);Di.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=Ki.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s;let i=null,n=null,a=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(n="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");s&&c&&c.length>1&&(a=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(n)&&(n.length>1?(i={code:"PGRST116",details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,a=null,o=406,l="Not Acceptable"):n=1===n.length?n[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(n=[],i=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(s=null==i?void 0:i.details)||void 0===s?void 0:s.includes("0 rows"))&&(i=null,o=200,l="OK"),i&&this.shouldThrowOnError)throw new Yi.default(i)}return{error:i,data:n,count:a,status:o,statusText:l}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};var Ji=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Oi,"__esModule",{value:!0});const Xi=Ji(Di);let Qi=class extends Xi.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const n=i?`${i}.order`:"order",a=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=void 0===s?"offset":`${s}.offset`,n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:n="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Oi.default=Qi;var Zi=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ri,"__esModule",{value:!0});const en=Zi(Oi);let tn=class extends en.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";"plain"===s?i="pl":"phrase"===s?i="ph":"websearch"===s&&(i="w");const n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};Ri.default=tn;var rn=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mi,"__esModule",{value:!0});const sn=rn(Ri);Mi.default=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",n),r&&(this.headers.Prefer=`count=${r}`),new sn.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new sn.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const n=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),i||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new sn.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new sn.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new sn.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var nn={},an={};Object.defineProperty(an,"__esModule",{value:!0}),an.version=void 0,an.version="0.0.0-automated",Object.defineProperty(nn,"__esModule",{value:!0}),nn.DEFAULT_HEADERS=void 0;const on=an;nn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${on.version}`};var ln=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty($i,"__esModule",{value:!0});const cn=ln(Mi),dn=ln(Ri),hn=nn;$i.default=class e{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},hn.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new cn.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){let n;const a=new URL(`${this.url}/rpc/${e}`);let o;r||s?(n=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{a.searchParams.append(e,t)})):(n="POST",o=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new dn.default({method:n,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var un=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.PostgrestError=Ii.PostgrestBuilder=Ii.PostgrestTransformBuilder=Ii.PostgrestFilterBuilder=Ii.PostgrestQueryBuilder=Ii.PostgrestClient=void 0;const pn=un($i);Ii.PostgrestClient=pn.default;const mn=un(Mi);Ii.PostgrestQueryBuilder=mn.default;const gn=un(Ri);Ii.PostgrestFilterBuilder=gn.default;const fn=un(Oi);Ii.PostgrestTransformBuilder=fn.default;const xn=un(Di);Ii.PostgrestBuilder=xn.default;const yn=un(qi);Ii.PostgrestError=yn.default;var vn=Ii.default={PostgrestClient:pn.default,PostgrestQueryBuilder:mn.default,PostgrestFilterBuilder:gn.default,PostgrestTransformBuilder:fn.default,PostgrestBuilder:xn.default,PostgrestError:yn.default};const{PostgrestClient:bn,PostgrestQueryBuilder:jn,PostgrestFilterBuilder:wn,PostgrestTransformBuilder:_n,PostgrestBuilder:kn,PostgrestError:Cn}=vn;let Sn;Sn="undefined"==typeof window?require("ws"):window.WebSocket;const Tn={"X-Client-Info":"realtime-js/2.11.10"};var Pn,An,En,In,$n,Mn,Rn,On,Dn;(An=Pn||(Pn={}))[An.connecting=0]="connecting",An[An.open=1]="open",An[An.closing=2]="closing",An[An.closed=3]="closed",(In=En||(En={})).closed="closed",In.errored="errored",In.joined="joined",In.joining="joining",In.leaving="leaving",(Mn=$n||($n={})).close="phx_close",Mn.error="phx_error",Mn.join="phx_join",Mn.reply="phx_reply",Mn.leave="phx_leave",Mn.access_token="access_token",(Rn||(Rn={})).websocket="websocket",(Dn=On||(On={})).Connecting="connecting",Dn.Open="open",Dn.Closing="closing",Dn.Closed="closed";let zn=class{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let n=this.HEADER_LENGTH+2;const a=r.decode(e.slice(n,n+s));n+=s;const o=r.decode(e.slice(n,n+i));n+=i;return{ref:null,topic:a,event:o,payload:JSON.parse(r.decode(e.slice(n,e.byteLength)))}}},Ln=class{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var Fn,Bn;(Bn=Fn||(Fn={})).abstime="abstime",Bn.bool="bool",Bn.date="date",Bn.daterange="daterange",Bn.float4="float4",Bn.float8="float8",Bn.int2="int2",Bn.int4="int4",Bn.int4range="int4range",Bn.int8="int8",Bn.int8range="int8range",Bn.json="json",Bn.jsonb="jsonb",Bn.money="money",Bn.numeric="numeric",Bn.oid="oid",Bn.reltime="reltime",Bn.text="text",Bn.time="time",Bn.timestamp="timestamp",Bn.timestamptz="timestamptz",Bn.timetz="timetz",Bn.tsrange="tsrange",Bn.tstzrange="tstzrange";const Nn=(e,t,r={})=>{var s;const i=null!==(s=r.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce((r,s)=>(r[s]=Wn(s,e,t,i),r),{})},Wn=(e,t,r,s)=>{const i=t.find(t=>t.name===e),n=null==i?void 0:i.type,a=r[e];return n&&!s.includes(n)?Un(n,a):Vn(a)},Un=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return Kn(t,r)}switch(e){case Fn.bool:return qn(t);case Fn.float4:case Fn.float8:case Fn.int2:case Fn.int4:case Fn.int8:case Fn.numeric:case Fn.oid:return Gn(t);case Fn.json:case Fn.jsonb:return Hn(t);case Fn.timestamp:return Yn(t);case Fn.abstime:case Fn.date:case Fn.daterange:case Fn.int4range:case Fn.int8range:case Fn.money:case Fn.reltime:case Fn.text:case Fn.time:case Fn.timestamptz:case Fn.timetz:case Fn.tsrange:case Fn.tstzrange:default:return Vn(t)}},Vn=e=>e,qn=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Gn=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Hn=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Kn=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s;const n=e.slice(1,r);try{s=JSON.parse("["+n+"]")}catch(i){s=n?n.split(","):[]}return s.map(e=>Un(t,e))}return e},Yn=e=>"string"==typeof e?e.replace(" ","T"):e,Jn=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};let Xn=class{constructor(e,t,r={},s=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}};var Qn,Zn;(Zn=Qn||(Qn={})).SYNC="sync",Zn.JOIN="join",Zn.LEAVE="leave";let ea=class e{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const s=(null==r?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(s.state,{},t=>{const{onJoin:r,onLeave:s,onSync:i}=this.caller;this.joinRef=this.channel._joinRef(),this.state=e.syncState(this.state,t,r,s),this.pendingDiffs.forEach(t=>{this.state=e.syncDiff(this.state,t,r,s)}),this.pendingDiffs=[],i()}),this.channel._on(s.diff,{},t=>{const{onJoin:r,onLeave:s,onSync:i}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(t):(this.state=e.syncDiff(this.state,t,r,s),i())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),n=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{const r=i[e];if(r){const s=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),n=t.filter(e=>i.indexOf(e.presence_ref)<0),l=r.filter(e=>s.indexOf(e.presence_ref)<0);n.length>0&&(a[e]=n),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(t,s)=>{var i;const n=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(s),n.length>0){const r=e[t].map(e=>e.presence_ref),s=n.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...s)}r(t,n,s)}),this.map(n,(t,r)=>{let i=e[t];if(!i)return;const n=r.map(e=>e.presence_ref);i=i.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=i,s(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return t[r]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var ta,ra,sa,ia,na,aa;(ra=ta||(ta={})).ALL="*",ra.INSERT="INSERT",ra.UPDATE="UPDATE",ra.DELETE="DELETE",(ia=sa||(sa={})).BROADCAST="broadcast",ia.PRESENCE="presence",ia.POSTGRES_CHANGES="postgres_changes",ia.SYSTEM="system",(aa=na||(na={})).SUBSCRIBED="SUBSCRIBED",aa.TIMED_OUT="TIMED_OUT",aa.CLOSED="CLOSED",aa.CHANNEL_ERROR="CHANNEL_ERROR";let oa=class e{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=En.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Xn(this,$n.join,this.params,this.timeout),this.rejoinTimer=new Ln(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=En.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=En.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=En.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=En.errored,this.rejoinTimer.scheduleTimeout())}),this._on($n.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new ea(this),this.broadcastEndpointURL=Jn(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{const{config:{broadcast:i,presence:n,private:a}}=this.params;this._onError(t=>null==e?void 0:e(na.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(na.CLOSED));const o={},l={broadcast:i,presence:n,postgres_changes:null!==(s=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==s?s:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const s=this.bindings.postgres_changes,i=null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0,n=[];for(let r=0;r<i;r++){const i=s[r],{filter:{event:a,schema:o,table:l,filter:c}}=i,d=t&&t[r];if(!d||d.event!==a||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=En.errored,void(null==e||e(na.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},i),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(na.SUBSCRIBED))}null==e||e(na.SUBSCRIBED)}).receive("error",t=>{this.state=En.errored,null==e||e(na.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(na.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,i,n;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(i=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===i?void 0:i.broadcast)||void 0===n?void 0:n.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{const{event:n,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=En.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger($n.close,"leave",this._joinRef())};return this.joinPush.destroy(),new Promise(r=>{const s=new Xn(this,$n.leave,{},e);s.receive("ok",()=>{t(),r("ok")}).receive("timeout",()=>{t(),r("timed out")}).receive("error",()=>{r("error")}),s.send(),this._canPush()||s.trigger("ok",{})})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),n}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Xn(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const n=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=$n;if(r&&[a,o,l,c].indexOf(n)>=0&&r!==this._joinRef())return;let d=this._onMessage(n,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,r,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===s?void 0:s.toLocaleLowerCase())===n}).map(e=>e.callback(d,r)):null===(i=this.bindings[n])||void 0===i||i.filter(e=>{var r,s,i,a,o,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,a=null===(r=e.filter)||void 0===r?void 0:r.event;return n&&(null===(s=t.ids)||void 0===s?void 0:s.includes(n))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const r=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:s,type:i,errors:n}=e,a={schema:t,table:r,commit_timestamp:s,eventType:i,new:{},old:{},errors:n};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===En.closed}_isJoined(){return this.state===En.joined}_isJoining(){return this.state===En.joining}_isLeaving(){return this.state===En.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(t,r){const s=t.toLocaleLowerCase();return this.bindings[s]=this.bindings[s].filter(t=>{var i;return!((null===(i=t.type)||void 0===i?void 0:i.toLocaleLowerCase())===s&&e.isEqual(t.filter,r))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on($n.close,{},e)}_onError(e){this._on($n.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=En.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Nn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Nn(e.columns,e.old_record)),t}};const la=()=>{};let ca=class{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers=Tn,this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=la,this.ref=0,this.logger=la,this.conn=null,this.sendBuffer=[],this.serializer=new zn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zs(async()=>{const{default:e}=await Promise.resolve().then(()=>Ui);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${Rn.websocket}`,this.httpEndpoint=Jn(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),t.headers)),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),((null==t?void 0:t.logLevel)||(null==t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Ln(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=Sn),this.transport){const e="undefined"!=typeof window&&this.transport===window.WebSocket;return this.conn=e?new this.transport(this.endpointURL()):new this.transport(this.endpointURL(),void 0,{headers:this.headers}),void this.setupConnection()}this.conn=new da(this.endpointURL(),void 0,{close:()=>{this.conn=null}})}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels=this.channels.filter(t=>t._joinRef!==e._joinRef),0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Pn.connecting:return On.Connecting;case Pn.open:return On.Open;case Pn.closing:return On.Closing;default:return On.Closed}}isConnected(){return this.connectionState()===On.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{const r=new oa(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t,version:this.headers&&this.headers["X-Client-Info"]}),e.joinedOnce&&e._isJoined()&&e._push($n.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:r,payload:s,ref:i}=e;"phoenix"===t&&"phx_reply"===r&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${r} ${i&&"("+i+")"||""}`,s),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){if(this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}else this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs);this.stateChangeCallbacks.open.forEach(e=>e())}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger($n.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}};class da{constructor(e,t,r){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=Pn.connecting,this.send=()=>{},this.url=null,this.url=e,this.close=r.close}}let ha=class extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}};function ua(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}let pa=class extends ha{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}},ma=class extends ha{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}};var ga=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const fa=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zs(async()=>{const{default:e}=await Promise.resolve().then(()=>Ui);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},xa=e=>{if(Array.isArray(e))return e.map(e=>xa(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const s=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=xa(r)}),t};var ya=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const va=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ba=(e,t,r)=>ya(void 0,void 0,void 0,function*(){const s=yield ga(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield zs(()=>Promise.resolve().then(()=>Ui),void 0)).Response:Response});e instanceof s&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{t(new pa(va(r),e.status||500))}).catch(e=>{t(new ma(va(e),e))}):t(new ma(va(e),e))});function ja(e,t,r,s,i,n){return ya(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(r,((e,t,r,s)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s&&(i.body=JSON.stringify(s)),Object.assign(Object.assign({},i),r))})(t,s,i,n)).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>ba(e,o,s))})})}function wa(e,t,r,s){return ya(this,void 0,void 0,function*(){return ja(e,"GET",t,r,s)})}function _a(e,t,r,s,i){return ya(this,void 0,void 0,function*(){return ja(e,"POST",t,s,i,r)})}function ka(e,t,r,s,i){return ya(this,void 0,void 0,function*(){return ja(e,"DELETE",t,s,i,r)})}var Ca=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const Sa={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ta={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};let Pa=class{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=fa(s)}uploadOrUpdate(e,t,r,s){return Ca(this,void 0,void 0,function*(){try{let i;const n=Object.assign(Object.assign({},Ta),s);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const o=n.metadata;"undefined"!=typeof Blob&&r instanceof Blob?(i=new FormData,i.append("cacheControl",n.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(i=r,i.append("cacheControl",n.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=r,a["cache-control"]=`max-age=${n.cacheControl}`,a["content-type"]=n.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==s?void 0:s.headers)&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield this.fetch(`${this.url}/object/${c}`,Object.assign({method:e,body:i,headers:a},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{})),h=yield d.json();if(d.ok)return{data:{path:l,id:h.Id,fullPath:h.Key},error:null};return{data:null,error:h}}catch(i){if(ua(i))return{data:null,error:i};throw i}})}upload(e,t,r){return Ca(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return Ca(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),n=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${n}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:Ta.upsert},s),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);const o=yield this.fetch(a.toString(),{method:"PUT",body:e,headers:n}),l=yield o.json();if(o.ok)return{data:{path:i,fullPath:l.Key},error:null};return{data:null,error:l}}catch(o){if(ua(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return Ca(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");const i=yield _a(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),n=new URL(this.url+i.url),a=n.searchParams.get("token");if(!a)throw new ha("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:a},error:null}}catch(r){if(ua(r))return{data:null,error:r};throw r}})}update(e,t,r){return Ca(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return Ca(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ua(s))return{data:null,error:s};throw s}})}copy(e,t,r){return Ca(this,void 0,void 0,function*(){try{return{data:{path:(yield _a(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ua(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return Ca(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield _a(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${n}`)},{data:i,error:null}}catch(s){if(ua(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return Ca(this,void 0,void 0,function*(){try{const s=yield _a(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(s){if(ua(s))return{data:null,error:s};throw s}})}download(e,t){return Ca(this,void 0,void 0,function*(){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield wa(this.fetch,`${this.url}/${r}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(n){if(ua(n))return{data:null,error:n};throw n}})}info(e){return Ca(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield wa(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:xa(e),error:null}}catch(r){if(ua(r))return{data:null,error:r};throw r}})}exists(e){return Ca(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,s){return ya(this,void 0,void 0,function*(){return ja(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(ua(r)&&r instanceof ma){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&s.push(i);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${r}${o}`)}}}remove(e){return Ca(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ua(t))return{data:null,error:t};throw t}})}list(e,t,r){return Ca(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Sa),t),{prefix:e||""});return{data:yield _a(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(ua(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}};const Aa={"X-Client-Info":"storage-js/2.7.1"};var Ea=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};let Ia=class{constructor(e,t={},r){this.url=e,this.headers=Object.assign(Object.assign({},Aa),t),this.fetch=fa(r)}listBuckets(){return Ea(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ua(e))return{data:null,error:e};throw e}})}getBucket(e){return Ea(this,void 0,void 0,function*(){try{return{data:yield wa(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ua(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return Ea(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(ua(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return Ea(this,void 0,void 0,function*(){try{const r=yield function(e,t,r,s,i){return ya(this,void 0,void 0,function*(){return ja(e,"PUT",t,s,i,r)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:r,error:null}}catch(r){if(ua(r))return{data:null,error:r};throw r}})}emptyBucket(e){return Ea(this,void 0,void 0,function*(){try{return{data:yield _a(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ua(t))return{data:null,error:t};throw t}})}deleteBucket(e){return Ea(this,void 0,void 0,function*(){try{return{data:yield ka(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ua(t))return{data:null,error:t};throw t}})}},$a=class extends Ia{constructor(e,t={},r){super(e,t,r)}from(e){return new Pa(this.url,this.headers,e,this.fetch)}};let Ma="";Ma="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const Ra={headers:{"X-Client-Info":`supabase-js-${Ma}/2.50.0`}},Oa={schema:"public"},Da={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},za={};var La=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const Fa=(e,t,r)=>{const s=(e=>{let t;return t=e||("undefined"==typeof fetch?Fi:fetch),(...e)=>t(...e)})(r),i="undefined"==typeof Headers?Bi:Headers;return(r,n)=>La(void 0,void 0,void 0,function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new i(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,Object.assign(Object.assign({},n),{headers:l}))})};var Ba=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const Na="2.70.0",Wa=3e4,Ua=9e4,Va={"X-Client-Info":`gotrue-js/${Na}`},qa="X-Supabase-Api-Version",Ga={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},Ha=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;let Ka=class extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}};function Ya(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}let Ja=class extends Ka{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}};let Xa=class extends Ka{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}},Qa=class extends Ka{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}},Za=class extends Qa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};let eo=class extends Qa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},to=class extends Qa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}},ro=class extends Qa{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}};let so=class extends Qa{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},io=class extends Qa{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}};function no(e){return Ya(e)&&"AuthRetryableFetchError"===e.name}let ao=class extends Qa{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}},oo=class extends Qa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}};const lo="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),co=" \t\n\r=".split(""),ho=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<co.length;t+=1)e[co[t].charCodeAt(0)]=-2;for(let t=0;t<lo.length;t+=1)e[lo[t].charCodeAt(0)]=t;return e})();function uo(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(lo[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(lo[e]),t.queuedBits-=6}}function po(e,t,r){const s=ho[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function mo(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let a=0;a<e.length;a+=1)po(e.charCodeAt(a),i,n);return t.join("")}function go(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function fo(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)po(e.charCodeAt(i),r,s);return new Uint8Array(t)}function xo(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}go(s,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function yo(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>uo(e,r,s)),uo(null,r,s),t.join("")}const vo=()=>"undefined"!=typeof window&&"undefined"!=typeof document,bo={tested:!1,writable:!1},jo=()=>{if(!vo())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(bo.tested)return bo.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),bo.tested=!0,bo.writable=!0}catch(t){bo.tested=!0,bo.writable=!1}return bo.writable};const wo=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zs(async()=>{const{default:e}=await Promise.resolve().then(()=>Ui);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},_o=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},ko=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(s){return r}},Co=async(e,t)=>{await e.removeItem(t)};let So=class e{constructor(){this.promise=new e.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}};function To(e){const t=e.split(".");if(3!==t.length)throw new oo("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!Ha.test(t[r]))throw new oo("JWT not in base64url format");return{header:JSON.parse(mo(t[0])),payload:JSON.parse(mo(t[1])),signature:fo(t[2]),raw:{header:t[0],payload:t[1]}}}function Po(e){return("0"+e.toString(16)).substr(-2)}async function Ao(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Eo(e,t,r=!1){const s=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,Po).join("")}();let i=s;r&&(i+="/PASSWORD_RECOVERY"),await _o(e,`${t}-code-verifier`,i);const n=await Ao(s);return[n,s===n?"plain":"s256"]}So.promiseConstructor=Promise;const Io=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const $o=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Mo(e){if(!$o.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}const Ro=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Oo=[502,503,504];async function Do(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new io(Ro(e),0);if(Oo.includes(e.status))throw new io(Ro(e),e.status);let s,i;try{s=await e.json()}catch(a){throw new Xa(Ro(a),a)}const n=function(e){const t=e.headers.get(qa);if(!t)return null;if(!t.match(Io))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}(e);if(n&&n.getTime()>=Ga.timestamp&&"object"==typeof s&&s&&"string"==typeof s.code?i=s.code:"object"==typeof s&&s&&"string"==typeof s.error_code&&(i=s.error_code),i){if("weak_password"===i)throw new ao(Ro(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new Za}else if("object"==typeof s&&s&&"object"==typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new ao(Ro(s),e.status,s.weak_password.reasons);throw new Ja(Ro(s),e.status||500,i)}async function zo(e,t,r,s){var i;const n=Object.assign({},null==s?void 0:s.headers);n[qa]||(n[qa]=Ga.name),(null==s?void 0:s.jwt)&&(n.Authorization=`Bearer ${s.jwt}`);const a=null!==(i=null==s?void 0:s.query)&&void 0!==i?i:{};(null==s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,r,s,i,n){const a=((e,t,r,s)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),r))})(t,s,i,n);let o;try{o=await e(r,Object.assign({},a))}catch(l){throw new io(Ro(l),0)}o.ok||await Do(o);if(null==s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(l){await Do(l)}}(e,t,r+o,{headers:n,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function Lo(e){var t;let r=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function Fo(e){const t=Lo(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function Bo(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function No(e){return{data:e,error:null}}function Wo(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n}=e,a=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]])}return r}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n},user:Object.assign({},a)},error:null}}function Uo(e){return e}const Vo=["global","local","others"];let qo=class{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=wo(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Vo[0]){if(Vo.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Vo.join(", ")}`);try{return await zo(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(Ya(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await zo(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:Bo})}catch(r){if(Ya(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]])}return r}(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null==r?void 0:r.newEmail,delete s.newEmail),await zo(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:Wo,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(Ya(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await zo(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:Bo})}catch(t){if(Ya(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,n,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await zo(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==i?i:""},xform:Uo});if(c.error)throw c.error;const d=await c.json(),h=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,u=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return u.length>0&&(u.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(Ya(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Mo(e);try{return await zo(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:Bo})}catch(t){if(Ya(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){Mo(e);try{return await zo(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:Bo})}catch(r){if(Ya(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){Mo(e);try{return await zo(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:Bo})}catch(r){if(Ya(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){Mo(e.userId);try{const{data:t,error:r}=await zo(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(Ya(t))return{data:null,error:t};throw t}}async _deleteFactor(e){Mo(e.userId),Mo(e.id);try{return{data:await zo(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(Ya(t))return{data:null,error:t};throw t}}};const Go={getItem:e=>jo()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{jo()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{jo()&&globalThis.localStorage.removeItem(e)}};function Ho(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const Ko=!!(globalThis&&jo()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));let Yo=class extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}},Jo=class extends Yo{};async function Xo(e,t,r){const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw new Jo(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(Ko)try{await globalThis.navigator.locks.query()}catch(i){}return await r()}try{return await r()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Qo={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Va,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Zo(e,t,r){return await r()}let el=class e{constructor(t){var r,s;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=e.nextInstanceID,e.nextInstanceID+=1,this.instanceID>0&&vo();const i=Object.assign(Object.assign({},Qo),t);if(this.logDebugMessages=!!i.debug,"function"==typeof i.debug&&(this.logger=i.debug),this.persistSession=i.persistSession,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.admin=new qo({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=wo(i.fetch),this.lock=i.lock||Zo,this.detectSessionInUrl=i.detectSessionInUrl,this.flowType=i.flowType,this.hasCustomAuthorizationHeader=i.hasCustomAuthorizationHeader,i.lock?this.lock=i.lock:vo()&&(null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===r?void 0:r.locks)?this.lock=Xo:this.lock=Zo,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?i.storage?this.storage=i.storage:jo()?this.storage=Go:(this.memoryStorage={},this.storage=Ho(this.memoryStorage)):(this.memoryStorage={},this.storage=Ho(this.memoryStorage)),vo()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(n){}null===(s=this.broadcastChannel)||void 0===s||s.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Na}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(s){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),vo()&&this.detectSessionInUrl&&"none"!==r){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return Ya(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:n,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",a),await this._saveSession(n),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return Ya(t)?{error:t}:{error:new Xa("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await zo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:Lo}),{data:n,error:a}=i;if(a||!n)return{data:{user:null,session:null},error:a};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(Ya(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:r,password:s,options:n}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await Eo(this.storage,this.storageKey)),i=await zo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:r,password:s,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:o},xform:Lo})}else{if(!("phone"in e))throw new to("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:a}=e;i=await zo(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(r=null==a?void 0:a.data)&&void 0!==r?r:{},channel:null!==(s=null==a?void 0:a.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:Lo})}}const{data:n,error:a}=i;if(a||!n)return{data:{user:null,session:null},error:a};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(Ya(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:s,options:i}=e;t=await zo(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Fo})}else{if(!("phone"in e))throw new to("You must provide either an email or phone number and a password");{const{phone:r,password:s,options:i}=e;t=await zo(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:Fo})}}const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s}):{data:{user:null,session:null},error:new eo}}catch(t){if(Ya(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,i,n,a,o,l,c,d,h,u;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:h,wallet:u,statement:g,options:f}=e;let x;if(vo())if("object"==typeof u)x=u;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof u||!(null==f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=u}const y=new URL(null!==(t=null==f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==f?void 0:f.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${y.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(s=null===(r=null==f?void 0:f.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(i=null==f?void 0:f.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(n=null==f?void 0:f.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(a=null==f?void 0:f.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(o=null==f?void 0:f.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(l=null==f?void 0:f.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:r}=await zo(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:yo(m)},(null===(h=e.options)||void 0===h?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:Lo});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new eo}}catch(g){if(Ya(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await ko(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await zo(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Lo});if(await Co(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new eo}}catch(i){if(Ya(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:n}=e,a=await zo(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:Lo}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new eo}}catch(t){if(Ya(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,n;try{if("email"in e){const{email:s,options:i}=e;let n=null,a=null;"pkce"===this.flowType&&([n,a]=await Eo(this.storage,this.storageKey));const{error:o}=await zo(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(r=null==i?void 0:i.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:n,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:a,error:o}=await zo(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==r?void 0:r.data)&&void 0!==s?s:{},create_user:null===(i=null==r?void 0:r.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(n=null==r?void 0:r.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new to("You must provide either an email or phone number.")}catch(a){if(Ya(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:n,error:a}=await zo(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Lo});if(a)throw a;if(!n)throw new Error("An error occurred on token verification.");const o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(Ya(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,n=null;return"pkce"===this.flowType&&([i,n]=await Eo(this.storage,this.storageKey)),await zo(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:n}),headers:this.headers,xform:No})}catch(i){if(Ya(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Za;const{error:s}=await zo(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Ya(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:n}=await zo(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:r,type:s,options:i}=e,{data:n,error:a}=await zo(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a}}throw new to("You must provide either an email or phone number and a type")}catch(t){if(Ya(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await ko(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<Ua;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,s)=>(t||"user"!==r||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,s))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await zo(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:Bo}):await this._useSession(async e=>{var t,r,s;const{data:i,error:n}=e;if(n)throw n;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await zo(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0,xform:Bo}):{data:{user:null},error:new Za}})}catch(t){if(Ya(t))return function(e){return Ya(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Co(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Za;const n=s.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await Eo(this.storage,this.storageKey));const{data:l,error:c}=await zo(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:n.access_token,xform:Bo});if(c)throw c;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(r){if(Ya(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Za;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:n}=To(e.access_token);if(n.exp&&(r=n.exp,s=r<=t),s){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:s,error:n}=await this._getUser(e.access_token);if(n)throw n;i={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(Ya(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:i}=t;if(i)throw i;e=null!==(r=s.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new Za;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(Ya(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!vo())throw new ro("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ro(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new so("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new ro("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new so("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:n,expires_in:a,expires_at:o,token_type:l}=e;if(!(i&&a&&n&&l))throw new ro("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let h=c+d;o&&(h=parseInt(o));const{data:u,error:p}=await this._getUser(i);if(p)throw p;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:n,token_type:l,user:u.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(Ya(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await ko(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const n=null===(r=s.session)||void 0===r?void 0:r.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return Ya(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Co(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:s},error:i}=t;if(i)throw i;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(i){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;"pkce"===this.flowType&&([r,s]=await Eo(this.storage,this.storageKey,!0));try{return await zo(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(Ya(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(Ya(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async t=>{var r,s,i,n,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await zo(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==a?a:void 0})});if(s)throw s;return vo()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(r){if(Ya(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:n}=t;if(n)throw n;return await zo(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0})})}catch(t){if(Ya(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await zo(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Lo})),s=(e,t)=>{const r=200*Math.pow(2,e);return t&&no(t)&&Date.now()+r-i<Wa},new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{const t=await r(n);if(!s(n,null,t))return void e(t)}catch(i){if(!s(n,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),Ya(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var r,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),vo()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const r=await ko(this.storage,this.storageKey);if(this._debug(t,"session from storage",r),!this._isValidSession(r))return this._debug(t,"session is not valid"),void(null!==r&&await this._removeSession());const s=1e3*(null!==(e=r.expires_at)&&void 0!==e?e:1/0)-Date.now()<Ua;if(this._debug(t,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&r.refresh_token){const{error:e}=await this._callRefreshToken(r.refresh_token);e&&(no(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",r)}catch(r){return void this._debug(t,"error",r)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Za;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new So;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new Za;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(i){if(this._debug(s,"error",i),Ya(i)){const e={session:null,error:i};return no(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(i){s.push(i)}});if(await Promise.all(i),s.length>0){for(let e=0;e<s.length;e+=1);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await _o(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Co(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&vo()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Wa);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*r.expires_at-t)/Wa);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof Yo))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!vo()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await Eo(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await zo(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Ya(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:n}=t;if(n)return{data:null,error:n};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await zo(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null==o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(Ya(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:n,error:a}=await zo(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:a})})}catch(t){if(Ya(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await zo(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(Ya(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],s=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=To(s.access_token);let a=null;n.aal&&(a=n.aal);let o=a;(null!==(r=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:n.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>Date.now())return r;const{data:s,error:i}=await zo(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!s.keys||0===s.keys.length)throw new oo("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),r=s.keys.find(t=>t.kid===e),!r)throw new oo("No matching signing key found in JWKS");return r}async getClaims(e,t={keys:[]}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:s,payload:i,signature:n,raw:{header:a,payload:o}}=To(r);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp),!s.kid||"HS256"===s.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:i,header:s,signature:n},error:null}}const l=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),c=await this.fetchJwk(s.kid,t),d=await crypto.subtle.importKey("jwk",c,l,!0,["verify"]);if(!(await crypto.subtle.verify(l,d,n,xo(`${a}.${o}`))))throw new oo("Invalid JWT signature");return{data:{claims:i,header:s,signature:n},error:null}}catch(r){if(Ya(r))return{data:null,error:r};throw r}}};el.nextInstanceID=0;const tl=el;let rl=class extends tl{constructor(e){super(e)}};var sl=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};let il=class{constructor(e,t,r){var s,i,n;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var r,s;const{db:i,auth:n,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:h}=t,u={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),a),global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},null!==(r=null==h?void 0:h.headers)&&void 0!==r?r:{}),null!==(s=null==o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>Ba(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}(null!=r?r:{},{db:Oa,realtime:za,auth:Object.assign(Object.assign({},Da),{storageKey:c}),global:Ra});this.storageKey=null!==(s=d.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(i=d.global.headers)&&void 0!==i?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=d.auth)&&void 0!==n?n:{},this.headers,d.global.fetch),this.fetch=Fa(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new bn(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),d.accessToken||this._listenForAuthEvents()}get functions(){return new Ei(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new $a(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return sl(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:n,lock:a,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new rl({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:n,lock:a,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new ca(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}};const nl=(al="https://cbopynuvhcymbumjnvay.supabase.co",ol="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNib3B5bnV2aGN5bWJ1bWpudmF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM5OTUxNzMsImV4cCI6MjA1OTU3MTE3M30.UZElMkoHugIt984RtYWyfrRuv2rB67opQdCrFVPCfzU",ll=function(){const e="localhost"!==window.location.hostname;return{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:window.localStorage,storageKey:"repspheres-auth",flowType:"pkce",debug:!e,cookies:e?{domain:".repspheres.com",sameSite:"lax",secure:!0,path:"/"}:{domain:"localhost",sameSite:"lax",secure:!1,path:"/"}}}}(),new il(al,ol,ll));var al,ol,ll;const cl=ks.createContext({});function dl(e){const t=ks.useRef(null);return null===t.current&&(t.current=e()),t.current}const hl="undefined"!=typeof window,ul=hl?ks.useLayoutEffect:ks.useEffect,pl=ks.createContext(null);function ml(e,t){-1===e.indexOf(t)&&e.push(t)}function gl(e,t){const r=e.indexOf(t);r>-1&&e.splice(r,1)}const fl=(e,t,r)=>r>t?t:r<e?e:r;const xl={},yl=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function vl(e){return"object"==typeof e&&null!==e}const bl=e=>/^0[^.\s]+$/u.test(e);function jl(e){let t;return()=>(void 0===t&&(t=e()),t)}const wl=e=>e,_l=(e,t)=>r=>t(e(r)),kl=(...e)=>e.reduce(_l),Cl=(e,t,r)=>{const s=t-e;return 0===s?1:(r-e)/s};class Sl{constructor(){this.subscriptions=[]}add(e){return ml(this.subscriptions,e),()=>gl(this.subscriptions,e)}notify(e,t,r){const s=this.subscriptions.length;if(s)if(1===s)this.subscriptions[0](e,t,r);else for(let i=0;i<s;i++){const s=this.subscriptions[i];s&&s(e,t,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Tl=e=>1e3*e,Pl=e=>e/1e3;function Al(e,t){return t?e*(1e3/t):0}const El=(e,t,r)=>(((1-3*r+3*t)*e+(3*r-6*t))*e+3*t)*e;function Il(e,t,r,s){if(e===t&&r===s)return wl;const i=t=>function(e,t,r,s,i){let n,a,o=0;do{a=t+(r-t)/2,n=El(a,s,i)-e,n>0?r=a:t=a}while(Math.abs(n)>1e-7&&++o<12);return a}(t,0,1,e,r);return e=>0===e||1===e?e:El(i(e),t,s)}const $l=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Ml=e=>t=>1-e(1-t),Rl=Il(.33,1.53,.69,.99),Ol=Ml(Rl),Dl=$l(Ol),zl=e=>(e*=2)<1?.5*Ol(e):.5*(2-Math.pow(2,-10*(e-1))),Ll=e=>1-Math.sin(Math.acos(e)),Fl=Ml(Ll),Bl=$l(Ll),Nl=Il(.42,0,1,1),Wl=Il(0,0,.58,1),Ul=Il(.42,0,.58,1),Vl=e=>Array.isArray(e)&&"number"==typeof e[0],ql={linear:wl,easeIn:Nl,easeInOut:Ul,easeOut:Wl,circIn:Ll,circInOut:Bl,circOut:Fl,backIn:Ol,backInOut:Dl,backOut:Rl,anticipate:zl},Gl=e=>{if(Vl(e)){e.length;const[t,r,s,i]=e;return Il(t,r,s,i)}return"string"==typeof e?ql[e]:e},Hl=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Kl(e,t){let r=!1,s=!0;const i={delta:0,timestamp:0,isProcessing:!1},n=()=>r=!0,a=Hl.reduce((e,t)=>(e[t]=function(e){let t=new Set,r=new Set,s=!1,i=!1;const n=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function o(t){n.has(t)&&(l.schedule(t),e()),t(a)}const l={schedule:(e,i=!1,a=!1)=>{const o=a&&s?t:r;return i&&n.add(e),o.has(e)||o.add(e),e},cancel:e=>{r.delete(e),n.delete(e)},process:e=>{a=e,s?i=!0:(s=!0,[t,r]=[r,t],t.forEach(o),t.clear(),s=!1,i&&(i=!1,l.process(e)))}};return l}(n),e),{}),{setup:o,read:l,resolveKeyframes:c,preUpdate:d,update:h,preRender:u,render:p,postRender:m}=a,g=()=>{const n=xl.useManualTiming?i.timestamp:performance.now();r=!1,xl.useManualTiming||(i.delta=s?1e3/60:Math.max(Math.min(n-i.timestamp,40),1)),i.timestamp=n,i.isProcessing=!0,o.process(i),l.process(i),c.process(i),d.process(i),h.process(i),u.process(i),p.process(i),m.process(i),i.isProcessing=!1,r&&t&&(s=!1,e(g))};return{schedule:Hl.reduce((t,n)=>{const o=a[n];return t[n]=(t,n=!1,a=!1)=>(r||(r=!0,s=!0,i.isProcessing||e(g)),o.schedule(t,n,a)),t},{}),cancel:e=>{for(let t=0;t<Hl.length;t++)a[Hl[t]].cancel(e)},state:i,steps:a}}const{schedule:Yl,cancel:Jl,state:Xl,steps:Ql}=Kl("undefined"!=typeof requestAnimationFrame?requestAnimationFrame:wl,!0);let Zl;function ec(){Zl=void 0}const tc={now:()=>(void 0===Zl&&tc.set(Xl.isProcessing||xl.useManualTiming?Xl.timestamp:performance.now()),Zl),set:e=>{Zl=e,queueMicrotask(ec)}},rc=e=>t=>"string"==typeof t&&t.startsWith(e),sc=rc("--"),ic=rc("var(--"),nc=e=>!!ic(e)&&ac.test(e.split("/*")[0].trim()),ac=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,oc={test:e=>"number"==typeof e,parse:parseFloat,transform:e=>e},lc={...oc,transform:e=>fl(0,1,e)},cc={...oc,default:1},dc=e=>Math.round(1e5*e)/1e5,hc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;const uc=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,pc=(e,t)=>r=>Boolean("string"==typeof r&&uc.test(r)&&r.startsWith(e)||t&&!function(e){return null==e}(r)&&Object.prototype.hasOwnProperty.call(r,t)),mc=(e,t,r)=>s=>{if("string"!=typeof s)return s;const[i,n,a,o]=s.match(hc);return{[e]:parseFloat(i),[t]:parseFloat(n),[r]:parseFloat(a),alpha:void 0!==o?parseFloat(o):1}},gc={...oc,transform:e=>Math.round((e=>fl(0,255,e))(e))},fc={test:pc("rgb","red"),parse:mc("red","green","blue"),transform:({red:e,green:t,blue:r,alpha:s=1})=>"rgba("+gc.transform(e)+", "+gc.transform(t)+", "+gc.transform(r)+", "+dc(lc.transform(s))+")"};const xc={test:pc("#"),parse:function(e){let t="",r="",s="",i="";return e.length>5?(t=e.substring(1,3),r=e.substring(3,5),s=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),r=e.substring(2,3),s=e.substring(3,4),i=e.substring(4,5),t+=t,r+=r,s+=s,i+=i),{red:parseInt(t,16),green:parseInt(r,16),blue:parseInt(s,16),alpha:i?parseInt(i,16)/255:1}},transform:fc.transform},yc=e=>({test:t=>"string"==typeof t&&t.endsWith(e)&&1===t.split(" ").length,parse:parseFloat,transform:t=>`${t}${e}`}),vc=yc("deg"),bc=yc("%"),jc=yc("px"),wc=yc("vh"),_c=yc("vw"),kc=(()=>({...bc,parse:e=>bc.parse(e)/100,transform:e=>bc.transform(100*e)}))(),Cc={test:pc("hsl","hue"),parse:mc("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:r,alpha:s=1})=>"hsla("+Math.round(e)+", "+bc.transform(dc(t))+", "+bc.transform(dc(r))+", "+dc(lc.transform(s))+")"},Sc={test:e=>fc.test(e)||xc.test(e)||Cc.test(e),parse:e=>fc.test(e)?fc.parse(e):Cc.test(e)?Cc.parse(e):xc.parse(e),transform:e=>"string"==typeof e?e:e.hasOwnProperty("red")?fc.transform(e):Cc.transform(e)},Tc=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;const Pc="number",Ac="color",Ec=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Ic(e){const t=e.toString(),r=[],s={color:[],number:[],var:[]},i=[];let n=0;const a=t.replace(Ec,e=>(Sc.test(e)?(s.color.push(n),i.push(Ac),r.push(Sc.parse(e))):e.startsWith("var(")?(s.var.push(n),i.push("var"),r.push(e)):(s.number.push(n),i.push(Pc),r.push(parseFloat(e))),++n,"${}")).split("${}");return{values:r,split:a,indexes:s,types:i}}function $c(e){return Ic(e).values}function Mc(e){const{split:t,types:r}=Ic(e),s=t.length;return e=>{let i="";for(let n=0;n<s;n++)if(i+=t[n],void 0!==e[n]){const t=r[n];i+=t===Pc?dc(e[n]):t===Ac?Sc.transform(e[n]):e[n]}return i}}const Rc=e=>"number"==typeof e?0:e;const Oc={test:function(e){return isNaN(e)&&"string"==typeof e&&(e.match(hc)?.length||0)+(e.match(Tc)?.length||0)>0},parse:$c,createTransformer:Mc,getAnimatableNone:function(e){const t=$c(e);return Mc(e)(t.map(Rc))}};function Dc(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function zc(e,t){return r=>r>0?t:e}const Lc=(e,t,r)=>e+(t-e)*r,Fc=(e,t,r)=>{const s=e*e,i=r*(t*t-s)+s;return i<0?0:Math.sqrt(i)},Bc=[xc,fc,Cc];function Nc(e){const t=(r=e,Bc.find(e=>e.test(r)));var r;if(!Boolean(t))return!1;let s=t.parse(e);return t===Cc&&(s=function({hue:e,saturation:t,lightness:r,alpha:s}){e/=360,r/=100;let i=0,n=0,a=0;if(t/=100){const s=r<.5?r*(1+t):r+t-r*t,o=2*r-s;i=Dc(o,s,e+1/3),n=Dc(o,s,e),a=Dc(o,s,e-1/3)}else i=n=a=r;return{red:Math.round(255*i),green:Math.round(255*n),blue:Math.round(255*a),alpha:s}}(s)),s}const Wc=(e,t)=>{const r=Nc(e),s=Nc(t);if(!r||!s)return zc(e,t);const i={...r};return e=>(i.red=Fc(r.red,s.red,e),i.green=Fc(r.green,s.green,e),i.blue=Fc(r.blue,s.blue,e),i.alpha=Lc(r.alpha,s.alpha,e),fc.transform(i))},Uc=new Set(["none","hidden"]);function Vc(e,t){return r=>Lc(e,t,r)}function qc(e){return"number"==typeof e?Vc:"string"==typeof e?nc(e)?zc:Sc.test(e)?Wc:Kc:Array.isArray(e)?Gc:"object"==typeof e?Sc.test(e)?Wc:Hc:zc}function Gc(e,t){const r=[...e],s=r.length,i=e.map((e,r)=>qc(e)(e,t[r]));return e=>{for(let t=0;t<s;t++)r[t]=i[t](e);return r}}function Hc(e,t){const r={...e,...t},s={};for(const i in r)void 0!==e[i]&&void 0!==t[i]&&(s[i]=qc(e[i])(e[i],t[i]));return e=>{for(const t in s)r[t]=s[t](e);return r}}const Kc=(e,t)=>{const r=Oc.createTransformer(t),s=Ic(e),i=Ic(t);return s.indexes.var.length===i.indexes.var.length&&s.indexes.color.length===i.indexes.color.length&&s.indexes.number.length>=i.indexes.number.length?Uc.has(e)&&!i.values.length||Uc.has(t)&&!s.values.length?function(e,t){return Uc.has(e)?r=>r<=0?e:t:r=>r>=1?t:e}(e,t):kl(Gc(function(e,t){const r=[],s={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const n=t.types[i],a=e.indexes[n][s[n]],o=e.values[a]??0;r[i]=o,s[n]++}return r}(s,i),i.values),r):zc(e,t)};function Yc(e,t,r){if("number"==typeof e&&"number"==typeof t&&"number"==typeof r)return Lc(e,t,r);return qc(e)(e,t)}const Jc=e=>{const t=({timestamp:t})=>e(t);return{start:(e=!0)=>Yl.update(t,e),stop:()=>Jl(t),now:()=>Xl.isProcessing?Xl.timestamp:tc.now()}},Xc=(e,t,r=10)=>{let s="";const i=Math.max(Math.round(t/r),2);for(let n=0;n<i;n++)s+=e(n/(i-1))+", ";return`linear(${s.substring(0,s.length-2)})`},Qc=2e4;function Zc(e){let t=0;let r=e.next(t);for(;!r.done&&t<Qc;)t+=50,r=e.next(t);return t>=Qc?1/0:t}function ed(e,t,r){const s=Math.max(t-5,0);return Al(r-e(s),t-s)}const td=100,rd=10,sd=1,id=0,nd=800,ad=.3,od=.3,ld={granular:.01,default:2},cd={granular:.005,default:.5},dd=.01,hd=10,ud=.05,pd=1,md=.001;function gd({duration:e=nd,bounce:t=ad,velocity:r=id,mass:s=sd}){let i,n,a=1-t;a=fl(ud,pd,a),e=fl(dd,hd,Pl(e)),a<1?(i=t=>{const s=t*a,i=s*e,n=s-r,o=xd(t,a),l=Math.exp(-i);return md-n/o*l},n=t=>{const s=t*a*e,n=s*r+r,o=Math.pow(a,2)*Math.pow(t,2)*e,l=Math.exp(-s),c=xd(Math.pow(t,2),a);return(-i(t)+md>0?-1:1)*((n-o)*l)/c}):(i=t=>Math.exp(-t*e)*((t-r)*e+1)-.001,n=t=>Math.exp(-t*e)*(e*e*(r-t)));const o=function(e,t,r){let s=r;for(let i=1;i<fd;i++)s-=e(s)/t(s);return s}(i,n,5/e);if(e=Tl(e),isNaN(o))return{stiffness:td,damping:rd,duration:e};{const t=Math.pow(o,2)*s;return{stiffness:t,damping:2*a*Math.sqrt(s*t),duration:e}}}const fd=12;function xd(e,t){return e*Math.sqrt(1-t*t)}const yd=["duration","bounce"],vd=["stiffness","damping","mass"];function bd(e,t){return t.some(t=>void 0!==e[t])}function jd(e=od,t=ad){const r="object"!=typeof e?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:s,restDelta:i}=r;const n=r.keyframes[0],a=r.keyframes[r.keyframes.length-1],o={done:!1,value:n},{stiffness:l,damping:c,mass:d,duration:h,velocity:u,isResolvedFromDuration:p}=function(e){let t={velocity:id,stiffness:td,damping:rd,mass:sd,isResolvedFromDuration:!1,...e};if(!bd(e,vd)&&bd(e,yd))if(e.visualDuration){const r=e.visualDuration,s=2*Math.PI/(1.2*r),i=s*s,n=2*fl(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:sd,stiffness:i,damping:n}}else{const r=gd(e);t={...t,...r,mass:sd},t.isResolvedFromDuration=!0}return t}({...r,velocity:-Pl(r.velocity||0)}),m=u||0,g=c/(2*Math.sqrt(l*d)),f=a-n,x=Pl(Math.sqrt(l/d)),y=Math.abs(f)<5;let v;if(s||(s=y?ld.granular:ld.default),i||(i=y?cd.granular:cd.default),g<1){const e=xd(x,g);v=t=>{const r=Math.exp(-g*x*t);return a-r*((m+g*x*f)/e*Math.sin(e*t)+f*Math.cos(e*t))}}else if(1===g)v=e=>a-Math.exp(-x*e)*(f+(m+x*f)*e);else{const e=x*Math.sqrt(g*g-1);v=t=>{const r=Math.exp(-g*x*t),s=Math.min(e*t,300);return a-r*((m+g*x*f)*Math.sinh(s)+e*f*Math.cosh(s))/e}}const b={calculatedDuration:p&&h||null,next:e=>{const t=v(e);if(p)o.done=e>=h;else{let r=0===e?m:0;g<1&&(r=0===e?Tl(m):ed(v,e,t));const n=Math.abs(r)<=s,l=Math.abs(a-t)<=i;o.done=n&&l}return o.value=o.done?a:t,o},toString:()=>{const e=Math.min(Zc(b),Qc),t=Xc(t=>b.next(e*t).value,e,30);return e+"ms "+t},toTransition:()=>{}};return b}function wd({keyframes:e,velocity:t=0,power:r=.8,timeConstant:s=325,bounceDamping:i=10,bounceStiffness:n=500,modifyTarget:a,min:o,max:l,restDelta:c=.5,restSpeed:d}){const h=e[0],u={done:!1,value:h},p=e=>void 0===o?l:void 0===l||Math.abs(o-e)<Math.abs(l-e)?o:l;let m=r*t;const g=h+m,f=void 0===a?g:a(g);f!==g&&(m=f-h);const x=e=>-m*Math.exp(-e/s),y=e=>f+x(e),v=e=>{const t=x(e),r=y(e);u.done=Math.abs(t)<=c,u.value=u.done?f:r};let b,j;const w=e=>{var t;(t=u.value,void 0!==o&&t<o||void 0!==l&&t>l)&&(b=e,j=jd({keyframes:[u.value,p(u.value)],velocity:ed(y,e,u.value),damping:i,stiffness:n,restDelta:c,restSpeed:d}))};return w(0),{calculatedDuration:null,next:e=>{let t=!1;return j||void 0!==b||(t=!0,v(e),w(e)),void 0!==b&&e>=b?j.next(e-b):(!t&&v(e),u)}}}function _d(e,t,{clamp:r=!0,ease:s,mixer:i}={}){const n=e.length;if(t.length,1===n)return()=>t[0];if(2===n&&t[0]===t[1])return()=>t[1];const a=e[0]===e[1];e[0]>e[n-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=function(e,t,r){const s=[],i=r||xl.mix||Yc,n=e.length-1;for(let a=0;a<n;a++){let r=i(e[a],e[a+1]);if(t){const e=Array.isArray(t)?t[a]||wl:t;r=kl(e,r)}s.push(r)}return s}(t,s,i),l=o.length,c=r=>{if(a&&r<e[0])return t[0];let s=0;if(l>1)for(;s<e.length-2&&!(r<e[s+1]);s++);const i=Cl(e[s],e[s+1],r);return o[s](i)};return r?t=>c(fl(e[0],e[n-1],t)):c}function kd(e){const t=[0];return function(e,t){const r=e[e.length-1];for(let s=1;s<=t;s++){const i=Cl(0,t,s);e.push(Lc(r,1,i))}}(t,e.length-1),t}function Cd({duration:e=300,keyframes:t,times:r,ease:s="easeInOut"}){const i=(e=>Array.isArray(e)&&"number"!=typeof e[0])(s)?s.map(Gl):Gl(s),n={done:!1,value:t[0]},a=function(e,t){return e.map(e=>e*t)}(r&&r.length===t.length?r:kd(t),e),o=_d(a,t,{ease:Array.isArray(i)?i:(l=t,c=i,l.map(()=>c||Ul).splice(0,l.length-1))});var l,c;return{calculatedDuration:e,next:t=>(n.value=o(t),n.done=t>=e,n)}}jd.applyToOptions=e=>{const t=function(e,t=100,r){const s=r({...e,keyframes:[0,t]}),i=Math.min(Zc(s),Qc);return{type:"keyframes",ease:e=>s.next(i*e).value/t,duration:Pl(i)}}(e,100,jd);return e.ease=t.ease,e.duration=Tl(t.duration),e.type="keyframes",e};const Sd=e=>null!==e;function Td(e,{repeat:t,repeatType:r="loop"},s,i=1){const n=e.filter(Sd),a=i<0||t&&"loop"!==r&&t%2==1?0:n.length-1;return a&&void 0!==s?s:n[a]}const Pd={decay:wd,inertia:wd,tween:Cd,keyframes:Cd,spring:jd};function Ad(e){"string"==typeof e.type&&(e.type=Pd[e.type])}class Ed{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,t){return this.finished.then(e,t)}}const Id=e=>e/100;class $d extends Ed{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:e}=this.options;e&&e.updatedAt!==tc.now()&&this.tick(tc.now()),this.isStopped=!0,"idle"!==this.state&&(this.teardown(),this.options.onStop?.())},this.options=e,this.initAnimation(),this.play(),!1===e.autoplay&&this.pause()}initAnimation(){const{options:e}=this;Ad(e);const{type:t=Cd,repeat:r=0,repeatDelay:s=0,repeatType:i,velocity:n=0}=e;let{keyframes:a}=e;const o=t||Cd;o!==Cd&&"number"!=typeof a[0]&&(this.mixKeyframes=kl(Id,Yc(a[0],a[1])),a=[0,100]);const l=o({...e,keyframes:a});"mirror"===i&&(this.mirroredGenerator=o({...e,keyframes:[...a].reverse(),velocity:-n})),null===l.calculatedDuration&&(l.calculatedDuration=Zc(l));const{calculatedDuration:c}=l;this.calculatedDuration=c,this.resolvedDuration=c+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=l}updateTime(e){const t=Math.round(e-this.startTime)*this.playbackSpeed;null!==this.holdTime?this.currentTime=this.holdTime:this.currentTime=t}tick(e,t=!1){const{generator:r,totalDuration:s,mixKeyframes:i,mirroredGenerator:n,resolvedDuration:a,calculatedDuration:o}=this;if(null===this.startTime)return r.next(0);const{delay:l=0,keyframes:c,repeat:d,repeatType:h,repeatDelay:u,type:p,onUpdate:m,finalKeyframe:g}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),t?this.currentTime=e:this.updateTime(e);const f=this.currentTime-l*(this.playbackSpeed>=0?1:-1),x=this.playbackSpeed>=0?f<0:f>s;this.currentTime=Math.max(f,0),"finished"===this.state&&null===this.holdTime&&(this.currentTime=s);let y=this.currentTime,v=r;if(d){const e=Math.min(this.currentTime,s)/a;let t=Math.floor(e),r=e%1;!r&&e>=1&&(r=1),1===r&&t--,t=Math.min(t,d+1);Boolean(t%2)&&("reverse"===h?(r=1-r,u&&(r-=u/a)):"mirror"===h&&(v=n)),y=fl(0,1,r)*a}const b=x?{done:!1,value:c[0]}:v.next(y);i&&(b.value=i(b.value));let{done:j}=b;x||null===o||(j=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const w=null===this.holdTime&&("finished"===this.state||"running"===this.state&&j);return w&&p!==wd&&(b.value=Td(c,this.options,g,this.speed)),m&&m(b.value),w&&this.finish(),b}then(e,t){return this.finished.then(e,t)}get duration(){return Pl(this.calculatedDuration)}get time(){return Pl(this.currentTime)}set time(e){e=Tl(e),this.currentTime=e,null===this.startTime||null!==this.holdTime||0===this.playbackSpeed?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(tc.now());const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Pl(this.currentTime))}play(){if(this.isStopped)return;const{driver:e=Jc,startTime:t}=this.options;this.driver||(this.driver=e(e=>this.tick(e))),this.options.onPlay?.();const r=this.driver.now();"finished"===this.state?(this.updateFinished(),this.startTime=r):null!==this.holdTime?this.startTime=r-this.holdTime:this.startTime||(this.startTime=t??r),"finished"===this.state&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(tc.now()),this.holdTime=this.currentTime}complete(){"running"!==this.state&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),e.observe(this)}}const Md=e=>180*e/Math.PI,Rd=e=>{const t=Md(Math.atan2(e[1],e[0]));return Dd(t)},Od={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:Rd,rotateZ:Rd,skewX:e=>Md(Math.atan(e[1])),skewY:e=>Md(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},Dd=e=>((e%=360)<0&&(e+=360),e),zd=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),Ld=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Fd={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:zd,scaleY:Ld,scale:e=>(zd(e)+Ld(e))/2,rotateX:e=>Dd(Md(Math.atan2(e[6],e[5]))),rotateY:e=>Dd(Md(Math.atan2(-e[2],e[0]))),rotateZ:Rd,rotate:Rd,skewX:e=>Md(Math.atan(e[4])),skewY:e=>Md(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function Bd(e){return e.includes("scale")?1:0}function Nd(e,t){if(!e||"none"===e)return Bd(t);const r=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let s,i;if(r)s=Fd,i=r;else{const t=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);s=Od,i=t}if(!i)return Bd(t);const n=s[t],a=i[1].split(",").map(Wd);return"function"==typeof n?n(a):a[n]}function Wd(e){return parseFloat(e.trim())}const Ud=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Vd=(()=>new Set(Ud))(),qd=e=>e===oc||e===jc,Gd=new Set(["x","y","z"]),Hd=Ud.filter(e=>!Gd.has(e));const Kd={width:({x:e},{paddingLeft:t="0",paddingRight:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),height:({y:e},{paddingTop:t="0",paddingBottom:r="0"})=>e.max-e.min-parseFloat(t)-parseFloat(r),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>Nd(t,"x"),y:(e,{transform:t})=>Nd(t,"y")};Kd.translateX=Kd.x,Kd.translateY=Kd.y;const Yd=new Set;let Jd=!1,Xd=!1,Qd=!1;function Zd(){if(Xd){const e=Array.from(Yd).filter(e=>e.needsMeasurement),t=new Set(e.map(e=>e.element)),r=new Map;t.forEach(e=>{const t=function(e){const t=[];return Hd.forEach(r=>{const s=e.getValue(r);void 0!==s&&(t.push([r,s.get()]),s.set(r.startsWith("scale")?1:0))}),t}(e);t.length&&(r.set(e,t),e.render())}),e.forEach(e=>e.measureInitialState()),t.forEach(e=>{e.render();const t=r.get(e);t&&t.forEach(([t,r])=>{e.getValue(t)?.set(r)})}),e.forEach(e=>e.measureEndState()),e.forEach(e=>{void 0!==e.suspendedScrollY&&window.scrollTo(0,e.suspendedScrollY)})}Xd=!1,Jd=!1,Yd.forEach(e=>e.complete(Qd)),Yd.clear()}function eh(){Yd.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(Xd=!0)})}class th{constructor(e,t,r,s,i,n=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=r,this.motionValue=s,this.element=i,this.isAsync=n}scheduleResolve(){this.state="scheduled",this.isAsync?(Yd.add(this),Jd||(Jd=!0,Yl.read(eh),Yl.resolveKeyframes(Zd))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:r,motionValue:s}=this;if(null===e[0]){const i=s?.get(),n=e[e.length-1];if(void 0!==i)e[0]=i;else if(r&&t){const s=r.readValue(t,n);null!=s&&(e[0]=s)}void 0===e[0]&&(e[0]=n),s&&void 0===i&&s.set(e[0])}!function(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),Yd.delete(this)}cancel(){"scheduled"===this.state&&(Yd.delete(this),this.state="pending")}resume(){"pending"===this.state&&this.scheduleResolve()}}const rh=jl(()=>void 0!==window.ScrollTimeline),sh={};function ih(e,t){const r=jl(e);return()=>sh[t]??r()}const nh=ih(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch(e){return!1}return!0},"linearEasing"),ah=([e,t,r,s])=>`cubic-bezier(${e}, ${t}, ${r}, ${s})`,oh={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ah([0,.65,.55,1]),circOut:ah([.55,0,1,.45]),backIn:ah([.31,.01,.66,-.59]),backOut:ah([.33,1.53,.69,.99])};function lh(e,t){return e?"function"==typeof e?nh()?Xc(e,t):"ease-out":Vl(e)?ah(e):Array.isArray(e)?e.map(e=>lh(e,t)||oh.easeOut):oh[e]:void 0}function ch(e,t,r,{delay:s=0,duration:i=300,repeat:n=0,repeatType:a="loop",ease:o="easeOut",times:l}={},c=void 0){const d={[t]:r};l&&(d.offset=l);const h=lh(o,i);Array.isArray(h)&&(d.easing=h);const u={delay:s,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:n+1,direction:"reverse"===a?"alternate":"normal"};c&&(u.pseudoElement=c);return e.animate(d,u)}function dh(e){return"function"==typeof e&&"applyToOptions"in e}class hh extends Ed{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:t,name:r,keyframes:s,pseudoElement:i,allowFlatten:n=!1,finalKeyframe:a,onComplete:o}=e;this.isPseudoElement=Boolean(i),this.allowFlatten=n,this.options=e,e.type;const l=function({type:e,...t}){return dh(e)&&nh()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}(e);this.animation=ch(t,r,s,l,i),!1===l.autoplay&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const e=Td(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(e):function(e,t,r){(e=>e.startsWith("--"))(t)?e.style.setProperty(t,r):e.style[t]=r}(t,r,e),this.animation.cancel()}o?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),"finished"===this.state&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch(e){}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;"idle"!==e&&"finished"!==e&&(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const e=this.animation.effect?.getComputedTiming?.().duration||0;return Pl(Number(e))}get time(){return Pl(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=Tl(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return null!==this.finishedTime?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:t}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,e&&rh()?(this.animation.timeline=e,wl):t(this)}}const uh={anticipate:zl,backInOut:Dl,circInOut:Bl};function ph(e){"string"==typeof e.ease&&e.ease in uh&&(e.ease=uh[e.ease])}class mh extends hh{constructor(e){ph(e),Ad(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:t,onUpdate:r,onComplete:s,element:i,...n}=this.options;if(!t)return;if(void 0!==e)return void t.set(e);const a=new $d({...n,autoplay:!1}),o=Tl(this.finishedTime??this.time);t.setWithVelocity(a.sample(o-10).value,a.sample(o).value,10),a.stop()}}const gh=(e,t)=>"zIndex"!==t&&(!("number"!=typeof e&&!Array.isArray(e))||!("string"!=typeof e||!Oc.test(e)&&"0"!==e||e.startsWith("url(")));function fh(e){return vl(e)&&"offsetHeight"in e}const xh=new Set(["opacity","clipPath","filter","transform"]),yh=jl(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));class vh extends Ed{constructor({autoplay:e=!0,delay:t=0,type:r="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:n="loop",keyframes:a,name:o,motionValue:l,element:c,...d}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=tc.now();const h={autoplay:e,delay:t,type:r,repeat:s,repeatDelay:i,repeatType:n,name:o,motionValue:l,element:c,...d},u=c?.KeyframeResolver||th;this.keyframeResolver=new u(a,(e,t,r)=>this.onKeyframesResolved(e,t,h,!r),o,l,c),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(e,t,r,s){this.keyframeResolver=void 0;const{name:i,type:n,velocity:a,delay:o,isHandoff:l,onUpdate:c}=r;this.resolvedAt=tc.now(),function(e,t,r,s){const i=e[0];if(null===i)return!1;if("display"===t||"visibility"===t)return!0;const n=e[e.length-1],a=gh(i,t),o=gh(n,t);return!(!a||!o)&&(function(e){const t=e[0];if(1===e.length)return!0;for(let r=0;r<e.length;r++)if(e[r]!==t)return!0}(e)||("spring"===r||dh(r))&&s)}(e,i,n,a)||(!xl.instantAnimations&&o||c?.(Td(e,r,t)),e[0]=e[e.length-1],r.duration=0,r.repeat=0);const d={startTime:s?this.resolvedAt&&this.resolvedAt-this.createdAt>40?this.resolvedAt:this.createdAt:void 0,finalKeyframe:t,...r,keyframes:e},h=!l&&function(e){const{motionValue:t,name:r,repeatDelay:s,repeatType:i,damping:n,type:a}=e;if(!fh(t?.owner?.current))return!1;const{onUpdate:o,transformTemplate:l}=t.owner.getProps();return yh()&&r&&xh.has(r)&&("transform"!==r||!l)&&!o&&!s&&"mirror"!==i&&0!==n&&"inertia"!==a}(d)?new mh({...d,element:d.motionValue.owner.current}):new $d(d);h.finished.then(()=>this.notifyFinished()).catch(wl),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(e,t){return this.finished.finally(e).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Qd=!0,eh(),Zd(),Qd=!1),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const bh=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function jh(e,t,r=1){const[s,i]=function(e){const t=bh.exec(e);if(!t)return[,];const[,r,s,i]=t;return[`--${r??s}`,i]}(e);if(!s)return;const n=window.getComputedStyle(t).getPropertyValue(s);if(n){const e=n.trim();return yl(e)?parseFloat(e):e}return nc(i)?jh(i,t,r+1):i}function wh(e,t){return e?.[t]??e?.default??e}const _h=new Set(["width","height","top","left","right","bottom",...Ud]),kh=e=>t=>t.test(e),Ch=[oc,jc,bc,vc,_c,wc,{test:e=>"auto"===e,parse:e=>e}],Sh=e=>Ch.find(kh(e));function Th(e){return"number"==typeof e?0===e:null===e||("none"===e||"0"===e||bl(e))}const Ph=new Set(["brightness","contrast","saturate","opacity"]);function Ah(e){const[t,r]=e.slice(0,-1).split("(");if("drop-shadow"===t)return e;const[s]=r.match(hc)||[];if(!s)return e;const i=r.replace(s,"");let n=Ph.has(t)?1:0;return s!==r&&(n*=100),t+"("+n+i+")"}const Eh=/\b([a-z-]*)\(.*?\)/gu,Ih={...Oc,getAnimatableNone:e=>{const t=e.match(Eh);return t?t.map(Ah).join(" "):e}},$h={...oc,transform:Math.round},Mh={borderWidth:jc,borderTopWidth:jc,borderRightWidth:jc,borderBottomWidth:jc,borderLeftWidth:jc,borderRadius:jc,radius:jc,borderTopLeftRadius:jc,borderTopRightRadius:jc,borderBottomRightRadius:jc,borderBottomLeftRadius:jc,width:jc,maxWidth:jc,height:jc,maxHeight:jc,top:jc,right:jc,bottom:jc,left:jc,padding:jc,paddingTop:jc,paddingRight:jc,paddingBottom:jc,paddingLeft:jc,margin:jc,marginTop:jc,marginRight:jc,marginBottom:jc,marginLeft:jc,backgroundPositionX:jc,backgroundPositionY:jc,...{rotate:vc,rotateX:vc,rotateY:vc,rotateZ:vc,scale:cc,scaleX:cc,scaleY:cc,scaleZ:cc,skew:vc,skewX:vc,skewY:vc,distance:jc,translateX:jc,translateY:jc,translateZ:jc,x:jc,y:jc,z:jc,perspective:jc,transformPerspective:jc,opacity:lc,originX:kc,originY:kc,originZ:jc},zIndex:$h,fillOpacity:lc,strokeOpacity:lc,numOctaves:$h},Rh={...Mh,color:Sc,backgroundColor:Sc,outlineColor:Sc,fill:Sc,stroke:Sc,borderColor:Sc,borderTopColor:Sc,borderRightColor:Sc,borderBottomColor:Sc,borderLeftColor:Sc,filter:Ih,WebkitFilter:Ih},Oh=e=>Rh[e];function Dh(e,t){let r=Oh(e);return r!==Ih&&(r=Oc),r.getAnimatableNone?r.getAnimatableNone(t):void 0}const zh=new Set(["auto","none","0"]);class Lh extends th{constructor(e,t,r,s,i){super(e,t,r,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:r}=this;if(!t||!t.current)return;super.readKeyframes();for(let o=0;o<e.length;o++){let r=e[o];if("string"==typeof r&&(r=r.trim(),nc(r))){const s=jh(r,t.current);void 0!==s&&(e[o]=s),o===e.length-1&&(this.finalKeyframe=r)}}if(this.resolveNoneKeyframes(),!_h.has(r)||2!==e.length)return;const[s,i]=e,n=Sh(s),a=Sh(i);if(n!==a)if(qd(n)&&qd(a))for(let o=0;o<e.length;o++){const t=e[o];"string"==typeof t&&(e[o]=parseFloat(t))}else Kd[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,r=[];for(let s=0;s<e.length;s++)(null===e[s]||Th(e[s]))&&r.push(s);r.length&&function(e,t,r){let s,i=0;for(;i<e.length&&!s;){const t=e[i];"string"==typeof t&&!zh.has(t)&&Ic(t).values.length&&(s=e[i]),i++}if(s&&r)for(const n of t)e[n]=Dh(r,s)}(e,r,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:r}=this;if(!e||!e.current)return;"height"===r&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Kd[r](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const s=t[t.length-1];void 0!==s&&e.getValue(r,s).jump(s,!1)}measureEndState(){const{element:e,name:t,unresolvedKeyframes:r}=this;if(!e||!e.current)return;const s=e.getValue(t);s&&s.jump(this.measuredOrigin,!1);const i=r.length-1,n=r[i];r[i]=Kd[t](e.measureViewportBox(),window.getComputedStyle(e.current)),null!==n&&void 0===this.finalKeyframe&&(this.finalKeyframe=n),this.removedTransforms?.length&&this.removedTransforms.forEach(([t,r])=>{e.getValue(t).set(r)}),this.resolveNoneKeyframes()}}const Fh=(e,t)=>t&&"number"==typeof e?t.transform(e):e,Bh={current:void 0};class Nh{constructor(e,t={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=(e,t=!0)=>{const r=tc.now();if(this.updatedAt!==r&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(e),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty();t&&this.events.renderRequest?.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){var t;this.current=e,this.updatedAt=tc.now(),null===this.canTrackVelocity&&void 0!==e&&(this.canTrackVelocity=(t=this.current,!isNaN(parseFloat(t))))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new Sl);const r=this.events[e].add(t);return"change"===e?()=>{r(),Yl.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}setWithVelocity(e,t,r){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-r}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return Bh.current&&Bh.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const e=tc.now();if(!this.canTrackVelocity||void 0===this.prevFrameValue||e-this.updatedAt>30)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,30);return Al(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Wh(e,t){return new Nh(e,t)}const{schedule:Uh}=Kl(queueMicrotask,!1),Vh={x:!1,y:!1};function qh(){return Vh.x||Vh.y}function Gh(e,t){const r=function(e,t,r){if(e instanceof EventTarget)return[e];if("string"==typeof e){let t=document;const s=r?.[e]??t.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}(e),s=new AbortController;return[r,{passive:!0,...t,signal:s.signal},()=>s.abort()]}function Hh(e){return!("touch"===e.pointerType||qh())}const Kh=(e,t)=>!!t&&(e===t||Kh(e,t.parentElement)),Yh=e=>"mouse"===e.pointerType?"number"!=typeof e.button||e.button<=0:!1!==e.isPrimary,Jh=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);const Xh=new WeakSet;function Qh(e){return t=>{"Enter"===t.key&&e(t)}}function Zh(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}function eu(e){return Yh(e)&&!qh()}function tu(e,t,r={}){const[s,i,n]=Gh(e,r),a=e=>{const s=e.currentTarget;if(!eu(e))return;Xh.add(s);const n=t(s,e),a=(e,t)=>{window.removeEventListener("pointerup",o),window.removeEventListener("pointercancel",l),Xh.has(s)&&Xh.delete(s),eu(e)&&"function"==typeof n&&n(e,{success:t})},o=e=>{a(e,s===window||s===document||r.useGlobalTarget||Kh(s,e.target))},l=e=>{a(e,!1)};window.addEventListener("pointerup",o,i),window.addEventListener("pointercancel",l,i)};return s.forEach(e=>{var t;(r.useGlobalTarget?window:e).addEventListener("pointerdown",a,i),fh(e)&&(e.addEventListener("focus",e=>((e,t)=>{const r=e.currentTarget;if(!r)return;const s=Qh(()=>{if(Xh.has(r))return;Zh(r,"down");const e=Qh(()=>{Zh(r,"up")});r.addEventListener("keyup",e,t),r.addEventListener("blur",()=>Zh(r,"cancel"),t)});r.addEventListener("keydown",s,t),r.addEventListener("blur",()=>r.removeEventListener("keydown",s),t)})(e,i)),t=e,Jh.has(t.tagName)||-1!==t.tabIndex||e.hasAttribute("tabindex")||(e.tabIndex=0))}),n}function ru(e){return vl(e)&&"ownerSVGElement"in e}const su=e=>Boolean(e&&e.getVelocity);function iu(e,t){return t?e+t:e}function nu(e){return"number"==typeof e?e:parseFloat(e)}const au=[...Ch,Sc,Oc],ou=ks.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class lu extends ks.Component{getSnapshotBeforeUpdate(e){const t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent){const e=t.offsetParent,r=fh(e)&&e.offsetWidth||0,s=this.props.sizeRef.current;s.height=t.offsetHeight||0,s.width=t.offsetWidth||0,s.top=t.offsetTop,s.left=t.offsetLeft,s.right=r-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function cu({children:e,isPresent:t,anchorX:r}){const s=ks.useId(),i=ks.useRef(null),n=ks.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=ks.useContext(ou);return ks.useInsertionEffect(()=>{const{width:e,height:o,top:l,left:c,right:d}=n.current;if(t||!i.current||!e||!o)return;const h="left"===r?`left: ${c}`:`right: ${d}`;i.current.dataset.motionPopId=s;const u=document.createElement("style");return a&&(u.nonce=a),document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`\n          [data-motion-pop-id="${s}"] {\n            position: absolute !important;\n            width: ${e}px !important;\n            height: ${o}px !important;\n            ${h}px !important;\n            top: ${l}px !important;\n          }\n        `),()=>{document.head.contains(u)&&document.head.removeChild(u)}},[t]),c.jsx(lu,{isPresent:t,childRef:i,sizeRef:n,children:ks.cloneElement(e,{ref:i})})}const du=({children:e,initial:t,isPresent:r,onExitComplete:s,custom:i,presenceAffectsLayout:n,mode:a,anchorX:o})=>{const l=dl(hu),d=ks.useId();let h=!0,u=ks.useMemo(()=>(h=!1,{id:d,initial:t,isPresent:r,custom:i,onExitComplete:e=>{l.set(e,!0);for(const t of l.values())if(!t)return;s&&s()},register:e=>(l.set(e,!1),()=>l.delete(e))}),[r,l,s]);return n&&h&&(u={...u}),ks.useMemo(()=>{l.forEach((e,t)=>l.set(t,!1))},[r]),ks.useEffect(()=>{!r&&!l.size&&s&&s()},[r]),"popLayout"===a&&(e=c.jsx(cu,{isPresent:r,anchorX:o,children:e})),c.jsx(pl.Provider,{value:u,children:e})};function hu(){return new Map}function uu(e=!0){const t=ks.useContext(pl);if(null===t)return[!0,null];const{isPresent:r,onExitComplete:s,register:i}=t,n=ks.useId();ks.useEffect(()=>{if(e)return i(n)},[e]);const a=ks.useCallback(()=>e&&s&&s(n),[n,s,e]);return!r&&s?[!1,a]:[!0]}const pu=e=>e.key||"";function mu(e){const t=[];return ks.Children.forEach(e,e=>{ks.isValidElement(e)&&t.push(e)}),t}const gu=({children:e,custom:t,initial:r=!0,onExitComplete:s,presenceAffectsLayout:i=!0,mode:n="sync",propagate:a=!1,anchorX:o="left"})=>{const[l,d]=uu(a),h=ks.useMemo(()=>mu(e),[e]),u=a&&!l?[]:h.map(pu),p=ks.useRef(!0),m=ks.useRef(h),g=dl(()=>new Map),[f,x]=ks.useState(h),[y,v]=ks.useState(h);ul(()=>{p.current=!1,m.current=h;for(let e=0;e<y.length;e++){const t=pu(y[e]);u.includes(t)?g.delete(t):!0!==g.get(t)&&g.set(t,!1)}},[y,u.length,u.join("-")]);const b=[];if(h!==f){let e=[...h];for(let t=0;t<y.length;t++){const r=y[t],s=pu(r);u.includes(s)||(e.splice(t,0,r),b.push(r))}return"wait"===n&&b.length&&(e=b),v(mu(e)),x(h),null}const{forceRender:j}=ks.useContext(cl);return c.jsx(c.Fragment,{children:y.map(e=>{const f=pu(e),x=!(a&&!l)&&(h===y||u.includes(f));return c.jsx(du,{isPresent:x,initial:!(p.current&&!r)&&void 0,custom:t,presenceAffectsLayout:i,mode:n,onExitComplete:x?void 0:()=>{if(!g.has(f))return;g.set(f,!0);let e=!0;g.forEach(t=>{t||(e=!1)}),e&&(j?.(),v(m.current),a&&d?.(),s&&s())},anchorX:o,children:e},f)})})},fu=ks.createContext({strict:!1}),xu={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},yu={};for(const BO in xu)yu[BO]={isEnabled:e=>xu[BO].some(t=>!!e[t])};const vu=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function bu(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||vu.has(e)}let ju=e=>!bu(e);try{(wu=require("@emotion/is-prop-valid").default)&&(ju=e=>e.startsWith("on")?!bu(e):wu(e))}catch{}var wu;function _u(e){if("undefined"==typeof Proxy)return e;const t=new Map;return new Proxy((...t)=>e(...t),{get:(r,s)=>"create"===s?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const ku=ks.createContext({});function Cu(e){return null!==e&&"object"==typeof e&&"function"==typeof e.start}function Su(e){return"string"==typeof e||Array.isArray(e)}const Tu=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Pu=["initial",...Tu];function Au(e){return Cu(e.animate)||Pu.some(t=>Su(e[t]))}function Eu(e){return Boolean(Au(e)||e.variants)}function Iu(e){const{initial:t,animate:r}=function(e,t){if(Au(e)){const{initial:t,animate:r}=e;return{initial:!1===t||Su(t)?t:void 0,animate:Su(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,ks.useContext(ku));return ks.useMemo(()=>({initial:t,animate:r}),[$u(t),$u(r)])}function $u(e){return Array.isArray(e)?e.join(" "):e}const Mu=Symbol.for("motionComponentSymbol");function Ru(e){return e&&"object"==typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Ou(e,t,r){return ks.useCallback(s=>{s&&e.onMount&&e.onMount(s),t&&(s?t.mount(s):t.unmount()),r&&("function"==typeof r?r(s):Ru(r)&&(r.current=s))},[t])}const Du=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),zu="data-"+Du("framerAppearId"),Lu=ks.createContext({});function Fu(e,t,r,s,i){const{visualElement:n}=ks.useContext(ku),a=ks.useContext(fu),o=ks.useContext(pl),l=ks.useContext(ou).reducedMotion,c=ks.useRef(null);s=s||a.renderer,!c.current&&s&&(c.current=s(e,{visualState:t,parent:n,props:r,presenceContext:o,blockInitialAnimation:!!o&&!1===o.initial,reducedMotionConfig:l}));const d=c.current,h=ks.useContext(Lu);!d||d.projection||!i||"html"!==d.type&&"svg"!==d.type||function(e,t,r,s){const{layoutId:i,layout:n,drag:a,dragConstraints:o,layoutScroll:l,layoutRoot:c,layoutCrossfade:d}=t;e.projection=new r(e.latestValues,t["data-framer-portal-id"]?void 0:Bu(e.parent)),e.projection.setOptions({layoutId:i,layout:n,alwaysMeasureLayout:Boolean(a)||o&&Ru(o),visualElement:e,animationType:"string"==typeof n?n:"both",initialPromotionConfig:s,crossfade:d,layoutScroll:l,layoutRoot:c})}(c.current,r,i,h);const u=ks.useRef(!1);ks.useInsertionEffect(()=>{d&&u.current&&d.update(r,o)});const p=r[zu],m=ks.useRef(Boolean(p)&&!window.MotionHandoffIsComplete?.(p)&&window.MotionHasOptimisedAnimation?.(p));return ul(()=>{d&&(u.current=!0,window.MotionIsMounted=!0,d.updateFeatures(),Uh.render(d.render),m.current&&d.animationState&&d.animationState.animateChanges())}),ks.useEffect(()=>{d&&(!m.current&&d.animationState&&d.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(p)}),m.current=!1))}),d}function Bu(e){if(e)return!1!==e.options.allowProjection?e.projection:Bu(e.parent)}function Nu({preloadedFeatures:e,createVisualElement:t,useRender:r,useVisualState:s,Component:i}){function n(e,n){let a;const o={...ks.useContext(ou),...e,layoutId:Wu(e)},{isStatic:l}=o,d=Iu(e),h=s(e,l);if(!l&&hl){ks.useContext(fu).strict;const e=function(e){const{drag:t,layout:r}=yu;if(!t&&!r)return{};const s={...t,...r};return{MeasureLayout:t?.isEnabled(e)||r?.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}(o);a=e.MeasureLayout,d.visualElement=Fu(i,h,o,t,e.ProjectionNode)}return c.jsxs(ku.Provider,{value:d,children:[a&&d.visualElement?c.jsx(a,{visualElement:d.visualElement,...o}):null,r(i,e,Ou(h,d.visualElement,n),h,l,d.visualElement)]})}e&&function(e){for(const t in e)yu[t]={...yu[t],...e[t]}}(e),n.displayName=`motion.${"string"==typeof i?i:`create(${i.displayName??i.name??""})`}`;const a=ks.forwardRef(n);return a[Mu]=i,a}function Wu({layoutId:e}){const t=ks.useContext(cl).id;return t&&void 0!==e?t+"-"+e:e}const Uu={};function Vu(e,{layout:t,layoutId:r}){return Vd.has(e)||e.startsWith("origin")||(t||void 0!==r)&&(!!Uu[e]||"opacity"===e)}const qu={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Gu=Ud.length;function Hu(e,t,r){const{style:s,vars:i,transformOrigin:n}=e;let a=!1,o=!1;for(const l in t){const e=t[l];if(Vd.has(l))a=!0;else if(sc(l))i[l]=e;else{const t=Fh(e,Mh[l]);l.startsWith("origin")?(o=!0,n[l]=t):s[l]=t}}if(t.transform||(a||r?s.transform=function(e,t,r){let s="",i=!0;for(let n=0;n<Gu;n++){const a=Ud[n],o=e[a];if(void 0===o)continue;let l=!0;if(l="number"==typeof o?o===(a.startsWith("scale")?1:0):0===parseFloat(o),!l||r){const e=Fh(o,Mh[a]);l||(i=!1,s+=`${qu[a]||a}(${e}) `),r&&(t[a]=e)}}return s=s.trim(),r?s=r(t,i?"":s):i&&(s="none"),s}(t,e.transform,r):s.transform&&(s.transform="none")),o){const{originX:e="50%",originY:t="50%",originZ:r=0}=n;s.transformOrigin=`${e} ${t} ${r}`}}const Ku=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function Yu(e,t,r){for(const s in t)su(t[s])||Vu(s,r)||(e[s]=t[s])}function Ju(e,t){const r={};return Yu(r,e.style||{},e),Object.assign(r,function({transformTemplate:e},t){return ks.useMemo(()=>{const r={style:{},transform:{},transformOrigin:{},vars:{}};return Hu(r,t,e),Object.assign({},r.vars,r.style)},[t])}(e,t)),r}function Xu(e,t){const r={},s=Ju(e,t);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,s.userSelect=s.WebkitUserSelect=s.WebkitTouchCallout="none",s.touchAction=!0===e.drag?"none":"pan-"+("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=s,r}const Qu={offset:"stroke-dashoffset",array:"stroke-dasharray"},Zu={offset:"strokeDashoffset",array:"strokeDasharray"};function ep(e,{attrX:t,attrY:r,attrScale:s,pathLength:i,pathSpacing:n=1,pathOffset:a=0,...o},l,c,d){if(Hu(e,o,c),l)return void(e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox));e.attrs=e.style,e.style={};const{attrs:h,style:u}=e;h.transform&&(u.transform=h.transform,delete h.transform),(u.transform||h.transformOrigin)&&(u.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),u.transform&&(u.transformBox=d?.transformBox??"fill-box",delete h.transformBox),void 0!==t&&(h.x=t),void 0!==r&&(h.y=r),void 0!==s&&(h.scale=s),void 0!==i&&function(e,t,r=1,s=0,i=!0){e.pathLength=1;const n=i?Qu:Zu;e[n.offset]=jc.transform(-s);const a=jc.transform(t),o=jc.transform(r);e[n.array]=`${a} ${o}`}(h,i,n,a,!1)}const tp=()=>({style:{},transform:{},transformOrigin:{},vars:{},attrs:{}}),rp=e=>"string"==typeof e&&"svg"===e.toLowerCase();function sp(e,t,r,s){const i=ks.useMemo(()=>{const r={style:{},transform:{},transformOrigin:{},vars:{},attrs:{}};return ep(r,t,rp(s),e.transformTemplate,e.style),{...r.attrs,style:{...r.style}}},[t]);if(e.style){const t={};Yu(t,e.style,e),i.style={...t,...i.style}}return i}const ip=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function np(e){return"string"==typeof e&&!e.includes("-")&&!!(ip.indexOf(e)>-1||/[A-Z]/u.test(e))}function ap(e=!1){return(t,r,s,{latestValues:i},n)=>{const a=(np(t)?sp:Xu)(r,i,n,t),o=function(e,t,r){const s={};for(const i in e)"values"===i&&"object"==typeof e.values||(ju(i)||!0===r&&bu(i)||!t&&!bu(i)||e.draggable&&i.startsWith("onDrag"))&&(s[i]=e[i]);return s}(r,"string"==typeof t,e),l=t!==ks.Fragment?{...o,...a,ref:s}:{},{children:c}=r,d=ks.useMemo(()=>su(c)?c.get():c,[c]);return ks.createElement(t,{...l,children:d})}}function op(e){const t=[{},{}];return e?.values.forEach((e,r)=>{t[0][r]=e.get(),t[1][r]=e.getVelocity()}),t}function lp(e,t,r,s){if("function"==typeof t){const[i,n]=op(s);t=t(void 0!==r?r:e.custom,i,n)}if("string"==typeof t&&(t=e.variants&&e.variants[t]),"function"==typeof t){const[i,n]=op(s);t=t(void 0!==r?r:e.custom,i,n)}return t}function cp(e){return su(e)?e.get():e}const dp=e=>(t,r)=>{const s=ks.useContext(ku),i=ks.useContext(pl),n=()=>function({scrapeMotionValuesFromProps:e,createRenderState:t},r,s,i){return{latestValues:hp(r,s,i,e),renderState:t()}}(e,t,s,i);return r?n():dl(n)};function hp(e,t,r,s){const i={},n=s(e,{});for(const u in n)i[u]=cp(n[u]);let{initial:a,animate:o}=e;const l=Au(e),c=Eu(e);t&&c&&!l&&!1!==e.inherit&&(void 0===a&&(a=t.initial),void 0===o&&(o=t.animate));let d=!!r&&!1===r.initial;d=d||!1===a;const h=d?o:a;if(h&&"boolean"!=typeof h&&!Cu(h)){const t=Array.isArray(h)?h:[h];for(let r=0;r<t.length;r++){const s=lp(e,t[r]);if(s){const{transitionEnd:e,transition:t,...r}=s;for(const s in r){let e=r[s];if(Array.isArray(e)){e=e[d?e.length-1:0]}null!==e&&(i[s]=e)}for(const s in e)i[s]=e[s]}}}return i}function up(e,t,r){const{style:s}=e,i={};for(const n in s)(su(s[n])||t.style&&su(t.style[n])||Vu(n,e)||void 0!==r?.getValue(n)?.liveStyle)&&(i[n]=s[n]);return i}const pp={useVisualState:dp({scrapeMotionValuesFromProps:up,createRenderState:Ku})};function mp(e,t,r){const s=up(e,t,r);for(const i in e)if(su(e[i])||su(t[i])){s[-1!==Ud.indexOf(i)?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i]=e[i]}return s}const gp={useVisualState:dp({scrapeMotionValuesFromProps:mp,createRenderState:tp})};function fp(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){return Nu({...np(r)?gp:pp,preloadedFeatures:e,useRender:ap(s),createVisualElement:t,Component:r})}}function xp(e,t,r){const s=e.getProps();return lp(s,t,void 0!==r?r:s.custom,e)}const yp=e=>Array.isArray(e);function vp(e,t,r){e.hasValue(t)?e.getValue(t).set(r):e.addValue(t,Wh(r))}function bp(e){return yp(e)?e[e.length-1]||0:e}function jp(e,t){const r=xp(e,t);let{transitionEnd:s={},transition:i={},...n}=r||{};n={...n,...s};for(const a in n){vp(e,a,bp(n[a]))}}function wp(e,t){const r=e.getValue("willChange");if(s=r,Boolean(su(s)&&s.add))return r.add(t);if(!r&&xl.WillChange){const r=new xl.WillChange("auto");e.addValue("willChange",r),r.add(t)}var s}function _p(e){return e.props[zu]}const kp=e=>null!==e;const Cp={type:"spring",stiffness:500,damping:25,restSpeed:10},Sp={type:"keyframes",duration:.8},Tp={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Pp=(e,{keyframes:t})=>t.length>2?Sp:Vd.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===t[1]?2*Math.sqrt(550):30,restSpeed:10}:Cp:Tp;const Ap=(e,t,r,s={},i,n)=>a=>{const o=wh(s,e)||{},l=o.delay||s.delay||0;let{elapsed:c=0}=s;c-=Tl(l);const d={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-c,onUpdate:e=>{t.set(e),o.onUpdate&&o.onUpdate(e)},onComplete:()=>{a(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:n?void 0:i};(function({when:e,delay:t,delayChildren:r,staggerChildren:s,staggerDirection:i,repeat:n,repeatType:a,repeatDelay:o,from:l,elapsed:c,...d}){return!!Object.keys(d).length})(o)||Object.assign(d,Pp(e,d)),d.duration&&(d.duration=Tl(d.duration)),d.repeatDelay&&(d.repeatDelay=Tl(d.repeatDelay)),void 0!==d.from&&(d.keyframes[0]=d.from);let h=!1;if((!1===d.type||0===d.duration&&!d.repeatDelay)&&(d.duration=0,0===d.delay&&(h=!0)),(xl.instantAnimations||xl.skipAnimations)&&(h=!0,d.duration=0,d.delay=0),d.allowFlatten=!o.type&&!o.ease,h&&!n&&void 0!==t.get()){const e=function(e,{repeat:t,repeatType:r="loop"}){const s=e.filter(kp);return s[t&&"loop"!==r&&t%2==1?0:s.length-1]}(d.keyframes,o);if(void 0!==e)return void Yl.update(()=>{d.onUpdate(e),d.onComplete()})}return o.isSync?new $d(d):new vh(d)};function Ep({protectedKeys:e,needsAnimating:t},r){const s=e.hasOwnProperty(r)&&!0!==t[r];return t[r]=!1,s}function Ip(e,t,{delay:r=0,transitionOverride:s,type:i}={}){let{transition:n=e.getDefaultTransition(),transitionEnd:a,...o}=t;s&&(n=s);const l=[],c=i&&e.animationState&&e.animationState.getState()[i];for(const d in o){const t=e.getValue(d,e.latestValues[d]??null),s=o[d];if(void 0===s||c&&Ep(c,d))continue;const i={delay:r,...wh(n||{},d)},a=t.get();if(void 0!==a&&!t.isAnimating&&!Array.isArray(s)&&s===a&&!i.velocity)continue;let h=!1;if(window.MotionHandoffAnimation){const t=_p(e);if(t){const e=window.MotionHandoffAnimation(t,d,Yl);null!==e&&(i.startTime=e,h=!0)}}wp(e,d),t.start(Ap(d,t,s,e.shouldReduceMotion&&_h.has(d)?{type:!1}:i,e,h));const u=t.animation;u&&l.push(u)}return a&&Promise.all(l).then(()=>{Yl.update(()=>{a&&jp(e,a)})}),l}function $p(e,t,r={}){const s=xp(e,t,"exit"===r.type?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=s||{};r.transitionOverride&&(i=r.transitionOverride);const n=s?()=>Promise.all(Ip(e,s,r)):()=>Promise.resolve(),a=e.variantChildren&&e.variantChildren.size?(s=0)=>{const{delayChildren:n=0,staggerChildren:a,staggerDirection:o}=i;return function(e,t,r=0,s=0,i=1,n){const a=[],o=(e.variantChildren.size-1)*s,l=1===i?(e=0)=>e*s:(e=0)=>o-e*s;return Array.from(e.variantChildren).sort(Mp).forEach((e,s)=>{e.notify("AnimationStart",t),a.push($p(e,t,{...n,delay:r+l(s)}).then(()=>e.notify("AnimationComplete",t)))}),Promise.all(a)}(e,t,n+s,a,o,r)}:()=>Promise.resolve(),{when:o}=i;if(o){const[e,t]="beforeChildren"===o?[n,a]:[a,n];return e().then(()=>t())}return Promise.all([n(),a(r.delay)])}function Mp(e,t){return e.sortNodePosition(t)}function Rp(e,t,r={}){let s;if(e.notify("AnimationStart",t),Array.isArray(t)){const i=t.map(t=>$p(e,t,r));s=Promise.all(i)}else if("string"==typeof t)s=$p(e,t,r);else{const i="function"==typeof t?xp(e,t,r.custom):t;s=Promise.all(Ip(e,i,r))}return s.then(()=>{e.notify("AnimationComplete",t)})}function Op(e,t){if(!Array.isArray(t))return!1;const r=t.length;if(r!==e.length)return!1;for(let s=0;s<r;s++)if(t[s]!==e[s])return!1;return!0}const Dp=Pu.length;function zp(e){if(!e)return;if(!e.isControllingVariants){const t=e.parent&&zp(e.parent)||{};return void 0!==e.props.initial&&(t.initial=e.props.initial),t}const t={};for(let r=0;r<Dp;r++){const s=Pu[r],i=e.props[s];(Su(i)||!1===i)&&(t[s]=i)}return t}const Lp=[...Tu].reverse(),Fp=Tu.length;function Bp(e){let t=function(e){return t=>Promise.all(t.map(({animation:t,options:r})=>Rp(e,t,r)))}(e),r=Up(),s=!0;const i=t=>(r,s)=>{const i=xp(e,s,"exit"===t?e.presenceContext?.custom:void 0);if(i){const{transition:e,transitionEnd:t,...s}=i;r={...r,...s,...t}}return r};function n(n){const{props:a}=e,o=zp(e.parent)||{},l=[],c=new Set;let d={},h=1/0;for(let t=0;t<Fp;t++){const u=Lp[t],p=r[u],m=void 0!==a[u]?a[u]:o[u],g=Su(m),f=u===n?p.isActive:null;!1===f&&(h=t);let x=m===o[u]&&m!==a[u]&&g;if(x&&s&&e.manuallyAnimateOnMount&&(x=!1),p.protectedKeys={...d},!p.isActive&&null===f||!m&&!p.prevProp||Cu(m)||"boolean"==typeof m)continue;const y=Np(p.prevProp,m);let v=y||u===n&&p.isActive&&!x&&g||t>h&&g,b=!1;const j=Array.isArray(m)?m:[m];let w=j.reduce(i(u),{});!1===f&&(w={});const{prevResolvedValues:_={}}=p,k={..._,...w},C=t=>{v=!0,c.has(t)&&(b=!0,c.delete(t)),p.needsAnimating[t]=!0;const r=e.getValue(t);r&&(r.liveStyle=!1)};for(const e in k){const t=w[e],r=_[e];if(d.hasOwnProperty(e))continue;let s=!1;s=yp(t)&&yp(r)?!Op(t,r):t!==r,s?null!=t?C(e):c.add(e):void 0!==t&&c.has(e)?C(e):p.protectedKeys[e]=!0}p.prevProp=m,p.prevResolvedValues=w,p.isActive&&(d={...d,...w}),s&&e.blockInitialAnimation&&(v=!1);v&&(!(x&&y)||b)&&l.push(...j.map(e=>({animation:e,options:{type:u}})))}if(c.size){const t={};if("boolean"!=typeof a.initial){const r=xp(e,Array.isArray(a.initial)?a.initial[0]:a.initial);r&&r.transition&&(t.transition=r.transition)}c.forEach(r=>{const s=e.getBaseTarget(r),i=e.getValue(r);i&&(i.liveStyle=!0),t[r]=s??null}),l.push({animation:t})}let u=Boolean(l.length);return!s||!1!==a.initial&&a.initial!==a.animate||e.manuallyAnimateOnMount||(u=!1),s=!1,u?t(l):Promise.resolve()}return{animateChanges:n,setActive:function(t,s){if(r[t].isActive===s)return Promise.resolve();e.variantChildren?.forEach(e=>e.animationState?.setActive(t,s)),r[t].isActive=s;const i=n(t);for(const e in r)r[e].protectedKeys={};return i},setAnimateFunction:function(r){t=r(e)},getState:()=>r,reset:()=>{r=Up(),s=!0}}}function Np(e,t){return"string"==typeof t?t!==e:!!Array.isArray(t)&&!Op(t,e)}function Wp(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Up(){return{animate:Wp(!0),whileInView:Wp(),whileHover:Wp(),whileTap:Wp(),whileDrag:Wp(),whileFocus:Wp(),exit:Wp()}}class Vp{constructor(e){this.isMounted=!1,this.node=e}update(){}}let qp=0;const Gp={animation:{Feature:class extends Vp{constructor(e){super(e),e.animationState||(e.animationState=Bp(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Cu(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}},exit:{Feature:class extends Vp{constructor(){super(...arguments),this.id=qp++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const s=this.node.animationState.setActive("exit",!e);t&&!e&&s.then(()=>{t(this.id)})}mount(){const{register:e,onExitComplete:t}=this.node.presenceContext||{};t&&t(this.id),e&&(this.unmount=e(this.id))}unmount(){}}}};function Hp(e,t,r,s={passive:!0}){return e.addEventListener(t,r,s),()=>e.removeEventListener(t,r)}function Kp(e){return{point:{x:e.pageX,y:e.pageY}}}function Yp(e,t,r,s){return Hp(e,t,(e=>t=>Yh(t)&&e(t,Kp(t)))(r),s)}function Jp({top:e,left:t,right:r,bottom:s}){return{x:{min:t,max:r},y:{min:e,max:s}}}function Xp(e){return e.max-e.min}function Qp(e,t,r,s=.5){e.origin=s,e.originPoint=Lc(t.min,t.max,e.origin),e.scale=Xp(r)/Xp(t),e.translate=Lc(r.min,r.max,e.origin)-e.originPoint,(e.scale>=.9999&&e.scale<=1.0001||isNaN(e.scale))&&(e.scale=1),(e.translate>=-.01&&e.translate<=.01||isNaN(e.translate))&&(e.translate=0)}function Zp(e,t,r,s){Qp(e.x,t.x,r.x,s?s.originX:void 0),Qp(e.y,t.y,r.y,s?s.originY:void 0)}function em(e,t,r){e.min=r.min+t.min,e.max=e.min+Xp(t)}function tm(e,t,r){e.min=t.min-r.min,e.max=e.min+Xp(t)}function rm(e,t,r){tm(e.x,t.x,r.x),tm(e.y,t.y,r.y)}const sm=()=>({x:{min:0,max:0},y:{min:0,max:0}});function im(e){return[e("x"),e("y")]}function nm(e){return void 0===e||1===e}function am({scale:e,scaleX:t,scaleY:r}){return!nm(e)||!nm(t)||!nm(r)}function om(e){return am(e)||lm(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function lm(e){return cm(e.x)||cm(e.y)}function cm(e){return e&&"0%"!==e}function dm(e,t,r){return r+t*(e-r)}function hm(e,t,r,s,i){return void 0!==i&&(e=dm(e,i,s)),dm(e,r,s)+t}function um(e,t=0,r=1,s,i){e.min=hm(e.min,t,r,s,i),e.max=hm(e.max,t,r,s,i)}function pm(e,{x:t,y:r}){um(e.x,t.translate,t.scale,t.originPoint),um(e.y,r.translate,r.scale,r.originPoint)}const mm=.999999999999,gm=1.0000000000001;function fm(e,t){e.min=e.min+t,e.max=e.max+t}function xm(e,t,r,s,i=.5){um(e,t,r,Lc(e.min,e.max,i),s)}function ym(e,t){xm(e.x,t.x,t.scaleX,t.scale,t.originX),xm(e.y,t.y,t.scaleY,t.scale,t.originY)}function vm(e,t){return Jp(function(e,t){if(!t)return e;const r=t({x:e.left,y:e.top}),s=t({x:e.right,y:e.bottom});return{top:r.y,left:r.x,bottom:s.y,right:s.x}}(e.getBoundingClientRect(),t))}const bm=({current:e})=>e?e.ownerDocument.defaultView:null,jm=(e,t)=>Math.abs(e-t);class wm{constructor(e,t,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!this.lastMoveEvent||!this.lastMoveEventInfo)return;const e=Cm(this.lastMoveEventInfo,this.history),t=null!==this.startEvent,r=function(e,t){const r=jm(e.x,t.x),s=jm(e.y,t.y);return Math.sqrt(r**2+s**2)}(e.offset,{x:0,y:0})>=3;if(!t&&!r)return;const{point:s}=e,{timestamp:i}=Xl;this.history.push({...s,timestamp:i});const{onStart:n,onMove:a}=this.handlers;t||(n&&n(this.lastMoveEvent,e),this.startEvent=this.lastMoveEvent),a&&a(this.lastMoveEvent,e)},this.handlePointerMove=(e,t)=>{this.lastMoveEvent=e,this.lastMoveEventInfo=_m(t,this.transformPagePoint),Yl.update(this.updatePoint,!0)},this.handlePointerUp=(e,t)=>{this.end();const{onEnd:r,onSessionEnd:s,resumeAnimation:i}=this.handlers;if(this.dragSnapToOrigin&&i&&i(),!this.lastMoveEvent||!this.lastMoveEventInfo)return;const n=Cm("pointercancel"===e.type?this.lastMoveEventInfo:_m(t,this.transformPagePoint),this.history);this.startEvent&&r&&r(e,n),s&&s(e,n)},!Yh(e))return;this.dragSnapToOrigin=i,this.handlers=t,this.transformPagePoint=r,this.contextWindow=s||window;const n=_m(Kp(e),this.transformPagePoint),{point:a}=n,{timestamp:o}=Xl;this.history=[{...a,timestamp:o}];const{onSessionStart:l}=t;l&&l(e,Cm(n,this.history)),this.removeListeners=kl(Yp(this.contextWindow,"pointermove",this.handlePointerMove),Yp(this.contextWindow,"pointerup",this.handlePointerUp),Yp(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Jl(this.updatePoint)}}function _m(e,t){return t?{point:t(e.point)}:e}function km(e,t){return{x:e.x-t.x,y:e.y-t.y}}function Cm({point:e},t){return{point:e,delta:km(e,Tm(t)),offset:km(e,Sm(t)),velocity:Pm(t,.1)}}function Sm(e){return e[0]}function Tm(e){return e[e.length-1]}function Pm(e,t){if(e.length<2)return{x:0,y:0};let r=e.length-1,s=null;const i=Tm(e);for(;r>=0&&(s=e[r],!(i.timestamp-s.timestamp>Tl(t)));)r--;if(!s)return{x:0,y:0};const n=Pl(i.timestamp-s.timestamp);if(0===n)return{x:0,y:0};const a={x:(i.x-s.x)/n,y:(i.y-s.y)/n};return a.x===1/0&&(a.x=0),a.y===1/0&&(a.y=0),a}function Am(e,t,r){return{min:void 0!==t?e.min+t:void 0,max:void 0!==r?e.max+r-(e.max-e.min):void 0}}function Em(e,t){let r=t.min-e.min,s=t.max-e.max;return t.max-t.min<e.max-e.min&&([r,s]=[s,r]),{min:r,max:s}}const Im=.35;function $m(e,t,r){return{min:Mm(e,t),max:Mm(e,r)}}function Mm(e,t){return"number"==typeof e?e:e[t]||0}const Rm=new WeakMap;class Om{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic={x:{min:0,max:0},y:{min:0,max:0}},this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&!1===r.isPresent)return;const{dragSnapToOrigin:s}=this.getProps();this.panSession=new wm(e,{onSessionStart:e=>{const{dragSnapToOrigin:r}=this.getProps();r?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Kp(e).point)},onStart:(e,t)=>{const{drag:r,dragPropagation:s,onDragStart:i}=this.getProps();if(r&&!s&&(this.openDragLock&&this.openDragLock(),this.openDragLock="x"===(n=r)||"y"===n?Vh[n]?null:(Vh[n]=!0,()=>{Vh[n]=!1}):Vh.x||Vh.y?null:(Vh.x=Vh.y=!0,()=>{Vh.x=Vh.y=!1}),!this.openDragLock))return;var n;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),im(e=>{let t=this.getAxisMotionValue(e).get()||0;if(bc.test(t)){const{projection:r}=this.visualElement;if(r&&r.layout){const s=r.layout.layoutBox[e];if(s){t=Xp(s)*(parseFloat(t)/100)}}}this.originPoint[e]=t}),i&&Yl.postRender(()=>i(e,t)),wp(this.visualElement,"transform");const{animationState:a}=this.visualElement;a&&a.setActive("whileDrag",!0)},onMove:(e,t)=>{const{dragPropagation:r,dragDirectionLock:s,onDirectionLock:i,onDrag:n}=this.getProps();if(!r&&!this.openDragLock)return;const{offset:a}=t;if(s&&null===this.currentDirection)return this.currentDirection=function(e,t=10){let r=null;Math.abs(e.y)>t?r="y":Math.abs(e.x)>t&&(r="x");return r}(a),void(null!==this.currentDirection&&i&&i(this.currentDirection));this.updateAxis("x",t.point,a),this.updateAxis("y",t.point,a),this.visualElement.render(),n&&n(e,t)},onSessionEnd:(e,t)=>this.stop(e,t),resumeAnimation:()=>im(e=>"paused"===this.getAnimationState(e)&&this.getAxisMotionValue(e).animation?.play())},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:s,contextWindow:bm(this.visualElement)})}stop(e,t){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=t;this.startAnimation(s);const{onDragEnd:i}=this.getProps();i&&Yl.postRender(()=>i(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,r){const{drag:s}=this.getProps();if(!r||!Dm(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let n=this.originPoint[e]+r[e];this.constraints&&this.constraints[e]&&(n=function(e,{min:t,max:r},s){return void 0!==t&&e<t?e=s?Lc(t,e,s.min):Math.max(e,t):void 0!==r&&e>r&&(e=s?Lc(r,e,s.max):Math.min(e,r)),e}(n,this.constraints[e],this.elastic[e])),i.set(n)}resolveConstraints(){const{dragConstraints:e,dragElastic:t}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;e&&Ru(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!e||!r)&&function(e,{top:t,left:r,bottom:s,right:i}){return{x:Am(e.x,r,i),y:Am(e.y,t,s)}}(r.layoutBox,e),this.elastic=function(e=Im){return!1===e?e=0:!0===e&&(e=Im),{x:$m(e,"left","right"),y:$m(e,"top","bottom")}}(t),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&im(e=>{!1!==this.constraints&&this.getAxisMotionValue(e)&&(this.constraints[e]=function(e,t){const r={};return void 0!==t.min&&(r.min=t.min-e.min),void 0!==t.max&&(r.max=t.max-e.min),r}(r.layoutBox[e],this.constraints[e]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ru(e))return!1;const r=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=function(e,t,r){const s=vm(e,r),{scroll:i}=t;return i&&(fm(s.x,i.offset.x),fm(s.y,i.offset.y)),s}(r,s.root,this.visualElement.getTransformPagePoint());let n=function(e,t){return{x:Em(e.x,t.x),y:Em(e.y,t.y)}}(s.layout.layoutBox,i);if(t){const e=t(function({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}(n));this.hasMutatedConstraints=!!e,e&&(n=Jp(e))}return n}startAnimation(e){const{drag:t,dragMomentum:r,dragElastic:s,dragTransition:i,dragSnapToOrigin:n,onDragTransitionEnd:a}=this.getProps(),o=this.constraints||{},l=im(a=>{if(!Dm(a,t,this.currentDirection))return;let l=o&&o[a]||{};n&&(l={min:0,max:0});const c=s?200:1e6,d=s?40:1e7,h={type:"inertia",velocity:r?e[a]:0,bounceStiffness:c,bounceDamping:d,timeConstant:750,restDelta:1,restSpeed:10,...i,...l};return this.startAxisValueAnimation(a,h)});return Promise.all(l).then(a)}startAxisValueAnimation(e,t){const r=this.getAxisMotionValue(e);return wp(this.visualElement,e),r.start(Ap(e,r,0,t,this.visualElement,!1))}stopAnimation(){im(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){im(e=>this.getAxisMotionValue(e).animation?.pause())}getAnimationState(e){return this.getAxisMotionValue(e).animation?.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,r=this.visualElement.getProps(),s=r[t];return s||this.visualElement.getValue(e,(r.initial?r.initial[e]:void 0)||0)}snapToCursor(e){im(t=>{const{drag:r}=this.getProps();if(!Dm(t,r,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(t);if(s&&s.layout){const{min:r,max:n}=s.layout.layoutBox[t];i.set(e[t]-Lc(r,n,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:r}=this.visualElement;if(!Ru(t)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};im(e=>{const t=this.getAxisMotionValue(e);if(t&&!1!==this.constraints){const r=t.get();s[e]=function(e,t){let r=.5;const s=Xp(e),i=Xp(t);return i>s?r=Cl(t.min,t.max-s,e.min):s>i&&(r=Cl(e.min,e.max-i,t.min)),fl(0,1,r)}({min:r,max:r},this.constraints[e])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),im(t=>{if(!Dm(t,e,null))return;const r=this.getAxisMotionValue(t),{min:i,max:n}=this.constraints[t];r.set(Lc(i,n,s[t]))})}addListeners(){if(!this.visualElement.current)return;Rm.set(this.visualElement,this);const e=Yp(this.visualElement.current,"pointerdown",e=>{const{drag:t,dragListener:r=!0}=this.getProps();t&&r&&this.start(e)}),t=()=>{const{dragConstraints:e}=this.getProps();Ru(e)&&e.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",t);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Yl.read(t);const i=Hp(window,"resize",()=>this.scalePositionWithinConstraints()),n=r.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t})=>{this.isDragging&&t&&(im(t=>{const r=this.getAxisMotionValue(t);r&&(this.originPoint[t]+=e[t].translate,r.set(r.get()+e[t].translate))}),this.visualElement.render())});return()=>{i(),e(),s(),n&&n()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:n=Im,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:r,dragPropagation:s,dragConstraints:i,dragElastic:n,dragMomentum:a}}}function Dm(e,t,r){return!(!0!==t&&t!==e||null!==r&&r!==e)}const zm=e=>(t,r)=>{e&&Yl.postRender(()=>e(t,r))};const Lm={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Fm(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Bm={correct:(e,t)=>{if(!t.target)return e;if("string"==typeof e){if(!jc.test(e))return e;e=parseFloat(e)}return`${Fm(e,t.target.x)}% ${Fm(e,t.target.y)}%`}},Nm={correct:(e,{treeScale:t,projectionDelta:r})=>{const s=e,i=Oc.parse(e);if(i.length>5)return s;const n=Oc.createTransformer(e),a="number"!=typeof i[0]?1:0,o=r.x.scale*t.x,l=r.y.scale*t.y;i[0+a]/=o,i[1+a]/=l;const c=Lc(o,l,.5);return"number"==typeof i[2+a]&&(i[2+a]/=c),"number"==typeof i[3+a]&&(i[3+a]/=c),n(i)}};class Wm extends ks.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r,layoutId:s}=this.props,{projection:i}=e;!function(e){for(const t in e)Uu[t]=e[t],sc(t)&&(Uu[t].isCSSVariable=!0)}(Vm),i&&(t.group&&t.group.add(i),r&&r.register&&s&&r.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Lm.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:r,drag:s,isPresent:i}=this.props,{projection:n}=r;return n?(n.isPresent=i,s||e.layoutDependency!==t||void 0===t||e.isPresent!==i?n.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?n.promote():n.relegate()||Yl.postRender(()=>{const e=n.getStack();e&&e.members.length||this.safeToRemove()})),null):null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Uh.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:r}=this.props,{projection:s}=e;s&&(s.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Um(e){const[t,r]=uu(),s=ks.useContext(cl);return c.jsx(Wm,{...e,layoutGroup:s,switchLayoutGroup:ks.useContext(Lu),isPresent:t,safeToRemove:r})}const Vm={borderRadius:{...Bm,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bm,borderTopRightRadius:Bm,borderBottomLeftRadius:Bm,borderBottomRightRadius:Bm,boxShadow:Nm};const qm=(e,t)=>e.depth-t.depth;class Gm{constructor(){this.children=[],this.isDirty=!1}add(e){ml(this.children,e),this.isDirty=!0}remove(e){gl(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(qm),this.isDirty=!1,this.children.forEach(e)}}const Hm=["TopLeft","TopRight","BottomLeft","BottomRight"],Km=Hm.length,Ym=e=>"string"==typeof e?parseFloat(e):e,Jm=e=>"number"==typeof e||jc.test(e);function Xm(e,t){return void 0!==e[t]?e[t]:e.borderRadius}const Qm=eg(0,.5,Fl),Zm=eg(.5,.95,wl);function eg(e,t,r){return s=>s<e?0:s>t?1:r(Cl(e,t,s))}function tg(e,t){e.min=t.min,e.max=t.max}function rg(e,t){tg(e.x,t.x),tg(e.y,t.y)}function sg(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function ig(e,t,r,s,i){return e=dm(e-=t,1/r,s),void 0!==i&&(e=dm(e,1/i,s)),e}function ng(e,t,[r,s,i],n,a){!function(e,t=0,r=1,s=.5,i,n=e,a=e){bc.test(t)&&(t=parseFloat(t),t=Lc(a.min,a.max,t/100)-a.min);if("number"!=typeof t)return;let o=Lc(n.min,n.max,s);e===n&&(o-=t),e.min=ig(e.min,t,r,o,i),e.max=ig(e.max,t,r,o,i)}(e,t[r],t[s],t[i],t.scale,n,a)}const ag=["x","scaleX","originX"],og=["y","scaleY","originY"];function lg(e,t,r,s){ng(e.x,t,ag,r?r.x:void 0,s?s.x:void 0),ng(e.y,t,og,r?r.y:void 0,s?s.y:void 0)}function cg(e){return 0===e.translate&&1===e.scale}function dg(e){return cg(e.x)&&cg(e.y)}function hg(e,t){return e.min===t.min&&e.max===t.max}function ug(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function pg(e,t){return ug(e.x,t.x)&&ug(e.y,t.y)}function mg(e){return Xp(e.x)/Xp(e.y)}function gg(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class fg{constructor(){this.members=[]}add(e){ml(this.members,e),e.scheduleRender()}remove(e){if(gl(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const e=this.members[this.members.length-1];e&&this.promote(e)}}relegate(e){const t=this.members.findIndex(t=>e===t);if(0===t)return!1;let r;for(let s=t;s>=0;s--){const e=this.members[s];if(!1!==e.isPresent){r=e;break}}return!!r&&(this.promote(r),!0)}promote(e,t){const r=this.lead;if(e!==r&&(this.prevLead=r,this.lead=e,e.show(),r)){r.instance&&r.scheduleRender(),e.scheduleRender(),e.resumeFrom=r,t&&(e.resumeFrom.preserveOpacity=!0),r.snapshot&&(e.snapshot=r.snapshot,e.snapshot.latestValues=r.animationValues||r.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;!1===s&&r.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:r}=e;t.onExitComplete&&t.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const xg=["","X","Y","Z"],yg={visibility:"hidden"};let vg=0;function bg(e,t,r,s){const{latestValues:i}=t;i[e]&&(r[e]=i[e],t.setStaticValue(e,0),s&&(s[e]=0))}function jg(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const r=_p(t);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:t,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(r,"transform",Yl,!(t||s))}const{parent:s}=e;s&&!s.hasCheckedOptimisedAppear&&jg(s)}function wg({attachResizeListener:e,defaultParent:t,measureScroll:r,checkIsScrollRoot:s,resetTransform:i}){return class{constructor(e={},r=t?.()){this.id=vg++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(Cg),this.nodes.forEach($g),this.nodes.forEach(Mg),this.nodes.forEach(Sg)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=e,this.root=r?r.root||r:this,this.path=r?[...r.path,r]:[],this.parent=r,this.depth=r?r.depth+1:0;for(let t=0;t<this.path.length;t++)this.path[t].shouldResetTransform=!0;this.root===this&&(this.nodes=new Gm)}addEventListener(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new Sl),this.eventHandlers.get(e).add(t)}notifyListeners(e,...t){const r=this.eventHandlers.get(e);r&&r.notify(...t)}hasListeners(e){return this.eventHandlers.has(e)}mount(t){if(this.instance)return;var r;this.isSVG=ru(t)&&!(ru(r=t)&&"svg"===r.tagName),this.instance=t;const{layoutId:s,layout:i,visualElement:n}=this.options;if(n&&!n.current&&n.mount(t),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(i||s)&&(this.isLayoutDirty=!0),e){let r;const s=()=>this.root.updateBlockedByResize=!1;e(t,()=>{this.root.updateBlockedByResize=!0,r&&r(),r=function(e,t){const r=tc.now(),s=({timestamp:i})=>{const n=i-r;n>=t&&(Jl(s),e(n-t))};return Yl.setup(s,!0),()=>Jl(s)}(s,250),Lm.hasAnimatedSinceResize&&(Lm.hasAnimatedSinceResize=!1,this.nodes.forEach(Ig))})}s&&this.root.registerSharedNode(s,this),!1!==this.options.animate&&n&&(s||i)&&this.addEventListener("didUpdate",({delta:e,hasLayoutChanged:t,hasRelativeLayoutChanged:r,layout:s})=>{if(this.isTreeAnimationBlocked())return this.target=void 0,void(this.relativeTarget=void 0);const i=this.options.transition||n.getDefaultTransition()||Fg,{onLayoutAnimationStart:a,onLayoutAnimationComplete:o}=n.getProps(),l=!this.targetLayout||!pg(this.targetLayout,s),c=!t&&r;if(this.options.layoutRoot||this.resumeFrom||c||t&&(l||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const t={...wh(i,"layout"),onPlay:a,onComplete:o};(n.shouldReduceMotion||this.options.layoutRoot)&&(t.delay=0,t.type=!1),this.startAnimation(t),this.setAnimationOrigin(e,c)}else t||Ig(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=s})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Jl(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Rg),this.animationId++)}getTransformTemplate(){const{visualElement:e}=this.options;return e&&e.getProps().transformTemplate}willUpdate(e=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked())return void(this.options.onExitComplete&&this.options.onExitComplete());if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&jg(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let i=0;i<this.path.length;i++){const e=this.path[i];e.shouldResetTransform=!0,e.updateScroll("snapshot"),e.options.layoutRoot&&e.willUpdate(!1)}const{layoutId:t,layout:r}=this.options;if(void 0===t&&!r)return;const s=this.getTransformTemplate();this.prevTransformTemplateValue=s?s(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}update(){this.updateScheduled=!1;if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(Pg);this.isUpdating||this.nodes.forEach(Ag),this.isUpdating=!1,this.nodes.forEach(Eg),this.nodes.forEach(_g),this.nodes.forEach(kg),this.clearAllSnapshots();const e=tc.now();Xl.delta=fl(0,1e3/60,e-Xl.timestamp),Xl.timestamp=e,Xl.isProcessing=!0,Ql.update.process(Xl),Ql.preRender.process(Xl),Ql.render.process(Xl),Xl.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Uh.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Tg),this.sharedNodes.forEach(Og)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Yl.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Yl.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){!this.snapshot&&this.instance&&(this.snapshot=this.measure(),!this.snapshot||Xp(this.snapshot.measuredBox.x)||Xp(this.snapshot.measuredBox.y)||(this.snapshot=void 0))}updateLayout(){if(!this.instance)return;if(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let r=0;r<this.path.length;r++){this.path[r].updateScroll()}const e=this.layout;this.layout=this.measure(!1),this.layoutCorrected={x:{min:0,max:0},y:{min:0,max:0}},this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:t}=this.options;t&&t.notify("LayoutMeasure",this.layout.layoutBox,e?e.layoutBox:void 0)}updateScroll(e="measure"){let t=Boolean(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&this.instance){const t=s(this.instance);this.scroll={animationId:this.root.animationId,phase:e,isRoot:t,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:t}}}resetTransform(){if(!i)return;const e=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,t=this.projectionDelta&&!dg(this.projectionDelta),r=this.getTransformTemplate(),s=r?r(this.latestValues,""):void 0,n=s!==this.prevTransformTemplateValue;e&&this.instance&&(t||om(this.latestValues)||n)&&(i(this.instance,s),this.shouldResetTransform=!1,this.scheduleRender())}measure(e=!0){const t=this.measurePageBox();let r=this.removeElementScroll(t);var s;return e&&(r=this.removeTransform(r)),Wg((s=r).x),Wg(s.y),{animationId:this.root.animationId,measuredBox:t,layoutBox:r,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:e}=this.options;if(!e)return{x:{min:0,max:0},y:{min:0,max:0}};const t=e.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(Vg))){const{scroll:e}=this.root;e&&(fm(t.x,e.offset.x),fm(t.y,e.offset.y))}return t}removeElementScroll(e){const t={x:{min:0,max:0},y:{min:0,max:0}};if(rg(t,e),this.scroll?.wasRoot)return t;for(let r=0;r<this.path.length;r++){const s=this.path[r],{scroll:i,options:n}=s;s!==this.root&&i&&n.layoutScroll&&(i.wasRoot&&rg(t,e),fm(t.x,i.offset.x),fm(t.y,i.offset.y))}return t}applyTransform(e,t=!1){const r={x:{min:0,max:0},y:{min:0,max:0}};rg(r,e);for(let s=0;s<this.path.length;s++){const e=this.path[s];!t&&e.options.layoutScroll&&e.scroll&&e!==e.root&&ym(r,{x:-e.scroll.offset.x,y:-e.scroll.offset.y}),om(e.latestValues)&&ym(r,e.latestValues)}return om(this.latestValues)&&ym(r,this.latestValues),r}removeTransform(e){const t={x:{min:0,max:0},y:{min:0,max:0}};rg(t,e);for(let r=0;r<this.path.length;r++){const e=this.path[r];if(!e.instance)continue;if(!om(e.latestValues))continue;am(e.latestValues)&&e.updateSnapshot();const s=sm();rg(s,e.measurePageBox()),lg(t,e.latestValues,e.snapshot?e.snapshot.layoutBox:void 0,s)}return om(this.latestValues)&&lg(t,this.latestValues),t}setTargetDelta(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(e){this.options={...this.options,...e,crossfade:void 0===e.crossfade||e.crossfade}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Xl.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(e=!1){const t=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=t.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=t.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=t.isSharedProjectionDirty);const r=Boolean(this.resumingFrom)||this!==t;if(!(e||r&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:s,layoutId:i}=this.options;if(this.layout&&(s||i)){if(this.resolvedRelativeTargetAt=Xl.timestamp,!this.targetDelta&&!this.relativeTarget){const e=this.getClosestProjectingParent();e&&e.layout&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},rm(this.relativeTargetOrigin,this.layout.layoutBox,e.layout.layoutBox),rg(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}var n,a,o;if(this.relativeTarget||this.targetDelta)if(this.target||(this.target={x:{min:0,max:0},y:{min:0,max:0}},this.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}}),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),n=this.target,a=this.relativeTarget,o=this.relativeParent.target,em(n.x,a.x,o.x),em(n.y,a.y,o.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):rg(this.target,this.layout.layoutBox),pm(this.target,this.targetDelta)):rg(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const e=this.getClosestProjectingParent();e&&Boolean(e.resumingFrom)===Boolean(this.resumingFrom)&&!e.options.layoutScroll&&e.target&&1!==this.animationProgress?(this.relativeParent=e,this.forceRelativeParentToResolveTarget(),this.relativeTarget={x:{min:0,max:0},y:{min:0,max:0}},this.relativeTargetOrigin={x:{min:0,max:0},y:{min:0,max:0}},rm(this.relativeTargetOrigin,this.target,e.target),rg(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(this.parent&&!am(this.parent.latestValues)&&!lm(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const e=this.getLead(),t=Boolean(this.resumingFrom)||this!==e;let r=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(r=!1),t&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Xl.timestamp&&(r=!1),r)return;const{layout:s,layoutId:i}=this.options;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!s&&!i)return;rg(this.layoutCorrected,this.layout.layoutBox);const n=this.treeScale.x,a=this.treeScale.y;!function(e,t,r,s=!1){const i=r.length;if(!i)return;let n,a;t.x=t.y=1;for(let o=0;o<i;o++){n=r[o],a=n.projectionDelta;const{visualElement:i}=n.options;i&&i.props.style&&"contents"===i.props.style.display||(s&&n.options.layoutScroll&&n.scroll&&n!==n.root&&ym(e,{x:-n.scroll.offset.x,y:-n.scroll.offset.y}),a&&(t.x*=a.x.scale,t.y*=a.y.scale,pm(e,a)),s&&om(n.latestValues)&&ym(e,n.latestValues))}t.x<gm&&t.x>mm&&(t.x=1),t.y<gm&&t.y>mm&&(t.y=1)}(this.layoutCorrected,this.treeScale,this.path,t),!e.layout||e.target||1===this.treeScale.x&&1===this.treeScale.y||(e.target=e.layout.layoutBox,e.targetWithTransforms={x:{min:0,max:0},y:{min:0,max:0}});const{target:o}=e;o?(this.projectionDelta&&this.prevProjectionDelta?(sg(this.prevProjectionDelta.x,this.projectionDelta.x),sg(this.prevProjectionDelta.y,this.projectionDelta.y)):this.createProjectionDeltas(),Zp(this.projectionDelta,this.layoutCorrected,o,this.latestValues),this.treeScale.x===n&&this.treeScale.y===a&&gg(this.projectionDelta.x,this.prevProjectionDelta.x)&&gg(this.projectionDelta.y,this.prevProjectionDelta.y)||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",o))):this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender())}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(e=!0){if(this.options.visualElement?.scheduleRender(),e){const e=this.getStack();e&&e.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDelta={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}},this.projectionDeltaWithTransform={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}}setAnimationOrigin(e,t=!1){const r=this.snapshot,s=r?r.latestValues:{},i={...this.latestValues},n={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!t;const a={x:{min:0,max:0},y:{min:0,max:0}},o=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),c=!l||l.members.length<=1,d=Boolean(o&&!c&&!0===this.options.crossfade&&!this.path.some(Lg));let h;this.animationProgress=0,this.mixTargetDelta=t=>{const r=t/1e3;var l,u,p,m,g,f;Dg(n.x,e.x,r),Dg(n.y,e.y,r),this.setTargetDelta(n),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rm(a,this.layout.layoutBox,this.relativeParent.layout.layoutBox),p=this.relativeTarget,m=this.relativeTargetOrigin,g=a,f=r,zg(p.x,m.x,g.x,f),zg(p.y,m.y,g.y,f),h&&(l=this.relativeTarget,u=h,hg(l.x,u.x)&&hg(l.y,u.y))&&(this.isProjectionDirty=!1),h||(h={x:{min:0,max:0},y:{min:0,max:0}}),rg(h,this.relativeTarget)),o&&(this.animationValues=i,function(e,t,r,s,i,n){i?(e.opacity=Lc(0,r.opacity??1,Qm(s)),e.opacityExit=Lc(t.opacity??1,0,Zm(s))):n&&(e.opacity=Lc(t.opacity??1,r.opacity??1,s));for(let a=0;a<Km;a++){const i=`border${Hm[a]}Radius`;let n=Xm(t,i),o=Xm(r,i);void 0===n&&void 0===o||(n||(n=0),o||(o=0),0===n||0===o||Jm(n)===Jm(o)?(e[i]=Math.max(Lc(Ym(n),Ym(o),s),0),(bc.test(o)||bc.test(n))&&(e[i]+="%")):e[i]=o)}(t.rotate||r.rotate)&&(e.rotate=Lc(t.rotate||0,r.rotate||0,s))}(i,s,this.latestValues,r,d,c)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(e){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Jl(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Yl.update(()=>{Lm.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Wh(0)),this.currentAnimation=function(e,t,r){const s=su(e)?e:Wh(e);return s.start(Ap("",s,t,r)),s.animation}(this.motionValue,[0,1e3],{...e,velocity:0,isSync:!0,onUpdate:t=>{this.mixTargetDelta(t),e.onUpdate&&e.onUpdate(t)},onStop:()=>{},onComplete:()=>{e.onComplete&&e.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const e=this.getLead();let{targetWithTransforms:t,target:r,layout:s,latestValues:i}=e;if(t&&r&&s){if(this!==e&&this.layout&&s&&Ug(this.options.animationType,this.layout.layoutBox,s.layoutBox)){r=this.target||{x:{min:0,max:0},y:{min:0,max:0}};const t=Xp(this.layout.layoutBox.x);r.x.min=e.target.x.min,r.x.max=r.x.min+t;const s=Xp(this.layout.layoutBox.y);r.y.min=e.target.y.min,r.y.max=r.y.min+s}rg(t,r),ym(t,i),Zp(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}registerSharedNode(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new fg);this.sharedNodes.get(e).add(t);const r=t.options.initialPromotionConfig;t.promote({transition:r?r.transition:void 0,preserveFollowOpacity:r&&r.shouldPreserveFollowOpacity?r.shouldPreserveFollowOpacity(t):void 0})}isLead(){const e=this.getStack();return!e||e.lead===this}getLead(){const{layoutId:e}=this.options;return e&&this.getStack()?.lead||this}getPrevLead(){const{layoutId:e}=this.options;return e?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:e}=this.options;if(e)return this.root.sharedNodes.get(e)}promote({needsReset:e,transition:t,preserveFollowOpacity:r}={}){const s=this.getStack();s&&s.promote(this,r),e&&(this.projectionDelta=void 0,this.needsReset=!0),t&&this.setOptions({transition:t})}relegate(){const e=this.getStack();return!!e&&e.relegate(this)}resetSkewAndRotation(){const{visualElement:e}=this.options;if(!e)return;let t=!1;const{latestValues:r}=e;if((r.z||r.rotate||r.rotateX||r.rotateY||r.rotateZ||r.skewX||r.skewY)&&(t=!0),!t)return;const s={};r.z&&bg("z",e,s,this.animationValues);for(let i=0;i<xg.length;i++)bg(`rotate${xg[i]}`,e,s,this.animationValues),bg(`skew${xg[i]}`,e,s,this.animationValues);e.render();for(const i in s)e.setStaticValue(i,s[i]),this.animationValues&&(this.animationValues[i]=s[i]);e.scheduleRender()}getProjectionStyles(e){if(!this.instance||this.isSVG)return;if(!this.isVisible)return yg;const t={visibility:""},r=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,t.opacity="",t.pointerEvents=cp(e?.pointerEvents)||"",t.transform=r?r(this.latestValues,""):"none",t;const s=this.getLead();if(!this.projectionDelta||!this.layout||!s.target){const t={};return this.options.layoutId&&(t.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,t.pointerEvents=cp(e?.pointerEvents)||""),this.hasProjected&&!om(this.latestValues)&&(t.transform=r?r({},""):"none",this.hasProjected=!1),t}const i=s.animationValues||s.latestValues;this.applyTransformsToTarget(),t.transform=function(e,t,r){let s="";const i=e.x.translate/t.x,n=e.y.translate/t.y,a=r?.z||0;if((i||n||a)&&(s=`translate3d(${i}px, ${n}px, ${a}px) `),1===t.x&&1===t.y||(s+=`scale(${1/t.x}, ${1/t.y}) `),r){const{transformPerspective:e,rotate:t,rotateX:i,rotateY:n,skewX:a,skewY:o}=r;e&&(s=`perspective(${e}px) ${s}`),t&&(s+=`rotate(${t}deg) `),i&&(s+=`rotateX(${i}deg) `),n&&(s+=`rotateY(${n}deg) `),a&&(s+=`skewX(${a}deg) `),o&&(s+=`skewY(${o}deg) `)}const o=e.x.scale*t.x,l=e.y.scale*t.y;return 1===o&&1===l||(s+=`scale(${o}, ${l})`),s||"none"}(this.projectionDeltaWithTransform,this.treeScale,i),r&&(t.transform=r(i,t.transform));const{x:n,y:a}=this.projectionDelta;t.transformOrigin=`${100*n.origin}% ${100*a.origin}% 0`,s.animationValues?t.opacity=s===this?i.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:i.opacityExit:t.opacity=s===this?void 0!==i.opacity?i.opacity:"":void 0!==i.opacityExit?i.opacityExit:0;for(const o in Uu){if(void 0===i[o])continue;const{correct:e,applyTo:r,isCSSVariable:n}=Uu[o],a="none"===t.transform?i[o]:e(i[o],s);if(r){const e=r.length;for(let s=0;s<e;s++)t[r[s]]=a}else n?this.options.visualElement.renderState.vars[o]=a:t[o]=a}return this.options.layoutId&&(t.pointerEvents=s===this?cp(e?.pointerEvents)||"":"none"),t}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(e=>e.currentAnimation?.stop()),this.root.nodes.forEach(Pg),this.root.sharedNodes.clear()}}}function _g(e){e.updateLayout()}function kg(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:i}=e.options,n=t.source!==e.layout.source;"size"===i?im(e=>{const s=n?t.measuredBox[e]:t.layoutBox[e],i=Xp(s);s.min=r[e].min,s.max=s.min+i}):Ug(i,t.layoutBox,r)&&im(s=>{const i=n?t.measuredBox[s]:t.layoutBox[s],a=Xp(r[s]);i.max=i.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[s].max=e.relativeTarget[s].min+a)});const a={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};Zp(a,r,t.layoutBox);const o={x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}};n?Zp(o,e.applyTransform(s,!0),t.measuredBox):Zp(o,r,t.layoutBox);const l=!dg(a);let c=!1;if(!e.resumeFrom){const s=e.getClosestProjectingParent();if(s&&!s.resumeFrom){const{snapshot:i,layout:n}=s;if(i&&n){const a={x:{min:0,max:0},y:{min:0,max:0}};rm(a,t.layoutBox,i.layoutBox);const o={x:{min:0,max:0},y:{min:0,max:0}};rm(o,r,n.layoutBox),pg(a,o)||(c=!0),s.options.layoutRoot&&(e.relativeTarget=o,e.relativeTargetOrigin=a,e.relativeParent=s)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:o,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:c})}else if(e.isLead()){const{onExitComplete:t}=e.options;t&&t()}e.options.transition=void 0}function Cg(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function Sg(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function Tg(e){e.clearSnapshot()}function Pg(e){e.clearMeasurements()}function Ag(e){e.isLayoutDirty=!1}function Eg(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function Ig(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function $g(e){e.resolveTargetDelta()}function Mg(e){e.calcProjection()}function Rg(e){e.resetSkewAndRotation()}function Og(e){e.removeLeadSnapshot()}function Dg(e,t,r){e.translate=Lc(t.translate,0,r),e.scale=Lc(t.scale,1,r),e.origin=t.origin,e.originPoint=t.originPoint}function zg(e,t,r,s){e.min=Lc(t.min,r.min,s),e.max=Lc(t.max,r.max,s)}function Lg(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}const Fg={duration:.45,ease:[.4,0,.1,1]},Bg=e=>"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),Ng=Bg("applewebkit/")&&!Bg("chrome/")?Math.round:wl;function Wg(e){e.min=Ng(e.min),e.max=Ng(e.max)}function Ug(e,t,r){return"position"===e||"preserve-aspect"===e&&(s=mg(t),i=mg(r),n=.2,!(Math.abs(s-i)<=n));var s,i,n}function Vg(e){return e!==e.root&&e.scroll?.wasRoot}const qg=wg({attachResizeListener:(e,t)=>Hp(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Gg={current:void 0},Hg=wg({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!Gg.current){const e=new qg({});e.mount(window),e.setOptions({layoutScroll:!0}),Gg.current=e}return Gg.current},resetTransform:(e,t)=>{e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:e=>Boolean("fixed"===window.getComputedStyle(e).position)}),Kg={pan:{Feature:class extends Vp{constructor(){super(...arguments),this.removePointerDownListener=wl}onPointerDown(e){this.session=new wm(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:bm(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:zm(e),onStart:zm(t),onMove:r,onEnd:(e,t)=>{delete this.session,s&&Yl.postRender(()=>s(e,t))}}}mount(){this.removePointerDownListener=Yp(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}},drag:{Feature:class extends Vp{constructor(e){super(e),this.removeGroupControls=wl,this.removeListeners=wl,this.controls=new Om(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wl}unmount(){this.removeGroupControls(),this.removeListeners()}},ProjectionNode:Hg,MeasureLayout:Um}};function Yg(e,t,r){const{props:s}=e;e.animationState&&s.whileHover&&e.animationState.setActive("whileHover","Start"===r);const i=s["onHover"+r];i&&Yl.postRender(()=>i(t,Kp(t)))}function Jg(e,t,r){const{props:s}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&s.whileTap&&e.animationState.setActive("whileTap","Start"===r);const i=s["onTap"+("End"===r?"":r)];i&&Yl.postRender(()=>i(t,Kp(t)))}const Xg=new WeakMap,Qg=new WeakMap,Zg=e=>{const t=Xg.get(e.target);t&&t(e)},ef=e=>{e.forEach(Zg)};function tf(e,t,r){const s=function({root:e,...t}){const r=e||document;Qg.has(r)||Qg.set(r,{});const s=Qg.get(r),i=JSON.stringify(t);return s[i]||(s[i]=new IntersectionObserver(ef,{root:e,...t})),s[i]}(t);return Xg.set(e,r),s.observe(e),()=>{Xg.delete(e),s.unobserve(e)}}const rf={some:0,all:1};const sf={inView:{Feature:class extends Vp{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:r,amount:s="some",once:i}=e,n={root:t?t.current:void 0,rootMargin:r,threshold:"number"==typeof s?s:rf[s]};return tf(this.node.current,n,e=>{const{isIntersecting:t}=e;if(this.isInView===t)return;if(this.isInView=t,i&&!t&&this.hasEnteredView)return;t&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",t);const{onViewportEnter:r,onViewportLeave:s}=this.node.getProps(),n=t?r:s;n&&n(e)})}mount(){this.startObserver()}update(){if("undefined"==typeof IntersectionObserver)return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(function({viewport:e={}},{viewport:t={}}={}){return r=>e[r]!==t[r]}(e,t))&&this.startObserver()}unmount(){}}},tap:{Feature:class extends Vp{mount(){const{current:e}=this.node;e&&(this.unmount=tu(e,(e,t)=>(Jg(this.node,t,"Start"),(e,{success:t})=>Jg(this.node,e,t?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}},focus:{Feature:class extends Vp{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=kl(Hp(this.node.current,"focus",()=>this.onFocus()),Hp(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}},hover:{Feature:class extends Vp{mount(){const{current:e}=this.node;e&&(this.unmount=function(e,t,r={}){const[s,i,n]=Gh(e,r),a=e=>{if(!Hh(e))return;const{target:r}=e,s=t(r,e);if("function"!=typeof s||!r)return;const n=e=>{Hh(e)&&(s(e),r.removeEventListener("pointerleave",n))};r.addEventListener("pointerleave",n,i)};return s.forEach(e=>{e.addEventListener("pointerenter",a,i)}),n}(e,(e,t)=>(Yg(this.node,t,"Start"),e=>Yg(this.node,e,"End"))))}unmount(){}}}},nf={layout:{ProjectionNode:Hg,MeasureLayout:Um}},af={current:null},of={current:!1};const lf=new WeakMap;const cf=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class df{scrapeMotionValuesFromProps(e,t,r){return{}}constructor({parent:e,props:t,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:i,visualState:n},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=th,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const e=tc.now();this.renderScheduledAt<e&&(this.renderScheduledAt=e,Yl.render(this.render,!1,!0))};const{latestValues:o,renderState:l}=n;this.latestValues=o,this.baseTarget={...o},this.initialValues=t.initial?{...o}:{},this.renderState=l,this.parent=e,this.props=t,this.presenceContext=r,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=Boolean(i),this.isControllingVariants=Au(t),this.isVariantNode=Eu(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(e&&e.current);const{willChange:c,...d}=this.scrapeMotionValuesFromProps(t,{},this);for(const h in d){const e=d[h];void 0!==o[h]&&su(e)&&e.set(o[h],!1)}}mount(e){this.current=e,lf.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((e,t)=>this.bindToMotionValue(t,e)),of.current||function(){if(of.current=!0,hl)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>af.current=e.matches;e.addListener(t),t()}else af.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||af.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Jl(this.notifyUpdate),Jl(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const r=Vd.has(e);r&&this.onBindTransform&&this.onBindTransform();const s=t.on("change",t=>{this.latestValues[e]=t,this.props.onUpdate&&Yl.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),i=t.on("renderRequest",this.scheduleRender);let n;window.MotionCheckAppearSync&&(n=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{s(),i(),n&&n(),t.owner&&t.stop()})}sortNodePosition(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}updateFeatures(){let e="animation";for(e in yu){const t=yu[e];if(!t)continue;const{isEnabled:r,Feature:s}=t;if(!this.features[e]&&s&&r(this.props)&&(this.features[e]=new s(this)),this.features[e]){const t=this.features[e];t.isMounted?t.update():(t.mount(),t.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):{x:{min:0,max:0},y:{min:0,max:0}}}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let r=0;r<cf.length;r++){const t=cf[r];this.propEventSubscriptions[t]&&(this.propEventSubscriptions[t](),delete this.propEventSubscriptions[t]);const s=e["on"+t];s&&(this.propEventSubscriptions[t]=this.on(t,s))}this.prevMotionValues=function(e,t,r){for(const s in t){const i=t[s],n=r[s];if(su(i))e.addValue(s,i);else if(su(n))e.addValue(s,Wh(i,{owner:e}));else if(n!==i)if(e.hasValue(s)){const t=e.getValue(s);!0===t.liveStyle?t.jump(i):t.hasAnimated||t.set(i)}else{const t=e.getStaticValue(s);e.addValue(s,Wh(void 0!==t?t:i,{owner:e}))}}for(const s in r)void 0===t[s]&&e.removeValue(s);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const r=this.values.get(e);t!==r&&(r&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let r=this.values.get(e);return void 0===r&&void 0!==t&&(r=Wh(null===t?void 0:t,{owner:this}),this.addValue(e,r)),r}readValue(e,t){let r=void 0===this.latestValues[e]&&this.current?this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options):this.latestValues[e];var s;return null!=r&&("string"==typeof r&&(yl(r)||bl(r))?r=parseFloat(r):(s=r,!au.find(kh(s))&&Oc.test(t)&&(r=Dh(e,t))),this.setBaseTarget(e,su(r)?r.get():r)),su(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){const{initial:t}=this.props;let r;if("string"==typeof t||"object"==typeof t){const s=lp(this.props,t,this.presenceContext?.custom);s&&(r=s[e])}if(t&&void 0!==r)return r;const s=this.getBaseTargetFromProps(this.props,e);return void 0===s||su(s)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:s}on(e,t){return this.events[e]||(this.events[e]=new Sl),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class hf extends df{constructor(){super(...arguments),this.KeyframeResolver=Lh}sortInstanceNodePosition(e,t){return 2&e.compareDocumentPosition(t)?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:r}){delete t[e],delete r[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;su(e)&&(this.childSubscription=e.on("change",e=>{this.current&&(this.current.textContent=`${e}`)}))}}function uf(e,{style:t,vars:r},s,i){Object.assign(e.style,t,i&&i.getProjectionStyles(s));for(const n in r)e.style.setProperty(n,r[n])}class pf extends hf{constructor(){super(...arguments),this.type="html",this.renderInstance=uf}readValueFromInstance(e,t){if(Vd.has(t))return this.projection?.isProjecting?Bd(t):((e,t)=>{const{transform:r="none"}=getComputedStyle(e);return Nd(r,t)})(e,t);{const s=(r=e,window.getComputedStyle(r)),i=(sc(t)?s.getPropertyValue(t):s[t])||0;return"string"==typeof i?i.trim():i}var r}measureInstanceViewportBox(e,{transformPagePoint:t}){return vm(e,t)}build(e,t,r){Hu(e,t,r.transformTemplate)}scrapeMotionValuesFromProps(e,t,r){return up(e,t,r)}}const mf=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);class gf extends hf{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=sm}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(Vd.has(t)){const e=Oh(t);return e&&e.default||0}return t=mf.has(t)?t:Du(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,r){return mp(e,t,r)}build(e,t,r){ep(e,t,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(e,t,r,s){!function(e,t,r,s){uf(e,t,void 0,s);for(const i in t.attrs)e.setAttribute(mf.has(i)?i:Du(i),t.attrs[i])}(e,t,0,s)}mount(e){this.isSVGTag=rp(e.tagName),super.mount(e)}}const ff=(e,t)=>np(e)?new gf(t):new pf(t,{allowProjection:e!==ks.Fragment}),xf=_u(fp({...Gp,...sf,...Kg,...nf},ff));function yf(e){const t=dl(()=>Wh(e)),{isStatic:r}=ks.useContext(ou);if(r){const[,r]=ks.useState(e);ks.useEffect(()=>t.on("change",r),[])}return t}function vf(e,t){const r=yf(t()),s=()=>r.set(t());return s(),ul(()=>{const t=()=>Yl.preRender(s,!1,!0),r=e.map(e=>e.on("change",t));return()=>{r.forEach(e=>e()),Jl(s)}}),r}function bf(e,t,r,s){if("function"==typeof e)return function(e){Bh.current=[],e();const t=vf(Bh.current,e);return Bh.current=void 0,t}(e);const i="function"==typeof t?t:function(...e){const t=!Array.isArray(e[0]),r=t?0:-1,s=e[0+r],i=_d(e[1+r],e[2+r],e[3+r]);return t?i(s):i}(t,r,s);return Array.isArray(e)?jf(e,i):jf([e],([e])=>i(e))}function jf(e,t){const r=dl(()=>[]);return vf(e,()=>{r.length=0;const s=e.length;for(let t=0;t<s;t++)r[t]=e[t].get();return t(r)})}function wf(e,t={}){const{isStatic:r}=ks.useContext(ou),s=()=>su(e)?e.get():e;if(r)return bf(s);const i=yf(s());return ks.useInsertionEffect(()=>function(e,t,r){const s=e.get();let i,n=null,a=s;const o="string"==typeof s?s.replace(/[\d.-]/g,""):void 0,l=()=>{n&&(n.stop(),n=null)},c=()=>{l(),n=new $d({keyframes:[nu(e.get()),nu(a)],velocity:e.getVelocity(),type:"spring",restDelta:.001,restSpeed:.01,...r,onUpdate:i})};let d;return e.attach((t,r)=>(a=t,i=e=>r(iu(e,o)),Yl.postRender(c),e.get()),l),su(t)&&(d=t.on("change",t=>e.set(iu(t,o))),e.on("destroy",d)),d}(i,e,t),[i,JSON.stringify(t)]),i}function _f(e,t){[...t].reverse().forEach(r=>{const s=e.getVariant(r);s&&jp(e,s),e.variantChildren&&e.variantChildren.forEach(e=>{_f(e,t)})})}function kf(){const e=new Set,t={subscribe:t=>(e.add(t),()=>{e.delete(t)}),start(t,r){const s=[];return e.forEach(e=>{s.push(Rp(e,t,{transitionOverride:r}))}),Promise.all(s)},set:t=>e.forEach(e=>{!function(e,t){Array.isArray(t)?_f(e,t):"string"==typeof t?_f(e,[t]):jp(e,t)}(e,t)}),stop(){e.forEach(e=>{!function(e){e.values.forEach(e=>e.stop())}(e)})},mount:()=>()=>{t.stop()}};return t}const Cf=function(){const e=dl(kf);return ul(e.mount,[]),e},Sf=({insights:e,onDismiss:t})=>{const r=l(),[s,a]=ks.useState([]),[d,u]=ks.useState(null);ks.useEffect(()=>(e.forEach((e,t)=>{setTimeout(()=>{a(t=>[...t,e])},200*t)}),()=>a([])),[e]);const p=e=>{switch(e){case"opportunity":return c.jsx($e,{});case"trend":return c.jsx(Ie,{});case"warning":return c.jsx(_e,{});case"tip":return c.jsx(L,{})}},m=e=>{switch(e){case"high":return{order:0,pulse:!0};case"medium":return{order:1,pulse:!1};case"low":return{order:2,pulse:!1}}};return c.jsxs(o,{sx:{position:"fixed",right:20,top:"50%",transform:"translateY(-50%)",width:320,maxHeight:"80vh",overflowY:"auto",pointerEvents:"none","&::-webkit-scrollbar":{width:0}},children:[c.jsx(gu,{children:s.sort((e,t)=>m(e.priority).order-m(t.priority).order).map((e,s)=>{const{pulse:l}=m(e.priority),g=(e=>{switch(e){case"opportunity":return r.palette.success.main;case"trend":return r.palette.info.main;case"warning":return r.palette.warning.main;case"tip":return r.palette.secondary.main}})(e.type);return c.jsx(xf.div,{initial:{x:100,opacity:0,scale:.8},animate:{x:0,opacity:1,scale:d===e.id?1.05:1,transition:{type:"spring",stiffness:300,damping:25}},exit:{x:100,opacity:0,scale:.8,transition:{duration:.2}},style:{marginBottom:16,pointerEvents:"all"},onHoverStart:()=>u(e.id),onHoverEnd:()=>u(null),children:c.jsxs(i,{sx:{position:"relative",p:2,background:n(r.palette.background.paper,.95),backdropFilter:"blur(20px)",border:`1px solid ${n(g,.3)}`,boxShadow:`0 8px 32px ${n(g,.1)}`,overflow:"visible",cursor:"pointer",transition:"all 0.3s ease","&:hover":{borderColor:g,boxShadow:`0 12px 48px ${n(g,.2)}`}},children:[l&&c.jsxs(c.Fragment,{children:[c.jsx(xf.div,{animate:{scale:[1,1.5,1],opacity:[.5,0,.5]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",top:-10,right:-10,width:20,height:20,borderRadius:"50%",background:g}}),c.jsx(o,{sx:{position:"absolute",top:-10,right:-10,width:20,height:20,borderRadius:"50%",background:g}})]}),c.jsx(f,{size:"small",onClick:r=>{var s;r.stopPropagation(),s=e.id,a(e=>e.filter(e=>e.id!==s)),t?.(s)},sx:{position:"absolute",top:4,right:4,opacity:.5,transition:"opacity 0.2s","&:hover":{opacity:1}},children:c.jsx(Ee,{fontSize:"small"})}),c.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",gap:2},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",width:40,height:40,borderRadius:"12px",background:n(g,.1),color:g,flexShrink:0,position:"relative",overflow:"visible"},children:[d===e.id&&c.jsx(xf.div,{initial:{scale:1,opacity:0},animate:{scale:1.5,opacity:1},exit:{scale:1,opacity:0},style:{position:"absolute",width:"100%",height:"100%",borderRadius:"12px",background:n(g,.2),filter:"blur(8px)"}}),p(e.type)]}),c.jsxs(o,{sx:{flex:1,pr:2},children:[c.jsx(h,{variant:"subtitle2",sx:{fontWeight:"bold",mb:.5,color:r.palette.text.primary},children:e.title}),c.jsx(h,{variant:"body2",sx:{color:r.palette.text.secondary,mb:e.action?1.5:0},children:e.description}),e.action&&c.jsx(xf.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:t=>{t.stopPropagation(),e.action?.onClick()},style:{padding:"6px 16px",borderRadius:20,border:"none",background:n(g,.1),color:g,fontSize:13,fontWeight:"bold",cursor:"pointer",transition:"all 0.2s ease"},onMouseEnter:e=>{e.currentTarget.style.background=n(g,.2)},onMouseLeave:e=>{e.currentTarget.style.background=n(g,.1)},children:e.action.label})]})]}),c.jsx(xf.div,{initial:{opacity:0},animate:{opacity:d===e.id?1:0},style:{position:"absolute",top:8,left:8,pointerEvents:"none"},children:c.jsx(q,{sx:{fontSize:16,color:r.palette.warning.main,filter:"drop-shadow(0 0 4px rgba(255, 193, 7, 0.5))"}})})]})},e.id)})}),c.jsx(xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},style:{position:"absolute",bottom:-60,left:"50%",transform:"translateX(-50%)",pointerEvents:"all"},children:c.jsx(H,{icon:c.jsx(q,{}),label:"AI Insights Active",size:"small",sx:{background:n(r.palette.background.paper,.9),backdropFilter:"blur(10px)",border:`1px solid ${n(r.palette.divider,.2)}`,"& .MuiChip-icon":{color:r.palette.warning.main}}})})]})};Sf.displayName="FloatingInsights";class Tf extends ks.Component{constructor(e){super(e),t(this,"handleReset",()=>{this.setState({hasError:!1,error:void 0})}),this.state={hasError:!1}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?this.props.fallback?c.jsx(c.Fragment,{children:this.props.fallback}):c.jsx(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",minHeight:"400px",p:3},children:c.jsxs(j,{sx:{p:4,maxWidth:500,textAlign:"center",backgroundColor:"background.paper"},children:[c.jsx(_e,{sx:{fontSize:48,color:"warning.main",mb:2}}),c.jsx(h,{variant:"h5",gutterBottom:!0,children:"Something went wrong"}),c.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"An error occurred while loading the dashboard. Please try refreshing the page."}),c.jsx(a,{variant:"contained",onClick:this.handleReset,sx:{mr:2},children:"Try Again"}),c.jsx(a,{variant:"outlined",onClick:()=>window.location.reload(),children:"Reload Page"})]})}):this.props.children}}const Pf=()=>{const e=l(),[t,r]=ks.useState(null),[s,i]=ks.useState(!1),[a,d]=ks.useState(null),[u,p]=ks.useState({key:"revenue",direction:"desc"}),[m,g]=ks.useState("galaxy"),x=yf(0),y=yf(0),v=wf(x,{stiffness:50,damping:20}),j=wf(y,{stiffness:50,damping:20}),[w,_]=ks.useState(!1),[k,C]=ks.useState(""),[S,T]=ks.useState([]);ks.useEffect(()=>{const e=()=>{T([{id:"1",type:"opportunity",title:"Cardiovascular Growth Spike",description:"Angioplasty procedures up 15% this quarter. Target hospitals in midwest region.",priority:"high",action:{label:"View Targets",onClick:()=>r(P[0])}},{id:"2",type:"trend",title:"Neurology Market Shift",description:"Deep Brain Stimulation becoming standard of care in 3 new states.",priority:"medium"},{id:"3",type:"warning",title:"Competitor Alert",description:"MedTech Corp launching competitive orthopedic line next month.",priority:"high",action:{label:"View Analysis",onClick:()=>{}}},{id:"4",type:"tip",title:"Optimize Territory Coverage",description:"AI suggests reallocating 2 reps to high-growth cardio territories.",priority:"medium"}])};e();const t=setInterval(e,3e4);return()=>clearInterval(t)},[]);const P=ks.useMemo(()=>[{id:"cardio",name:"Cardiovascular",procedures:[{id:"p1",name:"Angioplasty",revenue:25e5,volume:1500,growth:12,category:"cardio"},{id:"p2",name:"Stent Placement",revenue:32e5,volume:2e3,growth:15,category:"cardio"},{id:"p3",name:"Cardiac Catheterization",revenue:18e5,volume:3e3,growth:8,category:"cardio"}],marketSize:75e5,growth:11.67,opportunity:85,position:[-3,2,0],color:"#FF6B6B"},{id:"neuro",name:"Neurology",procedures:[{id:"p4",name:"Deep Brain Stimulation",revenue:45e5,volume:500,growth:25,category:"neuro"},{id:"p5",name:"Spinal Fusion",revenue:38e5,volume:1200,growth:18,category:"neuro"},{id:"p6",name:"Microdiscectomy",revenue:21e5,volume:2500,growth:10,category:"neuro"}],marketSize:104e5,growth:17.67,opportunity:92,position:[3,1,-2],color:"#4ECDC4"},{id:"ortho",name:"Orthopedics",procedures:[{id:"p7",name:"Total Knee Replacement",revenue:52e5,volume:2800,growth:20,category:"ortho"},{id:"p8",name:"Hip Replacement",revenue:48e5,volume:2400,growth:22,category:"ortho"},{id:"p9",name:"Arthroscopy",revenue:16e5,volume:4e3,growth:5,category:"ortho"}],marketSize:116e5,growth:15.67,opportunity:88,position:[0,-2,3],color:"#95E1D3"}],[]);ks.useEffect(()=>{const e=e=>{x.set((e.clientX-window.innerWidth/2)/100),y.set((e.clientY-window.innerHeight/2)/100)};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[x,y]);const A=ks.useMemo(()=>{if(!t)return[];const e=[...t.procedures];return e.sort((e,t)=>{const r=e[u.key],s=t[u.key];return"number"==typeof r&&"number"==typeof s?"asc"===u.direction?r-s:s-r:"asc"===u.direction?String(r).localeCompare(String(s)):String(s).localeCompare(String(r))}),e},[t,u]),E=({data:e,isSelected:t})=>{const[s,i]=ks.useState(!1),a=120+e.marketSize/1e5,l=100*e.position[0]+300,u=100*e.position[1]+300;return e.position[2],c.jsxs(xf.div,{style:{position:"absolute",left:l,top:u,width:a,height:a,cursor:"pointer",transformStyle:"preserve-3d"},animate:{rotateY:360,y:[0,-10,0],scale:s||t?1.2:1},transition:{rotateY:{duration:20,repeat:1/0,ease:"linear"},y:{duration:3,repeat:1/0,ease:"easeInOut"},scale:{duration:.3}},onMouseEnter:()=>{i(!0),d(e.id)},onMouseLeave:()=>{i(!1),d(null)},onClick:()=>r(e),whileHover:{scale:1.1},whileTap:{scale:.95},children:[c.jsx(xf.div,{style:{position:"absolute",inset:-20,borderRadius:"50%",background:`radial-gradient(circle, ${e.color}40, transparent 70%)`,filter:"blur(20px)"},animate:{scale:[1,1.2,1],opacity:[.3,.7,.3]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),c.jsxs(o,{sx:{width:"100%",height:"100%",borderRadius:"50%",background:`radial-gradient(circle at 30% 30%, ${n("#fff",.3)}, ${e.color})`,border:`3px solid ${e.color}`,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden",boxShadow:`0 0 ${s||t?40:20}px ${n(e.color,.5)}`,"&::before":{content:'""',position:"absolute",top:"15%",left:"25%",width:"40%",height:"40%",background:"radial-gradient(circle, rgba(255,255,255,0.6), transparent 70%)",borderRadius:"50%",filter:"blur(5px)"}},children:[c.jsx(h,{variant:"h6",sx:{color:"white",fontWeight:"bold",textShadow:"0 2px 8px rgba(0,0,0,0.8)",mb:1,textAlign:"center",px:1},children:e.name}),c.jsxs(h,{variant:"body2",sx:{color:"white",fontWeight:"bold",textShadow:"0 1px 4px rgba(0,0,0,0.8)"},children:["$",(e.marketSize/1e6).toFixed(1),"M"]}),c.jsxs(h,{variant:"caption",sx:{color:"white",fontWeight:"bold",textShadow:"0 1px 4px rgba(0,0,0,0.8)"},children:[e.growth.toFixed(1),"% growth"]})]}),e.opportunity>80&&c.jsx(xf.div,{style:{position:"absolute",inset:-15,borderRadius:"50%",border:`2px solid ${n(e.color,.6)}`,borderTopColor:e.color,borderRightColor:e.color},animate:{rotateZ:360},transition:{duration:8,repeat:1/0,ease:"linear"}})]})},I=()=>{const t=bf(v,[-10,10],[-10,10]),r=bf(j,[-10,10],[10,-10]);return c.jsx(xf.div,{style:{position:"absolute",top:20,right:20,transformStyle:"preserve-3d",rotateX:r,rotateY:t},children:c.jsxs(xf.div,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>i(!s),style:{width:200,height:80,borderRadius:40,background:s?`linear-gradient(135deg, ${e.palette.error.main}, ${e.palette.warning.main})`:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,display:"flex",alignItems:"center",justifyContent:"space-between",padding:"10px 20px",cursor:"pointer",boxShadow:"0 10px 30px rgba(0,0,0,0.3)",backdropFilter:"blur(10px)"},children:[c.jsx(xf.div,{animate:{x:s?100:0},transition:{type:"spring",stiffness:300,damping:20},style:{width:60,height:60,borderRadius:30,background:"white",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 5px 15px rgba(0,0,0,0.2)"},children:s?c.jsx(b,{sx:{color:e.palette.warning.main}}):c.jsx(Oe,{sx:{color:e.palette.primary.main}})}),c.jsx(h,{variant:"body2",sx:{position:"absolute",left:s?20:"auto",right:s?"auto":20,color:"white",fontWeight:"bold",userSelect:"none"},children:s?"SALES":"INTEL"})]})})},$=()=>c.jsx(o,{sx:{p:3},children:c.jsx(xf.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{duration:.5},children:P.map((t,r)=>c.jsx(xf.div,{initial:{x:-100,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*r},style:{marginBottom:24},children:c.jsxs(o,{sx:{background:`linear-gradient(135deg, ${n(t.color,.1)} 0%, ${n(t.color,.05)} 100%)`,borderRadius:4,border:`2px solid ${n(t.color,.3)}`,p:3,position:"relative",overflow:"hidden"},children:[c.jsx(o,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at ${a===t.id?"50%":"0%"} 50%, ${n(t.color,.2)} 0%, transparent 70%)`,transition:"all 0.5s ease",pointerEvents:"none"}}),c.jsxs(o,{sx:{position:"relative",zIndex:1},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[c.jsx(ie,{sx:{mr:2,color:t.color}}),c.jsx(h,{variant:"h5",sx:{fontWeight:"bold",color:t.color},children:t.name}),c.jsxs(o,{sx:{ml:"auto",display:"flex",gap:2},children:[c.jsx(Pe,{title:"Market Size",children:c.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(b,{sx:{fontSize:20,mr:.5}}),c.jsxs(h,{variant:"body2",children:["$",(t.marketSize/1e6).toFixed(1),"M"]})]})}),c.jsx(Pe,{title:"Growth Rate",children:c.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[c.jsx($e,{sx:{fontSize:20,mr:.5,color:e.palette.success.main}}),c.jsxs(h,{variant:"body2",children:[t.growth.toFixed(1),"%"]})]})}),c.jsx(Pe,{title:"Opportunity Score",children:c.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(De,{sx:{fontSize:20,mr:.5,color:e.palette.warning.main}}),c.jsx(h,{variant:"body2",children:t.opportunity})]})})]})]}),c.jsxs(o,{sx:{mt:2},children:[c.jsx(o,{sx:{display:"flex",gap:1,mb:2},children:["name","revenue","volume","growth"].map(e=>c.jsx(f,{size:"small",onClick:()=>(e=>{p(t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"}))})(e),sx:{background:u.key===e?n(t.color,.2):"transparent","&:hover":{background:n(t.color,.3)}},children:c.jsx(Pe,{title:`Sort by ${e}`,children:c.jsx(ze,{sx:{fontSize:16}})})},e))}),c.jsx(o,{sx:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:2},children:t.procedures.sort((e,t)=>{const r=e[u.key],s=t[u.key];return"number"==typeof r&&"number"==typeof s?"asc"===u.direction?r-s:s-r:"asc"===u.direction?String(r).localeCompare(String(s)):String(s).localeCompare(String(r))}).map((r,i)=>c.jsx(xf.div,{initial:{y:20,opacity:0},animate:{y:0,opacity:1},transition:{delay:.05*i},whileHover:{scale:1.02},onHoverStart:()=>d(r.id),onHoverEnd:()=>d(null),children:c.jsxs(o,{sx:{p:2,borderRadius:2,background:n(e.palette.background.paper,.8),border:`1px solid ${n(t.color,.2)}`,backdropFilter:"blur(10px)",transition:"all 0.3s ease","&:hover":{borderColor:t.color,boxShadow:`0 0 20px ${n(t.color,.3)}`}},children:[c.jsx(h,{variant:"subtitle1",sx:{fontWeight:"bold",mb:1},children:r.name}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(o,{children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Revenue"}),c.jsxs(h,{variant:"body2",sx:{fontWeight:"bold"},children:["$",(r.revenue/1e6).toFixed(2),"M"]})]}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Volume"}),c.jsx(h,{variant:"body2",sx:{fontWeight:"bold"},children:r.volume.toLocaleString()})]}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Growth"}),c.jsxs(h,{variant:"body2",sx:{fontWeight:"bold",color:r.growth>15?e.palette.success.main:e.palette.text.primary},children:[r.growth,"%"]})]})]}),s&&c.jsx(xf.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},transition:{duration:.3},children:c.jsxs(o,{sx:{mt:2,pt:2,borderTop:`1px solid ${n(t.color,.2)}`},children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Sales Actions"}),c.jsxs(o,{sx:{display:"flex",gap:1,mt:1},children:[c.jsx(xf.button,{whileHover:{scale:1.05},whileTap:{scale:.95},style:{padding:"4px 12px",borderRadius:16,border:"none",background:n(e.palette.primary.main,.1),color:e.palette.primary.main,fontSize:12,cursor:"pointer"},children:"Contact Lead"}),c.jsx(xf.button,{whileHover:{scale:1.05},whileTap:{scale:.95},style:{padding:"4px 12px",borderRadius:16,border:"none",background:n(e.palette.secondary.main,.1),color:e.palette.secondary.main,fontSize:12,cursor:"pointer"},children:"Schedule Demo"})]})]})})]})},r.id))})]})]})]})},t.id))})}),M=ks.useCallback(()=>{_(!0),setTimeout(()=>{_(!1),C("Show me high growth procedures")},2e3)},[]);return c.jsxs(o,{sx:{minHeight:"100vh",position:"relative",overflow:"hidden"},children:[c.jsx(o,{sx:{position:"fixed",top:0,left:0,right:0,bottom:0,background:`radial-gradient(circle at ${50+v.get()}% ${50+j.get()}%, ${n(e.palette.primary.main,.1)} 0%, transparent 50%)`,transition:"background 0.3s ease",pointerEvents:"none"}}),c.jsx(xf.div,{style:{position:"fixed",top:0,left:0,right:0,bottom:0,pointerEvents:"none"},animate:{background:[`radial-gradient(circle at 20% 80%, ${n(e.palette.secondary.main,.05)} 0%, transparent 50%)`,`radial-gradient(circle at 80% 20%, ${n(e.palette.secondary.main,.05)} 0%, transparent 50%)`,`radial-gradient(circle at 20% 80%, ${n(e.palette.secondary.main,.05)} 0%, transparent 50%)`]},transition:{duration:10,repeat:1/0,ease:"linear"}}),c.jsx(I,{}),c.jsx(Sf,{insights:S,onDismiss:e=>T(t=>t.filter(t=>t.id!==e))}),c.jsx(Me,{color:"primary",onClick:M,sx:{position:"fixed",bottom:20,right:20,background:w?`linear-gradient(135deg, ${e.palette.error.main}, ${e.palette.warning.main})`:`linear-gradient(135deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,animation:w?"pulse 1s infinite":"none","@keyframes pulse":{"0%":{transform:"scale(1)"},"50%":{transform:"scale(1.1)"},"100%":{transform:"scale(1)"}}},children:c.jsx(Re,{})}),c.jsx(xf.div,{initial:{y:-100},animate:{y:k?0:-100},transition:{type:"spring",stiffness:300,damping:30},style:{position:"fixed",top:80,left:"50%",transform:"translateX(-50%)",width:"60%",maxWidth:600,zIndex:1e3},children:c.jsx(o,{sx:{p:2,background:n(e.palette.background.paper,.95),backdropFilter:"blur(20px)",borderRadius:3,border:`1px solid ${n(e.palette.divider,.2)}`,boxShadow:"0 8px 32px rgba(0,0,0,0.1)"},children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsx(Ce,{}),c.jsx(h,{variant:"body1",sx:{flex:1},children:k}),c.jsx(f,{size:"small",onClick:()=>C(""),children:"Ã—"})]})})}),c.jsx(o,{sx:{position:"absolute",top:20,left:20,display:"flex",gap:1},children:["galaxy","matrix","flow"].map(t=>c.jsx(xf.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>g(t),style:{padding:"8px 16px",borderRadius:20,border:"none",background:m===t?e.palette.primary.main:n(e.palette.background.paper,.8),color:m===t?"white":e.palette.text.primary,cursor:"pointer",textTransform:"capitalize"},children:t},t))}),c.jsx(gu,{mode:"wait",children:"galaxy"===m?c.jsxs(xf.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{height:"100vh"},children:[c.jsx(Tf,{children:c.jsxs(o,{sx:{position:"absolute",inset:0,background:"linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 50%, #16213e 100%)",overflow:"hidden"},children:[Array.from({length:100},(e,t)=>c.jsx(xf.div,{style:{position:"absolute",left:100*Math.random()+"%",top:100*Math.random()+"%",width:3*Math.random()+1,height:3*Math.random()+1,background:"#ffffff",borderRadius:"50%",boxShadow:"0 0 6px #ffffff"},animate:{opacity:[.3,1,.3],scale:[.8,1.2,.8]},transition:{duration:3*Math.random()+2,repeat:1/0,ease:"easeInOut",delay:2*Math.random()}},t)),P.map(e=>c.jsx(E,{data:e,isSelected:t?.id===e.id},e.id))]})}),t&&c.jsxs(xf.div,{initial:{x:400,opacity:0},animate:{x:0,opacity:1},exit:{x:400,opacity:0},style:{position:"absolute",right:0,top:120,bottom:0,width:400,background:n(e.palette.background.paper,.95),backdropFilter:"blur(20px)",borderLeft:`1px solid ${n(e.palette.divider,.2)}`,padding:24,overflowY:"auto"},children:[c.jsx(f,{onClick:()=>r(null),sx:{position:"absolute",right:16,top:16},children:"Ã—"}),c.jsx(h,{variant:"h4",sx:{mb:3,color:t.color},children:t.name}),c.jsxs(o,{sx:{mb:3},children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Market Size"}),c.jsxs(h,{variant:"h5",children:["$",(t.marketSize/1e6).toFixed(1),"M"]})]}),c.jsxs(o,{sx:{mb:3},children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Growth Rate"}),c.jsxs(h,{variant:"h5",sx:{color:e.palette.success.main},children:[t.growth.toFixed(1),"%"]})]}),c.jsx(h,{variant:"h6",sx:{mb:2},children:"Procedures"}),A.map((e,r)=>c.jsx(xf.div,{initial:{x:50,opacity:0},animate:{x:0,opacity:1},transition:{delay:.1*r},children:c.jsxs(o,{sx:{p:2,mb:2,borderRadius:2,background:n(t.color,.05),border:`1px solid ${n(t.color,.2)}`},children:[c.jsx(h,{variant:"subtitle1",children:e.name}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[c.jsxs(h,{variant:"caption",children:["Revenue: $",(e.revenue/1e6).toFixed(2),"M"]}),c.jsxs(h,{variant:"caption",children:["Growth: ",e.growth,"%"]})]})]})},e.id))]})]},"galaxy"):"matrix"===m?c.jsx(xf.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:c.jsx($,{})},"matrix"):c.jsx(xf.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:c.jsx(o,{sx:{p:3},children:c.jsx(h,{variant:"h4",children:"Flow View Coming Soon..."})})},"flow")})]})};Pf.displayName="QuantumMarketDashboard";var Af=(e=>(e[e.DEBUG=0]="DEBUG",e[e.INFO=1]="INFO",e[e.WARN=2]="WARN",e[e.ERROR=3]="ERROR",e[e.FATAL=4]="FATAL",e))(Af||{});class Ef{constructor(){t(this,"colors",{[Af.DEBUG]:"[36m",[Af.INFO]:"[32m",[Af.WARN]:"[33m",[Af.ERROR]:"[31m",[Af.FATAL]:"[35m"}),t(this,"levelNames",{[Af.DEBUG]:"DEBUG",[Af.INFO]:"INFO",[Af.WARN]:"WARN",[Af.ERROR]:"ERROR",[Af.FATAL]:"FATAL"})}log(e){}}const If=class e{constructor(){t(this,"transports",[]),t(this,"minLevel",Af.INFO),t(this,"isDevelopment",!1),t(this,"localLogs",[]),t(this,"maxLocalLogs",1e3),this.isDevelopment&&this.addTransport(new Ef),this.minLevel=Af.ERROR}static getInstance(){return e.instance||(e.instance=new e),e.instance}addTransport(e){this.transports.push(e)}removeTransport(e){this.transports=this.transports.filter(t=>t!==e)}setMinLevel(e){this.minLevel=e}shouldLog(e){return e>=this.minLevel}log(e,t,r){if(!this.shouldLog(e))return;const s={level:e,message:t,timestamp:(new Date).toISOString(),data:r};this.storeLocalLog(s),this.transports.forEach(e=>{try{e.log(s)}catch(t){}})}debug(e,t){this.log(Af.DEBUG,e,t)}info(e,t){this.log(Af.INFO,e,t)}warn(e,t){this.log(Af.WARN,e,t)}error(e,t){this.log(Af.ERROR,e,t)}fatal(e,t){this.log(Af.FATAL,e,t)}getLocalLogs(){return[...this.localLogs]}clearLocalLogs(){this.localLogs=[]}storeLocalLog(e){this.localLogs.push(e),this.localLogs.length>this.maxLocalLogs&&this.localLogs.shift()}logRequest(e,t,r){this.debug(`API Request: ${e} ${t}`,{method:e,url:t,data:r})}logResponse(e,t,r,s){this.debug(`API Response: ${e} ${t} - ${r}`,{method:e,url:t,status:r,data:s})}};t(If,"instance");const $f=If.getInstance();function Mf(e){return function(e){return e instanceof Error}(e)||function(e){return"object"==typeof e&&null!==e&&"message"in e&&"string"==typeof e.message}(e)?e.message:"string"==typeof e?e:"An unknown error occurred"}const Rf=new Map;const Of=new class{async searchWithIntelligence(e,t={}){const r=`${e}-${JSON.stringify(t)}`,s=this.getCached(r);if(s)return s;try{const s=this.enhanceQuery(e,t.industry),i=await this.performSearch(s,t.limit||20),n=await this.categorizeResults(i,t.industry),a=await this.extractTrends(i,e),o=await this.suggestCategories(i,t.industry),l={query:e,results:n,trends:a,categories:o,sentiment:this.analyzeSentiment(i),timestamp:new Date};return this.setCache(r,l),t.includeAnalytics&&await this.storeSearchAnalytics(e,l),l}catch(i){throw $f.error("Market intelligence search failed",{error:Mf(i)}),i}}async discoverEmergingCategories(e,t="month"){const r=this.getIndustryTrendQueries(e),s=[];for(const n of r)try{const t=await this.performSearch(n,50),r=await this.suggestCategories(t,e);s.push(...r)}catch(i){$f.error("Failed to discover categories for query",{query:n,error:Mf(i)})}return this.rankCategories(s)}async getCompetitiveIntelligence(e,t){const r=[`${e} latest news ${t}`,`${e} product launch announcement`,`${e} innovation technology ${t}`,`${e} market share revenue`],s=[];for(const n of r)try{const e=await this.performSearch(n,10);s.push(...e)}catch(i){$f.error("Failed to get intelligence for query",{query:n,error:Mf(i)})}return this.analyzeCompetitiveData(e,s)}async getProcedureTrends(e,t){const r=[`${e} market growth trends ${(new Date).getFullYear()}`,`${e} innovations technology advances`,`${e} patient demand statistics`,`${e} clinical studies research`],s=[];for(const n of r)try{const e=await this.performSearch(n,15);s.push(...e)}catch(i){$f.error("Failed to get trends for query",{query:n,error:Mf(i)})}return this.analyzeProcedureTrends(e,s)}async performSearch(e,t){const r=await Fs.get("https://osbackend-zl1h.onrender.com/api/search/brave",{params:{query:e,limit:t}});return(r.data.web?.results||r.data.results||[]).map(e=>({title:e.title,url:e.url,description:e.description||e.snippet||"",relevanceScore:e.relevance_score||.5,publishedDate:e.page_age||e.published_date,source:e.profile?.name||e.source||this.extractDomain(e.url)}))}enhanceQuery(e,t){const r={dental:["dentistry","dental practice","oral health","dental technology"],aesthetic:["aesthetic medicine","cosmetic procedures","medical aesthetics","beauty technology"]};if(t&&r[t]){const s=r[t];return`${e} ${s[Math.floor(Math.random()*s.length)]}`}return e}async categorizeResults(e,t){const r="dental"===t?"dental_procedure_categories":"aesthetic_categories",{data:s}=await nl.from(r).select("name"),i=s?.map(e=>e.name.toLowerCase())||[];return e.map(e=>{const t=`${e.title} ${e.description}`.toLowerCase(),r=i.find(e=>t.includes(e));return{...e,category:r,tags:this.extractTags(t)}})}async suggestCategories(e,t){const r=new Map,s=this.getCategoryKeywords(t);e.forEach(e=>{const t=`${e.title} ${e.description}`.toLowerCase();s.forEach(e=>{t.includes(e)&&r.set(e,(r.get(e)||0)+1)})});const i=[];return r.forEach((t,r)=>{t>=2&&i.push({name:this.formatCategoryName(r),confidence:Math.min(t/e.length,1),relatedTerms:this.findRelatedTerms(r,e),marketPotential:t>5?"high":t>3?"medium":"low"})}),i.sort((e,t)=>t.confidence-e.confidence).slice(0,5)}extractTrends(e,t){const r=[],s=["growth","increase","surge","rise","demand","popular","emerging"];return e.forEach(i=>{const n=`${i.title} ${i.description}`.toLowerCase();s.forEach(s=>{if(n.includes(s)){const s=n.match(/(\d+)%?\s*(growth|increase|surge)/);s&&r.push({term:t,volume:e.length,growth:parseFloat(s[1]),category:i.category||"general",timeframe:this.extractTimeframe(n)})}})}),r}analyzeSentiment(e){let t=0,r=0,s=0;const i=["success","growth","innovative","breakthrough","advanced","improved","effective"],n=["challenge","decline","risk","concern","problem","issue","difficult"];e.forEach(e=>{const a=`${e.title} ${e.description}`.toLowerCase(),o=i.filter(e=>a.includes(e)).length,l=n.filter(e=>a.includes(e)).length;o>l?t++:l>o?r++:s++});const a=e.length||1;return{positive:t/a,neutral:s/a,negative:r/a,overall:t>r?"positive":r>t?"negative":"neutral"}}async storeSearchAnalytics(e,t){try{$f.debug("Search analytics tracking skipped",{query:e,resultCount:t.results.length})}catch(r){$f.error("Failed to store search analytics",{error:Mf(r)})}}getCached(e){const t=Rf.get(e);return t&&Date.now()-t.timestamp<18e5?t.data:null}setCache(e,t){Rf.set(e,{data:t,timestamp:Date.now()})}extractDomain(e){try{return new URL(e).hostname.replace("www.","")}catch{return"unknown"}}extractTags(e){return["technology","innovation","research","clinical","patient care","market growth","regulation","safety","efficacy","cost-effective"].filter(t=>e.includes(t))}getCategoryKeywords(e){const t=["technology","procedure","treatment","therapy","solution"];return"dental"===e?[...t,"implant","orthodontic","endodontic","periodontal","restorative","cosmetic dentistry","oral surgery","digital dentistry"]:"aesthetic"===e?[...t,"injectable","laser","skin","body contouring","facial","minimally invasive","regenerative","anti-aging"]:t}formatCategoryName(e){return e.split(" ").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}findRelatedTerms(e,t){const r=new Set,s=e.toLowerCase();return t.forEach(e=>{const t=`${e.title} ${e.description}`.toLowerCase();if(t.includes(s)){const e=t.split(/\s+/),i=e.findIndex(e=>e.includes(s));if(-1!==i)for(let t=Math.max(0,i-3);t<Math.min(e.length,i+4);t++)t!==i&&e[t].length>4&&r.add(e[t])}}),Array.from(r).slice(0,5)}extractTimeframe(e){return["2025","2024","2023","this year","last year","quarterly","monthly"].find(t=>e.includes(t))||"recent"}getIndustryTrendQueries(e){const t=(new Date).getFullYear();return"dental"===e?[`emerging dental technologies ${t}`,"new dental procedures innovations","dental market trends growth areas","digital dentistry advancements","AI in dentistry applications"]:[`emerging aesthetic procedures ${t}`,"new cosmetic treatments innovations","aesthetic medicine trends growth","non-invasive beauty technologies","regenerative aesthetics advances"]}rankCategories(e){const t=new Map;return e.forEach(e=>{const r=t.get(e.name);r?(r.confidence=Math.max(r.confidence,e.confidence),r.relatedTerms=[...new Set([...r.relatedTerms,...e.relatedTerms])]):t.set(e.name,e)}),Array.from(t.values()).sort((e,t)=>t.confidence-e.confidence).slice(0,10)}analyzeCompetitiveData(e,t){const r=t.filter(e=>e.title.toLowerCase().includes("news")||e.description.toLowerCase().includes("announce")),s=t.filter(e=>e.title.toLowerCase().includes("launch")||e.description.toLowerCase().includes("introduce")),i=this.extractInnovations(t),n=this.analyzeSentiment(t);return{company:e,insights:{recentNews:r.slice(0,5),productLaunches:s.slice(0,3),marketPosition:this.determineMarketPosition(t),innovations:i,sentiment:n}}}extractInnovations(e){const t=new Set,r=["AI","machine learning","automation","digital","smart","advanced"];return e.forEach(e=>{const s=`${e.title} ${e.description}`;r.forEach(e=>{if(s.includes(e)){const r=s.split(".").find(t=>t.includes(e));r&&t.add(r.trim())}})}),Array.from(t).slice(0,5)}determineMarketPosition(e){const t={leader:["leader","leading","top","best","premier"],challenger:["growing","emerging","innovative","disruptive"],niche:["specialized","focused","unique","specific"]};let r=0,s=0,i=0;return e.forEach(e=>{const n=`${e.title} ${e.description}`.toLowerCase();t.leader.forEach(e=>{n.includes(e)&&r++}),t.challenger.forEach(e=>{n.includes(e)&&s++}),t.niche.forEach(e=>{n.includes(e)&&i++})}),r>s&&r>i?"Market Leader":s>i?"Market Challenger":"Niche Player"}analyzeProcedureTrends(e,t){const r=this.extractTrends(t,e),s=this.extractInnovations(t),i=new Set,n=["procedure","treatment","therapy","technique"];t.forEach(t=>{const r=`${t.title} ${t.description}`;n.forEach(t=>{const s=new RegExp(`(\\w+\\s+)?${t}`,"gi"),n=r.match(s);n&&n.forEach(t=>{const r=t.trim().toLowerCase();r!==e.toLowerCase()&&r.length>5&&i.add(this.formatCategoryName(r))})})});const a=this.analyzeSentiment(t),o=r.reduce((e,t)=>e+t.growth,0)/(r.length||1);let l="Stable";return"positive"===a.overall&&o>5?l="Strong Growth Expected":"positive"===a.overall?l="Moderate Growth Expected":"negative"===a.overall&&(l="Challenging Market Conditions"),{trends:r,relatedProcedures:Array.from(i).slice(0,5),marketOutlook:l,innovations:s}}},Df=({industry:e,onCategorySelect:t,onNewCategoryDiscovered:r})=>{const[s,n]=ks.useState([]),[d,u]=ks.useState([]),[p,m]=ks.useState(!0),[g,x]=ks.useState(!1),[y,b]=ks.useState(null),w=l(),_=async()=>{try{b(null);const t="dental"===e?"dental_procedure_categories":"aesthetic_categories",{data:s,error:i}=await nl.from(t).select("*").order("name");if(i)throw i;const a=await Promise.all((s||[]).map(async t=>{try{const r=await Of.searchWithIntelligence(`${t.name} ${e} market trends growth innovations`,{industry:e,searchType:"research",limit:10});let s="stable";"positive"===r.sentiment.overall&&r.trends.some(e=>e.growth>5)?s="up":"negative"===r.sentiment.overall&&(s="down");const i=["AI","digital","automated","smart","advanced","innovative"],n=r.results.filter(e=>i.some(t=>e.title.toLowerCase().includes(t.toLowerCase())||e.description.toLowerCase().includes(t.toLowerCase()))).length,a=Math.min(n/r.results.length*100,100);return{...t,emerging_subcategories:r.categories.filter(e=>e.confidence>.5),trend_direction:s,innovation_score:a,last_updated:new Date}}catch(r){return t}}));n(a);const o=await Of.discoverEmergingCategories(e);u(o),r&&o.forEach(e=>{e.confidence>.8&&"high"===e.marketPotential&&r(e)})}catch(t){b("Failed to load category insights. Please try again.")}finally{m(!1),x(!1)}};ks.useEffect(()=>{_()},[e]);const k=()=>{x(!0),_()},C=e=>{switch(e){case"up":return c.jsx(We,{color:"success"});case"down":return c.jsx(Ne,{color:"error"});default:return null}},S=e=>e?e>70?"success":e>40?"warning":"default":"default";return p?c.jsx(i,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[c.jsx(q,{sx:{mr:1}}),c.jsx(h,{variant:"h6",children:"Category Intelligence"})]}),c.jsx(A,{container:!0,spacing:2,children:[1,2,3].map(e=>c.jsx(A,{item:!0,xs:12,md:4,children:c.jsx(Le,{variant:"rectangular",height:150})},e))})]})}):c.jsxs(i,{children:[c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(q,{sx:{mr:1},color:"primary"}),c.jsxs(h,{variant:"h6",children:["dental"===e?"Dental":"Aesthetic"," Category Intelligence"]})]}),c.jsx(Pe,{title:"Refresh insights",children:c.jsx(f,{onClick:k,disabled:g,children:c.jsx(Fe,{className:g?"rotating":""})})})]}),y&&c.jsxs(R,{severity:"error",sx:{mb:2},children:[y,c.jsx(a,{size:"small",onClick:k,sx:{ml:2},children:"Retry"})]}),d.length>0&&c.jsxs(R,{severity:"info",icon:c.jsx(Be,{}),sx:{mb:3},children:[c.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[d.length," Emerging Categories Detected"]}),c.jsx(o,{sx:{display:"flex",gap:1,flexWrap:"wrap",mt:1},children:d.slice(0,5).map((e,t)=>c.jsx(H,{label:e.name,size:"small",color:S(100*e.confidence),icon:c.jsx($e,{})},t))})]}),c.jsx(A,{container:!0,spacing:2,children:s.map(e=>c.jsx(A,{item:!0,xs:12,md:6,lg:4,children:c.jsxs(j,{elevation:2,sx:{p:2,cursor:"pointer",transition:"all 0.3s","&:hover":{elevation:4,transform:"translateY(-2px)",bgcolor:w.palette.action.hover}},onClick:()=>t?.(e.id),children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"start",mb:1},children:[c.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:e.name}),C(e.trend_direction)]}),(e.market_size_usd_millions||e.avg_growth_rate)&&c.jsxs(o,{sx:{mb:2},children:[e.market_size_usd_millions&&c.jsxs(h,{variant:"body2",color:"text.secondary",children:["Market Size: $",(e.market_size_usd_millions/1e3).toFixed(1),"B"]}),e.avg_growth_rate&&c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5},children:[c.jsx(Ie,{fontSize:"small",color:"action"}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["Growth: ",e.avg_growth_rate.toFixed(1),"%"]})]})]}),void 0!==e.innovation_score&&c.jsxs(o,{sx:{mb:2},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:.5},children:[c.jsx(L,{fontSize:"small",color:"action"}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Innovation Score"})]}),c.jsx(Ae,{variant:"determinate",value:e.innovation_score,color:S(e.innovation_score),sx:{height:6,borderRadius:3}})]}),e.emerging_subcategories&&e.emerging_subcategories.length>0&&c.jsxs(o,{children:[c.jsx(h,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Emerging Areas:"}),c.jsx(o,{sx:{display:"flex",gap:.5,flexWrap:"wrap",mt:.5},children:e.emerging_subcategories.slice(0,3).map((e,t)=>c.jsx(H,{label:e.name,size:"small",variant:"outlined",sx:{fontSize:"0.7rem"}},t))})]}),void 0!==e.procedure_count&&c.jsxs(h,{variant:"caption",color:"text.secondary",sx:{mt:1,display:"block"},children:[e.procedure_count," procedures"]})]})},e.id))}),c.jsxs(o,{sx:{mt:4,p:2,bgcolor:w.palette.background.default,borderRadius:2},children:[c.jsxs(h,{variant:"subtitle2",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Oe,{fontSize:"small"}),"Market Intelligence Summary"]}),c.jsxs(A,{container:!0,spacing:2,sx:{mt:1},children:[c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(h,{variant:"body2",color:"text.secondary",children:["Total Categories: ",s.length]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(h,{variant:"body2",color:"text.secondary",children:["Growing Categories: ",s.filter(e=>"up"===e.trend_direction).length]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(h,{variant:"body2",color:"text.secondary",children:["High Innovation: ",s.filter(e=>(e.innovation_score||0)>70).length]})})]})]})]}),c.jsx("style",{children:"\n        @keyframes rotate {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        .rotating {\n          animation: rotate 1s linear infinite;\n        }\n      "})]})};Df.displayName="CategoryInsights";const zf=({children:e,value:t,index:r})=>c.jsx("div",{role:"tabpanel",hidden:t!==r,children:t===r&&c.jsx(o,{sx:{p:2},children:e})}),Lf=({open:e,onClose:t,initialIndustry:r="dental",onCategoryDiscovered:s})=>{const[n,a]=ks.useState(""),[l,d]=ks.useState(r),[u,p]=ks.useState("general"),[m,g]=ks.useState(!1),[x,y]=ks.useState(null),[b,j]=ks.useState(0),[k,C]=ks.useState([]),[S,T]=ks.useState(null),P=function(e,t){const[r,s]=ks.useState(e);return ks.useEffect(()=>{const r=setTimeout(()=>{s(e)},t);return()=>{clearTimeout(r)}},[e,t]),r}(n,300);ks.useEffect(()=>{if(P.length>2){C("dental"===l?[`${P} dental technology`,`${P} dental market growth`,`${P} dental innovations`,`${P} dental procedures`,`${P} dental equipment`]:[`${P} aesthetic procedures`,`${P} cosmetic treatments`,`${P} aesthetic technology`,`${P} beauty innovations`,`${P} minimally invasive`])}else C([])},[P,l]);const E=async e=>{const t=e||n;if(t.trim()){g(!0),T(null);try{const e=await Of.searchWithIntelligence(t,{industry:l,searchType:u,limit:20,includeAnalytics:!0});y(e),j(0),s&&e.categories.length>0&&e.categories.forEach(e=>{e.confidence>.7&&s(e)})}catch(r){T("Failed to perform search. Please try again."),y(null)}finally{g(!1)}}},I=e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),E())},$=e=>{switch(e){case"high":return"success";case"medium":return"warning";case"low":return"default"}};return c.jsxs(fe,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{height:"90vh",display:"flex",flexDirection:"column"}},children:[c.jsxs(xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"divider"},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(q,{color:"primary"}),c.jsx(h,{variant:"h6",children:"Market Intelligence Search"})]}),c.jsx(f,{onClick:t,size:"small",children:c.jsx(Ee,{})})]}),c.jsxs(ye,{sx:{flex:1,display:"flex",flexDirection:"column",p:0},children:[c.jsxs(o,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:[c.jsxs(o,{sx:{mb:2,display:"flex",gap:2,alignItems:"center"},children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Industry:"}),c.jsxs(Ue,{value:l,exclusive:!0,onChange:(e,t)=>t&&d(t),size:"small",children:[c.jsx(Ve,{value:"dental",children:"Dental"}),c.jsx(Ve,{value:"aesthetic",children:"Aesthetic"})]}),c.jsx(h,{variant:"body2",color:"text.secondary",sx:{ml:2},children:"Type:"}),c.jsxs(Ue,{value:u,exclusive:!0,onChange:(e,t)=>t&&p(t),size:"small",children:[c.jsx(Ve,{value:"general",children:"General"}),c.jsx(Ve,{value:"news",children:"News"}),c.jsx(Ve,{value:"research",children:"Research"}),c.jsx(Ve,{value:"competitive",children:"Competitive"})]})]}),c.jsx(qe,{freeSolo:!0,options:k,value:n,onInputChange:(e,t)=>a(t),renderInput:e=>c.jsx(Ge,{...e,fullWidth:!0,placeholder:`Search ${l} market intelligence...`,onKeyDown:I,InputProps:{...e.InputProps,startAdornment:c.jsx(He,{position:"start",children:c.jsx(q,{color:"action"})}),endAdornment:c.jsx(He,{position:"end",children:c.jsx(f,{onClick:()=>E(),edge:"end",disabled:m,children:m?c.jsx(B,{size:20}):c.jsx(Ce,{})})})}})}),c.jsxs(o,{sx:{mt:2,display:"flex",gap:1,flexWrap:"wrap"},children:[c.jsx(h,{variant:"caption",color:"text.secondary",sx:{mr:1},children:"Quick searches:"}),"dental"===l?c.jsxs(c.Fragment,{children:[c.jsx(H,{label:"AI in Dentistry",size:"small",onClick:()=>E("AI artificial intelligence dentistry")}),c.jsx(H,{label:"Digital Dentistry Trends",size:"small",onClick:()=>E("digital dentistry trends 2025")}),c.jsx(H,{label:"Emerging Technologies",size:"small",onClick:()=>E("emerging dental technologies innovations")})]}):c.jsxs(c.Fragment,{children:[c.jsx(H,{label:"Non-Invasive Trends",size:"small",onClick:()=>E("non-invasive aesthetic procedures trends")}),c.jsx(H,{label:"Regenerative Aesthetics",size:"small",onClick:()=>E("regenerative medicine aesthetics")}),c.jsx(H,{label:"Beauty Tech Innovations",size:"small",onClick:()=>E("beauty technology innovations 2025")})]})]})]}),S&&c.jsx(R,{severity:"error",sx:{m:2},children:S}),x&&c.jsxs(o,{sx:{flex:1,overflow:"hidden"},children:[c.jsxs(w,{value:b,onChange:(e,t)=>j(t),sx:{borderBottom:1,borderColor:"divider",px:2},children:[c.jsx(_,{label:c.jsx(Ke,{badgeContent:x.results.length,color:"primary",children:"Results"})}),c.jsx(_,{label:c.jsx(Ke,{badgeContent:x.trends.length,color:"secondary",children:"Trends"})}),c.jsx(_,{label:c.jsx(Ke,{badgeContent:x.categories.length,color:"success",children:"Categories"})}),c.jsx(_,{label:"Analytics"})]}),c.jsx(zf,{value:b,index:0,children:c.jsx(o,{sx:{height:"calc(90vh - 300px)",overflow:"auto"},children:c.jsx(K,{children:x.results.map((e,t)=>c.jsxs(Cs.Fragment,{children:[c.jsx(Y,{component:"a",href:e.url,target:"_blank",sx:{textDecoration:"none","&:hover":{bgcolor:"action.hover"}},children:c.jsx(Q,{primary:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(h,{variant:"subtitle1",children:e.title}),e.relevanceScore>.8&&c.jsx(H,{label:"Highly Relevant",size:"small",color:"primary"})]}),secondary:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description}),c.jsxs(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[e.category&&c.jsx(H,{icon:c.jsx(ie,{}),label:e.category,size:"small",variant:"outlined"}),e.tags?.map((e,t)=>c.jsx(H,{icon:c.jsx(Ye,{}),label:e,size:"small",variant:"outlined"},t)),e.source&&c.jsx(H,{icon:c.jsx(Je,{}),label:e.source,size:"small",variant:"outlined"}),e.publishedDate&&c.jsx(H,{icon:c.jsx(Xe,{}),label:new Date(e.publishedDate).toLocaleDateString(),size:"small",variant:"outlined"})]})]})})}),t<x.results.length-1&&c.jsx(N,{})]},t))})})}),c.jsx(zf,{value:b,index:1,children:c.jsx(o,{sx:{height:"calc(90vh - 300px)",overflow:"auto"},children:c.jsx(A,{container:!0,spacing:2,children:x.trends.map((e,t)=>c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx($e,{color:"primary"}),c.jsx(h,{variant:"h6",children:e.term})]}),c.jsxs(o,{sx:{mb:2},children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Growth Rate"}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsxs(h,{variant:"h4",color:"primary",children:[e.growth,"%"]}),c.jsx($e,{color:"success"})]})]}),c.jsxs(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[c.jsx(H,{label:`Volume: ${e.volume}`,size:"small"}),c.jsx(H,{label:e.category,size:"small",color:"primary"}),c.jsx(H,{label:e.timeframe,size:"small",variant:"outlined"})]})]})})},t))})})}),c.jsx(zf,{value:b,index:2,children:c.jsx(o,{sx:{height:"calc(90vh - 300px)",overflow:"auto"},children:c.jsx(A,{container:!0,spacing:2,children:x.categories.map((e,t)=>c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(ie,{color:"primary"}),c.jsx(h,{variant:"h6",children:e.name}),c.jsx(H,{label:e.marketPotential,size:"small",color:$(e.marketPotential)})]}),c.jsxs(o,{sx:{mb:2},children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Confidence Score"}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Ae,{variant:"determinate",value:100*e.confidence,sx:{flex:1,height:8,borderRadius:4}}),c.jsxs(h,{variant:"body2",children:[Math.round(100*e.confidence),"%"]})]})]}),e.parentCategory&&c.jsxs(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:["Parent: ",e.parentCategory]}),c.jsx(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:e.relatedTerms.map((e,t)=>c.jsx(H,{label:e,size:"small",variant:"outlined",onClick:()=>E(e)},t))})]})})},t))})})}),c.jsx(zf,{value:b,index:3,children:c.jsx(o,{sx:{height:"calc(90vh - 300px)",overflow:"auto"},children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Market Sentiment Analysis"}),c.jsxs(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",my:3},children:[(e=>{switch(e){case"positive":return c.jsx(Qe,{color:"success"});case"neutral":return c.jsx(Ze,{color:"warning"});case"negative":return c.jsx(et,{color:"error"})}})(x.sentiment.overall),c.jsx(h,{variant:"h4",sx:{ml:2},children:x.sentiment.overall.charAt(0).toUpperCase()+x.sentiment.overall.slice(1)})]}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-around"},children:[c.jsxs(o,{sx:{textAlign:"center"},children:[c.jsx(Qe,{color:"success"}),c.jsxs(h,{variant:"body2",children:[Math.round(100*x.sentiment.positive),"%"]})]}),c.jsxs(o,{sx:{textAlign:"center"},children:[c.jsx(Ze,{color:"warning"}),c.jsxs(h,{variant:"body2",children:[Math.round(100*x.sentiment.neutral),"%"]})]}),c.jsxs(o,{sx:{textAlign:"center"},children:[c.jsx(et,{color:"error"}),c.jsxs(h,{variant:"body2",children:[Math.round(100*x.sentiment.negative),"%"]})]})]})]})})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Search Insights"}),c.jsxs(K,{dense:!0,children:[c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(Ce,{})}),c.jsx(Q,{primary:"Query",secondary:x.query})]}),c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(ve,{})}),c.jsx(Q,{primary:"Industry",secondary:l.charAt(0).toUpperCase()+l.slice(1)})]}),c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(Oe,{})}),c.jsx(Q,{primary:"Results Found",secondary:x.results.length})]}),c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(L,{})}),c.jsx(Q,{primary:"Categories Discovered",secondary:x.categories.length})]})]})]})})}),c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Top Information Sources"}),c.jsx(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:Array.from(new Set(x.results.map(e=>e.source))).filter(Boolean).slice(0,10).map((e,t)=>c.jsx(H,{label:e,variant:"outlined",icon:c.jsx(Je,{})},t))})]})})})]})})})]}),!m&&!x&&!S&&c.jsxs(o,{sx:{flex:1,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",p:4},children:[c.jsx(q,{sx:{fontSize:80,color:"text.secondary",mb:2}}),c.jsx(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:"Discover Market Intelligence"}),c.jsx(h,{variant:"body2",color:"text.secondary",align:"center",sx:{maxWidth:500},children:"Search for procedures, companies, technologies, or market trends. Our AI-powered search analyzes real-time data to provide insights, discover emerging categories, and identify growth opportunities."})]})]})]})};Lf.displayName="MarketIntelligenceSearch";const Ff="https://osbackend-zl1h.onrender.com";async function Bf(e,t=10){try{$f.debug("Brave Search Request",{url:`${Ff}/api/search/brave`,query:e,limit:t});const r=await Fs.get(`${Ff}/api/search/brave`,{params:{query:e,limit:t},timeout:1e4});return $f.debug("Brave Search Response received",{resultCount:r.data?.length}),r.data}catch(r){const e=r;throw $f.error("Brave Search Error",{message:e.message,status:e.response?.status,url:`${Ff}/api/search/brave`}),"ECONNREFUSED"===e.code?new Error("Cannot connect to search service. Please ensure the server is running on port 3001."):500===e.response?.status?new Error("Search service error. Please check if BRAVE_SEARCH_API_KEY is configured in server/.env"):400===e.response?.status?new Error("Invalid search query"):new Error(e.message||"Failed to perform search")}}const Nf={search:Bf,searchNews:async function(e,t={}){try{return(await Bf(e,t.count||5)).map(e=>({title:e.title,url:e.url,description:e.snippet||"",age:e.published||void 0,source:e.source||void 0,relevance_score:.5}))}catch(r){return $f.error("Brave Search News Error",{error:Mf(r)}),[]}},searchWithIntelligence:async function(e,t={}){try{const r=`${e} market analysis trends statistics data ${(new Date).getFullYear()}`;return await Bf(r,Number(t.count||10))}catch(r){return $f.error("Brave Search Intelligence Error",{error:Mf(r)}),[]}}},Wf=r`
  0% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(64, 224, 208, 0.7);
  }
  70% {
    transform: scale(1.05);
    box-shadow: 0 0 0 10px rgba(64, 224, 208, 0);
  }
  100% {
    transform: scale(1);
    box-shadow: 0 0 0 0 rgba(64, 224, 208, 0);
  }
`,Uf=r`
  0% {
    box-shadow: 0 0 5px rgba(64, 224, 208, 0.5);
  }
  50% {
    box-shadow: 0 0 20px rgba(64, 224, 208, 0.8), 0 0 30px rgba(64, 224, 208, 0.6);
  }
  100% {
    box-shadow: 0 0 5px rgba(64, 224, 208, 0.5);
  }
`,Vf=r`
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
`,qf=s(i)(({theme:e})=>({background:`linear-gradient(135deg, ${n(e.palette.primary.main,.1)} 0%, ${n(e.palette.secondary.main,.1)} 100%)`,backdropFilter:"blur(10px)",border:`1px solid ${n(e.palette.primary.main,.2)}`,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{transform:"translateY(-5px) scale(1.02)",boxShadow:`0 20px 40px ${n(e.palette.primary.main,.3)}`,border:`1px solid ${n(e.palette.primary.main,.5)}`}})),Gf=s(H)(({theme:e})=>({animation:`${Wf} 2s infinite`,background:`linear-gradient(45deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,color:"white",fontWeight:"bold"})),Hf=s(Me)(({theme:e})=>({animation:`${Uf} 2s ease-in-out infinite alternate`,background:`linear-gradient(45deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`})),Kf=s(o)(({theme:e})=>({display:"flex",alignItems:"center",gap:e.spacing(1),"& .pulse-dot":{width:8,height:8,borderRadius:"50%",backgroundColor:e.palette.success.main,animation:`${Wf} 1s infinite`}})),Yf=s(o)(({theme:e})=>({animation:`${Vf} 3s ease-in-out infinite`,animationDelay:"var(--delay, 0s)"})),Jf=({children:e,value:t,index:r})=>c.jsx("div",{role:"tabpanel",hidden:t!==r,children:t===r&&c.jsx(P,{in:t===r,timeout:500,children:c.jsx(o,{sx:{p:{xs:2,md:3}},children:e})})}),Xf=()=>{const[e,t]=ks.useState(0),[r,s]=ks.useState("dental"),[u,m]=ks.useState(!1),[x,b]=ks.useState(0),[k,S]=ks.useState(!1),[P,E]=ks.useState(null),[I,$]=ks.useState(null),[M,O]=ks.useState(!1),[D,z]=ks.useState(!1),[L,F]=ks.useState({key:"name",direction:"asc"}),[N,W]=ks.useState([]),[V,G]=ks.useState([]),[J,X]=ks.useState([]),[Z,ee]=ks.useState([]),[te,se]=ks.useState(!0),[ne,ae]=ks.useState(null),[oe,le]=ks.useState([]),ce=l(),de=rt(ce.breakpoints.down("md"));ks.useEffect(()=>{(async()=>{try{se(!0);const{data:e}=await nl.from("dental_procedures").select("*"),{data:t}=await nl.from("aesthetic_procedures").select("*"),{data:s}=await nl.from("dental"===r?"dental_procedure_categories":"aesthetic_categories").select("*"),{data:i}=await nl.from("dental"===r?"dental_companies":"aesthetic_companies").select("*"),n=await he(e||[]),a=await he(t||[]);W(n),G(a),X(s||[]),ee(i||[]),await me()}catch(e){}finally{se(!1)}})()},[r]);const he=async e=>await Promise.all(e.map(async e=>{try{const t=await Nf.searchWithIntelligence(`${e.name} market trends statistics`,{count:5});return{...e,market_trend:ue(t),popularity_score:pe(t),last_updated:(new Date).toISOString()}}catch(t){return e}})),ue=e=>{if(!e||!Array.isArray(e))return"stable";const t={growing:["growth","increase","rising","surge","boom"],declining:["decline","decrease","fall","drop","reduction"],stable:["stable","steady","consistent","maintain"]},r=e.map(e=>e.description||"").join(" ").toLowerCase();for(const[s,i]of Object.entries(t))if(i.some(e=>r.includes(e)))return s;return"stable"},pe=e=>{if(!e||!Array.isArray(e))return 50;const t=Math.min(10*e.length,100),r=e.reduce((e,t)=>e+20*(t.relevance_score||.5),0)/e.length;return Math.round(Math.min(t+r,100))},me=async()=>{try{const e="dental"===r?["dental technology trends 2025","digital dentistry market","AI in dentistry"]:["aesthetic medicine trends 2025","non-invasive procedures","beauty technology"],t=await Promise.all(e.map(async e=>{try{return{query:e,results:await Nf.search(e,10),timestamp:new Date}}catch(t){return{query:e,results:[],timestamp:new Date}}}));le(t),ae({totalInsights:t.reduce((e,t)=>e+t.results.length,0),lastUpdated:new Date,trendingTopics:ge(t)})}catch(e){}},ge=e=>{const t=new Set;return e.forEach(e=>{e.results.forEach(e=>{const r=e.title?.toLowerCase()||"";["AI","digital","technology","innovation","growth","market"].forEach(e=>{r.includes(e)&&t.add(e)})})}),Array.from(t).slice(0,5)},fe=e=>{let t="asc";L.key===e&&"asc"===L.direction&&(t="desc"),F({key:e,direction:t})},xe=ks.useMemo(()=>{const e="dental"===r?N:V;return L.key?[...e].sort((e,t)=>{const r=e[L.key],s=t[L.key];return"string"==typeof r&&"string"==typeof s?"asc"===L.direction?r.localeCompare(s):s.localeCompare(r):"number"==typeof r&&"number"==typeof s?"asc"===L.direction?r-s:s-r:0}):e},[N,V,r,L]),ye=e=>{b(e=>e+1)},be=e=>{switch(e){case"growing":return c.jsx($e,{color:"success"});case"declining":return c.jsx(xt,{color:"error"});default:return c.jsx(gt,{color:"info"})}};return te?c.jsx(d,{maxWidth:"xl",sx:{mt:4,mb:4},children:c.jsx(A,{container:!0,spacing:3,children:[...Array(6)].map((e,t)=>c.jsx(A,{item:!0,xs:12,md:4,children:c.jsx(Le,{variant:"rectangular",height:200,sx:{borderRadius:2}})},t))})}):c.jsxs(d,{maxWidth:"xl",sx:{mt:4,mb:4},children:[c.jsxs(o,{sx:{mb:4},children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[c.jsxs(o,{children:[c.jsx(h,{variant:"h3",gutterBottom:!0,sx:{fontWeight:"bold",background:`linear-gradient(45deg, ${ce.palette.primary.main}, ${ce.palette.secondary.main})`,backgroundClip:"text",WebkitBackgroundClip:"text",color:"transparent"},children:"Market Intelligence Hub"}),c.jsxs(h,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:["Real-time insights for ","dental"===r?"Dental":"Aesthetic"," Industry"]})]}),ne&&c.jsxs(Kf,{children:[c.jsx("div",{className:"pulse-dot"}),c.jsxs(h,{variant:"body2",color:"success.main",children:["Live Data â€¢ ",ne.totalInsights," insights"]})]})]}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:2,p:2,borderRadius:2,background:n(ce.palette.primary.main,.05),border:`1px solid ${n(ce.palette.primary.main,.1)}`},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsx(p,{control:c.jsx(g,{checked:"aesthetic"===r,onChange:e=>{s(e.target.checked?"aesthetic":"dental"),E(null),$(null)},color:"primary"}),label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(h,{children:"Dental"}),c.jsx(h,{color:"text.secondary",children:"/"}),c.jsx(h,{children:"Aesthetic"})]})}),c.jsx(p,{control:c.jsx(g,{checked:D,onChange:e=>z(e.target.checked),color:"secondary"}),label:"Sales Mode"})]}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Pe,{title:"Refresh data",children:c.jsx(f,{onClick:async()=>{S(!0),await me(),setTimeout(()=>S(!1),1e3)},disabled:k,children:c.jsx(Fe,{className:k?"rotating":""})})}),c.jsx(Pe,{title:"AI Search",children:c.jsx(f,{onClick:()=>m(!0),color:"primary",children:c.jsx(Ke,{badgeContent:x,color:"error",children:c.jsx(q,{})})})}),c.jsx(Pe,{title:"Control Panel",children:c.jsx(f,{onClick:()=>O(!0),color:"secondary",children:c.jsx(y,{})})})]})]})]}),ne?.trendingTopics&&c.jsx(st,{direction:"down",in:!!ne,timeout:500,children:c.jsxs(o,{sx:{mb:3},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(C,{color:"error"}),c.jsx(h,{variant:"h6",children:"Trending Now"})]}),c.jsx(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:ne.trendingTopics.map((e,t)=>c.jsx(Gf,{label:e,size:"small",style:{animationDelay:.2*t+"s"}},e))})]})}),x>0&&c.jsx(re,{in:x>0,children:c.jsxs(R,{severity:"info",icon:c.jsx(Be,{}),action:c.jsx(a,{color:"inherit",size:"small",onClick:()=>b(0),children:"Dismiss"}),sx:{mb:3},children:[x," new market categories discovered through AI analysis!"]})}),c.jsx(o,{sx:{borderBottom:1,borderColor:"divider",mb:3},children:c.jsxs(w,{value:e,onChange:(e,r)=>{t(r)},variant:de?"scrollable":"fullWidth",scrollButtons:!!de&&"auto",sx:{"& .MuiTab-root":{minHeight:64,textTransform:"none",fontSize:"1rem",fontWeight:"bold","&.Mui-selected":{background:`linear-gradient(45deg, ${n(ce.palette.primary.main,.1)}, ${n(ce.palette.secondary.main,.1)})`}}},children:[c.jsx(_,{label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Ie,{}),c.jsx("span",{children:"Live Dashboard"})]})}),c.jsx(_,{label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(it,{}),c.jsx("span",{children:"Enhanced Data"})]})}),c.jsx(_,{label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(U,{}),c.jsx("span",{children:"AI Insights"})]})}),c.jsx(_,{label:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(ie,{}),c.jsx("span",{children:"Category Intelligence"})]})})]})}),c.jsx(Jf,{value:e,index:0,children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,children:c.jsx(wi,{dentalProcedures:N,aestheticProcedures:V,selectedIndustry:r})}),c.jsx(A,{item:!0,xs:12,md:3,children:c.jsx(Yf,{style:{"--delay":"0s"},children:c.jsx(qf,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(ie,{color:"primary"}),c.jsx(h,{variant:"h6",children:"Active Categories"})]}),c.jsx(h,{variant:"h3",color:"primary",sx:{fontWeight:"bold"},children:J.length}),c.jsx(Ae,{variant:"determinate",value:85,sx:{mt:1,height:6,borderRadius:3}}),c.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"85% market coverage"})]})})})}),c.jsx(A,{item:!0,xs:12,md:3,children:c.jsx(Yf,{style:{"--delay":"0.2s"},children:c.jsx(qf,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(ve,{color:"secondary"}),c.jsx(h,{variant:"h6",children:"Companies"})]}),c.jsxs(h,{variant:"h3",color:"secondary",sx:{fontWeight:"bold"},children:[Z.length,"+"]}),c.jsxs(o,{sx:{display:"flex",gap:1,mt:1},children:[c.jsx(H,{label:"Leaders",size:"small",color:"success"}),c.jsx(H,{label:"Emerging",size:"small",color:"warning"})]})]})})})}),c.jsx(A,{item:!0,xs:12,md:3,children:c.jsx(Yf,{style:{"--delay":"0.4s"},children:c.jsx(qf,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(Oe,{color:"success"}),c.jsx(h,{variant:"h6",children:"Growth Rate"})]}),c.jsx(h,{variant:"h3",color:"success.main",sx:{fontWeight:"bold"},children:"dental"===r?"5.2%":"8.7%"}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[c.jsx($e,{color:"success"}),c.jsx(h,{variant:"body2",color:"success.main",children:"Above industry average"})]})]})})})}),c.jsx(A,{item:!0,xs:12,md:3,children:c.jsx(Yf,{style:{"--delay":"0.6s"},children:c.jsx(qf,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(T,{color:"info"}),c.jsx(h,{variant:"h6",children:"AI Insights"})]}),c.jsx(h,{variant:"h3",color:"info.main",sx:{fontWeight:"bold"},children:ne?.totalInsights||0}),c.jsxs(Kf,{sx:{mt:1},children:[c.jsx("div",{className:"pulse-dot"}),c.jsx(h,{variant:"body2",color:"success.main",children:"Real-time"})]})]})})})})]})}),c.jsxs(Jf,{value:e,index:1,children:[c.jsxs(o,{sx:{mb:3},children:[c.jsxs(h,{variant:"h5",gutterBottom:!0,sx:{fontWeight:"bold"},children:["Enhanced ","dental"===r?"Dental":"Aesthetic"," Procedures"]}),c.jsx(h,{variant:"body1",color:"text.secondary",gutterBottom:!0,children:"Click column headers to sort â€¢ Real-time market intelligence included"})]}),c.jsx(nt,{component:j,sx:{borderRadius:2,border:`1px solid ${n(ce.palette.primary.main,.1)}`,overflow:"hidden"},children:c.jsxs(at,{children:[c.jsx(ot,{sx:{background:`linear-gradient(45deg, ${n(ce.palette.primary.main,.1)}, ${n(ce.palette.secondary.main,.1)})`},children:c.jsxs(lt,{children:[c.jsx(ct,{children:c.jsx(dt,{active:"name"===L.key,direction:L.direction,onClick:()=>fe("name"),sx:{fontWeight:"bold"},children:"Procedure Name"})}),c.jsx(ct,{children:c.jsx(dt,{active:"category"===L.key,direction:L.direction,onClick:()=>fe("category"),sx:{fontWeight:"bold"},children:"Category"})}),c.jsx(ct,{align:"center",children:c.jsx(dt,{active:"popularity_score"===L.key,direction:L.direction,onClick:()=>fe("popularity_score"),sx:{fontWeight:"bold"},children:"Popularity"})}),c.jsx(ct,{align:"center",children:c.jsx(dt,{active:"market_trend"===L.key,direction:L.direction,onClick:()=>fe("market_trend"),sx:{fontWeight:"bold"},children:"Market Trend"})}),c.jsx(ct,{align:"center",children:"Growth Rate"}),c.jsx(ct,{align:"center",children:"Actions"})]})}),c.jsx(ht,{children:xe.map((e,t)=>{return c.jsxs(lt,{sx:{"&:hover":{backgroundColor:n(ce.palette.primary.main,.05),transform:"scale(1.01)",transition:"all 0.2s"},cursor:"pointer"},children:[c.jsx(ct,{children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(h,{variant:"subtitle2",sx:{fontWeight:"bold"},children:e.name}),e.popularity_score&&e.popularity_score>80&&c.jsx(ut,{color:"warning",fontSize:"small"})]})}),c.jsx(ct,{children:c.jsx(H,{label:e.category,size:"small",variant:"outlined",onClick:()=>E(e.category_id||null),sx:{cursor:"pointer"}})}),c.jsx(ct,{align:"center",children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[c.jsx(B,{variant:"determinate",value:e.popularity_score||50,size:30,color:(r=e.popularity_score||50,r>=70?"success":r>=40?"warning":"error")}),c.jsxs(h,{variant:"body2",children:[e.popularity_score||50,"%"]})]})}),c.jsx(ct,{align:"center",children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",gap:1},children:[be(e.market_trend||"stable"),c.jsx(h,{variant:"body2",sx:{textTransform:"capitalize"},children:e.market_trend||"stable"})]})}),c.jsx(ct,{align:"center",children:c.jsx(H,{label:`${e.growth_rate||0}%`,size:"small",color:(e.growth_rate||0)>5?"success":"default"})}),c.jsxs(ct,{align:"center",children:[c.jsx(Pe,{title:"View Details",children:c.jsx(f,{size:"small",color:"primary",children:c.jsx(pt,{})})}),D&&c.jsx(Pe,{title:"Add to CRM",children:c.jsx(f,{size:"small",color:"secondary",children:c.jsx(mt,{})})})]})]},e.id);var r})})]})})]}),c.jsx(Jf,{value:e,index:2,children:c.jsx(A,{container:!0,spacing:3,children:c.jsx(A,{item:!0,xs:12,children:c.jsx(qf,{children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:3},children:[c.jsx(U,{color:"primary"}),c.jsx(h,{variant:"h5",sx:{fontWeight:"bold"},children:"AI Market Intelligence"}),c.jsxs(Kf,{children:[c.jsx("div",{className:"pulse-dot"}),c.jsx(h,{variant:"body2",color:"success.main",children:"Live Analysis"})]})]}),c.jsx(A,{container:!0,spacing:2,children:oe.map((e,t)=>c.jsx(A,{item:!0,xs:12,md:4,children:c.jsx(i,{sx:{height:"100%"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:e.query}),c.jsxs(h,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:[e.results.length," insights found"]}),c.jsx(K,{dense:!0,children:e.results.slice(0,3).map((e,t)=>c.jsxs(Y,{sx:{px:0},children:[c.jsx(tt,{children:c.jsx(gt,{sx:{fontSize:8},color:"primary"})}),c.jsx(Q,{primary:e.title,secondary:e.description?.substring(0,100)+"...",primaryTypographyProps:{variant:"body2"},secondaryTypographyProps:{variant:"caption"}})]},t))})]})})},t))})]})})})})}),c.jsx(Jf,{value:e,index:3,children:c.jsx(Df,{industry:r,onCategorySelect:E,onNewCategoryDiscovered:ye})}),c.jsx(Lf,{open:u,onClose:()=>m(!1),initialIndustry:r,onCategoryDiscovered:ye}),c.jsxs(ft,{anchor:"right",open:M,onClose:()=>O(!1),sx:{"& .MuiDrawer-paper":{width:400,p:2}},children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Control Panel"}),c.jsxs(o,{sx:{mt:2},children:[c.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Export Options"}),c.jsx(a,{fullWidth:!0,variant:"outlined",sx:{mb:1},children:"Export to CRM"}),c.jsx(a,{fullWidth:!0,variant:"outlined",sx:{mb:1},children:"Generate Report"}),c.jsx(a,{fullWidth:!0,variant:"outlined",sx:{mb:1},children:"Schedule Analysis"})]}),c.jsxs(o,{sx:{mt:3},children:[c.jsx(h,{variant:"subtitle1",gutterBottom:!0,children:"Real-time Settings"}),c.jsx(p,{control:c.jsx(g,{defaultChecked:!0}),label:"Auto-refresh data"}),c.jsx(p,{control:c.jsx(g,{defaultChecked:!0}),label:"Live notifications"}),c.jsx(p,{control:c.jsx(g,{}),label:"Advanced analytics"})]})]}),c.jsx(Hf,{color:"primary","aria-label":"AI Search",sx:{position:"fixed",bottom:24,right:24,display:{xs:"flex",md:"none"}},onClick:()=>m(!0),children:c.jsx(Ke,{badgeContent:x,color:"error",children:c.jsx(q,{})})}),c.jsx("style",{children:"\n        @keyframes rotate {\n          from { transform: rotate(0deg); }\n          to { transform: rotate(360deg); }\n        }\n        .rotating {\n          animation: rotate 1s linear infinite;\n        }\n      "})]})};Xf.displayName="EnhancedMarketDashboard";const Qf=class e{constructor(){t(this,"cache",new Map),t(this,"CACHE_DURATION",864e5)}static getInstance(){return e.instance||(e.instance=new e),e.instance}getCacheKey(e,t){return`${t}-${e.toLowerCase().replace(/\s+/g,"-")}`}isValidCache(e){return Date.now()-e.timestamp<this.CACHE_DURATION}async getEnhancedProcedureData(e,t,r){const s=this.getCacheKey(e,t),i=this.cache.get(s);if(i&&this.isValidCache(i))return i.data;try{const i=`${e} ${t} procedure detailed description benefits candidates preparation aftercare latest techniques 2025`,n=await Bf(i,15),a=await this.processSearchResults(n,e,t,r);return this.cache.set(s,{data:a,timestamp:Date.now()}),a}catch(n){return this.getFallbackData(e,t,r)}}async processSearchResults(e,t,r,s){const i=e?.web?.results||[],n=[],a=new Set,o=new Set,l=new Set,c=new Set,d=new Set;i.forEach(e=>{const t=`${e.title} ${e.description}`.toLowerCase();if(e.description&&e.description.length>50&&n.push(e.description),t.includes("benefit")||t.includes("advantage")||t.includes("improve")){const t=e.description.match(/(?:benefits?|advantages?|improves?)[^.]+\./gi);t&&t.forEach(e=>a.add(this.cleanText(e)))}if(t.includes("technique")||t.includes("technology")||t.includes("method")){const t=e.description.match(/(?:techniques?|technology|methods?)[^.]+\./gi);t&&t.forEach(e=>o.add(this.cleanText(e)))}if(t.includes("candidate")||t.includes("suitable for")||t.includes("ideal for")){const t=e.description.match(/(?:candidates?|suitable for|ideal for)[^.]+\./gi);t&&t.forEach(e=>l.add(this.cleanText(e)))}if(t.includes("prepare")||t.includes("before the procedure")){const t=e.description.match(/(?:preparation|prepare|before the procedure)[^.]+\./gi);t&&t.forEach(e=>c.add(this.cleanText(e)))}if(t.includes("aftercare")||t.includes("recovery")||t.includes("post-procedure")){const t=e.description.match(/(?:aftercare|recovery|post-procedure)[^.]+\./gi);t&&t.forEach(e=>d.add(this.cleanText(e)))}});const h=this.createEnhancedDescription(t,r,n,s),u=this.processInfoSet(a,5),p=this.processInfoSet(o,4),m=this.processInfoSet(l,4),g=this.processInfoSet(c,4),f=this.processInfoSet(d,4);return{detailedDescription:h,benefits:u,candidatesFor:m,latestTechniques:p,expectedResults:this.generateExpectedResults(t,r),preparationSteps:g,aftercare:f,averageSessionTime:this.estimateSessionTime(t,r),technologyUsed:this.identifyTechnology(t,r,o)}}cleanText(e){return e.replace(/<[^>]*>/g,"").replace(/&[a-zA-Z]+;/g,"").replace(/\s+/g," ").replace(/^[^a-zA-Z]+/,"").replace(/[^a-zA-Z]+$/,"").trim()}processInfoSet(e,t){return Array.from(e).filter(e=>e.length>20&&e.length<200).slice(0,t).map(e=>{const t=e.charAt(0).toUpperCase()+e.slice(1);return t.endsWith(".")?t:t+"."})}createEnhancedDescription(e,t,r,s){let i=s||`${e} is a ${t} procedure that `;const n=r.map(e=>this.cleanText(e)).filter(e=>e.length>100).sort((e,t)=>t.length-e.length)[0];return n&&n.length>i.length&&(i=n),i.length<150&&(i+=` This ${t} treatment is designed to address specific patient needs with modern techniques and proven results. `,i+="dental"===t?"The procedure focuses on improving oral health and function while ensuring patient comfort.":"This aesthetic treatment aims to enhance appearance and boost confidence through minimally invasive methods."),i}generateExpectedResults(e,t){return("dental"===t?"Patients can expect improved oral health, reduced discomfort, and enhanced dental function. ":"Patients typically see visible improvements in appearance, enhanced confidence, and natural-looking results. ")+`Results from ${e} are generally long-lasting with proper care and maintenance.`}estimateSessionTime(e,t){const r=e.toLowerCase();return r.includes("consultation")||r.includes("exam")?"30-45 minutes":r.includes("cleaning")||r.includes("whitening")?"45-60 minutes":r.includes("filling")||r.includes("injection")?"30-60 minutes":r.includes("crown")||r.includes("implant")?"60-120 minutes":r.includes("surgery")||r.includes("lift")?"2-4 hours":"dental"===t?"45-90 minutes":"30-90 minutes"}identifyTechnology(e,t,r){const s=[],i=e.toLowerCase(),n=Array.from(r).join(" ").toLowerCase();return"dental"===t&&((i.includes("implant")||n.includes("implant"))&&s.push("3D Imaging"),(i.includes("crown")||n.includes("cad"))&&s.push("CAD/CAM Technology"),(i.includes("laser")||n.includes("laser"))&&s.push("Laser Dentistry"),(i.includes("digital")||n.includes("digital"))&&s.push("Digital X-rays")),"aesthetic"===t&&((i.includes("laser")||n.includes("laser"))&&s.push("Advanced Laser Systems"),(i.includes("rf")||n.includes("radiofrequency"))&&s.push("Radiofrequency Technology"),(i.includes("ultrasound")||n.includes("ultrasound"))&&s.push("Ultrasound Technology"),(i.includes("injection")||n.includes("injection"))&&s.push("Precision Injection Systems")),s.length>0?s:["Modern Clinical Equipment"]}getFallbackData(e,t,r){return{detailedDescription:r||`${e} is a professional ${t} procedure performed by qualified practitioners.`,benefits:[`Addresses specific ${t} concerns effectively.`,"Performed by experienced professionals.","Uses modern techniques and equipment.","Tailored to individual patient needs."],candidatesFor:["Patients seeking professional treatment.","Those looking for proven results.","Individuals with specific treatment goals.","Patients in good general health."],latestTechniques:["State-of-the-art equipment and methods.","Evidence-based treatment protocols.","Minimally invasive approaches when possible.","Patient comfort optimization."],expectedResults:"Professional results tailored to individual needs with proper care and follow-up.",preparationSteps:["Consultation with healthcare provider.","Review of medical history.","Discussion of treatment goals.","Pre-procedure instructions as needed."],aftercare:["Follow post-procedure instructions carefully.","Attend scheduled follow-up appointments.","Maintain recommended care routine.","Contact provider with any concerns."],averageSessionTime:"dental"===t?"45-90 minutes":"30-90 minutes",technologyUsed:["Modern Clinical Equipment"]}}};t(Qf,"instance");const Zf=Qf.getInstance(),ex=({children:e,value:t,index:r})=>c.jsx("div",{role:"tabpanel",hidden:t!==r,children:t===r&&c.jsx(o,{sx:{pt:3},children:e})}),tx=({open:e,onClose:t,procedure:r,industry:s})=>{const[n,l]=ks.useState(0),[d,u]=ks.useState(null),[p,m]=ks.useState(!1),[g,x]=ks.useState(null),[y,k]=ks.useState(null),[C,S]=ks.useState(!1),[T,P]=ks.useState(!1),[E,I]=ks.useState(null),[$,M]=ks.useState(!1);ks.useEffect(()=>{e&&r&&1===n&&D()},[e,r,n]),ks.useEffect(()=>{e&&r&&!y&&O()},[e,r]),ks.useEffect(()=>{e||(P(!1),I(null),l(0))},[e]);const O=async()=>{if(r){S(!0);try{const e=r.name||r.procedure_name,t=r.description||r.expanded_description,i=await Zf.getEnhancedProcedureData(e,s,t);k(i)}catch(e){}finally{S(!1)}}},D=async()=>{if(r){m(!0),x(null);try{const e=`${r.name||r.procedure_name} ${s} procedure latest research innovations 2025`,t=await Bf(e,10);u(t)}catch(e){x("Failed to fetch latest insights. Please try again.")}finally{m(!1)}}},L=(e,t)=>{const r=s?s.charAt(0).toUpperCase()+s.slice(1):"Medical";return`${e.name||e.procedure_name} represents a ${e.yearly_growth_percentage>10?"high-growth":"stable"} segment in the ${r} market with a current market size of $${e.market_size_2025_usd_millions>=1e3?`${(e.market_size_2025_usd_millions/1e3).toFixed(1)} billion`:`${e.market_size_2025_usd_millions} million`}. With an average cost of $${e.average_cost_usd?.toLocaleString()||"N/A"} and a growth rate of ${e.yearly_growth_percentage||0}%, this procedure shows ${e.yearly_growth_percentage>5?"strong":"moderate"} market potential. ${t?.detailedDescription||""}`},F=e=>(e?.web?.results&&e.web.results.forEach(e=>{e.description?.toLowerCase().includes("growth")||e.description?.toLowerCase().includes("demand")}),["Increasing patient awareness and demand","Technological advancements improving outcomes","Growing acceptance of elective procedures","Demographic shifts and aging population"]),N=e=>{const t={studies:[],successRates:"Based on current literature, success rates typically range from 85-98%",complications:"Minor complications occur in less than 5% of cases when performed by experienced practitioners",patientSatisfaction:r.patient_satisfaction_score?`Patient satisfaction scores average ${r.patient_satisfaction_score}/5`:"High patient satisfaction reported in clinical studies"};return e?.web?.results&&e.web.results.slice(0,3).forEach(e=>{t.studies.push({title:e.title,summary:e.description,source:new URL(e.url).hostname})}),t},W=(e,t)=>({averageCost:t.average_cost_usd,priceRange:{low:Math.round(.7*t.average_cost_usd),high:Math.round(1.3*t.average_cost_usd)},factors:["Geographic location and local market conditions","Provider experience and facility type","Complexity of individual case","Additional procedures or treatments required"],insuranceCoverage:"dental"===s?"May be partially covered by dental insurance depending on medical necessity":"Typically considered elective and not covered by insurance",financingOptions:["In-house payment plans","Third-party medical financing","Healthcare credit cards","FSA/HSA eligible expenses"]}),V=e=>{const t=[];return e?.web?.results&&e.web.results.forEach(e=>{(e.description?.toLowerCase().includes("innovation")||e.description?.toLowerCase().includes("technology")||e.description?.toLowerCase().includes("advancement"))&&t.push({title:e.title,description:e.description,impact:"Potential to improve patient outcomes and reduce procedure time"})}),0===t.length&&t.push({title:"Advanced Imaging Technologies",description:"Integration of AI-powered imaging for improved precision",impact:"Enhanced accuracy and reduced procedure time"},{title:"Minimally Invasive Techniques",description:"Development of less invasive approaches",impact:"Reduced recovery time and improved patient comfort"}),t},G=e=>({marketPosition:e.yearly_growth_percentage>10?"High Growth":"Mature",keyPlayers:["Major hospital systems and medical centers","Specialized clinics and practice groups","Independent practitioners","Emerging telehealth providers"],differentiators:["Technology adoption and equipment quality","Provider expertise and specialization","Patient experience and comfort","Pricing and financing options"]}),J=(e,t)=>{const r=[];return e.yearly_growth_percentage>10&&r.push("Consider expanding service capacity to meet growing demand"),e.average_cost_usd>5e3&&r.push("Implement flexible financing options to improve accessibility"),r.push("Invest in latest technology and training to maintain competitive edge","Focus on patient education to increase awareness and adoption","Develop strategic partnerships with referring providers","Implement outcome tracking to demonstrate value and quality"),r},Z=(...e)=>{const t=new Set;return e.forEach(e=>{e?.web?.results&&e.web.results.forEach(e=>{t.add({title:e.title,url:e.url,date:(new Date).toISOString()})})}),Array.from(t)},ee=(e,t)=>["Related complementary procedures","Alternative treatment options","Preparatory procedures","Follow-up treatments"];if(!r)return null;const te=r.name||r.procedure_name||"Unknown Procedure",re=r.description||r.expanded_description||"No description available",se=r.average_cost_usd,ie=r.yearly_growth_percentage,ne=r.market_size_2025_usd_millions,ae=(e=>{const t=e.market_size_2025_usd_millions||0,r=e.yearly_growth_percentage||0,s=e.average_cost_usd||0;return t>=5e3||s>=1e4?"platinum":t>=1e3||s>=5e3||r>=15?"gold":r>=8||s>=2e3?"silver":"standard"})(r),oe="aesthetic"===s,le=(()=>{const e={platinum:{background:oe?"linear-gradient(135deg, #92400E 0%, #DC2626 15%, #BE123C 35%, #A21CAF 65%, #7C3AED 85%, #1E40AF 100%)":"linear-gradient(135deg, #065F46 0%, #059669 15%, #0891B2 35%, #1E40AF 65%, #7C3AED 85%, #A21CAF 100%)",overlay:"radial-gradient(circle at 20% 50%, rgba(255,255,255,0.2) 0%, transparent 50%)",textShadow:"0 2px 8px rgba(0,0,0,0.5)",borderBottom:"3px solid rgba(255,255,255,0.3)"},gold:{background:oe?"linear-gradient(135deg, #D97706 0%, #EA580C 25%, #EC4899 50%, #BE185D 75%, #A21CAF 100%)":"linear-gradient(135deg, #1E40AF 0%, #7C3AED 25%, #0891B2 50%, #059669 75%, #10B981 100%)",overlay:"radial-gradient(circle at 30% 40%, rgba(255,255,255,0.15) 0%, transparent 50%)",textShadow:"0 2px 6px rgba(0,0,0,0.4)",borderBottom:"2px solid rgba(255,255,255,0.25)"},silver:{background:oe?"linear-gradient(135deg, #F59E0B 0%, #F97316 30%, #EF4444 70%, #DC2626 100%)":"linear-gradient(135deg, #0891B2 0%, #06B6D4 30%, #3B82F6 70%, #6366F1 100%)",overlay:"radial-gradient(circle at 40% 30%, rgba(255,255,255,0.1) 0%, transparent 50%)",textShadow:"0 1px 4px rgba(0,0,0,0.3)",borderBottom:"1px solid rgba(255,255,255,0.2)"},standard:{background:oe?"linear-gradient(135deg, #6B7280 0%, #9CA3AF 50%, #D1D5DB 100%)":"linear-gradient(135deg, #374151 0%, #4B5563 50%, #6B7280 100%)",overlay:"none",textShadow:"0 1px 2px rgba(0,0,0,0.2)",borderBottom:"1px solid rgba(255,255,255,0.1)"}};return e[ae]||e.standard})();return c.jsxs(fe,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)",overflow:"hidden",border:"1px solid rgba(255, 255, 255, 0.1)",boxShadow:"0 20px 40px rgba(0, 0, 0, 0.5)"}},children:[c.jsxs(o,{sx:{background:le.background,backgroundSize:"400% 400%",color:"white",p:4,position:"relative",borderBottom:le.borderBottom,overflow:"hidden","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:le.overlay,pointerEvents:"none"},"&::after":"standard"!==ae?{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"radial-gradient(circle at 80% 20%, rgba(255,255,255,0.1) 0%, transparent 30%)",pointerEvents:"none"}:{}},children:[c.jsx(f,{onClick:t,sx:{position:"absolute",right:12,top:12,color:"white",backgroundColor:"rgba(0, 0, 0, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",zIndex:2,"&:hover":{backgroundColor:"rgba(0, 0, 0, 0.3)",transform:"scale(1.1)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"}},children:c.jsx(Ee,{})}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:2,position:"relative",zIndex:1},children:[c.jsx(X,{sx:{width:"platinum"===ae?72:"gold"===ae?64:56,height:"platinum"===ae?72:"gold"===ae?64:56,background:"platinum"===ae?"linear-gradient(135deg, #FFD700 0%, #FFA500 100%)":"gold"===ae?"linear-gradient(135deg, #C0C0C0 0%, #E6E6FA 100%)":"silver"===ae?"linear-gradient(135deg, #CD7F32 0%, #D2691E 100%)":"rgba(255, 255, 255, 0.2)",boxShadow:"standard"!==ae?"0 8px 32px rgba(0, 0, 0, 0.3), 0 0 20px rgba(255, 255, 255, 0.2)":"0 4px 16px rgba(0, 0, 0, 0.2)",border:"standard"!==ae?"2px solid rgba(255, 255, 255, 0.3)":"none"},children:c.jsx(yt,{sx:{fontSize:"platinum"===ae?40:"gold"===ae?36:32,color:"standard"!==ae?"#000":"white",filter:"standard"!==ae?"drop-shadow(0 2px 4px rgba(0,0,0,0.3))":"none"}})}),"standard"!==ae&&c.jsx(o,{sx:{position:"absolute",top:-8,left:"platinum"===ae?64:"gold"===ae?56:48,background:"platinum"===ae?"linear-gradient(45deg, #FFD700, #FFA500)":"gold"===ae?"linear-gradient(45deg, #C0C0C0, #E6E6FA)":"linear-gradient(45deg, #CD7F32, #D2691E)",color:"#000",px:1,py:.5,borderRadius:1,fontSize:"0.7rem",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,0,0,0.3)",textShadow:"0 1px 2px rgba(255,255,255,0.5)"},children:ae.toUpperCase()}),c.jsxs(o,{children:[c.jsx(h,{variant:"h4",sx:{fontWeight:"platinum"===ae?800:"gold"===ae?700:"bold",fontSize:"platinum"===ae?"2.5rem":"gold"===ae?"2.2rem":"2rem",textShadow:le.textShadow,background:"platinum"===ae?"linear-gradient(45deg, #FFFACD, #FFFFFF)":"gold"===ae?"linear-gradient(45deg, #F5F5F5, #FFFFFF)":"inherit",backgroundClip:"standard"!==ae&&"silver"!==ae?"text":"inherit",WebkitBackgroundClip:"standard"!==ae&&"silver"!==ae?"text":"inherit",WebkitTextFillColor:"standard"!==ae&&"silver"!==ae?"transparent":"inherit"},children:te}),c.jsxs(h,{variant:"subtitle1",sx:{opacity:.95,fontWeight:"standard"!==ae?600:400,textShadow:"0 1px 3px rgba(0,0,0,0.3)",fontSize:"1.1rem"},children:[r.category||r.clinical_category||s," Procedure"]})]})]}),c.jsxs(A,{container:!0,spacing:3,children:[se&&c.jsx(A,{item:!0,xs:12,sm:3,children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,background:"rgba(255, 255, 255, 0.1)",borderRadius:2,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",zIndex:1},children:[c.jsx(b,{sx:{fontSize:"platinum"===ae?28:"gold"===ae?24:20,color:"#FFD700",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",sx:{opacity:.9,fontWeight:600,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"Average Cost"}),c.jsxs(h,{variant:"h6",sx:{fontWeight:"platinum"===ae?800:"gold"===ae?700:"bold",fontSize:"platinum"===ae?"1.4rem":"1.2rem",textShadow:"0 1px 3px rgba(0,0,0,0.5)"},children:["$",se.toLocaleString()]})]})]})}),ie&&c.jsx(A,{item:!0,xs:12,sm:3,children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,background:"rgba(255, 255, 255, 0.1)",borderRadius:2,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",zIndex:1},children:[c.jsx($e,{sx:{fontSize:"platinum"===ae?28:"gold"===ae?24:20,color:ie>10?"#10B981":ie>5?"#F59E0B":"#06B6D4",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",sx:{opacity:.9,fontWeight:600,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"Growth Rate"}),c.jsxs(h,{variant:"h6",sx:{fontWeight:"platinum"===ae?800:"gold"===ae?700:"bold",fontSize:"platinum"===ae?"1.4rem":"1.2rem",textShadow:"0 1px 3px rgba(0,0,0,0.5)",color:ie>10?"#10B981":ie>5?"#F59E0B":"#06B6D4"},children:[ie>0?"+":"",ie,"%"]})]})]})}),r.market_maturity_stage&&c.jsx(A,{item:!0,xs:12,sm:3,children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,background:"rgba(255, 255, 255, 0.1)",borderRadius:2,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",zIndex:1},children:[c.jsx(q,{sx:{fontSize:"platinum"===ae?28:"gold"===ae?24:20,color:"Emerging"===r.market_maturity_stage?"#10B981":"Growth"===r.market_maturity_stage?"#06B6D4":"Expansion"===r.market_maturity_stage?"#3B82F6":"Mature"===r.market_maturity_stage?"#F59E0B":"Saturated"===r.market_maturity_stage?"#EF4444":"#9CA3AF",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",sx:{opacity:.9,fontWeight:600,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"Market Maturity"}),c.jsx(h,{variant:"h6",sx:{fontWeight:"platinum"===ae?800:"gold"===ae?700:"bold",fontSize:"platinum"===ae?"1.4rem":"1.2rem",textShadow:"0 1px 3px rgba(0,0,0,0.5)"},children:r.market_maturity_stage})]})]})}),ne&&c.jsx(A,{item:!0,xs:12,sm:3,children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1.5,p:1.5,background:"rgba(255, 255, 255, 0.1)",borderRadius:2,backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",position:"relative",zIndex:1},children:[c.jsx(vt,{sx:{fontSize:"platinum"===ae?28:"gold"===ae?24:20,color:ne>=5e3?"#9F58FA":ne>=1e3?"#06B6D4":"#10B981",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.3))"}}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",sx:{opacity:.9,fontWeight:600,textShadow:"0 1px 2px rgba(0,0,0,0.5)"},children:"Market Size"}),c.jsxs(h,{variant:"h6",sx:{fontWeight:"platinum"===ae?800:"gold"===ae?700:"bold",fontSize:"platinum"===ae?"1.4rem":"1.2rem",textShadow:"0 1px 3px rgba(0,0,0,0.5)",color:ne>=5e3?"#9F58FA":ne>=1e3?"#06B6D4":"#10B981"},children:["$",ne>=1e3?`${(ne/1e3).toFixed(1)}B`:`${ne}M`]})]})]})})]})]}),c.jsx(ye,{sx:{backgroundColor:"#0f172a",color:"white"},children:T&&E?c.jsxs(o,{children:[c.jsxs(o,{sx:{mb:3,textAlign:"center"},children:[c.jsx(a,{startIcon:c.jsx(bt,{}),onClick:()=>P(!1),sx:{mb:2},children:"Back to Overview"}),c.jsx(h,{variant:"h4",gutterBottom:!0,children:"Comprehensive Procedure Report"}),c.jsxs(h,{variant:"subtitle1",sx:{color:"rgba(255, 255, 255, 0.7)"},children:["Generated on ",E.generatedDate]})]}),c.jsxs(j,{elevation:0,sx:{p:3,mb:3,backgroundColor:"rgba(6, 182, 212, 0.1)",border:"1px solid rgba(6, 182, 212, 0.3)"},children:[c.jsx(h,{variant:"h5",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Executive Summary"}),c.jsx(h,{variant:"body1",paragraph:!0,children:E.executiveSummary})]}),c.jsxs(j,{elevation:0,sx:{p:3,mb:3,backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx(h,{variant:"h5",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Market Analysis"}),c.jsxs(A,{container:!0,spacing:2,children:[c.jsxs(A,{item:!0,xs:12,md:6,children:[c.jsx(h,{variant:"h6",children:"Market Size"}),c.jsxs(h,{variant:"h4",sx:{color:"#10B981"},children:["$",E.marketAnalysis.currentMarketSize>=1e3?`${(E.marketAnalysis.currentMarketSize/1e3).toFixed(1)}B`:`${E.marketAnalysis.currentMarketSize}M`]})]}),c.jsxs(A,{item:!0,xs:12,md:6,children:[c.jsx(h,{variant:"h6",children:"Growth Rate"}),c.jsxs(h,{variant:"h4",sx:{color:"#F59E0B"},children:[E.marketAnalysis.growthRate,"%"]})]}),c.jsxs(A,{item:!0,xs:12,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Market Drivers"}),c.jsx(K,{dense:!0,children:E.marketAnalysis.marketDrivers.map((e,t)=>c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx($e,{sx:{color:"#06B6D4"}})}),c.jsx(Q,{primary:e})]},t))})]})]})]}),c.jsxs(j,{elevation:0,sx:{p:3,mb:3,backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx(h,{variant:"h5",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Clinical Evidence & Research"}),c.jsxs(o,{sx:{mb:2},children:[c.jsxs(h,{variant:"body1",paragraph:!0,children:[c.jsx("strong",{children:"Success Rates:"})," ",E.clinicalEvidence.successRates]}),c.jsxs(h,{variant:"body1",paragraph:!0,children:[c.jsx("strong",{children:"Complications:"})," ",E.clinicalEvidence.complications]}),c.jsxs(h,{variant:"body1",paragraph:!0,children:[c.jsx("strong",{children:"Patient Satisfaction:"})," ",E.clinicalEvidence.patientSatisfaction]})]}),E.clinicalEvidence.studies.length>0&&c.jsxs(o,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Recent Studies"}),E.clinicalEvidence.studies.map((e,t)=>c.jsxs(o,{sx:{mb:2},children:[c.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:e.title}),c.jsx(h,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)"},children:e.summary}),c.jsxs(h,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.6)"},children:["Source: ",e.source]})]},t))]})]}),c.jsxs(j,{elevation:0,sx:{p:3,mb:3,backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx(h,{variant:"h5",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Cost Analysis"}),c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(o,{sx:{textAlign:"center"},children:[c.jsx(h,{variant:"subtitle2",children:"Average Cost"}),c.jsxs(h,{variant:"h4",sx:{color:"#10B981"},children:["$",E.costAnalysis.averageCost?.toLocaleString()]})]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(o,{sx:{textAlign:"center"},children:[c.jsx(h,{variant:"subtitle2",children:"Price Range"}),c.jsxs(h,{variant:"h5",sx:{color:"#F59E0B"},children:["$",E.costAnalysis.priceRange.low.toLocaleString()," - $",E.costAnalysis.priceRange.high.toLocaleString()]})]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(o,{sx:{textAlign:"center"},children:[c.jsx(h,{variant:"subtitle2",children:"Insurance"}),c.jsx(h,{variant:"body2",children:E.costAnalysis.insuranceCoverage})]})}),c.jsxs(A,{item:!0,xs:12,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Pricing Factors"}),c.jsx(K,{dense:!0,children:E.costAnalysis.factors.map((e,t)=>c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(b,{sx:{color:"#06B6D4"}})}),c.jsx(Q,{primary:e})]},t))})]})]})]}),c.jsxs(j,{elevation:0,sx:{p:3,mb:3,backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx(h,{variant:"h5",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Latest Innovations & Technology"}),E.innovations.map((e,t)=>c.jsxs(o,{sx:{mb:2},children:[c.jsx(h,{variant:"h6",children:e.title}),c.jsx(h,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)",mb:1},children:e.description}),c.jsxs(h,{variant:"body2",sx:{color:"#10B981"},children:["Impact: ",e.impact]})]},t))]}),c.jsxs(j,{elevation:0,sx:{p:3,mb:3,backgroundColor:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)"},children:[c.jsx(h,{variant:"h5",gutterBottom:!0,sx:{color:"#10B981"},children:"Strategic Recommendations"}),c.jsx(K,{children:E.recommendations.map((e,t)=>c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{sx:{color:"#10B981"}})}),c.jsx(Q,{primary:e})]},t))})]}),c.jsxs(o,{sx:{display:"flex",gap:2,justifyContent:"center",mt:4},children:[c.jsx(a,{variant:"outlined",startIcon:c.jsx(jt,{}),onClick:()=>window.print(),children:"Print Report"}),c.jsx(a,{variant:"outlined",startIcon:c.jsx(wt,{}),onClick:()=>{},children:"Download PDF"}),c.jsx(a,{variant:"outlined",startIcon:c.jsx(_t,{}),onClick:()=>{},children:"Share Report"})]})]}):c.jsxs(c.Fragment,{children:[c.jsxs(w,{value:n,onChange:(e,t)=>{l(t)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider",mb:2},children:[c.jsx(_,{label:"Overview",icon:c.jsx(yt,{}),iconPosition:"start"}),c.jsx(_,{label:"Latest Research",icon:c.jsx(q,{}),iconPosition:"start"}),c.jsx(_,{label:"Clinical Details",icon:c.jsx(kt,{}),iconPosition:"start"}),c.jsx(_,{label:"Market Analysis",icon:c.jsx($e,{}),iconPosition:"start"})]}),c.jsx(ex,{value:n,index:0,children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Description"}),C?c.jsxs(o,{children:[c.jsx(Le,{variant:"text",sx:{fontSize:"1rem"}}),c.jsx(Le,{variant:"text",sx:{fontSize:"1rem"}}),c.jsx(Le,{variant:"text",sx:{fontSize:"1rem"},width:"80%"})]}):c.jsx(h,{variant:"body1",paragraph:!0,sx:{color:"rgba(255, 255, 255, 0.9)"},children:y?.detailedDescription||re}),y&&c.jsxs(c.Fragment,{children:[y.benefits.length>0&&c.jsxs(o,{sx:{mt:3},children:[c.jsx(h,{variant:"h6",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Key Benefits"}),c.jsx(K,{dense:!0,children:y.benefits.map((e,t)=>c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{sx:{color:"#10B981",fontSize:20}})}),c.jsx(Q,{primary:e,primaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.9)"}}})]},t))})]}),y.candidatesFor.length>0&&c.jsxs(o,{sx:{mt:3},children:[c.jsx(h,{variant:"h6",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Ideal Candidates"}),c.jsx(K,{dense:!0,children:y.candidatesFor.map((e,t)=>c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(Ct,{sx:{color:"#06B6D4",fontSize:20}})}),c.jsx(Q,{primary:e,primaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.9)"}}})]},t))})]})]})]})})}),"dental"===s&&r.procedure_duration_min&&c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[c.jsx(z,{sx:{color:"#06B6D4"}}),c.jsx(h,{variant:"h6",sx:{color:"white"},children:"Procedure Duration"})]}),c.jsxs(h,{variant:"h4",sx:{color:"#06B6D4"},children:[r.procedure_duration_min," min"]})]})})}),r.patient_satisfaction_score&&c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[c.jsx(me,{sx:{color:"#10B981"}}),c.jsx(h,{variant:"h6",sx:{color:"white"},children:"Patient Satisfaction"})]}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsxs(h,{variant:"h4",sx:{color:"#10B981"},children:[r.patient_satisfaction_score,"/5"]}),c.jsx(Ae,{variant:"determinate",value:r.patient_satisfaction_score/5*100,sx:{flexGrow:1,height:8,borderRadius:4,backgroundColor:"rgba(255, 255, 255, 0.1)","& .MuiLinearProgress-bar":{backgroundColor:"#10B981"}}})]})]})})}),r.market_maturity_stage&&c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[c.jsx(q,{sx:{color:"#06B6D4"}}),c.jsx(h,{variant:"h6",sx:{color:"white"},children:"Market Maturity"})]}),c.jsx(H,{label:r.market_maturity_stage,size:"medium",color:"Emerging"===r.market_maturity_stage?"success":"Growth"===r.market_maturity_stage?"primary":"Expansion"===r.market_maturity_stage?"info":"Mature"===r.market_maturity_stage?"warning":"Saturated"===r.market_maturity_stage?"error":"default",sx:{fontWeight:"bold",fontSize:"1.1rem",py:2,px:3}}),c.jsxs(h,{variant:"body2",sx:{mt:1.5,color:"rgba(255, 255, 255, 0.7)"},children:["Emerging"===r.market_maturity_stage&&"High growth potential, early adopter phase","Growth"===r.market_maturity_stage&&"Rapid expansion, increasing adoption","Expansion"===r.market_maturity_stage&&"Steady growth, mainstream market","Mature"===r.market_maturity_stage&&"Established market, stable returns","Saturated"===r.market_maturity_stage&&"Low growth, market consolidation"]})]})})}),r.risks&&c.jsx(A,{item:!0,xs:12,children:c.jsxs(R,{severity:"warning",icon:c.jsx(_e,{}),children:[c.jsx(h,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Risks & Considerations"}),c.jsx(h,{variant:"body2",children:r.risks})]})})]})}),c.jsxs(ex,{value:n,index:1,children:[p?c.jsx(o,{children:[1,2,3].map(e=>c.jsx(o,{sx:{mb:2},children:c.jsx(Le,{variant:"rectangular",height:120,sx:{borderRadius:2}})},e))}):g?c.jsx(R,{severity:"error",children:g}):d&&d.web&&d.web.results?c.jsx(K,{children:d.web.results.map((e,t)=>c.jsx(j,{elevation:0,sx:{mb:2,p:2,backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(Y,{alignItems:"flex-start",disablePadding:!0,children:[c.jsx(tt,{children:c.jsx(X,{sx:{bgcolor:"primary.light"},children:c.jsx(St,{})})}),c.jsx(Q,{primary:c.jsxs(Tt,{href:e.url,target:"_blank",rel:"noopener noreferrer",sx:{textDecoration:"none",color:"primary.main",fontWeight:600,"&:hover":{textDecoration:"underline"}},children:[e.title,c.jsx(Pt,{sx:{ml:.5,fontSize:16,verticalAlign:"middle"}})]}),secondary:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",paragraph:!0,sx:{color:"rgba(255, 255, 255, 0.8)"},children:e.description}),c.jsx(h,{variant:"caption",sx:{color:"rgba(255, 255, 255, 0.6)"},children:new URL(e.url).hostname})]})})]})},t))}):c.jsx(h,{children:"No research results available"}),c.jsx(o,{sx:{mt:3,textAlign:"center"},children:c.jsx(a,{variant:"outlined",startIcon:c.jsx(Ce,{}),onClick:D,disabled:p,children:"Refresh Research"})})]}),c.jsx(ex,{value:n,index:2,children:c.jsxs(A,{container:!0,spacing:3,children:["dental"===s&&c.jsxs(c.Fragment,{children:[r.cpt_cdt_code&&c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"CDT Code"}),c.jsx(h,{variant:"h5",fontWeight:"bold",sx:{color:"white"},children:r.cpt_cdt_code})]})})}),r.complexity&&c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Complexity Level"}),c.jsx(H,{label:r.complexity,sx:{fontSize:"1.1rem",padding:"6px 16px",backgroundColor:"High"===r.complexity?"#EF4444":"Medium"===r.complexity?"#F59E0B":"#10B981",color:"white"}})]})})}),r.recovery_time_days&&c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Recovery Time"}),c.jsxs(h,{variant:"h5",fontWeight:"bold",sx:{color:"white"},children:[r.recovery_time_days," days"]})]})})})]}),"aesthetic"===s&&c.jsxs(c.Fragment,{children:[r.downtime&&c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Downtime"}),c.jsx(h,{variant:"h6",sx:{color:"white"},children:r.downtime})]})})}),r.number_of_sessions&&c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Number of Sessions"}),c.jsx(h,{variant:"h5",fontWeight:"bold",sx:{color:"white"},children:r.number_of_sessions})]})})}),r.results_duration&&c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Results Duration"}),c.jsx(h,{variant:"h6",sx:{color:"white"},children:r.results_duration})]})})}),r.body_areas_applicable&&c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,sx:{color:"rgba(255, 255, 255, 0.7)"},children:"Applicable Body Areas"}),c.jsx(h,{variant:"body1",sx:{color:"white"},children:r.body_areas_applicable})]})})})]}),r.contraindications&&c.jsx(A,{item:!0,xs:12,children:c.jsxs(R,{severity:"info",children:[c.jsx(h,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Contraindications"}),c.jsx(h,{variant:"body2",children:r.contraindications})]})}),y&&c.jsxs(c.Fragment,{children:[y.preparationSteps.length>0&&c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Preparation Steps"}),c.jsx(K,{dense:!0,children:y.preparationSteps.map((e,t)=>c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{sx:{color:"#10B981",fontSize:20}})}),c.jsx(Q,{primary:e,primaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem"}}})]},t))})]})})}),y.aftercare.length>0&&c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Aftercare Instructions"}),c.jsx(K,{dense:!0,children:y.aftercare.map((e,t)=>c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{sx:{color:"#06B6D4",fontSize:20}})}),c.jsx(Q,{primary:e,primaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.9)",fontSize:"0.9rem"}}})]},t))})]})})}),y.technologyUsed&&y.technologyUsed.length>0&&c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,sx:{color:"#06B6D4"},children:"Technology & Equipment"}),c.jsx(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:y.technologyUsed.map((e,t)=>c.jsx(H,{icon:c.jsx(kt,{}),label:e,sx:{backgroundColor:"rgba(6, 182, 212, 0.2)",color:"#06B6D4",borderColor:"#06B6D4","& .MuiChip-icon":{color:"#06B6D4"}},variant:"outlined"},t))})]})})})]})]})}),c.jsx(ex,{value:n,index:3,children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(6, 182, 212, 0.1)",border:"1px solid rgba(6, 182, 212, 0.3)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx(U,{sx:{color:"#06B6D4"}}),c.jsx(h,{variant:"h6",sx:{color:"white"},children:"AI Market Insights"})]}),c.jsxs(h,{variant:"body1",paragraph:!0,sx:{color:"rgba(255, 255, 255, 0.9)"},children:["Based on current market trends, ",te," shows ",ie>5?"strong":"moderate"," growth potential with an annual growth rate of ",ie,"%."]}),ne&&c.jsxs(h,{variant:"body1",sx:{color:"rgba(255, 255, 255, 0.9)"},children:["The current market size is estimated at $",ne>=1e3?`${(ne/1e3).toFixed(1)} billion`:`${ne} million`,", making it a ",ne>=500?"significant":"growing"," segment in the ",s," industry."]})]})})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,sx:{color:"white"},children:"Market Drivers"}),c.jsxs(K,{dense:!0,children:[c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{sx:{color:"#10B981"}})}),c.jsx(Q,{primary:"Increasing patient awareness",primaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.9)"}}})]}),c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{sx:{color:"#10B981"}})}),c.jsx(Q,{primary:"Technological advancements",primaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.9)"}}})]}),c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{sx:{color:"#10B981"}})}),c.jsx(Q,{primary:"Growing disposable income",primaryTypographyProps:{sx:{color:"rgba(255, 255, 255, 0.9)"}}})]})]})]})})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"rgba(30, 41, 59, 0.8)",border:"1px solid rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,sx:{color:"white"},children:"Future Outlook"}),c.jsxs(h,{variant:"body2",sx:{color:"rgba(255, 255, 255, 0.8)"},children:["The ",te," market is expected to continue its growth trajectory, driven by technological innovations and increasing demand for","aesthetic"===s?" minimally invasive procedures":" preventive dental care","."]})]})})})]})})]})}),c.jsxs(be,{sx:{p:3,backgroundColor:"#0f172a",borderTop:"1px solid rgba(255, 255, 255, 0.1)"},children:[c.jsx(a,{onClick:t,variant:"outlined",children:"Close"}),c.jsx(a,{variant:"contained",startIcon:c.jsx(q,{}),onClick:async()=>{M(!0);try{const e=r.name||r.procedure_name,[t,i,n]=await Promise.all([Bf(`${e} ${s} clinical studies research evidence 2025`,5),Bf(`${e} ${s} cost analysis pricing insurance coverage`,5),Bf(`${e} ${s} latest innovations technology advancements 2025`,5)]),a={generatedDate:(new Date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),procedure:e,industry:s,executiveSummary:L(r,y),marketAnalysis:{currentMarketSize:r.market_size_2025_usd_millions,growthRate:r.yearly_growth_percentage,averageCost:r.average_cost_usd,marketDrivers:F(d)},clinicalEvidence:N(t),costAnalysis:W(i,r),innovations:V(n),competitiveLandscape:G(r),recommendations:J(r,y),appendix:{sources:Z(t,i,n,d),relatedProcedures:ee(r,s)}};I(a),P(!0)}catch(e){x("Failed to generate full report. Please try again.")}finally{M(!1)}},disabled:$,children:$?c.jsxs(c.Fragment,{children:[c.jsx(B,{size:20,sx:{mr:1}}),"Generating Report..."]}):"Generate Full Report"})]})]})};tx.displayName="ProcedureDetailsModal";const rx=({children:e,value:t,index:r})=>c.jsx("div",{role:"tabpanel",hidden:t!==r,children:t===r&&c.jsx(o,{sx:{pt:3},children:e})}),sx=({open:e,onClose:t,company:r,industry:s})=>{const[n,l]=ks.useState(0),[d,u]=ks.useState(null),[p,m]=ks.useState(!1),[g,x]=ks.useState(null);ks.useEffect(()=>{e&&r&&y()},[e,r]);const y=async()=>{if(r){m(!0),x(null);try{const e=`${r.name} ${s} medical company latest news innovations 2025`,t=await Fs.get("https://osbackend-zl1h.onrender.com/api/search/brave",{params:{query:e,limit:10},timeout:1e4});u({results:t.data.results||t.data.web?.results||[]})}catch(e){x("Failed to fetch latest insights. Please try again.")}finally{m(!1)}}};if(!r)return null;const k=r.name||"Unknown Company",C=r.description||"No description available",S=r.website||r.website_url,T=r.headquarters,P=r.founded_year,E=r.ceo,I=r.employee_count||r.num_employees,$=r.market_share_pct,M=r.revenue||r.last_year_sales_usd_million,O=r.key_products||r.products?.join(", "),D=r.specialties?.join(", ");return c.jsxs(fe,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,PaperProps:{sx:{borderRadius:3,background:"linear-gradient(135deg, #FFFFFF 0%, #F8FAFC 100%)",overflow:"hidden"}},children:[c.jsxs(o,{sx:{background:"linear-gradient(135deg, #FF6B6B 0%, #FF8787 100%)",color:"white",p:3,position:"relative"},children:[c.jsx(f,{onClick:t,sx:{position:"absolute",right:8,top:8,color:"white",backgroundColor:"rgba(255, 255, 255, 0.1)","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.2)"}},children:c.jsx(Ee,{})}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[c.jsx(X,{sx:{width:56,height:56,backgroundColor:"rgba(255, 255, 255, 0.2)"},children:c.jsx(ve,{sx:{fontSize:32}})}),c.jsxs(o,{children:[c.jsx(h,{variant:"h4",fontWeight:"bold",children:k}),c.jsxs(h,{variant:"subtitle1",sx:{opacity:.9},children:[s.charAt(0).toUpperCase()+s.slice(1)," Industry Leader"]})]})]}),c.jsxs(A,{container:!0,spacing:2,children:[$&&c.jsx(A,{item:!0,xs:12,sm:4,children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(_t,{}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",sx:{opacity:.8},children:"Market Share"}),c.jsxs(h,{variant:"h6",fontWeight:"bold",children:[$,"%"]})]})]})}),I&&c.jsx(A,{item:!0,xs:12,sm:4,children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(At,{}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",sx:{opacity:.8},children:"Employees"}),c.jsx(h,{variant:"h6",fontWeight:"bold",children:I.toLocaleString()})]})]})}),M&&c.jsx(A,{item:!0,xs:12,sm:4,children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(b,{}),c.jsxs(o,{children:[c.jsx(h,{variant:"caption",sx:{opacity:.8},children:"Revenue"}),c.jsx(h,{variant:"h6",fontWeight:"bold",children:"number"==typeof M?`$${M}M`:M})]})]})})]})]}),c.jsxs(ye,{children:[c.jsxs(w,{value:n,onChange:(e,t)=>{l(t)},variant:"fullWidth",sx:{borderBottom:1,borderColor:"divider",mb:2},children:[c.jsx(_,{label:"Overview",icon:c.jsx(ve,{}),iconPosition:"start"}),c.jsx(_,{label:"Latest News",icon:c.jsx(q,{}),iconPosition:"start"}),c.jsx(_,{label:"Products & Services",icon:c.jsx(Et,{}),iconPosition:"start"}),c.jsx(_,{label:"Market Position",icon:c.jsx($e,{}),iconPosition:"start"})]}),c.jsx(rx,{value:n,index:0,children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"#F8FAFC"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,color:"primary",children:"Company Description"}),c.jsx(h,{variant:"body1",paragraph:!0,children:C})]})})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{elevation:0,children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Company Information"}),c.jsxs(K,{dense:!0,children:[S&&c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(Je,{color:"primary"})}),c.jsx(Q,{primary:"Website",secondary:c.jsxs(Tt,{href:S,target:"_blank",rel:"noopener noreferrer",children:[S.replace(/^https?:\/\//i,""),c.jsx(Pt,{sx:{ml:.5,fontSize:14,verticalAlign:"middle"}})]})})]}),T&&c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(It,{color:"primary"})}),c.jsx(Q,{primary:"Headquarters",secondary:T})]}),P&&c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(Xe,{color:"primary"})}),c.jsx(Q,{primary:"Founded",secondary:P})]}),E&&c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(Ct,{color:"primary"})}),c.jsx(Q,{primary:"CEO",secondary:E})]})]})]})})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{elevation:0,children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Company Rating"}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mt:2},children:[c.jsx($t,{value:4.5,precision:.5,readOnly:!0,size:"large"}),c.jsx(h,{variant:"body1",color:"text.secondary",children:"4.5 / 5.0"})]}),c.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Based on industry reputation and market performance"})]})})})]})}),c.jsxs(rx,{value:n,index:1,children:[p?c.jsx(o,{children:[1,2,3].map(e=>c.jsx(o,{sx:{mb:2},children:c.jsx(Le,{variant:"rectangular",height:120,sx:{borderRadius:2}})},e))}):g?c.jsx(R,{severity:"error",children:g}):d&&d.results?c.jsx(K,{children:d.results.map((e,t)=>c.jsx(j,{elevation:0,sx:{mb:2,p:2,backgroundColor:"#F8FAFC"},children:c.jsxs(Y,{alignItems:"flex-start",disablePadding:!0,children:[c.jsx(tt,{children:c.jsx(X,{sx:{bgcolor:"secondary.light"},children:c.jsx(St,{})})}),c.jsx(Q,{primary:c.jsxs(Tt,{href:e.url,target:"_blank",rel:"noopener noreferrer",sx:{textDecoration:"none",color:"secondary.main",fontWeight:600,"&:hover":{textDecoration:"underline"}},children:[e.title,c.jsx(Pt,{sx:{ml:.5,fontSize:16,verticalAlign:"middle"}})]}),secondary:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:e.description}),c.jsx(h,{variant:"caption",color:"text.secondary",children:new URL(e.url).hostname})]})})]})},t))}):c.jsx(h,{children:"No news results available"}),c.jsx(o,{sx:{mt:3,textAlign:"center"},children:c.jsx(a,{variant:"outlined",startIcon:c.jsx(Ce,{}),onClick:y,disabled:p,children:"Refresh News"})})]}),c.jsx(rx,{value:n,index:2,children:c.jsxs(A,{container:!0,spacing:3,children:[O&&c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"#FFF4E6"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Key Products"}),c.jsx(h,{variant:"body1",children:O})]})})}),D&&c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Specialties"}),c.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:D.split(",").map((e,t)=>c.jsx(H,{label:e.trim(),color:"primary",variant:"outlined"},t))})]})})}),c.jsx(A,{item:!0,xs:12,children:c.jsxs(R,{severity:"info",icon:c.jsx(q,{}),children:[c.jsx(h,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:"Innovation Focus"}),c.jsxs(h,{variant:"body2",children:[k," is actively investing in ","dental"===s?"digital dentistry and AI-powered diagnostics":"minimally invasive procedures and personalized treatments"," to maintain its competitive edge in the market."]})]})})]})}),c.jsx(rx,{value:n,index:3,children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,children:c.jsx(i,{elevation:0,sx:{backgroundColor:"#F0F9FF"},children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[c.jsx($e,{color:"info"}),c.jsx(h,{variant:"h6",children:"Market Analysis"})]}),c.jsxs(h,{variant:"body1",paragraph:!0,children:[k," is a ",$>10?"major":"significant"," player in the ",s," market",$&&` with a ${$}% market share`,"."]}),c.jsxs(h,{variant:"body1",children:["The company's focus on innovation and quality has positioned it well for continued growth in the expanding ",s," healthcare sector."]})]})})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{elevation:0,children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Competitive Advantages"}),c.jsxs(K,{dense:!0,children:[c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{color:"success"})}),c.jsx(Q,{primary:"Strong brand recognition"})]}),c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{color:"success"})}),c.jsx(Q,{primary:"Innovative product portfolio"})]}),c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{color:"success"})}),c.jsx(Q,{primary:"Global distribution network"})]}),c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(me,{color:"success"})}),c.jsx(Q,{primary:"Strong R&D capabilities"})]})]})]})})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{elevation:0,children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Growth Opportunities"}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["â€¢ Expansion into emerging markets",c.jsx("br",{}),"â€¢ Digital transformation initiatives",c.jsx("br",{}),"â€¢ Strategic partnerships and acquisitions",c.jsx("br",{}),"â€¢ New product development in high-growth segments"]})]})})})]})})]}),c.jsxs(be,{sx:{p:3,backgroundColor:"#F8FAFC"},children:[c.jsx(a,{onClick:t,variant:"outlined",children:"Close"}),c.jsx(a,{variant:"contained",color:"secondary",startIcon:c.jsx(q,{}),onClick:()=>{},children:"Generate Full Report"})]})]})};sx.displayName="CompanyDetailsModal";
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
const ix=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,r)=>r?r.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},nx=(...e)=>e.filter((e,t,r)=>Boolean(e)&&""!==e.trim()&&r.indexOf(e)===t).join(" ").trim(),ax=e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0};
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */
var ox={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lx=ks.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:s,className:i="",children:n,iconNode:a,...o},l)=>ks.createElement("svg",{ref:l,...ox,width:t,height:t,stroke:e,strokeWidth:s?24*Number(r)/Number(t):r,className:nx("lucide",i),...!n&&!ax(o)&&{"aria-hidden":"true"},...o},[...a.map(([e,t])=>ks.createElement(e,t)),...Array.isArray(n)?n:[n]])),cx=(e,t)=>{const r=ks.forwardRef(({className:r,...s},i)=>{return ks.createElement(lx,{ref:i,iconNode:t,className:nx(`lucide-${n=ix(e),n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase()}`,`lucide-${e}`,r),...s});var n});return r.displayName=ix(e),r},dx=cx("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),hx=cx("brain",[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]]),ux=cx("building-2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),px=cx("chart-column",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),mx=cx("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),gx=cx("database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),fx=cx("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),xx=cx("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]),yx=cx("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),vx=cx("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),bx=cx("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),jx=cx("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),wx=cx("map",[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]]),_x=cx("navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),kx=cx("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Cx=cx("shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]),Sx=cx("sparkles",[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]]),Tx=cx("target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),Px=cx("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),Ax=cx("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),Ex=cx("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]);
/**
 * @license lucide-react v0.513.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ix=Hx(),$x=e=>Ux(e,Ix),Mx=Hx();$x.write=e=>Ux(e,Mx);var Rx=Hx();$x.onStart=e=>Ux(e,Rx);var Ox=Hx();$x.onFrame=e=>Ux(e,Ox);var Dx=Hx();$x.onFinish=e=>Ux(e,Dx);var zx=[];$x.setTimeout=(e,t)=>{const r=$x.now()+t,s=()=>{const e=zx.findIndex(e=>e.cancel==s);~e&&zx.splice(e,1),Nx-=~e?1:0},i={time:r,handler:e,cancel:s};return zx.splice(Lx(r),0,i),Nx+=1,Vx(),i};var Lx=e=>~(~zx.findIndex(t=>t.time>e)||~zx.length);$x.cancel=e=>{Rx.delete(e),Ox.delete(e),Dx.delete(e),Ix.delete(e),Mx.delete(e)},$x.sync=e=>{Wx=!0,$x.batchedUpdates(e),Wx=!1},$x.throttle=e=>{let t;function r(){try{e(...t)}finally{t=null}}function s(...e){t=e,$x.onStart(r)}return s.handler=e,s.cancel=()=>{Rx.delete(r),t=null},s};var Fx="undefined"!=typeof window?window.requestAnimationFrame:()=>{};$x.use=e=>Fx=e,$x.now="undefined"!=typeof performance?()=>performance.now():Date.now,$x.batchedUpdates=e=>e(),$x.catch=console.error,$x.frameLoop="always",$x.advance=()=>{"demand"!==$x.frameLoop||Gx()};var Bx=-1,Nx=0,Wx=!1;function Ux(e,t){Wx?(t.delete(e),e(0)):(t.add(e),Vx())}function Vx(){Bx<0&&(Bx=0,"demand"!==$x.frameLoop&&Fx(qx))}function qx(){~Bx&&(Fx(qx),$x.batchedUpdates(Gx))}function Gx(){const e=Bx;Bx=$x.now();const t=Lx(Bx);t&&(Kx(zx.splice(0,t),e=>e.handler()),Nx-=t),Nx?(Rx.flush(),Ix.flush(e?Math.min(64,Bx-e):16.667),Ox.flush(),Mx.flush(),Dx.flush()):Bx=-1}function Hx(){let e=new Set,t=e;return{add(r){Nx+=t!=e||e.has(r)?0:1,e.add(r)},delete:r=>(Nx-=t==e&&e.has(r)?1:0,e.delete(r)),flush(r){t.size&&(e=new Set,Nx-=t.size,Kx(t,t=>t(r)&&e.add(t)),Nx+=e.size,t=e)}}}function Kx(e,t){e.forEach(e=>{try{t(e)}catch(r){$x.catch(r)}})}var Yx=Object.defineProperty,Jx={};function Xx(){}((e,t)=>{for(var r in t)Yx(e,r,{get:t[r],enumerable:!0})})(Jx,{assign:()=>hy,colors:()=>ly,createStringInterpolator:()=>iy,skipAnimation:()=>cy,to:()=>ny,willAdvance:()=>dy});var Qx={arr:Array.isArray,obj:e=>!!e&&"Object"===e.constructor.name,fun:e=>"function"==typeof e,str:e=>"string"==typeof e,num:e=>"number"==typeof e,und:e=>void 0===e};function Zx(e,t){if(Qx.arr(e)){if(!Qx.arr(t)||e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return e===t}var ey=(e,t)=>e.forEach(t);function ty(e,t,r){if(Qx.arr(e))for(let s=0;s<e.length;s++)t.call(r,e[s],`${s}`);else for(const s in e)e.hasOwnProperty(s)&&t.call(r,e[s],s)}var ry=e=>Qx.und(e)?[]:Qx.arr(e)?e:[e];function sy(e,t){if(e.size){const r=Array.from(e);e.clear(),ey(r,t)}}var iy,ny,ay=(e,...t)=>sy(e,e=>e(...t)),oy=()=>"undefined"==typeof window||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),ly=null,cy=!1,dy=Xx,hy=e=>{e.to&&(ny=e.to),e.now&&($x.now=e.now),void 0!==e.colors&&(ly=e.colors),null!=e.skipAnimation&&(cy=e.skipAnimation),e.createStringInterpolator&&(iy=e.createStringInterpolator),e.requestAnimationFrame&&$x.use(e.requestAnimationFrame),e.batchedUpdates&&($x.batchedUpdates=e.batchedUpdates),e.willAdvance&&(dy=e.willAdvance),e.frameLoop&&($x.frameLoop=e.frameLoop)},uy=new Set,py=[],my=[],gy=0,fy={get idle(){return!uy.size&&!py.length},start(e){gy>e.priority?(uy.add(e),$x.onStart(xy)):(yy(e),$x(by))},advance:by,sort(e){if(gy)$x.onFrame(()=>fy.sort(e));else{const t=py.indexOf(e);~t&&(py.splice(t,1),vy(e))}},clear(){py=[],uy.clear()}};function xy(){uy.forEach(yy),uy.clear(),$x(by)}function yy(e){py.includes(e)||vy(e)}function vy(e){py.splice(function(e,t){const r=e.findIndex(t);return r<0?e.length:r}(py,t=>t.priority>e.priority),0,e)}function by(e){const t=my;for(let r=0;r<py.length;r++){const s=py[r];gy=s.priority,s.idle||(dy(s),s.advance(e),s.idle||t.push(s))}return gy=0,(my=py).length=0,(py=t).length>0}var jy="[-+]?\\d*\\.?\\d+",wy=jy+"%";function _y(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var ky=new RegExp("rgb"+_y(jy,jy,jy)),Cy=new RegExp("rgba"+_y(jy,jy,jy,jy)),Sy=new RegExp("hsl"+_y(jy,wy,wy)),Ty=new RegExp("hsla"+_y(jy,wy,wy,jy)),Py=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ay=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,Ey=/^#([0-9a-fA-F]{6})$/,Iy=/^#([0-9a-fA-F]{8})$/;function $y(e,t,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?e+6*(t-e)*r:r<.5?t:r<2/3?e+(t-e)*(2/3-r)*6:e}function My(e,t,r){const s=r<.5?r*(1+t):r+t-r*t,i=2*r-s,n=$y(i,s,e+1/3),a=$y(i,s,e),o=$y(i,s,e-1/3);return Math.round(255*n)<<24|Math.round(255*a)<<16|Math.round(255*o)<<8}function Ry(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Oy(e){return(parseFloat(e)%360+360)%360/360}function Dy(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(255*t)}function zy(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Ly(e){let t=function(e){let t;return"number"==typeof e?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=Ey.exec(e))?parseInt(t[1]+"ff",16)>>>0:ly&&void 0!==ly[e]?ly[e]:(t=ky.exec(e))?(Ry(t[1])<<24|Ry(t[2])<<16|Ry(t[3])<<8|255)>>>0:(t=Cy.exec(e))?(Ry(t[1])<<24|Ry(t[2])<<16|Ry(t[3])<<8|Dy(t[4]))>>>0:(t=Py.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=Iy.exec(e))?parseInt(t[1],16)>>>0:(t=Ay.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=Sy.exec(e))?(255|My(Oy(t[1]),zy(t[2]),zy(t[3])))>>>0:(t=Ty.exec(e))?(My(Oy(t[1]),zy(t[2]),zy(t[3]))|Dy(t[4]))>>>0:null}(e);if(null===t)return e;t=t||0;return`rgba(${(4278190080&t)>>>24}, ${(16711680&t)>>>16}, ${(65280&t)>>>8}, ${(255&t)/255})`}var Fy=(e,t,r)=>{if(Qx.fun(e))return e;if(Qx.arr(e))return Fy({range:e,output:t,extrapolate:r});if(Qx.str(e.output[0]))return iy(e);const s=e,i=s.output,n=s.range||[0,1],a=s.extrapolateLeft||s.extrapolate||"extend",o=s.extrapolateRight||s.extrapolate||"extend",l=s.easing||(e=>e);return e=>{const t=function(e,t){for(var r=1;r<t.length-1&&!(t[r]>=e);++r);return r-1}(e,n);return function(e,t,r,s,i,n,a,o,l){let c=l?l(e):e;if(c<t){if("identity"===a)return c;"clamp"===a&&(c=t)}if(c>r){if("identity"===o)return c;"clamp"===o&&(c=r)}if(s===i)return s;if(t===r)return e<=t?s:i;t===-1/0?c=-c:r===1/0?c-=t:c=(c-t)/(r-t);c=n(c),s===-1/0?c=-c:i===1/0?c+=s:c=c*(i-s)+s;return c}(e,n[t],n[t+1],i[t],i[t+1],l,a,o,s.map)}};var By=Symbol.for("FluidValue.get"),Ny=Symbol.for("FluidValue.observers"),Wy=e=>Boolean(e&&e[By]),Uy=e=>e&&e[By]?e[By]():e,Vy=e=>e[Ny]||null;function qy(e,t){const r=e[Ny];r&&r.forEach(e=>{!function(e,t){e.eventObserved?e.eventObserved(t):e(t)}(e,t)})}var Gy=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");Hy(this,e)}},Hy=(e,t)=>Xy(e,By,t);function Ky(e,t){if(e[By]){let r=e[Ny];r||Xy(e,Ny,r=new Set),r.has(t)||(r.add(t),e.observerAdded&&e.observerAdded(r.size,t))}return t}function Yy(e,t){const r=e[Ny];if(r&&r.has(t)){const s=r.size-1;s?r.delete(t):e[Ny]=null,e.observerRemoved&&e.observerRemoved(s,t)}}var Jy,Xy=(e,t,r)=>Object.defineProperty(e,t,{value:r,writable:!0,configurable:!0}),Qy=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,Zy=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ev=new RegExp(`(${Qy.source})(%|[a-z]+)`,"i"),tv=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,rv=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,sv=e=>{const[t,r]=iv(e);if(!t||oy())return e;const s=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(s)return s.trim();if(r&&r.startsWith("--")){const t=window.getComputedStyle(document.documentElement).getPropertyValue(r);return t||e}return r&&rv.test(r)?sv(r):r||e},iv=e=>{const t=rv.exec(e);if(!t)return[,];const[,r,s]=t;return[r,s]},nv=(e,t,r,s,i)=>`rgba(${Math.round(t)}, ${Math.round(r)}, ${Math.round(s)}, ${i})`,av=e=>{Jy||(Jy=ly?new RegExp(`(${Object.keys(ly).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(e=>Uy(e).replace(rv,sv).replace(Zy,Ly).replace(Jy,Ly)),r=t.map(e=>e.match(Qy).map(Number)),s=r[0].map((e,t)=>r.map(e=>{if(!(t in e))throw Error('The arity of each "output" value must be equal');return e[t]})).map(t=>Fy({...e,output:t}));return e=>{const r=!ev.test(t[0])&&t.find(e=>ev.test(e))?.replace(Qy,"");let i=0;return t[0].replace(Qy,()=>`${s[i++](e)}${r||""}`).replace(tv,nv)}},ov="react-spring: ",lv=e=>{const t=e;let r=!1;if("function"!=typeof t)throw new TypeError(`${ov}once requires a function parameter`);return(...e)=>{r||(t(...e),r=!0)}},cv=lv(console.warn);var dv=lv(console.warn);function hv(e){return Qx.str(e)&&("#"==e[0]||/\d/.test(e)||!oy()&&rv.test(e)||e in(ly||{}))}var uv=oy()?ks.useEffect:ks.useLayoutEffect;function pv(){const e=ks.useState()[1],t=(()=>{const e=ks.useRef(!1);return uv(()=>(e.current=!0,()=>{e.current=!1}),[]),e})();return()=>{t.current&&e(Math.random())}}var mv=e=>ks.useEffect(e,gv),gv=[];function fv(e){const t=ks.useRef(void 0);return ks.useEffect(()=>{t.current=e}),t.current}var xv=Symbol.for("Animated:node"),yv=e=>e&&e[xv],vv=(e,t)=>{return r=e,s=xv,i=t,Object.defineProperty(r,s,{value:i,writable:!0,configurable:!0});var r,s,i},bv=e=>e&&e[xv]&&e[xv].getPayload(),jv=class{constructor(){vv(this,this)}getPayload(){return this.payload||[]}},wv=class e extends jv{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Qx.num(this._value)&&(this.lastPosition=this._value)}static create(t){return new e(t)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Qx.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value!==e&&(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Qx.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},_v=class e extends wv{constructor(e){super(0),this._string=null,this._toString=Fy({output:[e,e]})}static create(t){return new e(t)}getValue(){const e=this._string;return null==e?this._string=this._toString(this._value):e}setValue(e){if(Qx.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else{if(!super.setValue(e))return!1;this._string=null}return!0}reset(e){e&&(this._toString=Fy({output:[this.getValue(),e]})),this._value=0,super.reset()}},kv={dependencies:null},Cv=class extends jv{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return ty(this.source,(r,s)=>{var i;(i=r)&&i[xv]===i?t[s]=r.getValue(e):Wy(r)?t[s]=Uy(r):e||(t[s]=r)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&ey(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return ty(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){kv.dependencies&&Wy(e)&&kv.dependencies.add(e);const t=bv(e);t&&ey(t,e=>this.add(e))}},Sv=class e extends Cv{constructor(e){super(e)}static create(t){return new e(t)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((t,r)=>t.setValue(e[r])).some(Boolean):(super.setValue(e.map(Tv)),!0)}};function Tv(e){return(hv(e)?_v:wv).create(e)}function Pv(e){const t=yv(e);return t?t.constructor:Qx.arr(e)?Sv:hv(e)?_v:wv}var Av=(e,t)=>{const r=!Qx.fun(e)||e.prototype&&e.prototype.isReactComponent;return ks.forwardRef((s,i)=>{const n=ks.useRef(null),a=r&&ks.useCallback(e=>{n.current=function(e,t){e&&(Qx.fun(e)?e(t):e.current=t);return t}(i,e)},[i]),[o,l]=function(e,t){const r=new Set;kv.dependencies=r,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)});return e=new Cv(e),kv.dependencies=null,[e,r]}(s,t),c=pv(),d=()=>{const e=n.current;if(r&&!e)return;!1===(!!e&&t.applyAnimatedValues(e,o.getValue(!0)))&&c()},h=new Ev(d,l),u=ks.useRef(void 0);uv(()=>(u.current=h,ey(l,e=>Ky(e,h)),()=>{u.current&&(ey(u.current.deps,e=>Yy(e,u.current)),$x.cancel(u.current.update))})),ks.useEffect(d,[]),mv(()=>()=>{const e=u.current;ey(e.deps,t=>Yy(t,e))});const p=t.getComponentProps(o.getValue());return ks.createElement(e,{...p,ref:a})})},Ev=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){"change"==e.type&&$x.write(this.update)}};var Iv=Symbol.for("AnimatedComponent"),$v=e=>Qx.str(e)?e:e&&Qx.str(e.displayName)?e.displayName:Qx.fun(e)&&e.name||null;function Mv(e,...t){return Qx.fun(e)?e(...t):e}var Rv=(e,t)=>!0===e||!!(t&&e&&(Qx.fun(e)?e(t):ry(e).includes(t))),Ov=(e,t)=>Qx.obj(e)?t&&e[t]:e,Dv=(e,t)=>!0===e.default?e[t]:e.default?e.default[t]:void 0,zv=e=>e,Lv=(e,t=zv)=>{let r=Fv;e.default&&!0!==e.default&&(e=e.default,r=Object.keys(e));const s={};for(const i of r){const r=t(e[i],i);Qx.und(r)||(s[i]=r)}return s},Fv=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Bv={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Nv(e){const t=function(e){const t={};let r=0;if(ty(e,(e,s)=>{Bv[s]||(t[s]=e,r++)}),r)return t}(e);if(t){const r={to:t};return ty(e,(e,s)=>s in t||(r[s]=e)),r}return{...e}}function Wv(e){return e=Uy(e),Qx.arr(e)?e.map(Wv):hv(e)?Jx.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Uv(e){return Qx.fun(e)||Qx.arr(e)&&Qx.obj(e[0])}var Vv={tension:170,friction:26,mass:1,damping:1,easing:e=>e,clamp:!1},qv=class{constructor(){this.velocity=0,Object.assign(this,Vv)}};function Gv(e,t){if(Qx.und(t.decay)){const r=!Qx.und(t.tension)||!Qx.und(t.friction);!r&&Qx.und(t.frequency)&&Qx.und(t.damping)&&Qx.und(t.mass)||(e.duration=void 0,e.decay=void 0),r&&(e.frequency=void 0)}else e.duration=void 0}var Hv=[],Kv=class{constructor(){this.changed=!1,this.values=Hv,this.toValues=null,this.fromValues=Hv,this.config=new qv,this.immediate=!1}};function Yv(e,{key:t,props:r,defaultProps:s,state:i,actions:n}){return new Promise((a,o)=>{let l,c,d=Rv(r.cancel??s?.cancel,t);if(d)p();else{Qx.und(r.pause)||(i.paused=Rv(r.pause,t));let e=s?.pause;!0!==e&&(e=i.paused||Rv(e,t)),l=Mv(r.delay||0,t),e?(i.resumeQueue.add(u),n.pause()):(n.resume(),u())}function h(){i.resumeQueue.add(u),i.timeouts.delete(c),c.cancel(),l=c.time-$x.now()}function u(){l>0&&!Jx.skipAnimation?(i.delayed=!0,c=$x.setTimeout(p,l),i.pauseQueue.add(h),i.timeouts.add(c)):p()}function p(){i.delayed&&(i.delayed=!1),i.pauseQueue.delete(h),i.timeouts.delete(c),e<=(i.cancelId||0)&&(d=!0);try{n.start({...r,callId:e,cancel:d},a)}catch(t){o(t)}}})}var Jv=(e,t)=>1==t.length?t[0]:t.some(e=>e.cancelled)?Zv(e.get()):t.every(e=>e.noop)?Xv(e.get()):Qv(e.get(),t.every(e=>e.finished)),Xv=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),Qv=(e,t,r=!1)=>({value:e,finished:t,cancelled:r}),Zv=e=>({value:e,cancelled:!0,finished:!1});function eb(e,t,r,s){const{callId:i,parentId:n,onRest:a}=t,{asyncTo:o,promise:l}=r;return n||e!==o||t.reset?r.promise=(async()=>{r.asyncId=i,r.asyncTo=e;const c=Lv(t,(e,t)=>"onRest"===t?void 0:e);let d,h;const u=new Promise((e,t)=>(d=e,h=t)),p=e=>{const t=i<=(r.cancelId||0)&&Zv(s)||i!==r.asyncId&&Qv(s,!1);if(t)throw e.result=t,h(e),e},m=(e,t)=>{const n=new rb,a=new sb;return(async()=>{if(Jx.skipAnimation)throw tb(r),a.result=Qv(s,!1),h(a),a;p(n);const o=Qx.obj(e)?{...e}:{...t,to:e};o.parentId=i,ty(c,(e,t)=>{Qx.und(o[t])&&(o[t]=e)});const l=await s.start(o);return p(n),r.paused&&await new Promise(e=>{r.resumeQueue.add(e)}),l})()};let g;if(Jx.skipAnimation)return tb(r),Qv(s,!1);try{let t;t=Qx.arr(e)?(async e=>{for(const t of e)await m(t)})(e):Promise.resolve(e(m,s.stop.bind(s))),await Promise.all([t.then(d),u]),g=Qv(s.get(),!0,!1)}catch(f){if(f instanceof rb)g=f.result;else{if(!(f instanceof sb))throw f;g=f.result}}finally{i==r.asyncId&&(r.asyncId=n,r.asyncTo=n?o:void 0,r.promise=n?l:void 0)}return Qx.fun(a)&&$x.batchedUpdates(()=>{a(g,s,s.item)}),g})():l}function tb(e,t){sy(e.timeouts,e=>e.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var rb=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},sb=class extends Error{constructor(){super("SkipAnimationSignal")}},ib=e=>e instanceof ab,nb=1,ab=class extends Gy{constructor(){super(...arguments),this.id=nb++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=yv(this);return e&&e.getValue()}to(...e){return Jx.to(this,e)}interpolate(...e){return cv(`${ov}The "interpolate" function is deprecated in v9 (use "to" instead)`),Jx.to(this,e)}toJSON(){return this.get()}observerAdded(e){1==e&&this._attach()}observerRemoved(e){0==e&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){qy(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||fy.sort(this),qy(this,{type:"priority",parent:this,priority:e})}},ob=Symbol.for("SpringPhase"),lb=e=>(1&e[ob])>0,cb=e=>(2&e[ob])>0,db=e=>(4&e[ob])>0,hb=(e,t)=>t?e[ob]|=3:e[ob]&=-3,ub=(e,t)=>t?e[ob]|=4:e[ob]&=-5,pb=class extends ab{constructor(e,t){if(super(),this.animation=new Kv,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Qx.und(e)||!Qx.und(t)){const r=Qx.obj(e)?{...e}:{...t,from:e};Qx.und(r.default)&&(r.default=!0),this.start(r)}}get idle(){return!(cb(this)||this._state.asyncTo)||db(this)}get goal(){return Uy(this.animation.to)}get velocity(){const e=yv(this);return e instanceof wv?e.lastVelocity||0:e.getPayload().map(e=>e.lastVelocity||0)}get hasAnimated(){return lb(this)}get isAnimating(){return cb(this)}get isPaused(){return db(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,r=!1;const s=this.animation;let{toValues:i}=s;const{config:n}=s,a=bv(s.to);!a&&Wy(s.to)&&(i=ry(Uy(s.to))),s.values.forEach((o,l)=>{if(o.done)return;const c=o.constructor==_v?1:a?a[l].lastPosition:i[l];let d=s.immediate,h=c;if(!d){if(h=o.lastPosition,n.tension<=0)return void(o.done=!0);let t=o.elapsedTime+=e;const r=s.fromValues[l],i=null!=o.v0?o.v0:o.v0=Qx.arr(n.velocity)?n.velocity[l]:n.velocity;let a;const u=n.precision||(r==c?.005:Math.min(1,.001*Math.abs(c-r)));if(Qx.und(n.duration))if(n.decay){const e=!0===n.decay?.998:n.decay,s=Math.exp(-(1-e)*t);h=r+i/(1-e)*(1-s),d=Math.abs(o.lastPosition-h)<=u,a=i*s}else{a=null==o.lastVelocity?i:o.lastVelocity;const t=n.restVelocity||u/10,s=n.clamp?0:n.bounce,l=!Qx.und(s),p=r==c?o.v0>0:r<c;let m,g=!1;const f=1,x=Math.ceil(e/f);for(let e=0;e<x&&(m=Math.abs(a)>t,m||(d=Math.abs(c-h)<=u,!d));++e){l&&(g=h==c||h>c==p,g&&(a=-a*s,h=c));a+=(1e-6*-n.tension*(h-c)+.001*-n.friction*a)/n.mass*f,h+=a*f}}else{let s=1;n.duration>0&&(this._memoizedDuration!==n.duration&&(this._memoizedDuration=n.duration,o.durationProgress>0&&(o.elapsedTime=n.duration*o.durationProgress,t=o.elapsedTime+=e)),s=(n.progress||0)+t/this._memoizedDuration,s=s>1?1:s<0?0:s,o.durationProgress=s),h=r+n.easing(s)*(c-r),a=(h-o.lastPosition)/e,d=1==s}o.lastVelocity=a,Number.isNaN(h)&&(d=!0)}a&&!a[l].done&&(d=!1),d?o.done=!0:t=!1,o.setValue(h,n.round)&&(r=!0)});const o=yv(this),l=o.getValue();if(t){const e=Uy(s.to);l===e&&!r||n.decay?r&&n.decay&&this._onChange(l):(o.setValue(e),this._onChange(e)),this._stop()}else r&&this._onChange(l)}set(e){return $x.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(cb(this)){const{to:e,config:t}=this.animation;$x.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let r;return Qx.und(e)?(r=this.queue||[],this.queue=[]):r=[Qx.obj(e)?e:{...t,to:e}],Promise.all(r.map(e=>this._update(e))).then(e=>Jv(this,e))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),tb(this._state,e&&this._lastCallId),$x.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){"change"==e.type?this._start():"priority"==e.type&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:r,from:s}=e;r=Qx.obj(r)?r[t]:r,(null==r||Uv(r))&&(r=void 0),s=Qx.obj(s)?s[t]:s,null==s&&(s=void 0);const i={to:r,from:s};return lb(this)||(e.reverse&&([r,s]=[s,r]),s=Uy(s),Qx.und(s)?yv(this)||this._set(r):this._set(s)),i}_update({...e},t){const{key:r,defaultProps:s}=this;e.default&&Object.assign(s,Lv(e,(e,t)=>/^on/.test(t)?Ov(e,r):e)),bb(this,e,"onProps"),jb(this,"onProps",e,this);const i=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const n=this._state;return Yv(++this._lastCallId,{key:r,props:e,defaultProps:s,state:n,actions:{pause:()=>{db(this)||(ub(this,!0),ay(n.pauseQueue),jb(this,"onPause",Qv(this,mb(this,this.animation.to)),this))},resume:()=>{db(this)&&(ub(this,!1),cb(this)&&this._resume(),ay(n.resumeQueue),jb(this,"onResume",Qv(this,mb(this,this.animation.to)),this))},start:this._merge.bind(this,i)}}).then(r=>{if(e.loop&&r.finished&&(!t||!r.noop)){const t=gb(e);if(t)return this._update(t,!0)}return r})}_merge(e,t,r){if(t.cancel)return this.stop(!0),r(Zv(this));const s=!Qx.und(e.to),i=!Qx.und(e.from);if(s||i){if(!(t.callId>this._lastToId))return r(Zv(this));this._lastToId=t.callId}const{key:n,defaultProps:a,animation:o}=this,{to:l,from:c}=o;let{to:d=l,from:h=c}=e;!i||s||t.default&&!Qx.und(d)||(d=h),t.reverse&&([d,h]=[h,d]);const u=!Zx(h,c);u&&(o.from=h),h=Uy(h);const p=!Zx(d,l);p&&this._focus(d);const m=Uv(t.to),{config:g}=o,{decay:f,velocity:x}=g;(s||i)&&(g.velocity=0),t.config&&!m&&function(e,t,r){r&&(Gv(r={...r},t),t={...r,...t}),Gv(e,t),Object.assign(e,t);for(const a in Vv)null==e[a]&&(e[a]=Vv[a]);let{frequency:s,damping:i}=e;const{mass:n}=e;Qx.und(s)||(s<.01&&(s=.01),i<0&&(i=0),e.tension=Math.pow(2*Math.PI/s,2)*n,e.friction=4*Math.PI*i*n/s)}(g,Mv(t.config,n),t.config!==a.config?Mv(a.config,n):void 0);let y=yv(this);if(!y||Qx.und(d))return r(Qv(this,!0));const v=Qx.und(t.reset)?i&&!t.default:!Qx.und(h)&&Rv(t.reset,n),b=v?h:this.get(),j=Wv(d),w=Qx.num(j)||Qx.arr(j)||hv(j),_=!m&&(!w||Rv(a.immediate||t.immediate,n));if(p){const e=Pv(d);if(e!==y.constructor){if(!_)throw Error(`Cannot animate between ${y.constructor.name} and ${e.name}, as the "to" prop suggests`);y=this._set(j)}}const k=y.constructor;let C=Wy(d),S=!1;if(!C){const e=v||!lb(this)&&u;(p||e)&&(S=Zx(Wv(b),j),C=!S),(Zx(o.immediate,_)||_)&&Zx(g.decay,f)&&Zx(g.velocity,x)||(C=!0)}if(S&&cb(this)&&(o.changed&&!v?C=!0:C||this._stop(l)),!m&&((C||Wy(l))&&(o.values=y.getPayload(),o.toValues=Wy(d)?null:k==_v?[1]:ry(j)),o.immediate!=_&&(o.immediate=_,_||v||this._set(l)),C)){const{onRest:e}=o;ey(vb,e=>bb(this,t,e));const s=Qv(this,mb(this,l));ay(this._pendingCalls,s),this._pendingCalls.add(r),o.changed&&$x.batchedUpdates(()=>{o.changed=!v,e?.(s,this),v?Mv(a.onRest,s):o.onStart?.(s,this)})}v&&this._set(b),m?r(eb(t.to,t,this._state,this)):C?this._start():cb(this)&&!p?this._pendingCalls.add(r):r(Xv(b))}_focus(e){const t=this.animation;e!==t.to&&(Vy(this)&&this._detach(),t.to=e,Vy(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Wy(t)&&(Ky(t,this),ib(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Wy(e)&&Yy(e,this)}_set(e,t=!0){const r=Uy(e);if(!Qx.und(r)){const e=yv(this);if(!e||!Zx(r,e.getValue())){const s=Pv(r);e&&e.constructor==s?e.setValue(r):vv(this,s.create(r)),e&&$x.batchedUpdates(()=>{this._onChange(r,t)})}}return yv(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,jb(this,"onStart",Qv(this,mb(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Mv(this.animation.onChange,e,this)),Mv(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;yv(this).reset(Uy(e.to)),e.immediate||(e.fromValues=e.values.map(e=>e.lastPosition)),cb(this)||(hb(this,!0),db(this)||this._resume())}_resume(){Jx.skipAnimation?this.finish():fy.start(this)}_stop(e,t){if(cb(this)){hb(this,!1);const r=this.animation;ey(r.values,e=>{e.done=!0}),r.toValues&&(r.onChange=r.onPause=r.onResume=void 0),qy(this,{type:"idle",parent:this});const s=t?Zv(this.get()):Qv(this.get(),mb(this,e??r.to));ay(this._pendingCalls,s),r.changed&&(r.changed=!1,jb(this,"onRest",s,this))}}};function mb(e,t){const r=Wv(t);return Zx(Wv(e.get()),r)}function gb(e,t=e.loop,r=e.to){const s=Mv(t);if(s){const i=!0!==s&&Nv(s),n=(i||e).reverse,a=!i||i.reset;return fb({...e,loop:t,default:!1,pause:void 0,to:!n||Uv(r)?r:void 0,from:a?e.from:void 0,reset:a,...i})}}function fb(e){const{to:t,from:r}=e=Nv(e),s=new Set;return Qx.obj(t)&&yb(t,s),Qx.obj(r)&&yb(r,s),e.keys=s.size?Array.from(s):null,e}function xb(e){const t=fb(e);return Qx.und(t.default)&&(t.default=Lv(t)),t}function yb(e,t){ty(e,(e,r)=>null!=e&&t.add(r))}var vb=["onStart","onRest","onChange","onPause","onResume"];function bb(e,t,r){e.animation[r]=t[r]!==Dv(t,r)?Ov(t[r],e.key):void 0}function jb(e,t,...r){e.animation[t]?.(...r),e.defaultProps[t]?.(...r)}var wb=["onStart","onChange","onRest"],_b=1,kb=class{constructor(e,t){this.id=_b++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,r)=>e[r]=t.get()),e}set(e){for(const t in e){const r=e[t];Qx.und(r)||this.springs[t].set(r)}}update(e){return e&&this.queue.push(fb(e)),this}start(e){let{queue:t}=this;return e?t=ry(e).map(fb):this.queue=[],this._flush?this._flush(this,t):(Ib(this,t),Cb(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const r=this.springs;ey(ry(t),t=>r[t].stop(!!e))}else tb(this._state,this._lastAsyncId),this.each(t=>t.stop(!!e));return this}pause(e){if(Qx.und(e))this.start({pause:!0});else{const t=this.springs;ey(ry(e),e=>t[e].pause())}return this}resume(e){if(Qx.und(e))this.start({pause:!1});else{const t=this.springs;ey(ry(e),e=>t[e].resume())}return this}each(e){ty(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:r}=this._events,s=this._active.size>0,i=this._changed.size>0;(s&&!this._started||i&&!this._started)&&(this._started=!0,sy(e,([e,t])=>{t.value=this.get(),e(t,this,this._item)}));const n=!s&&this._started,a=i||n&&r.size?this.get():null;i&&t.size&&sy(t,([e,t])=>{t.value=a,e(t,this,this._item)}),n&&(this._started=!1,sy(r,([e,t])=>{t.value=a,e(t,this,this._item)}))}eventObserved(e){if("change"==e.type)this._changed.add(e.parent),e.idle||this._active.add(e.parent);else{if("idle"!=e.type)return;this._active.delete(e.parent)}$x.onFrame(this._onFrame)}};function Cb(e,t){return Promise.all(t.map(t=>Sb(e,t))).then(t=>Jv(e,t))}async function Sb(e,t,r){const{keys:s,to:i,from:n,loop:a,onRest:o,onResolve:l}=t,c=Qx.obj(t.default)&&t.default;a&&(t.loop=!1),!1===i&&(t.to=null),!1===n&&(t.from=null);const d=Qx.arr(i)||Qx.fun(i)?i:void 0;d?(t.to=void 0,t.onRest=void 0,c&&(c.onRest=void 0)):ey(wb,r=>{const s=t[r];if(Qx.fun(s)){const i=e._events[r];t[r]=({finished:e,cancelled:t})=>{const r=i.get(s);r?(e||(r.finished=!1),t&&(r.cancelled=!0)):i.set(s,{value:null,finished:e||!1,cancelled:t||!1})},c&&(c[r]=t[r])}});const h=e._state;t.pause===!h.paused?(h.paused=t.pause,ay(t.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(t.pause=!0);const u=(s||Object.keys(e.springs)).map(r=>e.springs[r].start(t)),p=!0===t.cancel||!0===Dv(t,"cancel");(d||p&&h.asyncId)&&u.push(Yv(++e._lastAsyncId,{props:t,state:h,actions:{pause:Xx,resume:Xx,start(t,r){p?(tb(h,e._lastAsyncId),r(Zv(e))):(t.onRest=o,r(eb(d,t,h,e)))}}})),h.paused&&await new Promise(e=>{h.resumeQueue.add(e)});const m=Jv(e,await Promise.all(u));if(a&&m.finished&&(!r||!m.noop)){const r=gb(t,a,i);if(r)return Ib(e,[r]),Sb(e,r,!0)}return l&&$x.batchedUpdates(()=>l(m,e,e.item)),m}function Tb(e,t){const r={...e.springs};return t&&ey(ry(t),e=>{Qx.und(e.keys)&&(e=fb(e)),Qx.obj(e.to)||(e={...e,to:void 0}),Eb(r,e,e=>Ab(e))}),Pb(e,r),r}function Pb(e,t){ty(t,(t,r)=>{e.springs[r]||(e.springs[r]=t,Ky(t,e))})}function Ab(e,t){const r=new pb;return r.key=e,t&&Ky(r,t),r}function Eb(e,t,r){t.keys&&ey(t.keys,s=>{(e[s]||(e[s]=r(s)))._prepareNode(t)})}function Ib(e,t){ey(t,t=>{Eb(e.springs,t,t=>Ab(t,e))})}var $b=ks.createContext({pause:!1,immediate:!1}),Mb=()=>{const e=[],t=function(t){dv(`${ov}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`);const s=[];return ey(e,(e,i)=>{if(Qx.und(t))s.push(e.start());else{const n=r(t,e,i);n&&s.push(e.start(n))}}),s};t.current=e,t.add=function(t){e.includes(t)||e.push(t)},t.delete=function(t){const r=e.indexOf(t);~r&&e.splice(r,1)},t.pause=function(){return ey(e,e=>e.pause(...arguments)),this},t.resume=function(){return ey(e,e=>e.resume(...arguments)),this},t.set=function(t){ey(e,(e,r)=>{const s=Qx.fun(t)?t(r,e):t;s&&e.set(s)})},t.start=function(t){const r=[];return ey(e,(e,s)=>{if(Qx.und(t))r.push(e.start());else{const i=this._getProps(t,e,s);i&&r.push(e.start(i))}}),r},t.stop=function(){return ey(e,e=>e.stop(...arguments)),this},t.update=function(t){return ey(e,(e,r)=>e.update(this._getProps(t,e,r))),this};const r=function(e,t,r){return Qx.fun(e)?e(r,t):e};return t._getProps=r,t};function Rb(e,t){const r=Qx.fun(e),[[s],i]=function(e,t,r){const s=Qx.fun(t)&&t;s&&!r&&(r=[]);const i=ks.useMemo(()=>s||3==arguments.length?Mb():void 0,[]),n=ks.useRef(0),a=pv(),o=ks.useMemo(()=>({ctrls:[],queue:[],flush(e,t){const r=Tb(e,t);return n.current>0&&!o.queue.length&&!Object.keys(r).some(t=>!e.springs[t])?Cb(e,t):new Promise(s=>{Pb(e,r),o.queue.push(()=>{s(Cb(e,t))}),a()})}}),[]),l=ks.useRef([...o.ctrls]),c=ks.useRef([]),d=fv(e)||0;function h(e,r){for(let i=e;i<r;i++){const e=l.current[i]||(l.current[i]=new kb(null,o.flush)),r=s?s(i,e):t[i];r&&(c.current[i]=xb(r))}}ks.useMemo(()=>{ey(l.current.slice(e,d),e=>{!function(e,t){e.ref?.delete(e),t?.delete(e)}(e,i),e.stop(!0)}),l.current.length=e,h(d,e)},[e]),ks.useMemo(()=>{h(0,Math.min(d,e))},r);const u=l.current.map((e,t)=>Tb(e,c.current[t])),p=ks.useContext($b),m=fv(p),g=p!==m&&function(e){for(const t in e)return!0;return!1}(p);uv(()=>{n.current++,o.ctrls=l.current;const{queue:e}=o;e.length&&(o.queue=[],ey(e,e=>e())),ey(l.current,(e,t)=>{i?.add(e),g&&e.start({default:p});const r=c.current[t];r&&(function(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}(e,r.ref),e.ref?e.queue.push(r):e.start(r))})}),mv(()=>()=>{ey(o.ctrls,e=>e.stop(!0))});const f=u.map(e=>({...e}));return i?[f,i]:f}(1,r?e:[e],r?[]:t);return r||2==arguments.length?[s,i]:s}var Ob=class extends ab{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Fy(...t);const r=this._get(),s=Pv(r);vv(this,s.create(r))}advance(e){const t=this._get();Zx(t,this.get())||(yv(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&zb(this._active)&&Lb(this)}_get(){const e=Qx.arr(this.source)?this.source.map(Uy):ry(Uy(this.source));return this.calc(...e)}_start(){this.idle&&!zb(this._active)&&(this.idle=!1,ey(bv(this),e=>{e.done=!1}),Jx.skipAnimation?($x.batchedUpdates(()=>this.advance()),Lb(this)):fy.start(this))}_attach(){let e=1;ey(ry(this.source),t=>{Wy(t)&&Ky(t,this),ib(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){ey(ry(this.source),e=>{Wy(e)&&Yy(e,this)}),this._active.clear(),Lb(this)}eventObserved(e){"change"==e.type?e.idle?this.advance():(this._active.add(e.parent),this._start()):"idle"==e.type?this._active.delete(e.parent):"priority"==e.type&&(this.priority=ry(this.source).reduce((e,t)=>Math.max(e,(ib(t)?t.priority:0)+1),0))}};function Db(e){return!1!==e.idle}function zb(e){return!e.size||Array.from(e).every(Db)}function Lb(e){e.idle||(e.idle=!0,ey(bv(e),e=>{e.done=!0}),qy(e,{type:"idle",parent:e}))}Jx.assign({createStringInterpolator:av,to:(e,t)=>new Ob(e,t)});var Fb=/^--/;function Bb(e,t){return null==t||"boolean"==typeof t||""===t?"":"number"!=typeof t||0===t||Fb.test(e)||Wb.hasOwnProperty(e)&&Wb[e]?(""+t).trim():t+"px"}var Nb={};var Wb={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ub=["Webkit","Ms","Moz","O"];Wb=Object.keys(Wb).reduce((e,t)=>(Ub.forEach(r=>e[((e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1))(r,t)]=e[t]),e),Wb);var Vb=/^(matrix|translate|scale|rotate|skew)/,qb=/^(translate)/,Gb=/^(rotate|skew)/,Hb=(e,t)=>Qx.num(e)&&0!==e?e+t:e,Kb=(e,t)=>Qx.arr(e)?e.every(e=>Kb(e,t)):Qx.num(e)?e===t:parseFloat(e)===t,Yb=class extends Cv{constructor({x:e,y:t,z:r,...s}){const i=[],n=[];(e||t||r)&&(i.push([e||0,t||0,r||0]),n.push(e=>[`translate3d(${e.map(e=>Hb(e,"px")).join(",")})`,Kb(e,0)])),ty(s,(e,t)=>{if("transform"===t)i.push([e||""]),n.push(e=>[e,""===e]);else if(Vb.test(t)){if(delete s[t],Qx.und(e))return;const r=qb.test(t)?"px":Gb.test(t)?"deg":"";i.push(ry(e)),n.push("rotate3d"===t?([e,t,s,i])=>[`rotate3d(${e},${t},${s},${Hb(i,r)})`,Kb(i,0)]:e=>[`${t}(${e.map(e=>Hb(e,r)).join(",")})`,Kb(e,t.startsWith("scale")?1:0)])}}),i.length&&(s.transform=new Jb(i,n)),super(s)}},Jb=class extends Gy{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return ey(this.inputs,(r,s)=>{const i=Uy(r[0]),[n,a]=this.transforms[s](Qx.arr(i)?i:r.map(Uy));e+=" "+n,t=t&&a}),t?"none":e}observerAdded(e){1==e&&ey(this.inputs,e=>ey(e,e=>Wy(e)&&Ky(e,this)))}observerRemoved(e){0==e&&ey(this.inputs,e=>ey(e,e=>Wy(e)&&Yy(e,this)))}eventObserved(e){"change"==e.type&&(this._value=null),qy(this,e)}};Jx.assign({batchedUpdates:Ps.unstable_batchedUpdates,createStringInterpolator:av,colors:{transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199}});var Xb=((e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:r=e=>new Cv(e),getComponentProps:s=e=>e}={})=>{const i={applyAnimatedValues:t,createAnimatedStyle:r,getComponentProps:s},n=e=>{const t=$v(e)||"Anonymous";return(e=Qx.str(e)?n[e]||(n[e]=Av(e,i)):e[Iv]||(e[Iv]=Av(e,i))).displayName=`Animated(${t})`,e};return ty(e,(t,r)=>{Qx.arr(e)&&(r=$v(t)),n[r]=n(t)}),{animated:n}})(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],{applyAnimatedValues:function(e,t){if(!e.nodeType||!e.setAttribute)return!1;const r="filter"===e.nodeName||e.parentNode&&"filter"===e.parentNode.nodeName,{className:s,style:i,children:n,scrollTop:a,scrollLeft:o,viewBox:l,...c}=t,d=Object.values(c),h=Object.keys(c).map(t=>r||e.hasAttribute(t)?t:Nb[t]||(Nb[t]=t.replace(/([A-Z])/g,e=>"-"+e.toLowerCase())));void 0!==n&&(e.textContent=n);for(const u in i)if(i.hasOwnProperty(u)){const t=Bb(u,i[u]);Fb.test(u)?e.style.setProperty(u,t):e.style[u]=t}h.forEach((t,r)=>{e.setAttribute(t,d[r])}),void 0!==s&&(e.className=s),void 0!==a&&(e.scrollTop=a),void 0!==o&&(e.scrollLeft=o),void 0!==l&&e.setAttribute("viewBox",l)},createAnimatedStyle:e=>new Yb(e),getComponentProps:({scrollTop:e,scrollLeft:t,...r})=>r}),Qb=Xb.animated;const Zb={NY:{totalProviders:1847,medspas:367,dentalPractices:1480,marketValue:"$782M",growthRate:12.8,topZipCodes:[{zip:"10021",providers:89,marketShare:4.8},{zip:"10023",providers:76,marketShare:4.1},{zip:"10028",providers:71,marketShare:3.8},{zip:"11201",providers:68,marketShare:3.7},{zip:"10016",providers:65,marketShare:3.5}],opportunities:[{type:"High Growth",count:23,value:"$12.4M"},{type:"Underserved",count:17,value:"$8.2M"},{type:"Tech Upgrade",count:45,value:"$22.1M"}],demographics:{avgIncome:"$98,400",population:"8.3M",density:"412/sq mi"}},FL:{totalProviders:2134,medspas:523,dentalPractices:1611,marketValue:"$923M",growthRate:15.2,topZipCodes:[{zip:"33139",providers:102,marketShare:4.8},{zip:"33480",providers:94,marketShare:4.4},{zip:"33432",providers:87,marketShare:4.1},{zip:"33316",providers:82,marketShare:3.8},{zip:"34108",providers:78,marketShare:3.7}],opportunities:[{type:"High Growth",count:31,value:"$18.7M"},{type:"Underserved",count:24,value:"$14.3M"},{type:"Tech Upgrade",count:67,value:"$31.2M"}],demographics:{avgIncome:"$87,200",population:"21.8M",density:"384/sq mi"}}};function ej(e){const{children:t,value:r,index:s,...i}=e;return c.jsx("div",{role:"tabpanel",hidden:r!==s,id:`territory-tabpanel-${s}`,"aria-labelledby":`territory-tab-${s}`,style:{height:"100%",display:r===s?"flex":"none",flexDirection:"column"},...i,children:r===s&&c.jsx(o,{sx:{p:3,flex:1,overflow:"auto",height:"100%"},children:t})})}function tj(){const e=l(),[t,r]=ks.useState(0),[s,d]=ks.useState("NY"),[u,p]=ks.useState("analytics"),[m,g]=ks.useState(!1),[x,y]=ks.useState(!1),[b,k]=ks.useState(null),C=Zb[s],[{number:S},T]=Rb(()=>({from:{number:0},number:C.totalProviders,config:{duration:1e3}}));ks.useEffect(()=>{T.start({number:C.totalProviders})},[s,T,C.totalProviders]);return c.jsxs(o,{sx:{width:"100%",height:"100%",position:"relative",display:"flex",flexDirection:"column"},children:[c.jsx(o,{sx:{position:"absolute",top:9,left:9,width:8,height:8,borderRadius:"50%",background:"radial-gradient(circle at center, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.15) 40%, transparent 70%)",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.5), inset 0 -1px 1px rgba(255,255,255,0.1), 0 1px 1px rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,"&::before":{content:'""',position:"absolute",width:5,height:5,background:"radial-gradient(circle at 35% 35%, #e0e0e0 0%, #b8b8b8 15%, #888 40%, #555 70%, #222 100%)",borderRadius:"50%",boxShadow:"inset 0 0.5px 1px rgba(255,255,255,0.4), inset 0 -0.5px 1px rgba(0,0,0,0.5), 0 0.5px 2px rgba(0,0,0,0.8)"},"&::after":{content:'""',position:"absolute",width:"70%",height:"0.5px",background:"linear-gradient(90deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}),c.jsx(o,{sx:{position:"absolute",top:9,right:9,width:8,height:8,borderRadius:"50%",background:"radial-gradient(circle at center, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.15) 40%, transparent 70%)",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.5), inset 0 -1px 1px rgba(255,255,255,0.1), 0 1px 1px rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,"&::before":{content:'""',position:"absolute",width:5,height:5,background:"radial-gradient(circle at 35% 35%, #e0e0e0 0%, #b8b8b8 15%, #888 40%, #555 70%, #222 100%)",borderRadius:"50%",boxShadow:"inset 0 0.5px 1px rgba(255,255,255,0.4), inset 0 -0.5px 1px rgba(0,0,0,0.5), 0 0.5px 2px rgba(0,0,0,0.8)"},"&::after":{content:'""',position:"absolute",width:"70%",height:"0.5px",background:"linear-gradient(90deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}),c.jsx(o,{sx:{position:"absolute",bottom:9,left:9,width:8,height:8,borderRadius:"50%",background:"radial-gradient(circle at center, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.15) 40%, transparent 70%)",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.5), inset 0 -1px 1px rgba(255,255,255,0.1), 0 1px 1px rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,"&::before":{content:'""',position:"absolute",width:5,height:5,background:"radial-gradient(circle at 35% 35%, #e0e0e0 0%, #b8b8b8 15%, #888 40%, #555 70%, #222 100%)",borderRadius:"50%",boxShadow:"inset 0 0.5px 1px rgba(255,255,255,0.4), inset 0 -0.5px 1px rgba(0,0,0,0.5), 0 0.5px 2px rgba(0,0,0,0.8)"},"&::after":{content:'""',position:"absolute",width:"70%",height:"0.5px",background:"linear-gradient(90deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}),c.jsx(o,{sx:{position:"absolute",bottom:9,right:9,width:8,height:8,borderRadius:"50%",background:"radial-gradient(circle at center, rgba(0,0,0,0.3) 0%, rgba(0,0,0,0.15) 40%, transparent 70%)",boxShadow:"inset 0 1px 2px rgba(0,0,0,0.5), inset 0 -1px 1px rgba(255,255,255,0.1), 0 1px 1px rgba(255,255,255,0.05)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:10,"&::before":{content:'""',position:"absolute",width:5,height:5,background:"radial-gradient(circle at 35% 35%, #e0e0e0 0%, #b8b8b8 15%, #888 40%, #555 70%, #222 100%)",borderRadius:"50%",boxShadow:"inset 0 0.5px 1px rgba(255,255,255,0.4), inset 0 -0.5px 1px rgba(0,0,0,0.5), 0 0.5px 2px rgba(0,0,0,0.8)"},"&::after":{content:'""',position:"absolute",width:"70%",height:"0.5px",background:"linear-gradient(90deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}}),c.jsxs(o,{sx:{mb:3,display:"flex",justifyContent:"space-between",alignItems:{xs:"flex-start",md:"center"},flexDirection:{xs:"column",md:"row"},gap:2},children:[c.jsxs(o,{sx:{mb:{xs:2,md:0}},children:[c.jsx(h,{variant:"h4",gutterBottom:!0,sx:{fontWeight:600},children:"Territory Intelligence"}),c.jsxs(h,{variant:"body1",color:"text.secondary",children:["Real-time market insights for ","NY"===s?"New York":"Florida"]})]}),c.jsxs(o,{sx:{display:"flex",gap:2,alignItems:"center",flexDirection:{xs:"column",sm:"row"},width:{xs:"100%",md:"auto"}},children:[c.jsxs(Ue,{value:s,exclusive:!0,onChange:(e,t)=>{t&&d(t)},size:"small",sx:{width:{xs:"100%",sm:"auto"},"& .MuiToggleButton-root":{flex:{xs:1,sm:"none"},px:{xs:2,sm:3},fontSize:{xs:"0.8rem",sm:"0.875rem"}}},children:[c.jsxs(Ve,{value:"NY",children:[c.jsx(jx,{size:16,style:{marginRight:8}}),"New York"]}),c.jsxs(Ve,{value:"FL",children:[c.jsx(jx,{size:16,style:{marginRight:8}}),"Florida"]})]}),c.jsxs(Ue,{value:u,exclusive:!0,onChange:(e,t)=>{t&&p(t)},size:"small",sx:{width:{xs:"100%",sm:"auto"},"& .MuiToggleButton-root":{flex:{xs:1,sm:"none"},minWidth:{xs:"auto",sm:"48px"}}},children:[c.jsx(Ve,{value:"analytics",children:c.jsx(px,{size:16})}),c.jsx(Ve,{value:"map",children:c.jsx(wx,{size:16})}),c.jsx(Ve,{value:"list",children:c.jsx(vx,{size:16})})]})]})]}),c.jsxs(A,{container:!0,spacing:3,sx:{mb:3},children:[c.jsx(A,{item:!0,xs:12,sm:6,md:3,children:c.jsx(Mt,{in:!0,timeout:500,children:c.jsx(i,{sx:{background:`linear-gradient(135deg, ${n(e.palette.primary.main,.1)} 0%, ${n(e.palette.primary.main,.05)} 100%)`,border:`1px solid ${n(e.palette.primary.main,.2)}`,height:"100%"},children:c.jsx(v,{sx:{p:{xs:2,sm:3}},children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[c.jsxs(o,{sx:{flex:1},children:[c.jsx(h,{color:"text.secondary",variant:"body2",gutterBottom:!0,children:"Total Providers"}),c.jsx(h,{variant:"h4",sx:{fontWeight:700},children:c.jsx(Qb.span,{children:S.to(e=>Math.floor(e).toLocaleString())})}),c.jsxs(o,{sx:{mt:1,display:"flex",gap:1,flexDirection:{xs:"column",sm:"row"},"& .MuiChip-root":{fontSize:{xs:"0.75rem",sm:"0.8125rem"}}},children:[c.jsx(H,{label:`${C.medspas} Medspas`,size:"small",color:"primary"}),c.jsx(H,{label:`${C.dentalPractices} Dental`,size:"small"})]})]}),c.jsx(X,{sx:{bgcolor:n(e.palette.primary.main,.1),width:{xs:40,sm:56},height:{xs:40,sm:56}},children:c.jsx(ux,{size:20})})]})})})})}),c.jsx(A,{item:!0,xs:12,sm:6,md:3,children:c.jsx(Mt,{in:!0,timeout:700,children:c.jsx(i,{sx:{background:`linear-gradient(135deg, ${n(e.palette.success.main,.1)} 0%, ${n(e.palette.success.main,.05)} 100%)`,border:`1px solid ${n(e.palette.success.main,.2)}`,height:"100%"},children:c.jsx(v,{sx:{p:{xs:2,sm:3}},children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[c.jsxs(o,{sx:{flex:1},children:[c.jsx(h,{color:"text.secondary",variant:"body2",gutterBottom:!0,children:"Market Value"}),c.jsx(h,{variant:"h4",sx:{fontWeight:700},children:C.marketValue}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",mt:1,flexWrap:"wrap"},children:[c.jsx(Px,{size:16,color:e.palette.success.main}),c.jsxs(h,{variant:"body2",color:"success.main",sx:{ml:.5},children:["+",C.growthRate,"% YoY"]})]})]}),c.jsx(X,{sx:{bgcolor:n(e.palette.success.main,.1),width:{xs:40,sm:56},height:{xs:40,sm:56}},children:c.jsx(fx,{size:20})})]})})})})}),c.jsx(A,{item:!0,xs:12,sm:6,md:3,children:c.jsx(Mt,{in:!0,timeout:900,children:c.jsx(i,{sx:{background:`linear-gradient(135deg, ${n(e.palette.warning.main,.1)} 0%, ${n(e.palette.warning.main,.05)} 100%)`,border:`1px solid ${n(e.palette.warning.main,.2)}`,height:"100%"},children:c.jsx(v,{sx:{p:{xs:2,sm:3}},children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[c.jsxs(o,{sx:{flex:1},children:[c.jsx(h,{color:"text.secondary",variant:"body2",gutterBottom:!0,children:"Opportunities"}),c.jsx(h,{variant:"h4",sx:{fontWeight:700},children:C.opportunities.reduce((e,t)=>e+t.count,0)}),c.jsxs(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:["Worth ",C.opportunities.reduce((e,t)=>e+parseFloat(t.value.replace("$","").replace("M","")),0).toFixed(1),"M"]})]}),c.jsx(X,{sx:{bgcolor:n(e.palette.warning.main,.1),width:{xs:40,sm:56},height:{xs:40,sm:56}},children:c.jsx(Tx,{size:20})})]})})})})}),c.jsx(A,{item:!0,xs:12,sm:6,md:3,children:c.jsx(Mt,{in:!0,timeout:1100,children:c.jsx(i,{sx:{background:`linear-gradient(135deg, ${n(e.palette.info.main,.1)} 0%, ${n(e.palette.info.main,.05)} 100%)`,border:`1px solid ${n(e.palette.info.main,.2)}`,height:"100%"},children:c.jsx(v,{sx:{p:{xs:2,sm:3}},children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0}},children:[c.jsxs(o,{sx:{flex:1},children:[c.jsx(h,{color:"text.secondary",variant:"body2",gutterBottom:!0,children:"Demographics"}),c.jsx(h,{variant:"h6",sx:{fontWeight:600},children:C.demographics.population}),c.jsxs(h,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:["Avg Income: ",C.demographics.avgIncome]})]}),c.jsx(X,{sx:{bgcolor:n(e.palette.info.main,.1),width:{xs:40,sm:56},height:{xs:40,sm:56}},children:c.jsx(Ax,{size:20})})]})})})})})]}),c.jsxs(i,{sx:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:[c.jsx(o,{sx:{borderBottom:1,borderColor:"divider"},children:c.jsxs(w,{value:t,onChange:(e,t)=>r(t),variant:"scrollable",scrollButtons:"auto",allowScrollButtonsMobile:!0,sx:{"& .MuiTab-root":{minWidth:{xs:"auto",sm:160},fontSize:{xs:"0.8rem",sm:"0.875rem"},padding:{xs:"6px 8px",sm:"12px 16px"},"& .MuiTab-iconWrapper":{marginRight:{xs:1,sm:2}}}},children:[c.jsx(_,{label:c.jsx(o,{sx:{display:{xs:"none",sm:"block"}},children:"Market Overview"}),icon:c.jsx(px,{size:16}),iconPosition:"start",sx:{"& .MuiTab-iconWrapper":{display:{xs:"block",sm:"flex"}}}}),c.jsx(_,{label:c.jsx(o,{sx:{display:{xs:"none",sm:"block"}},children:"Top Opportunities"}),icon:c.jsx(Tx,{size:16}),iconPosition:"start",sx:{"& .MuiTab-iconWrapper":{display:{xs:"block",sm:"flex"}}}}),c.jsx(_,{label:c.jsx(o,{sx:{display:{xs:"none",sm:"block"}},children:"Provider Directory"}),icon:c.jsx(ux,{size:16}),iconPosition:"start",sx:{"& .MuiTab-iconWrapper":{display:{xs:"block",sm:"flex"}}}}),c.jsx(_,{label:c.jsx(o,{sx:{display:{xs:"none",sm:"block"}},children:"Territory Insights"}),icon:c.jsx(hx,{size:16}),iconPosition:"start",sx:{"& .MuiTab-iconWrapper":{display:{xs:"block",sm:"flex"}}}})]})}),c.jsx(ej,{value:t,index:0,children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsxs(A,{item:!0,xs:12,md:6,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Top ZIP Codes by Provider Density"}),c.jsx(nt,{component:j,variant:"outlined",children:c.jsxs(at,{size:"small",children:[c.jsx(ot,{children:c.jsxs(lt,{children:[c.jsx(ct,{children:"ZIP Code"}),c.jsx(ct,{align:"right",children:"Providers"}),c.jsx(ct,{align:"right",children:"Market Share"}),c.jsx(ct,{align:"right",children:"Action"})]})}),c.jsx(ht,{children:C.topZipCodes.map(e=>c.jsxs(lt,{hover:!0,children:[c.jsx(ct,{children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(jx,{size:16}),e.zip]})}),c.jsx(ct,{align:"right",children:c.jsx(H,{label:e.providers,size:"small"})}),c.jsxs(ct,{align:"right",children:[e.marketShare,"%"]}),c.jsx(ct,{align:"right",children:c.jsx(Pe,{title:"View Details",children:c.jsx(f,{size:"small",children:c.jsx(yx,{size:16})})})})]},e.zip))})]})})]}),c.jsxs(A,{item:!0,xs:12,md:6,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Opportunity Breakdown"}),C.opportunities.map((t,r)=>c.jsx(i,{sx:{mb:2,bgcolor:n(e.palette.primary.main,.02)},children:c.jsx(v,{children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle1",sx:{fontWeight:600},children:t.type}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:[t.count," opportunities identified"]})]}),c.jsxs(o,{sx:{textAlign:"right"},children:[c.jsx(h,{variant:"h6",color:"primary",children:t.value}),c.jsx(H,{label:"View All",size:"small",clickable:!0,icon:c.jsx(mx,{size:14})})]})]})})},r))]})]})}),c.jsxs(ej,{value:t,index:1,children:[c.jsxs(R,{severity:"info",sx:{mb:3},children:[c.jsx(h,{variant:"subtitle2",children:"AI-Powered Opportunity Detection"}),c.jsxs(h,{variant:"body2",children:["Our system has identified ",C.opportunities.reduce((e,t)=>e+t.count,0)," high-value opportunities in your territory based on market gaps, growth patterns, and provider capabilities."]})]}),c.jsx(A,{container:!0,spacing:2,children:["High Growth Markets","Underserved Areas","Technology Upgrades"].map((t,r)=>c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(i,{sx:{height:"100%",position:"relative",overflow:"hidden"},children:[c.jsx(o,{sx:{position:"absolute",top:0,right:0,width:100,height:100,background:`radial-gradient(circle, ${n(e.palette.primary.main,.1)} 0%, transparent 70%)`}}),c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[c.jsx(X,{sx:{bgcolor:e.palette.primary.main},children:0===r?c.jsx(Ex,{}):1===r?c.jsx(_x,{}):c.jsx(Cx,{})}),c.jsx(h,{variant:"h6",children:t})]}),c.jsxs(h,{variant:"body2",color:"text.secondary",paragraph:!0,children:[0===r&&"Practices experiencing rapid patient growth exceeding capacity",1===r&&"Geographic areas with high demand but limited provider access",2===r&&"Providers using outdated systems ready for modernization"]}),c.jsx(a,{fullWidth:!0,variant:"outlined",endIcon:c.jsx(mx,{}),sx:{mt:2},children:"Explore Opportunities"})]})]})},r))})]}),c.jsxs(ej,{value:t,index:2,children:[c.jsxs(o,{sx:{mb:3,display:"flex",gap:2,flexDirection:{xs:"column",md:"row"},alignItems:{xs:"stretch",md:"center"}},children:[c.jsx(Ge,{placeholder:"Search providers...",variant:"outlined",size:"small",sx:{flexGrow:1,maxWidth:{xs:"100%",md:400},mb:{xs:2,md:0}},InputProps:{startAdornment:c.jsx(yx,{size:20,style:{marginRight:8,opacity:.5}})}}),c.jsxs(o,{sx:{display:"flex",gap:2,flexDirection:{xs:"column",sm:"row"},width:{xs:"100%",md:"auto"}},children:[c.jsxs(Rt,{size:"small",sx:{minWidth:{xs:"100%",sm:150}},children:[c.jsx(Ot,{children:"Provider Type"}),c.jsxs(Dt,{label:"Provider Type",defaultValue:"all",children:[c.jsx(zt,{value:"all",children:"All Types"}),c.jsx(zt,{value:"medspa",children:"Med Spas"}),c.jsx(zt,{value:"dental",children:"Dental Practices"})]})]}),c.jsx(a,{variant:"outlined",startIcon:c.jsx(xx,{}),sx:{minWidth:{xs:"100%",sm:"auto"},fontSize:{xs:"0.875rem",sm:"0.875rem"}},children:"Export Data"})]})]}),c.jsx(R,{severity:"success",sx:{mb:2},children:c.jsxs(h,{variant:"body2",children:[c.jsx("strong",{children:C.totalProviders.toLocaleString()})," verified providers in ",s," with complete contact information and business intelligence."]})}),c.jsx(h,{variant:"body1",color:"text.secondary",sx:{textAlign:"center",py:4},children:"Provider directory with advanced filtering and real-time data updates"})]}),c.jsx(ej,{value:t,index:3,children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsxs(A,{item:!0,xs:12,md:8,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Market Intelligence Summary"}),c.jsx(i,{variant:"outlined",children:c.jsx(v,{children:c.jsxs(V,{spacing:2,children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsx(X,{sx:{bgcolor:n(e.palette.success.main,.1)},children:c.jsx(Sx,{color:e.palette.success.main})}),c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle1",children:"High Growth Momentum"}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:[s," market growing ",C.growthRate,"% annually, outpacing national average by 3.2%"]})]})]}),c.jsx(N,{}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsx(X,{sx:{bgcolor:n(e.palette.info.main,.1)},children:c.jsx(gx,{color:e.palette.info.main})}),c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle1",children:"Data Coverage"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"98.7% provider coverage with verified contact information updated weekly"})]})]}),c.jsx(N,{}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsx(X,{sx:{bgcolor:n(e.palette.warning.main,.1)},children:c.jsx(dx,{color:e.palette.warning.main})}),c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle1",children:"Competitive Advantage"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"First-mover advantage in 43% of identified opportunity zones"})]})]})]})})})]}),c.jsxs(A,{item:!0,xs:12,md:4,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Quick Actions"}),c.jsxs(V,{spacing:2,children:[c.jsxs(a,{fullWidth:!0,variant:"contained",startIcon:c.jsx(xx,{}),sx:{fontSize:{xs:"0.875rem",sm:"0.875rem"},padding:{xs:"8px 16px",sm:"8px 22px"}},children:[c.jsx(o,{sx:{display:{xs:"none",sm:"block"}},children:"Download Full Report"}),c.jsx(o,{sx:{display:{xs:"block",sm:"none"}},children:"Download Report"})]}),c.jsxs(a,{fullWidth:!0,variant:"outlined",startIcon:c.jsx(bx,{}),sx:{fontSize:{xs:"0.875rem",sm:"0.875rem"},padding:{xs:"8px 16px",sm:"8px 22px"}},children:[c.jsx(o,{sx:{display:{xs:"none",sm:"block"}},children:"Schedule Territory Review"}),c.jsx(o,{sx:{display:{xs:"block",sm:"none"}},children:"Schedule Review"})]}),c.jsxs(a,{fullWidth:!0,variant:"outlined",startIcon:c.jsx(kx,{}),sx:{fontSize:{xs:"0.875rem",sm:"0.875rem"},padding:{xs:"8px 16px",sm:"8px 22px"}},children:[c.jsx(o,{sx:{display:{xs:"none",sm:"block"}},children:"Configure Alerts"}),c.jsx(o,{sx:{display:{xs:"block",sm:"none"}},children:"Alerts"})]})]})]})]})})]})]})}tj.displayName="EnhancedTerritoryIntelligence";var rj={},sj=Te;Object.defineProperty(rj,"__esModule",{value:!0});var ij=rj.default=void 0,nj=sj(Zs()),aj=c;ij=rj.default=(0,nj.default)((0,aj.jsx)("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");var oj={},lj=Te;Object.defineProperty(oj,"__esModule",{value:!0});var cj=oj.default=void 0,dj=lj(Zs()),hj=c;cj=oj.default=(0,dj.default)((0,hj.jsx)("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess");var uj={},pj=Te;Object.defineProperty(uj,"__esModule",{value:!0});var mj=uj.default=void 0,gj=pj(Zs()),fj=c;mj=uj.default=(0,gj.default)((0,fj.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const xj=class e{constructor(){t(this,"tableCache",new Map),t(this,"dataCache",null),t(this,"lastFetch",0),t(this,"CACHE_DURATION",3e5)}static getInstance(){return e.instance||(e.instance=new e),e.instance}async discoverAllTables(){$f.info("Discovering all Supabase tables");try{let s=null,i=null;try{const e=await nl.rpc("list_tables");s=e.data,i=e.error}catch(e){$f.warn("RPC function not available, trying alternative approach"),i=e}if(i){$f.warn("Failed to get tables from RPC, trying direct query");const e=["procedures","dental_procedures","aesthetic_procedures","companies","dental_companies","aesthetic_companies","dental_procedure_categories","aesthetic_categories","standardized_procedure_categories"],r=[];for(const s of e)try{const e=s.replace("*",""),{data:t,error:i,count:n}=await nl.from(e).select("*",{count:"exact"}).limit(3);if(!i&&t){const s=t.length>0?Object.keys(t[0]):[],i=s.some(e=>e.includes("market_size")||e.includes("revenue")||e.includes("cost")),a=s.some(e=>e.includes("region")||e.includes("territory")||e.includes("location"));r.push({tablename:e,rowCount:n||0,columns:s,sampleData:t,hasMarketData:i,hasGeoData:a,dataType:this.categorizeTable(e,s)})}}catch(t){}return r}const n=[];for(const e of s||[]){const t=e.table_name||e.tablename;try{const{data:e,error:r,count:s}=await nl.from(t).select("*",{count:"exact"}).limit(5);if(!r&&e){const r=e.length>0?Object.keys(e[0]):[],i=r.some(e=>e.includes("market_size")||e.includes("revenue")||e.includes("cost")||e.includes("price")),a=r.some(e=>e.includes("region")||e.includes("territory")||e.includes("location")||e.includes("geo")),o={tablename:t,rowCount:s||0,columns:r,sampleData:e,hasMarketData:i,hasGeoData:a,dataType:this.categorizeTable(t,r)};n.push(o),this.tableCache.set(t,o)}}catch(r){$f.warn("Failed to analyze table",{tableName:t,error:Mf(r)})}}return $f.info("Discovered tables with comprehensive data",{count:n.length}),n}catch(s){return $f.error("Error discovering tables",{error:Mf(s)}),[]}}categorizeTable(e,t){const r=e.toLowerCase();return r.includes("procedure")?"procedures":r.includes("company")||r.includes("provider")?"companies":r.includes("categor")?"categories":r.includes("analytic")||r.includes("search")||r.includes("trend")?"analytics":r.includes("region")||r.includes("territory")||r.includes("location")||r.includes("geo")?"geography":"other"}async getComprehensiveMarketData(){const e=Date.now();if(this.dataCache&&e-this.lastFetch<this.CACHE_DURATION)return this.dataCache;$f.info("Fetching comprehensive market data");try{$f.debug("Fetching procedures and companies data");const[t,r,s,i]=await Promise.allSettled([nl.from("dental_procedures").select("*"),nl.from("aesthetic_procedures").select("*"),nl.from("dental_companies").select("*"),nl.from("aesthetic_companies").select("*")]);if($f.debug("Data fetching responses received",{dentalProceduresStatus:t.status,aestheticProceduresStatus:r.status,dentalCompaniesStatus:s.status,aestheticCompaniesStatus:i.status}),"fulfilled"===t.status&&t.value.data&&t.value.data.length>0){const e=t.value.data[0];$f.debug("Sample dental procedure fields analyzed",{hasMarketSize2025:"market_size_2025_usd_millions"in e,hasMarketSize:"market_size_usd_millions"in e,hasMarketSizeAlt:"market_size"in e,marketFieldCount:Object.keys(e).filter(e=>e.includes("market")).length})}const[n,a,o]=await Promise.allSettled([nl.from("dental_procedure_categories").select("*"),nl.from("aesthetic_categories").select("*"),nl.from("category_hierarchy").select("*").order("display_order",{ascending:!0})]),l="fulfilled"===n.status&&n.value.data||[],c="fulfilled"===a.status&&a.value.data||[],d="fulfilled"===o.status&&o.value.data||[];$f.debug("Category data loaded",{dentalCategoriesCount:l?.length||0,aestheticCategoriesCount:c?.length||0,categoryHierarchyLoaded:!!d});const h=("fulfilled"===t.status&&t.value.data||[]).map(e=>{const t=d.find(t=>t.id===e.category_hierarchy_id||"dental"===t.industry&&t.name===e.category||"dental"===t.industry&&t.name===e.clinical_category),r=l.find(t=>t.id===e.clinical_category_id||t.name===e.category||t.name===e.clinical_category),s=t||r;return{...e,id:e.id||`dental_${e.procedure_name||e.name}`,procedure_name:e.procedure_name||e.name||"Unknown Procedure",category:s?.name||e.category||e.clinical_category||e.normalized_category||"General Dentistry",category_id:s?.id||e.clinical_category_id||e.category_hierarchy_id,category_description:s?.description,category_hierarchy_id:e.category_hierarchy_id||t?.id,hierarchy_category:t,industry:"dental",market_size_2025_usd_millions:e.market_size_2025_usd_millions||e.market_size_usd_millions||e.market_size||0,yearly_growth_percentage:e.yearly_growth_percentage||e.growth_rate||0,average_cost_usd:e.average_cost_usd||e.cost||e.price||0,trending_score:e.trending_score||e.popularity_score||0,popularity_score:e.popularity_score||e.trending_score||0}}),u=("fulfilled"===r.status&&r.value.data||[]).map(e=>{const t=d.find(t=>t.id===e.category_hierarchy_id||"aesthetic"===t.industry&&t.name===e.category||"aesthetic"===t.industry&&t.name===e.aesthetic_category),r=c.find(t=>t.id===e.aesthetic_category_id||t.name===e.category||t.name===e.aesthetic_category),s=t||r;return{...e,id:e.id||`aesthetic_${e.procedure_name||e.name}`,procedure_name:e.procedure_name||e.name||"Unknown Procedure",category:s?.name||e.category||e.aesthetic_category||e.normalized_category||"Aesthetic Medicine",category_id:s?.id||e.aesthetic_category_id||e.category_hierarchy_id,category_description:s?.description,category_hierarchy_id:e.category_hierarchy_id||t?.id,hierarchy_category:t,industry:"aesthetic",market_size_2025_usd_millions:e.market_size_2025_usd_millions||e.market_size_usd_millions||e.market_size||0,yearly_growth_percentage:e.yearly_growth_percentage||e.growth_rate||0,average_cost_usd:e.average_cost_usd||e.cost||e.price||0,trending_score:e.trending_score||e.popularity_score||0,popularity_score:e.popularity_score||e.trending_score||0}}),p=[...h,...u],m=p.reduce((e,t)=>{const r=`${t.procedure_name}_${t.industry}`,s=e.get(r);return(!s||t.market_size_2025_usd_millions>s.market_size_2025_usd_millions||t.market_size_2025_usd_millions===s.market_size_2025_usd_millions&&t.yearly_growth_percentage>s.yearly_growth_percentage)&&e.set(r,t),e},new Map),g=Array.from(m.values()),f=("fulfilled"===s.status&&s.value.data||[]).map(e=>({...e,id:e.id||`dental_company_${e.name}`,company_name:e.name||"Unknown Company",industry:"dental",market_size_usd_billions:e.market_size_2025_usd_billion||0})),x=("fulfilled"===i.status&&i.value.data||[]).map(e=>({...e,id:e.id||`aesthetic_company_${e.name}`,company_name:e.name||"Unknown Company",industry:"aesthetic",market_size_usd_billions:e.market_size_2025_usd_billion||0})),y=[...f,...x];$f.info("Data processing complete",{dentalProcedures:h.length,aestheticProcedures:u.length,dentalCompanies:f.length,aestheticCompanies:x.length,uniqueProcedures:g.length,duplicatesRemoved:p.length-g.length});const v=g.reduce((e,t)=>(t.market_size_2025_usd_millions>0?e.primary++:t.market_size_usd_millions>0?e.fallback1++:t.market_size>0?e.fallback2++:e.none++,e),{primary:0,fallback1:0,fallback2:0,none:0});$f.debug("Market size field usage analyzed",{fieldUsage:v});const b=this.extractTerritoryData(g),j=g.reduce((e,t)=>e+(t.market_size_2025_usd_millions||t.market_size_usd_millions||0),0),w=g.length,_=g.reduce((e,t)=>e+(t.yearly_growth_percentage||t.growth_rate||0),0),k=w>0?_/w:0,C={procedures:g,companies:y,categories:[...d.map(e=>({...e,type:"category_hierarchy"})),...l.map(e=>({...e,industry:"dental",type:"dental_procedure_category"})),...c.map(e=>({...e,industry:"aesthetic",type:"aesthetic_category"}))],territories:b,analytics:[],marketMetrics:{totalMarketSize:j,totalProcedures:g.length,totalCompanies:y.length,averageGrowth:k,territoryCount:b.length}};return this.dataCache=C,this.lastFetch=e,$f.info("Comprehensive market data loaded successfully",{procedures:p.length,dentalProcedures:h.length,aestheticProcedures:u.length,companies:y.length,dentalCompanies:f.length,aestheticCompanies:x.length,territories:b.length,totalMarketSizeMB:j.toFixed(2),avgGrowthPercent:k.toFixed(1)}),C}catch(t){throw $f.error("Error fetching comprehensive market data",{error:Mf(t)}),t}}extractTerritoryData(e){const t=new Map;return e.forEach(e=>{if(e.regional_popularity)try{const r="string"==typeof e.regional_popularity?JSON.parse(e.regional_popularity):e.regional_popularity;Object.entries(r).forEach(([r,s])=>{t.has(r)||t.set(r,{name:r,procedures:[],totalMarketSize:0,averageGrowth:0,companies:new Set,saturation:0});const i=t.get(r);i.procedures.push(e.procedure_name||e.name),i.totalMarketSize+=e.market_size_2025_usd_millions||0,s.popularity&&(i.saturation=Math.max(i.saturation,s.popularity))})}catch(r){}}),Array.from(t.values()).map(e=>({...e,procedures:e.procedures.length,companies:e.companies.size}))}async searchProcedures(e,t={}){return(await this.getComprehensiveMarketData()).procedures.filter(r=>{const s=!e||r.procedure_name?.toLowerCase().includes(e.toLowerCase())||r.name?.toLowerCase().includes(e.toLowerCase())||r.category?.toLowerCase().includes(e.toLowerCase()),i=!t.industry||r.industry===t.industry,n=!t.minMarketSize||(r.market_size_2025_usd_millions||r.market_size_usd_millions||0)>=t.minMarketSize;return s&&i&&n})}async getCategories(e){const t=await this.getComprehensiveMarketData();return e?t.categories.filter(t=>t.industry===e):t.categories}async getProceduresByCategory(e,t){return(await this.getComprehensiveMarketData()).procedures.filter(r=>{const s=r.category===e,i=!t||r.industry===t;return s&&i})}async getTopGrowthProcedures(e=20){return(await this.getComprehensiveMarketData()).procedures.filter(e=>e.yearly_growth_percentage||e.growth_rate).sort((e,t)=>(t.yearly_growth_percentage||t.growth_rate||0)-(e.yearly_growth_percentage||e.growth_rate||0)).slice(0,e)}async getTerritoryInsights(){return(await this.getComprehensiveMarketData()).territories.sort((e,t)=>t.totalMarketSize-e.totalMarketSize).slice(0,10)}clearCache(){this.dataCache=null,this.tableCache.clear(),this.lastFetch=0}async testSpecificTables(){$f.info("Testing specific dental_procedures and aesthetic_procedures tables");try{const[e,t]=await Promise.allSettled([nl.from("dental_procedures").select("*").limit(5),nl.from("aesthetic_procedures").select("*").limit(5)]);return $f.debug("Table tests completed",{dentalTestRows:"fulfilled"===e.status&&e.value.data?.length||0,aestheticTestRows:"fulfilled"===t.status&&t.value.data?.length||0}),{dental:e,aesthetic:t}}catch(e){return $f.error("Table test failed",{error:Mf(e)}),{error:e}}}};t(xj,"instance");const yj=xj.getInstance(),vj={Diagnostic:{icon:er,color:"#1E88E5"},"Diagnostic Procedures":{icon:er,color:"#1E88E5"},Preventive:{icon:Vt,color:"#43A047"},"Preventive Procedures":{icon:Vt,color:"#43A047"},Restorative:{icon:Nt,color:"#FB8C00"},"Restorative Procedures":{icon:Nt,color:"#FB8C00"},Cosmetic:{icon:q,color:"#E91E63"},"Cosmetic Procedures":{icon:q,color:"#E91E63"},"Oral Surgery":{icon:Ft,color:"#E53935"},"Oral Surgery Procedures":{icon:Ft,color:"#E53935"},Endodontic:{icon:kt,color:"#8E24AA"},"Endodontic Procedures":{icon:kt,color:"#8E24AA"},Periodontic:{icon:cr,color:"#43A047"},"Periodontic Procedures":{icon:cr,color:"#43A047"},Prosthodontic:{icon:Kt,color:"#546E7A"},"Prosthodontic Procedures":{icon:Kt,color:"#546E7A"},Orthodontic:{icon:lr,color:"#00ACC1"},"Orthodontic Procedures":{icon:lr,color:"#00ACC1"},Implantology:{icon:Ht,color:"#3949AB"},"Implantology Procedures":{icon:Ht,color:"#3949AB"},"Digital Dentistry":{icon:Wt,color:"#5E35B1"},"Digital Dentistry Procedures":{icon:Wt,color:"#5E35B1"},"Facial Aesthetic":{icon:Yt,color:"#EC407A"},"Facial Aesthetic Procedures":{icon:Yt,color:"#EC407A"},Injectables:{icon:Qt,color:"#AB47BC"},"Injectables Procedures":{icon:Qt,color:"#AB47BC"},Body:{icon:or,color:"#FF5722"},"Body Procedures":{icon:or,color:"#FF5722"},Skin:{icon:ar,color:"#FFB300"},"Skin Procedures":{icon:ar,color:"#FFB300"},Hair:{icon:Xt,color:"#6D4C41"},"Hair Procedures":{icon:Xt,color:"#6D4C41"},"Minimally Invasive":{icon:Jt,color:"#00BCD4"},"Minimally Invasive Procedures":{icon:Jt,color:"#00BCD4"},Regenerative:{icon:kt,color:"#66BB6A"},"Regenerative Procedures":{icon:kt,color:"#66BB6A"},Lasers:{icon:qt,color:"#FF6F00"},"Lasers Procedures":{icon:qt,color:"#FF6F00"},Combination:{icon:nr,color:"#7E57C2"},"Combination Procedures":{icon:nr,color:"#7E57C2"},"Body Contouring":{icon:Ut,color:"#FF5722"},"Body Contouring Procedures":{icon:Ut,color:"#FF5722"},"Skin Resurfacing":{icon:Gt,color:"#00BCD4"},"Skin Resurfacing Procedures":{icon:Gt,color:"#00BCD4"},"Skin Tightening":{icon:ir,color:"#4CAF50"},"Skin Tightening Procedures":{icon:ir,color:"#4CAF50"},Pigmentation:{icon:sr,color:"#FF9800"},"Pigmentation Procedures":{icon:sr,color:"#FF9800"},Imaging:{icon:rr,color:"#2196F3"},"Imaging Procedures":{icon:rr,color:"#2196F3"},"Single Implants":{icon:Ht,color:"#3F51B5"},Extractions:{icon:Ft,color:"#F44336"},Whitening:{icon:q,color:"#FFC107"},"Whitening Procedures":{icon:q,color:"#FFC107"},Cleanings:{icon:tr,color:"#4CAF50"},"Cleanings Procedures":{icon:tr,color:"#4CAF50"},"Ablative Lasers":{icon:qt,color:"#FF5722"},"MediFacial Combos":{icon:Bt,color:"#E91E63"},Fillings:{icon:Nt,color:"#FF9800"},"Fillings Procedures":{icon:Nt,color:"#FF9800"},"PRP Treatments":{icon:kt,color:"#4CAF50"},"Hair Restoration":{icon:Xt,color:"#795548"},Neuromodulators:{icon:U,color:"#9C27B0"},"Non-surgical Facial":{icon:Bt,color:"#E91E63"},"Non-surgical Facial Procedures":{icon:Bt,color:"#E91E63"},"Stem Cell Procedures":{icon:vt,color:"#4CAF50"},"Stem Cell Procedures Procedures":{icon:vt,color:"#4CAF50"},Sealants:{icon:Vt,color:"#00BCD4"},"Sealants Procedures":{icon:Vt,color:"#00BCD4"},Crowns:{icon:Kt,color:"#795548"},"Crowns Procedures":{icon:Kt,color:"#795548"},Screening:{icon:er,color:"#2196F3"},"Screening Procedures":{icon:er,color:"#2196F3"},Veneers:{icon:Kt,color:"#607D8B"},"Veneers Procedures":{icon:Kt,color:"#607D8B"},"Bone Grafting":{icon:Zt,color:"#FF7043"},"Bone Grafting Procedures":{icon:Zt,color:"#FF7043"},"Full Arch Implants":{icon:Ht,color:"#3F51B5"},"Facial Contouring":{icon:Bt,color:"#E91E63"},"Facial Contouring Procedures":{icon:Bt,color:"#E91E63"},"Dermal Fillers":{icon:Qt,color:"#E91E63"},"Dermal Fillers Procedures":{icon:Qt,color:"#E91E63"},"Body Tightening":{icon:Ut,color:"#FF5722"},"Body Tightening Procedures":{icon:Ut,color:"#FF5722"},"Hair Removal":{icon:Xt,color:"#795548"},"Hair Removal Procedures":{icon:Xt,color:"#795548"},"Non-ablative Lasers":{icon:Jt,color:"#FF9800"},"Total Face Rejuvenation":{icon:Yt,color:"#E91E63"},"Total Face Rejuvenation Procedures":{icon:Yt,color:"#E91E63"},Bridges:{icon:Kt,color:"#607D8B"},"Bridges Procedures":{icon:Kt,color:"#607D8B"},"Mini Implants":{icon:Ht,color:"#3F51B5"},"Esthetic Bonding":{icon:q,color:"#E91E63"},"Esthetic Bonding Procedures":{icon:q,color:"#E91E63"},"Facial Resurfacing":{icon:Gt,color:"#00BCD4"},"Facial Resurfacing Procedures":{icon:Gt,color:"#00BCD4"},"Fractionated Lasers":{icon:qt,color:"#FF6F00"},"Fractionated Lasers Procedures":{icon:qt,color:"#FF6F00"},Biostimulators:{icon:kt,color:"#4CAF50"},"Biostimulators Procedures":{icon:kt,color:"#4CAF50"},"Fluoride Treatments":{icon:Vt,color:"#00BCD4"},"Fluoride Treatments Procedures":{icon:Vt,color:"#00BCD4"},"Body Transformation Packages":{icon:Ut,color:"#FF5722"},"Body Transformation Packages Procedures":{icon:Ut,color:"#FF5722"},"Cellulite Treatments":{icon:Ut,color:"#FFA726"},"Cellulite Treatments Procedures":{icon:Ut,color:"#FFA726"},"Digital Diagnostics":{icon:Wt,color:"#673AB7"},"Digital Diagnostics Procedures":{icon:Wt,color:"#673AB7"},"Growth Factor Therapies":{icon:kt,color:"#4CAF50"},"Growth Factor Therapies Procedures":{icon:kt,color:"#4CAF50"},"Tissue Procedures":{icon:Nt,color:"#FF9800"},"Tissue Procedures Procedures":{icon:Nt,color:"#FF9800"},Pediatric:{icon:Bt,color:"#FFC107"},"Pediatric Procedures":{icon:Bt,color:"#FFC107"},"TMJ/Orofacial Pain":{icon:Ft,color:"#F44336"},"TMJ/Orofacial Pain Procedures":{icon:Ft,color:"#F44336"},"Sleep Dentistry":{icon:Lt,color:"#673AB7"},"Sleep Dentistry Procedures":{icon:Lt,color:"#673AB7"},Adjunctive:{icon:yt,color:"#2196F3"},"Adjunctive Procedures":{icon:yt,color:"#2196F3"}},bj={icon:ie,color:"#9E9E9E"},jj=({value:e,max:t,label:r,unit:s,color:i,size:a=140,isLive:d=!1,industry:u="all"})=>{const p=l(),[m,g]=ks.useState(!1),[f,x]=ks.useState(-90),[y,v]=ks.useState(!1),[b,j]=ks.useState(!1),[w,_]=ks.useState(e),k=Math.min(w/t*100,100)/100*180-90;ks.useEffect(()=>{if(d){const s=async()=>{try{const s=await yj.getComprehensiveMarketData();let i=0;switch(r){case"Market Size":if("dental"===u){const e=s.procedures.filter(e=>"dental"===e.industry).reduce((e,t)=>e+(t.market_size_2025_usd_millions||0),0);i=e+s.companies.filter(e=>"dental"===e.industry).reduce((e,t)=>e+(t.market_cap||0),0)/1e3}else if("aesthetic"===u){const e=s.procedures.filter(e=>"aesthetic"===e.industry).reduce((e,t)=>e+(t.market_size_2025_usd_millions||0),0);i=e+s.companies.filter(e=>"aesthetic"===e.industry).reduce((e,t)=>e+(t.market_cap||0),0)/1e3}else{const e=s.territories?.reduce((e,t)=>e+(t.market_value||0),0)||0;i=s.marketMetrics.totalMarketSize+e}break;case"Avg Growth":if("dental"===u){const e=s.procedures.filter(e=>"dental"===e.industry);let t=0,r=0;e.forEach(e=>{const s=e.market_size_2025_usd_millions||1,i=e.yearly_growth_percentage||0;t+=i*s,r+=s}),i=r>0?t/r:0}else if("aesthetic"===u){const e=s.procedures.filter(e=>"aesthetic"===e.industry);let t=0,r=0;e.forEach(e=>{const s=e.market_size_2025_usd_millions||1,i=e.yearly_growth_percentage||0;t+=i*s,r+=s}),i=r>0?t/r:0}else{const e=s.territories?.reduce((e,t)=>e+(t.growth_rate||0),0)||0,t=s.territories?.length||1;i=(s.marketMetrics.averageGrowth+e/t)/2}break;case"Procedures":i="dental"===u?s.procedures.filter(e=>"dental"===e.industry).length:"aesthetic"===u?s.procedures.filter(e=>"aesthetic"===e.industry).length:s.marketMetrics.totalProcedures;break;case"Companies":i="dental"===u?s.companies.filter(e=>"dental"===e.industry).length:"aesthetic"===u?s.companies.filter(e=>"aesthetic"===e.industry).length:s.marketMetrics.totalCompanies;break;default:i=e}i>=0&&i!==w&&_(Math.min(i,1.5*t))}catch(s){_(e)}};s();const i=setInterval(s,15e3);return()=>clearInterval(i)}},[d,r,u,e]),ks.useEffect(()=>{const{delay:e,spins:t,speed:s}=(()=>{switch(r){case"Market Size":return{delay:300,spins:3.5,speed:2500};case"Avg Growth":return{delay:800,spins:2.8,speed:2200};case"Procedures":return{delay:1300,spins:4.2,speed:2800};case"Companies":return{delay:1800,spins:1.9,speed:1800};default:return{delay:500,spins:2.5,speed:2e3}}})(),i=setTimeout(()=>{j(!0),x(360*t-90);const e=setTimeout(()=>{j(!1),v(!0),x(k)},s);return()=>clearTimeout(e)},e);return()=>clearTimeout(i)},[]),ks.useEffect(()=>{y&&x(k)},[k,y,w]);return c.jsxs(o,{sx:{position:"relative",width:a,height:a/2+40,cursor:"pointer",willChange:"transform","&:hover":{transform:"scale(1.02)",transition:"transform 0.2s ease"}},onMouseEnter:()=>{g(!0)},onMouseLeave:()=>{g(!1)},onMouseMove:e=>{},onClick:()=>{x(f+360),setTimeout(()=>x(k),1e3)},children:[c.jsxs("svg",{width:a,height:a/2+20,style:{position:"absolute",top:0},children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:`gauge-bg-${r}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[c.jsx("stop",{offset:"0%",stopColor:n(p.palette.error.main,.4)}),c.jsx("stop",{offset:"30%",stopColor:n(p.palette.warning.main,.4)}),c.jsx("stop",{offset:"70%",stopColor:n(p.palette.success.main,.4)}),c.jsx("stop",{offset:"100%",stopColor:n(p.palette.success.main,.6)})]}),c.jsxs("radialGradient",{id:`chrome-base-${r}`,cx:"50%",cy:"30%",r:"80%",children:[c.jsx("stop",{offset:"0%",stopColor:"#F8F9FA"}),c.jsx("stop",{offset:"15%",stopColor:"#E9ECEF"}),c.jsx("stop",{offset:"35%",stopColor:"#DEE2E6"}),c.jsx("stop",{offset:"55%",stopColor:"#CED4DA"}),c.jsx("stop",{offset:"75%",stopColor:"#ADB5BD"}),c.jsx("stop",{offset:"90%",stopColor:"#6C757D"}),c.jsx("stop",{offset:"100%",stopColor:"#495057"})]}),c.jsxs("pattern",{id:`brushed-metal-${r}`,x:"0",y:"0",width:"6",height:"2",patternUnits:"userSpaceOnUse",children:[c.jsx("rect",{width:"6",height:"1",fill:"rgba(255,255,255,0.1)"}),c.jsx("rect",{y:"1",width:"6",height:"1",fill:"rgba(0,0,0,0.05)"})]}),c.jsxs("linearGradient",{id:`reflection-bands-${r}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0)"}),c.jsx("stop",{offset:"20%",stopColor:"rgba(255,255,255,0.4)"}),c.jsx("stop",{offset:"25%",stopColor:"rgba(255,255,255,0.8)"}),c.jsx("stop",{offset:"30%",stopColor:"rgba(255,255,255,0.3)"}),c.jsx("stop",{offset:"50%",stopColor:"rgba(255,255,255,0)"}),c.jsx("stop",{offset:"70%",stopColor:"rgba(255,255,255,0.2)"}),c.jsx("stop",{offset:"75%",stopColor:"rgba(255,255,255,0.6)"}),c.jsx("stop",{offset:"80%",stopColor:"rgba(255,255,255,0.1)"}),c.jsx("stop",{offset:"100%",stopColor:"rgba(255,255,255,0)"})]}),c.jsxs("linearGradient",{id:`edge-bevel-${r}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.6)"}),c.jsx("stop",{offset:"10%",stopColor:"rgba(255,255,255,0.2)"}),c.jsx("stop",{offset:"90%",stopColor:"rgba(0,0,0,0.2)"}),c.jsx("stop",{offset:"100%",stopColor:"rgba(0,0,0,0.4)"})]}),c.jsxs("linearGradient",{id:`glass-overlay-${r}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.3)"}),c.jsx("stop",{offset:"40%",stopColor:"rgba(255,255,255,0.1)"}),c.jsx("stop",{offset:"60%",stopColor:"rgba(255,255,255,0.05)"}),c.jsx("stop",{offset:"100%",stopColor:"rgba(255,255,255,0)"})]}),c.jsxs("filter",{id:`led-glow-${r}`,x:"-100%",y:"-100%",width:"300%",height:"300%",children:[c.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),c.jsx("feGaussianBlur",{stdDeviation:"6",result:"biggerBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"biggerBlur"}),c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]}),c.jsxs("filter",{id:`chrome-shadow-${r}`,x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feDropShadow",{dx:"0",dy:"2",stdDeviation:"4",floodColor:"rgba(0,0,0,0.3)"}),c.jsx("feDropShadow",{dx:"0",dy:"1",stdDeviation:"1",floodColor:"rgba(0,0,0,0.2)"}),c.jsx("feDropShadow",{dx:"1",dy:"1",stdDeviation:"2",floodColor:"rgba(44, 62, 80, 0.6)"})]}),c.jsxs("filter",{id:`metallic-shine-${r}`,x:"-30%",y:"-30%",width:"160%",height:"160%",children:[c.jsx("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"3",result:"blur"}),c.jsx("feSpecularLighting",{in:"blur",result:"specOut",lightingColor:"white",specularConstant:"1.5",specularExponent:"20",children:c.jsx("fePointLight",{x:"-50",y:"-50",z:"200"})}),c.jsx("feComposite",{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut2"}),c.jsx("feComposite",{in:"SourceGraphic",in2:"specOut2",operator:"arithmetic",k1:"0",k2:"1",k3:"1",k4:"0"})]}),c.jsxs("linearGradient",{id:`luxury-needle-${r}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#E74C3C"}),c.jsx("stop",{offset:"30%",stopColor:"#DC143C"}),c.jsx("stop",{offset:"60%",stopColor:"#B22222"}),c.jsx("stop",{offset:"100%",stopColor:"#8B0000"})]}),c.jsxs("radialGradient",{id:`chrome-tip-${r}`,cx:"30%",cy:"30%",r:"70%",children:[c.jsx("stop",{offset:"0%",stopColor:"#F8F9FA"}),c.jsx("stop",{offset:"40%",stopColor:"#DC143C"}),c.jsx("stop",{offset:"80%",stopColor:"#8B0000"}),c.jsx("stop",{offset:"100%",stopColor:"#2C3E50"})]}),c.jsxs("radialGradient",{id:`base-gradient-${r}`,cx:"25%",cy:"25%",r:"75%",children:[c.jsx("stop",{offset:"0%",stopColor:"#F8F9FA"}),c.jsx("stop",{offset:"30%",stopColor:"#E9ECEF"}),c.jsx("stop",{offset:"60%",stopColor:"#ADB5BD"}),c.jsx("stop",{offset:"100%",stopColor:"#212529"})]}),c.jsxs("filter",{id:`needle-shadow-${r}`,x:"-50%",y:"-50%",width:"200%",height:"200%",children:[c.jsx("feDropShadow",{dx:"2",dy:"2",stdDeviation:"3",floodColor:"rgba(0,0,0,0.4)"}),c.jsx("feDropShadow",{dx:"1",dy:"1",stdDeviation:"1",floodColor:"rgba(0,0,0,0.2)"})]}),c.jsxs("linearGradient",{id:`metallic-shine-${r}`,x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"rgba(255,255,255,0.9)"}),c.jsx("stop",{offset:"30%",stopColor:"rgba(255,255,255,0.4)"}),c.jsx("stop",{offset:"70%",stopColor:"rgba(255,255,255,0.1)"}),c.jsx("stop",{offset:"100%",stopColor:"rgba(255,255,255,0.7)"})]})]}),c.jsx("path",{d:`M 5 ${a/2} A ${a/2-5} ${a/2-5} 0 0 1 ${a-5} ${a/2}`,fill:"none",stroke:`url(#chrome-base-${r})`,strokeWidth:"12",strokeLinecap:"round",filter:`url(#chrome-shadow-${r})`}),c.jsx("path",{d:`M 8 ${a/2} A ${a/2-8} ${a/2-8} 0 0 1 ${a-8} ${a/2}`,fill:"none",stroke:`url(#brushed-metal-${r})`,strokeWidth:"8",strokeLinecap:"round",opacity:"0.6"}),c.jsx(xf.path,{d:`M 10 ${a/2} A ${a/2-10} ${a/2-10} 0 0 1 ${a-10} ${a/2}`,fill:"none",stroke:`url(#reflection-bands-${r})`,strokeWidth:"6",strokeLinecap:"round",opacity:m?.8:.4,animate:{opacity:m?[.4,.8,.4]:.4,strokeDashoffset:m?[0,100,0]:0},transition:{duration:m?2:.5,repeat:m?1/0:0}}),c.jsx("path",{d:`M 12 ${a/2} A ${a/2-12} ${a/2-12} 0 0 1 ${a-12} ${a/2}`,fill:"none",stroke:`url(#edge-bevel-${r})`,strokeWidth:"4",strokeLinecap:"round"}),c.jsx("path",{d:`M 14 ${a/2} A ${a/2-14} ${a/2-14} 0 0 1 ${a-14} ${a/2}`,fill:"none",stroke:`url(#glass-overlay-${r})`,strokeWidth:"2",strokeLinecap:"round",opacity:"0.7"}),c.jsx("path",{d:`M 18 ${a/2} A ${a/2-18} ${a/2-18} 0 0 1 ${a-18} ${a/2}`,fill:"none",stroke:`url(#gauge-bg-${r})`,strokeWidth:"6",strokeLinecap:"round"}),c.jsx(xf.path,{d:`M 20 ${a/2} A ${a/2-20} ${a/2-20} 0 0 1 ${a-20} ${a/2}`,fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",filter:`url(#led-glow-${r})`,animate:{opacity:d?[.6,1,.6]:.8,strokeWidth:d?[2,3,2]:2},transition:{duration:2,repeat:d?1/0:0,ease:"easeInOut"}}),Array.from({length:9},(e,t)=>{const r=(22.5*t-90)*(Math.PI/180),s=a/2-25,i=a/2-(t%2==0?35:30),o=a/2+Math.cos(r)*s,l=a/2+Math.sin(r)*s,d=a/2+Math.cos(r)*i,h=a/2+Math.sin(r)*i;return c.jsx("line",{x1:o,y1:l,x2:d,y2:h,stroke:n(p.palette.text.primary,.6),strokeWidth:t%2==0?"2":"1",strokeLinecap:"round"},t)}),c.jsx(xf.circle,{cx:a/2,cy:a/2,r:12,fill:"rgba(231, 76, 60, 0.2)",stroke:"#E74C3C",strokeWidth:"2",animate:{scale:d?[1,1.3,1]:1,opacity:d?[.3,.8,.3]:.5},transition:{duration:2,repeat:d?1/0:0,ease:"easeInOut"}}),c.jsxs("g",{transform:`rotate(${y||b?f:-90} ${a/2} ${a/2})`,style:{transition:b?"transform 2.5s cubic-bezier(0.25, 0.46, 0.45, 0.94)":y?"transform 1.2s cubic-bezier(0.34, 1.56, 0.64, 1)":"none"},onMouseEnter:()=>{g(!0)},onMouseLeave:()=>{g(!1),x(k)},children:[c.jsx("path",{d:`M ${a/2-1+2} ${a/2+2} L ${a/2+(a/2-25)+2} ${a/2-1+2} L ${a/2+(a/2-25)+2} ${a/2+1+2} L ${a/2+1+2} ${a/2+2} Z`,fill:"rgba(44, 62, 80, 0.4)"}),c.jsx("path",{d:`M ${a/2-2} ${a/2} L ${a/2+(a/2-25)} ${a/2-1.5} L ${a/2+(a/2-25)} ${a/2+1.5} L ${a/2+2} ${a/2} Z`,fill:`url(#luxury-needle-${r})`,stroke:"rgba(44, 62, 80, 0.8)",strokeWidth:"0.5",filter:`url(#chrome-shadow-${r})`}),c.jsx("path",{d:`M ${a/2-1} ${a/2-.5} L ${a/2+(a/2-30)} ${a/2-.5} L ${a/2+(a/2-30)} ${a/2+.5} L ${a/2-1} ${a/2+.5} Z`,fill:"rgba(248, 249, 250, 0.8)"}),c.jsx("path",{d:`M ${a/2+(a/2-25)} ${a/2-1.5} L ${a/2+(a/2-15)} ${a/2} L ${a/2+(a/2-25)} ${a/2+1.5} Z`,fill:`url(#chrome-tip-${r})`,stroke:"rgba(248, 249, 250, 0.6)",strokeWidth:"0.5",filter:`url(#metallic-shine-${r})`})]}),c.jsxs("g",{children:[c.jsx("circle",{cx:a/2,cy:a/2,r:"14",fill:`url(#base-gradient-${r})`,stroke:"#2C3E50",strokeWidth:"2.5",filter:`url(#chrome-shadow-${r})`}),c.jsx("circle",{cx:a/2,cy:a/2,r:"10",fill:`url(#brushed-metal-${r})`,stroke:"rgba(248, 249, 250, 0.3)",strokeWidth:"1",filter:`url(#metallic-shine-${r})`}),c.jsx(xf.circle,{cx:a/2,cy:a/2,r:"7",fill:"none",stroke:i,strokeWidth:"2",filter:`url(#led-glow-${r})`,animate:{opacity:[.6,1,.6],strokeWidth:[2,3,2]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),c.jsx("circle",{cx:a/2,cy:a/2,r:"5",fill:"#0a0a0a",stroke:"rgba(248, 249, 250, 0.4)",strokeWidth:"1"}),c.jsx("circle",{cx:a/2,cy:a/2,r:"2",fill:i,filter:`url(#led-glow-${r})`})]}),d&&c.jsx(xf.circle,{cx:a/2,cy:a/2,r:12,fill:"none",stroke:p.palette.success.main,strokeWidth:"2",style:{transformOrigin:`${a/2}px ${a/2}px`},animate:{scale:[1,1.5,1],opacity:[.8,.2,.8]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}})]}),c.jsxs(o,{sx:{position:"absolute",bottom:5,left:"50%",transform:"translateX(-50%)",textAlign:"center"},children:[c.jsxs(h,{variant:"h5",sx:{fontFamily:"'JetBrains Mono', 'Roboto Mono', monospace",color:i,fontWeight:"bold",textShadow:"0 2px 4px rgba(0,0,0,0.3)",fontSize:"1.2rem"},children:["M"===s?`$${(w/1e3).toFixed(1)}B`:"%"===s?`${w.toFixed(1)}%`:w.toLocaleString(),"M"===s||"%"===s?"":s]}),c.jsx(h,{variant:"caption",sx:{color:p.palette.text.secondary,fontWeight:600,letterSpacing:"1px",textTransform:"uppercase",fontSize:"0.7rem"},children:r}),d&&c.jsxs(xf.div,{animate:{opacity:[1,.4,1]},transition:{duration:1.5,repeat:1/0},style:{display:"flex",alignItems:"center",justifyContent:"center",gap:4,marginTop:2},children:[c.jsx(fr,{sx:{fontSize:6,color:p.palette.success.main}}),c.jsx(h,{variant:"caption",sx:{fontSize:8,fontWeight:"bold",color:p.palette.success.main,letterSpacing:"0.5px"},children:"LIVE"})]})]})]})},wj=({territories:e,onClick:t})=>{const r=l();return c.jsxs(i,{sx:{background:"linear-gradient(135deg, rgba(6, 182, 212, 0.15) 0%, rgba(147, 51, 234, 0.12) 35%, rgba(59, 130, 246, 0.08) 70%, rgba(6, 182, 212, 0.05) 100%)",backdropFilter:"blur(12px)",border:"1px solid rgba(6, 182, 212, 0.3)",position:"relative",overflow:"visible",cursor:"pointer",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 8px 32px rgba(6, 182, 212, 0.15), 0 0 20px rgba(147, 51, 234, 0.08)",minHeight:"180px",height:"auto",margin:{xs:"12px 12px 8px 8px",sm:"12px 12px 8px 8px",md:"12px 12px 8px 8px"},"&:hover":{transform:"translateY(-3px) scale(1.01)",boxShadow:"0 12px 40px rgba(6, 182, 212, 0.25), 0 0 30px rgba(147, 51, 234, 0.15)",border:"1px solid rgba(6, 182, 212, 0.5)",background:"linear-gradient(135deg, rgba(6, 182, 212, 0.2) 0%, rgba(147, 51, 234, 0.15) 35%, rgba(59, 130, 246, 0.12) 70%, rgba(6, 182, 212, 0.08) 100%)"}},onClick:t,children:[c.jsx(o,{sx:{position:"absolute",top:{xs:-8,sm:-8,md:-10},right:{xs:-8,sm:-8,md:-10},background:"linear-gradient(135deg, #06B6D4 0%, #9333EA 50%, #3B82F6 100%)",color:"white",px:{xs:1,sm:1.5},py:{xs:.3,sm:.5},borderRadius:2,fontSize:{xs:10,sm:12},fontWeight:"bold",boxShadow:"0 4px 16px rgba(6, 182, 212, 0.4), 0 0 12px rgba(147, 51, 234, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)",backdropFilter:"blur(8px)",whiteSpace:"nowrap",zIndex:10},children:"PREMIUM"}),c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2,flexWrap:{xs:"wrap",sm:"nowrap"},gap:{xs:.5,sm:1}},children:[c.jsx(xr,{sx:{mr:{xs:.5,sm:1},color:"#06B6D4",fontSize:{xs:20,sm:24,md:28},filter:"drop-shadow(0 2px 4px rgba(6, 182, 212, 0.3))"}}),c.jsx(h,{variant:"h6",sx:{background:"linear-gradient(135deg, #06B6D4, #9333EA)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",fontWeight:700,fontSize:{xs:"0.9rem",sm:"1.1rem",md:"1.25rem"},whiteSpace:"nowrap"},children:"Territory Intelligence"}),c.jsx(xf.div,{animate:{opacity:[1,.3,1]},transition:{duration:2,repeat:1/0},style:{marginLeft:4},children:c.jsx(H,{label:"LIVE",size:"small",sx:{background:r.palette.success.main,color:"white",fontSize:{xs:8,sm:10},height:{xs:18,sm:24}}})}),c.jsxs(h,{variant:"caption",sx:{ml:"auto",color:r.palette.text.secondary,display:{xs:"none",sm:"flex"},alignItems:"center",gap:.5,fontSize:{xs:"0.7rem",sm:"0.75rem"},whiteSpace:"nowrap"},children:["Click to open",c.jsx(ij,{sx:{fontSize:{xs:14,sm:16}}})]})]}),e.map((e,t)=>c.jsxs(o,{sx:{mb:2,p:1,background:n(r.palette.background.paper,.5),borderRadius:1},children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsx(h,{variant:"subtitle2",sx:{fontWeight:"bold"},children:e.name}),c.jsx(H,{label:`$${e.marketSize}M`,size:"small",sx:{background:"linear-gradient(135deg, #06B6D4, #3B82F6)",color:"white",fontWeight:600,boxShadow:"0 2px 8px rgba(6, 182, 212, 0.3)",border:"1px solid rgba(255, 255, 255, 0.2)"}})]}),c.jsxs(h,{variant:"caption",color:"text.secondary",children:[e.procedures," procedures â€¢ ",e.companies," companies"]}),c.jsx(Ae,{variant:"determinate",value:e.saturation,sx:{mt:1,height:6,borderRadius:3,backgroundColor:"rgba(6, 182, 212, 0.15)","& .MuiLinearProgress-bar":{background:"linear-gradient(135deg, #06B6D4, #3B82F6)",borderRadius:3,boxShadow:"0 0 8px rgba(6, 182, 212, 0.4)"}}})]},t))]})]})},_j=()=>{const e=l(),t=rt(e.breakpoints.down("sm")),r=rt(e.breakpoints.down("md")),[s,d]=ks.useState(null),[u,m]=ks.useState([]),[x,y]=ks.useState(!0),[v,b]=ks.useState(""),[w,_]=ks.useState("all"),[k,C]=ks.useState(null),[S,T]=ks.useState("procedures"),[P,E]=ks.useState({key:"market_size_2025_usd_millions",direction:"desc"}),[I,$]=ks.useState(!0),[M,R]=ks.useState(!1),[O,D]=ks.useState(!1),[z,L]=ks.useState(0),[F,N]=ks.useState(!1),[W,U]=ks.useState(null),[V,q]=ks.useState(null),[G,K]=ks.useState(!1),[Y,J]=ks.useState(!1),[X,Q]=ks.useState(!1),[Z,ee]=ks.useState(null),te=ks.useCallback(async()=>{y(!0);try{const e=await yj.getComprehensiveMarketData();if(d(e),F){const e=await yj.discoverAllTables();m(e)}}catch(e){}finally{y(!1)}},[F]);ks.useEffect(()=>{te(),yj.testSpecificTables().then(e=>{})},[]),ks.useEffect(()=>{if(!I)return;const e=setInterval(()=>{te()},3e4);return()=>clearInterval(e)},[I,te]),ks.useEffect(()=>{let e=!1;const t=()=>{e||(window.requestAnimationFrame(()=>{const t=window.scrollY;D(t>100);const r=Math.min(Math.max((t-50)/300,0),1);L(r),e=!1}),e=!0)};return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]);const re=ks.useMemo(()=>{if(!s||!s.procedures||0===s.procedures.length)return{totalMarketSize:134866,averageGrowth:12.5,totalCompanies:156,averageCost:2850,totalProcedures:367};const e=s.procedures.length>0?s.procedures.reduce((e,t)=>e+(t.average_cost_usd||0),0)/s.procedures.length:0;return{...s.marketMetrics,averageCost:e}},[s]),se=ks.useMemo(()=>{let e=(s?.procedures||[{id:"1",procedure_name:"Dental Implant Placement",industry:"dental",category:"Implantology",market_size_2025_usd_millions:8500,yearly_growth_percentage:7.2,average_cost_usd:3500,trending_score:85,popularity_score:88},{id:"2",procedure_name:"Botox Injection",industry:"aesthetic",category:"Non-Invasive",market_size_2025_usd_millions:6200,yearly_growth_percentage:12.8,average_cost_usd:450,trending_score:92,popularity_score:95},{id:"3",procedure_name:"Teeth Whitening",industry:"dental",category:"Cosmetic Dentistry",market_size_2025_usd_millions:4800,yearly_growth_percentage:5.4,average_cost_usd:280,trending_score:76,popularity_score:82},{id:"4",procedure_name:"Dermal Fillers",industry:"aesthetic",category:"Non-Invasive",market_size_2025_usd_millions:7100,yearly_growth_percentage:15.2,average_cost_usd:650,trending_score:89,popularity_score:91},{id:"5",procedure_name:"Root Canal Treatment",industry:"dental",category:"Endodontics",market_size_2025_usd_millions:3200,yearly_growth_percentage:3.1,average_cost_usd:1200,trending_score:65,popularity_score:70}]).filter(e=>{const t=e.procedure_name||e.name||"",r=e.category||e.normalized_category||e.clinical_category||"",s=e.market_size_2025_usd_millions||e.market_size_usd_millions||0,i=e.yearly_growth_percentage||e.growth_rate||0,n=s>0||i>0,a=t.toLowerCase().includes(v.toLowerCase())||r.toLowerCase().includes(v.toLowerCase()),o="all"===w||e.industry===w,l=!k||r.toLowerCase().includes(k.toLowerCase())||e.category===k||e.normalized_category===k||e.clinical_category===k;return n&&a&&o&&l});return e.sort((e,t)=>{const r=e[P.key],s=t[P.key];return"number"==typeof r&&"number"==typeof s?"asc"===P.direction?r-s:s-r:"asc"===P.direction?String(r||"").localeCompare(String(s||"")):String(s||"").localeCompare(String(r||""))}),e},[s,v,w,k,P]),ne=ks.useMemo(()=>(s?.companies||[]).filter(e=>{const t=!v||e.company_name?.toLowerCase().includes(v.toLowerCase())||e.name?.toLowerCase().includes(v.toLowerCase())||e.specialties?.some(e=>e.toLowerCase().includes(v.toLowerCase()))||e.key_products?.toLowerCase().includes(v.toLowerCase()),r="all"===w||e.industry===w;return t&&r}).sort((e,t)=>{const r=e[P.key]||0,s=t[P.key]||0;return"string"==typeof r&&"string"==typeof s?"asc"===P.direction?r.localeCompare(s):s.localeCompare(r):"asc"===P.direction?Number(r)-Number(s):Number(s)-Number(r)}),[s,v,w,k,P]),ae=ks.useMemo(()=>e=>e*e*(3-2*e),[]),oe=ks.useMemo(()=>{const e=ae(z);return{gauges:{opacity:1-.4*e,scale:1-.08*e,translateY:-10*e,transition:"all 1.2s cubic-bezier(0.23, 1, 0.32, 1)"},categories:{opacity:1-.6*e,scale:1-.12*e,translateY:-15*e,transition:"all 1.0s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},territory:{opacity:1-.7*e,scale:1-.15*e,translateY:-20*e,transition:"all 0.8s cubic-bezier(0.25, 0.46, 0.45, 0.94)"},table:{translateY:-30*e,transition:"transform 1.0s cubic-bezier(0.23, 1, 0.32, 1)"}}},[z,ae]),le=ks.useCallback(e=>{const t=e.market_size_2025_usd_millions||0,r=e.yearly_growth_percentage||0,s=e.average_cost_usd||0;return t>=5e3||s>=1e4?"platinum":t>=1e3||s>=5e3||r>=15?"gold":r>=8||s>=2e3?"silver":"standard"},[]),ce=ks.useCallback((e,t)=>{const r="aesthetic"===t,s={platinum:{background:r?"linear-gradient(135deg, #92400E 0%, #DC2626 25%, #BE123C 50%, #A21CAF 100%)":"linear-gradient(135deg, #065F46 0%, #0891B2 25%, #1E40AF 50%, #7C3AED 100%)",baseColor:r?"#DC2626":"#0891B2",border:"2px solid "+(r?"rgba(220, 38, 38, 0.6)":"rgba(8, 145, 178, 0.6)"),boxShadow:`\n          0 8px 32px ${r?"rgba(220, 38, 38, 0.3)":"rgba(8, 145, 178, 0.3)"},\n          0 0 0 1px rgba(255, 255, 255, 0.1),\n          inset 0 1px 0 rgba(255, 255, 255, 0.2)\n        `,backdropFilter:"blur(20px)"},gold:{background:r?"linear-gradient(135deg, #D97706 0%, #EA580C 25%, #EC4899 75%, #BE185D 100%)":"linear-gradient(135deg, #1E40AF 0%, #7C3AED 25%, #0891B2 75%, #059669 100%)",baseColor:r?"#EA580C":"#1E40AF",border:"2px solid "+(r?"rgba(217, 119, 6, 0.5)":"rgba(30, 64, 175, 0.5)"),boxShadow:`\n          0 6px 24px ${r?"rgba(217, 119, 6, 0.25)":"rgba(30, 64, 175, 0.25)"},\n          0 0 0 1px rgba(255, 255, 255, 0.08),\n          inset 0 1px 0 rgba(255, 255, 255, 0.15)\n        `,backdropFilter:"blur(16px)"},silver:{background:r?"linear-gradient(135deg, #F59E0B 0%, #F97316 50%, #EF4444 100%)":"linear-gradient(135deg, #0891B2 0%, #06B6D4 50%, #3B82F6 100%)",baseColor:r?"#F97316":"#0891B2",border:"1px solid "+(r?"rgba(245, 158, 11, 0.4)":"rgba(8, 145, 178, 0.4)"),boxShadow:`\n          0 4px 16px ${r?"rgba(245, 158, 11, 0.2)":"rgba(8, 145, 178, 0.2)"},\n          inset 0 1px 0 rgba(255, 255, 255, 0.1)\n        `,backdropFilter:"blur(12px)"},standard:{background:r?"linear-gradient(135deg, #374151 0%, #4B5563 50%, #6B7280 100%)":"linear-gradient(135deg, #1F2937 0%, #374151 50%, #4B5563 100%)",baseColor:r?"#4B5563":"#374151",border:"1px solid rgba(75, 85, 99, 0.3)",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.1), inset 0 1px 0 rgba(255, 255, 255, 0.05)",backdropFilter:"blur(8px)"}};return s[e]||s.standard},[]),de=e=>{E(t=>({key:e,direction:t.key===e&&"asc"===t.direction?"desc":"asc"}))};return x?c.jsxs(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"80vh"},children:[c.jsx(B,{size:60}),c.jsx(h,{variant:"h6",sx:{ml:2},children:"Loading Market Intelligence..."})]}):c.jsxs(o,{sx:{p:3,background:`linear-gradient(135deg, ${n(e.palette.background.default,.95)} 0%, ${n(e.palette.primary.main,.05)} 100%)`,minHeight:"100vh",position:"relative",borderRadius:"20px",overflow:"hidden"},children:[c.jsx(o,{sx:{position:"absolute",top:19,left:19,width:6,height:6,borderRadius:"50%",background:"radial-gradient(circle at 35% 35%, #e0e0e0 0%, #b8b8b8 15%, #888 40%, #555 70%, #222 100%)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.4), inset 0 -1px 2px rgba(0,0,0,0.5), 0 1px 3px rgba(0,0,0,0.8)",zIndex:10,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",width:"70%",height:"1px",background:"linear-gradient(90deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",transform:"translate(-50%, -50%)"},"&::after":{content:'""',position:"absolute",top:"50%",left:"50%",width:"1px",height:"70%",background:"linear-gradient(180deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",transform:"translate(-50%, -50%)"}}}),c.jsx(o,{sx:{position:"absolute",top:19,right:19,width:6,height:6,borderRadius:"50%",background:"radial-gradient(circle at 35% 35%, #e0e0e0 0%, #b8b8b8 15%, #888 40%, #555 70%, #222 100%)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.4), inset 0 -1px 2px rgba(0,0,0,0.5), 0 1px 3px rgba(0,0,0,0.8)",zIndex:10,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",width:"70%",height:"1px",background:"linear-gradient(90deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",transform:"translate(-50%, -50%)"},"&::after":{content:'""',position:"absolute",top:"50%",left:"50%",width:"1px",height:"70%",background:"linear-gradient(180deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",transform:"translate(-50%, -50%)"}}}),c.jsx(o,{sx:{position:"absolute",bottom:19,left:19,width:6,height:6,borderRadius:"50%",background:"radial-gradient(circle at 35% 35%, #e0e0e0 0%, #b8b8b8 15%, #888 40%, #555 70%, #222 100%)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.4), inset 0 -1px 2px rgba(0,0,0,0.5), 0 1px 3px rgba(0,0,0,0.8)",zIndex:10,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",width:"70%",height:"1px",background:"linear-gradient(90deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",transform:"translate(-50%, -50%)"},"&::after":{content:'""',position:"absolute",top:"50%",left:"50%",width:"1px",height:"70%",background:"linear-gradient(180deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",transform:"translate(-50%, -50%)"}}}),c.jsx(o,{sx:{position:"absolute",bottom:19,right:19,width:6,height:6,borderRadius:"50%",background:"radial-gradient(circle at 35% 35%, #e0e0e0 0%, #b8b8b8 15%, #888 40%, #555 70%, #222 100%)",boxShadow:"inset 0 1px 2px rgba(255,255,255,0.4), inset 0 -1px 2px rgba(0,0,0,0.5), 0 1px 3px rgba(0,0,0,0.8)",zIndex:10,"&::before":{content:'""',position:"absolute",top:"50%",left:"50%",width:"70%",height:"1px",background:"linear-gradient(90deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",transform:"translate(-50%, -50%)"},"&::after":{content:'""',position:"absolute",top:"50%",left:"50%",width:"1px",height:"70%",background:"linear-gradient(180deg, transparent, rgba(0,0,0,0.7) 20%, rgba(0,0,0,0.7) 80%, transparent)",transform:"translate(-50%, -50%)"}}}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:4},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(h,{variant:"h3",sx:{fontWeight:"bold",mr:2},children:"Market Command Center"}),c.jsx(xf.div,{animate:{opacity:[1,.3,1]},transition:{duration:1.5,repeat:1/0},children:c.jsx(H,{icon:c.jsx(dr,{}),label:"LIVE DATA",sx:{background:e.palette.success.main,color:"white",fontWeight:"bold"}})})]}),c.jsx(p,{control:c.jsx(g,{checked:I,onChange:e=>$(e.target.checked),color:"success"}),label:"Live Updates"})]}),c.jsx(o,{sx:{mb:4,opacity:oe.gauges.opacity,transform:`translateY(${oe.gauges.translateY}px) scale(${oe.gauges.scale})`,transition:oe.gauges.transition,pointerEvents:oe.gauges.opacity<.3?"none":"auto",overflow:"hidden"},children:c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,md:8,children:c.jsxs(i,{sx:{p:3,background:`linear-gradient(145deg, ${n(e.palette.background.paper,.95)} 0%, ${n(e.palette.background.paper,.98)} 100%)`,borderRadius:"20px",border:`1px solid ${n(e.palette.primary.main,.15)}`,boxShadow:`\n              0 16px 50px ${n(e.palette.common.black,.25)},\n              0 0 30px ${n(e.palette.primary.main,.1)},\n              inset 0 1px 0 ${n(e.palette.common.white,.1)}\n            `,backdropFilter:"blur(20px)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"3px",background:`linear-gradient(90deg, \n                ${e.palette.primary.main} 0%, \n                ${e.palette.secondary.main} 33%, \n                ${e.palette.success.main} 66%,\n                ${e.palette.warning.main} 100%\n              )`,borderRadius:"20px 20px 0 0",opacity:.8}},children:[c.jsx(h,{variant:"h5",sx:{mb:3,textAlign:"center"},children:"Market Intelligence Dashboard"}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-around",flexWrap:"wrap",gap:3,py:2},children:[c.jsx(xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1,duration:.6},children:c.jsx(jj,{value:re.totalMarketSize,max:2e5,label:"Market Size",unit:"M",color:e.palette.primary.main,size:150,isLive:I,industry:"all"===w?"all":w})}),c.jsx(xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:c.jsx(jj,{value:re.averageGrowth,max:50,label:"Avg Growth",unit:"%",color:e.palette.success.main,size:150,isLive:I,industry:"all"===w?"all":w})}),c.jsx(xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5,duration:.6},children:c.jsx(jj,{value:re.totalProcedures,max:1e3,label:"Procedures",unit:"",color:e.palette.info.main,size:150,isLive:I,industry:"all"===w?"all":w})}),c.jsx(xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7,duration:.6},children:c.jsx(jj,{value:re.totalCompanies,max:200,label:"Companies",unit:"",color:e.palette.warning.main,size:150,isLive:I,industry:"all"===w?"all":w})})]})]})}),c.jsx(A,{item:!0,xs:12,md:4,children:c.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:2,height:"100%"},children:[c.jsx(o,{sx:{opacity:oe.territory.opacity,transform:`translateY(${oe.territory.translateY}px) scale(${oe.territory.scale})`,transition:oe.territory.transition,minHeight:"200px",flex:"0 0 auto"},children:c.jsx(wj,{territories:s?.territories||[],onClick:()=>J(!0)})}),"procedures"===S&&s?.categories&&c.jsx(o,{sx:{opacity:oe.categories.opacity,transform:`translateY(${oe.categories.translateY}px) scale(${oe.categories.scale})`,transition:oe.categories.transition},children:c.jsxs(i,{sx:{p:2,borderRadius:"16px",background:`linear-gradient(145deg, ${n(e.palette.background.paper,.95)} 0%, ${n(e.palette.background.paper,.98)} 100%)`,border:`1px solid ${n(e.palette.primary.main,.15)}`,boxShadow:`\n                      0 12px 40px ${n(e.palette.common.black,.2)},\n                      0 0 20px ${n(e.palette.primary.main,.08)},\n                      inset 0 1px 0 ${n(e.palette.common.white,.1)}\n                    `,backdropFilter:"blur(20px)",position:"relative","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"2px",background:`linear-gradient(90deg, \n                        ${n(e.palette.primary.main,.6)} 0%, \n                        ${n(e.palette.secondary.main,.6)} 50%, \n                        ${n(e.palette.success.main,.6)} 100%\n                      )`,borderRadius:"16px 16px 0 0",opacity:.8}},children:[c.jsxs(h,{variant:"subtitle2",sx:{mb:1.5,fontWeight:"bold",display:"flex",alignItems:"center"},children:[c.jsx(ie,{sx:{mr:.5,fontSize:18}}),"Categories",k&&c.jsx(H,{label:"Clear",size:"small",onDelete:()=>C(null),sx:{ml:"auto",height:20,fontSize:11}})]}),c.jsx(o,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:s.categories.filter(e=>("all"===w||e.applicable_to===w||e.industry===w)&&null===e.parent_id).slice(0,M?void 0:8).map(t=>{const r=s.procedures.filter(e=>{const r=e.category===t.name||e.clinical_category===t.name||e.normalized_category===t.name||e.category_hierarchy_id===t.id||e.clinical_category_id===t.id||e.hierarchy_category&&e.hierarchy_category.id===t.id||e.hierarchy_category&&e.hierarchy_category.name===t.name,s="all"===w||e.industry===w;return r&&s}).length,i=(e=>{if(vj[e])return vj[e];const t=e.replace(" Procedures","");return vj[t]?vj[t]:bj})(t.name),a=i.icon;if(0===r&&s.procedures.length>0&&"Imaging"===t.name){s.procedures.filter(e=>e.category_hierarchy_id===t.id||e.category===t.name||e.hierarchy_category&&e.hierarchy_category.id===t.id),s.procedures.filter(e=>e.category_hierarchy_id===t.parent_id),new Set(s.procedures.map(e=>e.category_hierarchy_id))}return c.jsx(H,{label:`${t.name} (${r})`,size:"small",icon:c.jsx(a,{sx:{fontSize:16}}),onClick:()=>C(k===t.name?null:t.name),variant:k===t.name?"filled":"outlined",sx:{fontSize:11,height:24,"& .MuiChip-icon":{color:i.color,fontSize:16},borderColor:k===t.name?"primary.main":"divider",bgcolor:k===t.name?n(e.palette.primary.main,.1):"transparent"}},`cat-${t.id}`)})}),s.categories.length>8&&c.jsx(a,{size:"small",onClick:()=>R(!M),sx:{mt:1,textTransform:"none",fontSize:"0.75rem",py:.5,px:1},endIcon:M?c.jsx(cj,{}):c.jsx(ij,{}),children:M?"Show less":`+${s.categories.length-8} more categories`})]})})]})})]})}),c.jsx(i,{sx:{p:O?t?.5:.75:1.5,mb:2,position:"sticky",top:O?64:"auto",zIndex:1100,transition:"all 0.3s ease",boxShadow:O?e.shadows[8]:e.shadows[2],background:n(e.palette.background.paper,.98),backdropFilter:"blur(10px)"},children:c.jsxs(o,{sx:{display:"flex",gap:O?1:2,alignItems:"center",flexWrap:O&&t?"nowrap":"wrap",justifyContent:"flex-start"},children:[c.jsx(Ge,{placeholder:O&&t?"Search...":"Search procedures, categories...",value:v,onChange:e=>b(e.target.value),size:O?"small":"medium",InputProps:{startAdornment:c.jsx(He,{position:"start",children:c.jsx(Ce,{sx:{fontSize:O?18:20}})})},sx:{minWidth:t?O?120:200:300,flexGrow:1,maxWidth:O&&t?200:400,"& .MuiInputBase-input":{fontSize:O?"0.875rem":"1rem"}}}),O&&(t||r)?c.jsxs(c.Fragment,{children:[c.jsx(Pe,{title:"Filter by industry",children:c.jsx(f,{onClick:e=>ee(e.currentTarget),size:"small",sx:{border:1,borderColor:"divider",bgcolor:"all"!==w?n(e.palette.primary.main,.1):"transparent"},children:c.jsx(Ke,{badgeContent:"all"===w?0:1,color:"primary",variant:"dot",children:c.jsx(hr,{sx:{fontSize:20}})})})}),c.jsxs(ur,{anchorEl:Z,open:Boolean(Z),onClose:()=>ee(null),children:[c.jsxs(zt,{onClick:()=>{_("all"),ee(null)},selected:"all"===w,children:[c.jsx(pr,{sx:{mr:1,fontSize:18}}),"All (",s?.procedures.length||0,")"]}),c.jsxs(zt,{onClick:()=>{_("dental"),ee(null)},selected:"dental"===w,children:[c.jsx(Ft,{sx:{mr:1,fontSize:18}}),"Dental (",s?.procedures.filter(e=>"dental"===e.industry).length||0,")"]}),c.jsxs(zt,{onClick:()=>{_("aesthetic"),ee(null)},selected:"aesthetic"===w,children:[c.jsx(tr,{sx:{mr:1,fontSize:18}}),"Aesthetic (",s?.procedures.filter(e=>"aesthetic"===e.industry).length||0,")"]})]})]}):c.jsxs(mr,{variant:"outlined",size:O?"small":"medium",children:[c.jsx(a,{variant:"all"===w?"contained":"outlined",onClick:()=>_("all"),sx:{px:O?1:2,fontSize:O?"0.75rem":"0.875rem",minWidth:O?"auto":void 0},children:O&&!t?"All":`All (${s?.procedures.length||0})`}),c.jsx(a,{variant:"dental"===w?"contained":"outlined",onClick:()=>_("dental"),sx:{px:O?1:2,fontSize:O?"0.75rem":"0.875rem",minWidth:O?"auto":void 0},children:O&&!t?"Dental":`Dental (${s?.procedures.filter(e=>"dental"===e.industry).length||0})`}),c.jsx(a,{variant:"aesthetic"===w?"contained":"outlined",onClick:()=>_("aesthetic"),sx:{px:O?1:2,fontSize:O?"0.75rem":"0.875rem",minWidth:O?"auto":void 0},children:O&&!t?"Aesthetic":`Aesthetic (${s?.procedures.filter(e=>"aesthetic"===e.industry).length||0})`})]}),O&&t?c.jsx(Pe,{title:"Switch to "+("companies"===S?"Procedures":"Companies"),children:c.jsx(f,{onClick:()=>T("companies"===S?"procedures":"companies"),size:"small",sx:{border:1,borderColor:"divider",bgcolor:"companies"===S?n(e.palette.primary.main,.1):"transparent"},children:c.jsx(gr,{sx:{fontSize:20}})})}):c.jsx(p,{control:c.jsx(g,{checked:"companies"===S,onChange:e=>T(e.target.checked?"companies":"procedures"),color:"primary",size:O?"small":"medium"}),label:"companies"===S?"Companies":"Procedures",sx:{ml:O?0:2,"& .MuiFormControlLabel-label":{fontSize:O?"0.875rem":"1rem"}}}),(!O||!t)&&c.jsxs(h,{variant:"body2",color:"text.secondary",sx:{fontSize:O?"0.75rem":"0.875rem",display:O&&r?"none":"block"},children:["Showing ","procedures"===S?se.length:ne.length," of ","procedures"===S?s?.procedures.length||0:s?.companies.length||0," ",S]})]})}),c.jsx(nt,{component:j,sx:{overflow:"auto",borderRadius:"20px",background:`linear-gradient(145deg, ${n(e.palette.background.paper,.95)} 0%, ${n(e.palette.background.paper,.98)} 100%)`,backdropFilter:"blur(20px)",border:`1px solid ${n(e.palette.primary.main,.2)}`,boxShadow:`\n            0 20px 60px ${n(e.palette.common.black,.3)},\n            0 0 40px ${n(e.palette.primary.main,.1)},\n            inset 0 1px 0 ${n(e.palette.common.white,.1)}\n          `,position:"relative",transform:`translateY(${oe.table.translateY}px)`,transition:oe.table.transition,"&::before":{content:'""',position:"absolute",top:0,left:0,right:0,height:"4px",background:`linear-gradient(90deg, \n              ${e.palette.primary.main} 0%, \n              ${e.palette.secondary.main} 50%, \n              ${e.palette.success.main} 100%\n            )`,borderRadius:"20px 20px 0 0",opacity:.8},"&::-webkit-scrollbar":{width:"12px"},"&::-webkit-scrollbar-track":{background:n(e.palette.background.default,.3),borderRadius:"6px"},"&::-webkit-scrollbar-thumb":{background:`linear-gradient(45deg, ${e.palette.primary.main}, ${e.palette.secondary.main})`,borderRadius:"6px",border:`2px solid ${n(e.palette.background.paper,.5)}`,"&:hover":{background:`linear-gradient(45deg, ${e.palette.primary.dark}, ${e.palette.secondary.dark})`}}},children:c.jsxs(at,{stickyHeader:!0,children:[c.jsx(ot,{children:c.jsx(lt,{children:"procedures"===S?c.jsxs(c.Fragment,{children:[c.jsx(ct,{children:c.jsx(dt,{active:"procedure_name"===P.key,direction:P.direction,onClick:()=>de("procedure_name"),children:"Procedure"})}),c.jsx(ct,{children:"Industry"}),c.jsx(ct,{children:"Category"}),c.jsx(ct,{align:"right",children:c.jsx(dt,{active:"market_size_2025_usd_millions"===P.key,direction:P.direction,onClick:()=>de("market_size_2025_usd_millions"),children:"Market Size"})}),c.jsx(ct,{align:"right",children:c.jsx(dt,{active:"yearly_growth_percentage"===P.key,direction:P.direction,onClick:()=>de("yearly_growth_percentage"),children:"Growth %"})}),c.jsx(ct,{align:"center",children:c.jsx(dt,{active:"market_maturity_stage"===P.key,direction:P.direction,onClick:()=>de("market_maturity_stage"),children:"Maturity"})}),c.jsx(ct,{align:"right",children:c.jsx(dt,{active:"average_cost_usd"===P.key,direction:P.direction,onClick:()=>de("average_cost_usd"),children:"Avg Cost"})}),c.jsx(ct,{align:"right",children:"Trending"}),c.jsx(ct,{align:"center",children:"Status"})]}):c.jsxs(c.Fragment,{children:[c.jsx(ct,{children:c.jsx(dt,{active:"name"===P.key,direction:P.direction,onClick:()=>de("name"),children:"Company"})}),c.jsx(ct,{children:"Industry"}),c.jsx(ct,{children:"Headquarters"}),c.jsx(ct,{align:"right",children:c.jsx(dt,{active:"market_size_2025_usd_billion"===P.key,direction:P.direction,onClick:()=>de("market_size_2025_usd_billion"),children:"Market Size ($B)"})}),c.jsx(ct,{align:"right",children:c.jsx(dt,{active:"projected_growth_pct"===P.key,direction:P.direction,onClick:()=>de("projected_growth_pct"),children:"Growth %"})}),c.jsx(ct,{align:"right",children:c.jsx(dt,{active:"last_year_sales_usd_million"===P.key,direction:P.direction,onClick:()=>de("last_year_sales_usd_million"),children:"Sales ($M)"})}),c.jsx(ct,{align:"right",children:"Market Share %"}),c.jsx(ct,{align:"center",children:"Status"})]})})}),c.jsx(ht,{children:"procedures"===S?se.map((t,r)=>{const s=le(t),i=ce(s,t.industry);return c.jsxs(lt,{hover:!0,onClick:()=>{U(t),K(!0)},sx:{cursor:"pointer",position:"relative",background:n(i.baseColor||"#374151",.1),borderLeft:`4px solid ${i.border.split(" ")[2]}`,borderRadius:"12px",mb:1,transition:"all 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94)","&:hover":{background:i.background,transform:"translateY(-3px) scale(1.005)",boxShadow:i.boxShadow,border:i.border,borderRadius:"16px",backdropFilter:i.backdropFilter,"& .MuiTableCell-root":{color:"standard"!==s?"#FFFFFF":"inherit",fontWeight:"platinum"===s?600:"gold"===s?500:"inherit"}},"& .tier-indicator":{opacity:0,transition:"opacity 0.3s ease"},"&:hover .tier-indicator":{opacity:1}},children:[c.jsx(ct,{children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",position:"relative"},children:[c.jsx(Ft,{sx:{mr:1,color:"dental"===t.industry?e.palette.info.main:e.palette.secondary.main,fontSize:"platinum"===s?28:"gold"===s?24:20,filter:"standard"!==s?"drop-shadow(0 2px 4px rgba(0,0,0,0.3))":"none"}}),c.jsxs(o,{sx:{flex:1},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(h,{variant:"subtitle2",sx:{fontWeight:"platinum"===s?700:"gold"===s?600:"bold",color:e.palette.primary.main,fontSize:"platinum"===s?"1.1rem":"1rem",textShadow:"standard"!==s?"0 1px 2px rgba(0,0,0,0.5)":"none"},children:t.procedure_name||t.name||"Unknown Procedure"}),"standard"!==s&&c.jsx(H,{label:s.toUpperCase(),size:"small",className:"tier-indicator",sx:{height:20,fontSize:"0.7rem",fontWeight:"bold",background:"platinum"===s?"linear-gradient(45deg, #FFD700, #FFA500)":"gold"===s?"linear-gradient(45deg, #C0C0C0, #E6E6FA)":"linear-gradient(45deg, #CD7F32, #D2691E)",color:"#000",boxShadow:"0 2px 4px rgba(0,0,0,0.3)","& .MuiChip-label":{textShadow:"0 1px 2px rgba(255,255,255,0.5)"}}})]}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Click for detailed insights"})]})]})}),c.jsx(ct,{children:c.jsx(H,{label:"dental"===t.industry?"Dental":"aesthetic"===t.industry?"Aesthetic":"Unknown",size:"small",sx:{background:"dental"===t.industry?"linear-gradient(135deg, #0891B2 0%, #06B6D4 100%)":"aesthetic"===t.industry?"linear-gradient(135deg, #EC4899 0%, #F472B6 100%)":"linear-gradient(135deg, #6B7280 0%, #9CA3AF 100%)",color:"white",fontWeight:600,border:"none",boxShadow:"0 2px 8px rgba(0,0,0,0.2)",backdropFilter:"blur(8px)","&:hover":{transform:"scale(1.05)",boxShadow:"0 4px 12px rgba(0,0,0,0.3)"}}})}),c.jsx(ct,{children:t.category||t.normalized_category||t.clinical_category||("dental"===t.industry?"Dental Procedure":"aesthetic"===t.industry?"Aesthetic Procedure":"General")}),c.jsx(ct,{align:"right",children:c.jsx(h,{variant:"body2",sx:{fontWeight:"platinum"===s?700:"gold"===s?600:"bold",fontSize:"platinum"===s?"1.1rem":"1rem",background:"platinum"===s?"linear-gradient(45deg, #FFD700, #FFA500)":"gold"===s?"linear-gradient(45deg, #C0C0C0, #E6E6FA)":"inherit",backgroundClip:"standard"!==s?"text":"inherit",WebkitBackgroundClip:"standard"!==s?"text":"inherit",WebkitTextFillColor:"standard"!==s?"transparent":"inherit",textShadow:"standard"!==s?"0 1px 2px rgba(0,0,0,0.3)":"none"},children:(()=>{const e=t.market_size_2025_usd_millions||t.market_size_usd_millions||0;return e>=1e3?`$${(e/1e3).toFixed(1)}B`:`$${e.toFixed(1)}M`})()})}),c.jsx(ct,{align:"right",children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(t.yearly_growth_percentage||t.growth_rate||0)>0?c.jsx($e,{sx:{color:e.palette.success.main,mr:.5,fontSize:"platinum"===s?24:"gold"===s?22:20,filter:"standard"!==s?"drop-shadow(0 2px 4px rgba(0,0,0,0.3))":"none"}}):c.jsx(xt,{sx:{color:e.palette.error.main,mr:.5,fontSize:"platinum"===s?24:"gold"===s?22:20}}),c.jsxs(h,{variant:"body2",sx:{color:(t.yearly_growth_percentage||t.growth_rate||0)>0?e.palette.success.main:e.palette.error.main,fontWeight:"platinum"===s?700:"gold"===s?600:"bold",fontSize:"platinum"===s?"1.1rem":"1rem",textShadow:"standard"!==s?"0 1px 2px rgba(0,0,0,0.5)":"none"},children:[(t.yearly_growth_percentage||t.growth_rate||0).toFixed(1),"%"]})]})}),c.jsx(ct,{align:"center",children:c.jsx(H,{label:t.market_maturity_stage||"N/A",size:"small",color:"Emerging"===t.market_maturity_stage?"success":"Growth"===t.market_maturity_stage?"primary":"Expansion"===t.market_maturity_stage?"info":"Mature"===t.market_maturity_stage?"warning":"Saturated"===t.market_maturity_stage?"error":"default",sx:{fontWeight:"bold",minWidth:80}})}),c.jsx(ct,{align:"right",children:c.jsxs(h,{variant:"body2",children:["$",(t.average_cost_usd||0).toFixed(0).replace(/\B(?=(\d{3})+(?!\d))/g,",")]})}),c.jsx(ct,{align:"right",children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[c.jsx(Ae,{variant:"determinate",value:t.trending_score||t.popularity_score||0,sx:{width:60,mr:1,"& .MuiLinearProgress-bar":{backgroundColor:(t.trending_score||t.popularity_score||0)>70?e.palette.success.main:e.palette.warning.main}}}),c.jsx(h,{variant:"caption",children:t.trending_score||t.popularity_score||0})]})}),c.jsx(ct,{align:"center",children:c.jsx(xf.div,{animate:{opacity:[1,.3,1]},transition:{duration:2,repeat:1/0},children:c.jsx(gt,{sx:{color:e.palette.success.main,fontSize:12}})})})]},`procedure-${t.id||r}-${t.procedure_name||"unknown"}`)}):ne.map((t,r)=>c.jsxs(lt,{hover:!0,onClick:()=>{q(t),Q(!0)},sx:{cursor:"pointer",borderRadius:"12px",mb:1,transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{background:`linear-gradient(135deg, \n                        ${n(e.palette.primary.main,.08)} 0%, \n                        ${n(e.palette.secondary.main,.06)} 50%,\n                        ${n(e.palette.success.main,.04)} 100%\n                      )`,transform:"translateY(-2px) scale(1.002)",borderRadius:"16px",boxShadow:`\n                        0 8px 25px ${n(e.palette.primary.main,.2)},\n                        0 0 20px ${n(e.palette.primary.main,.1)},\n                        inset 0 1px 0 ${n(e.palette.common.white,.1)}\n                      `}},children:[c.jsx(ct,{children:c.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(ve,{sx:{mr:1,color:"dental"===t.industry?e.palette.info.main:e.palette.secondary.main}}),c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle2",sx:{fontWeight:"bold",color:e.palette.primary.main},children:t.name||t.company_name||"Unknown Company"}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Click for company details"})]})]})}),c.jsx(ct,{children:c.jsx(H,{label:"dental"===t.industry?"Dental":"aesthetic"===t.industry?"Aesthetic":"Unknown",size:"small",color:"dental"===t.industry?"info":"secondary"})}),c.jsx(ct,{children:t.headquarters||"-"}),c.jsx(ct,{align:"right",children:c.jsxs(h,{variant:"body2",sx:{fontWeight:"bold"},children:["$",(t.market_size_2025_usd_billion||t.market_size_usd_billions||0).toFixed(1),"B"]})}),c.jsx(ct,{align:"right",children:c.jsxs(o,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[(t.projected_growth_pct||0)>0?c.jsx($e,{sx:{color:e.palette.success.main,mr:.5}}):c.jsx(xt,{sx:{color:e.palette.error.main,mr:.5}}),c.jsxs(h,{variant:"body2",sx:{color:(t.projected_growth_pct||0)>0?e.palette.success.main:e.palette.error.main,fontWeight:"bold"},children:[(t.projected_growth_pct||0).toFixed(1),"%"]})]})}),c.jsx(ct,{align:"right",children:c.jsxs(h,{variant:"body2",children:["$",(t.last_year_sales_usd_million||0).toLocaleString(),"M"]})}),c.jsx(ct,{align:"right",children:c.jsxs(h,{variant:"body2",children:[(t.market_share_pct||0).toFixed(1),"%"]})}),c.jsx(ct,{align:"center",children:c.jsx(xf.div,{animate:{opacity:[1,.3,1]},transition:{duration:2,repeat:1/0},children:c.jsx(gt,{sx:{color:e.palette.success.main,fontSize:12}})})})]},`company-${t.id||r}-${t.name||t.company_name||"unknown"}`))})]})}),W&&c.jsx(tx,{open:G,onClose:()=>{K(!1),U(null)},procedure:W,industry:W.industry}),V&&c.jsx(sx,{open:X,onClose:()=>{Q(!1),q(null)},company:V,industry:"dental"}),c.jsxs(fe,{open:Y,onClose:()=>J(!1),maxWidth:"xl",fullWidth:!0,PaperProps:{sx:{height:"92vh",maxHeight:"92vh",display:"flex",flexDirection:"column"}},children:[c.jsxs(xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:1,borderColor:"divider",flexShrink:0,minHeight:"auto"},children:[c.jsx(h,{variant:"h5",sx:{fontWeight:600},children:"Territory Intelligence Dashboard"}),c.jsx(f,{onClick:()=>J(!1),children:c.jsx(mj,{})})]}),c.jsx(ye,{sx:{p:0,flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:c.jsx(o,{sx:{flex:1,overflow:"auto",height:"100%","&::-webkit-scrollbar":{width:"8px"},"&::-webkit-scrollbar-track":{background:"rgba(0,0,0,0.05)"},"&::-webkit-scrollbar-thumb":{background:"rgba(0,0,0,0.2)",borderRadius:"4px","&:hover":{background:"rgba(0,0,0,0.3)"}}},children:c.jsx(o,{sx:{p:3,height:"100%",display:"flex",flexDirection:"column",overflow:"auto"},children:c.jsx(tj,{})})})})]})]})};_j.displayName="MarketCommandCenter";var kj={},Cj=Te;Object.defineProperty(kj,"__esModule",{value:!0});var Sj=kj.default=void 0,Tj=Cj(Zs()),Pj=c;Sj=kj.default=(0,Tj.default)((0,Pj.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"}),"MonetizationOn");var Aj={},Ej=Te;Object.defineProperty(Aj,"__esModule",{value:!0});var Ij=Aj.default=void 0,$j=Ej(Zs()),Mj=c;Ij=Aj.default=(0,$j.default)((0,Mj.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"}),"Info");var Rj={},Oj=Te;Object.defineProperty(Rj,"__esModule",{value:!0});var Dj=Rj.default=void 0,zj=Oj(Zs()),Lj=c;Dj=Rj.default=(0,zj.default)((0,Lj.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search");var Fj={},Bj=Te;Object.defineProperty(Fj,"__esModule",{value:!0});var Nj=Fj.default=void 0,Wj=Bj(Zs()),Uj=c;Nj=Fj.default=(0,Wj.default)((0,Uj.jsx)("path",{d:"M12 1 3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11z"}),"Security");var Vj={},qj=Te;Object.defineProperty(Vj,"__esModule",{value:!0});var Gj=Vj.default=void 0,Hj=qj(Zs()),Kj=c;Gj=Vj.default=(0,Hj.default)((0,Kj.jsx)("path",{d:"m22.7 19-9.1-9.1c.9-2.3.4-5-1.5-6.9-2-2-5-2.4-7.4-1.3L9 6 6 9 1.6 4.7C.4 7.1.9 10.1 2.9 12.1c1.9 1.9 4.6 2.4 6.9 1.5l9.1 9.1c.4.4 1 .4 1.4 0l2.3-2.3c.5-.4.5-1.1.1-1.4"}),"Build");var Yj={},Jj=Te;Object.defineProperty(Yj,"__esModule",{value:!0});var Xj=Yj.default=void 0,Qj=Jj(Zs()),Zj=c;Xj=Yj.default=(0,Qj.default)((0,Zj.jsx)("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"}),"AutoAwesome");var ew={},tw=Te;Object.defineProperty(ew,"__esModule",{value:!0});var rw=ew.default=void 0,sw=tw(Zs()),iw=c;rw=ew.default=(0,sw.default)((0,iw.jsx)("path",{d:"M20 6h-4V4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2M10 4h4v2h-4zm6 11h-3v3h-2v-3H8v-2h3v-3h2v3h3z"}),"MedicalServices");var nw={},aw=Te;Object.defineProperty(nw,"__esModule",{value:!0});var ow=nw.default=void 0,lw=aw(Zs()),cw=c;ow=nw.default=(0,lw.default)((0,cw.jsx)("path",{d:"M13 16.12c3.47-.41 6.17-3.36 6.17-6.95 0-3.87-3.13-7-7-7s-7 3.13-7 7c0 3.47 2.52 6.34 5.83 6.89V20H5v2h14v-2h-6z"}),"Nature");var dw={},hw=Te;Object.defineProperty(dw,"__esModule",{value:!0});var uw=dw.default=void 0,pw=hw(Zs()),mw=c;uw=dw.default=(0,pw.default)((0,mw.jsx)("path",{d:"M12 20H2v-2h5.75c-.73-2.81-2.94-5.01-5.75-5.74.64-.16 1.31-.26 2-.26 4.42 0 8 3.58 8 8m10-7.74c-.64-.16-1.31-.26-2-.26-2.93 0-5.48 1.58-6.88 3.93.29.66.53 1.35.67 2.07.13.65.2 1.32.2 2h8v-2h-5.75c.74-2.81 2.95-5.01 5.76-5.74m-6.36-1.24c.78-2.09 2.23-3.84 4.09-5C15.44 6.16 12 9.67 12 14v.02c.95-1.27 2.2-2.3 3.64-3m-4.22-2.17C10.58 6.66 8.88 4.89 6.7 4 8.14 5.86 9 8.18 9 10.71c0 .21-.03.41-.04.61.43.24.83.52 1.22.82.21-1.18.65-2.29 1.24-3.29"}),"Grass");var gw={},fw=Te;Object.defineProperty(gw,"__esModule",{value:!0});var xw=gw.default=void 0,yw=fw(Zs()),vw=c;xw=gw.default=(0,yw.default)((0,vw.jsx)("path",{d:"M6.36 18.78 6.61 21l1.62-1.54 2.77-7.6c-.68-.17-1.28-.51-1.77-.98zm8.41-7.9c-.49.47-1.1.81-1.77.98l2.77 7.6L17.39 21l.26-2.22zM15 8c0-1.3-.84-2.4-2-2.82V3h-2v2.18C9.84 5.6 9 6.7 9 8c0 1.66 1.34 3 3 3s3-1.34 3-3m-3 1c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1"}),"Architecture");var bw={},jw=Te;Object.defineProperty(bw,"__esModule",{value:!0});var ww=bw.default=void 0,_w=jw(Zs()),kw=c;ww=bw.default=(0,_w.default)((0,kw.jsx)("path",{d:"M21 6H3c-1.1 0-2 .9-2 2v8c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m0 10H3V8h2v4h2V8h2v4h2V8h2v4h2V8h2v4h2V8h2z"}),"Straighten");var Cw={},Sw=Te;Object.defineProperty(Cw,"__esModule",{value:!0});var Tw=Cw.default=void 0,Pw=Sw(Zs()),Aw=c;Tw=Cw.default=(0,Pw.default)((0,Aw.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m5 11h-4v4h-2v-4H7v-2h4V7h2v4h4z"}),"AddCircle");var Ew={},Iw=Te;Object.defineProperty(Ew,"__esModule",{value:!0});var $w=Ew.default=void 0,Mw=Iw(Zs()),Rw=c;$w=Ew.default=(0,Mw.default)((0,Rw.jsx)("path",{d:"M20 18c1.1 0 1.99-.9 1.99-2L22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2H0v2h24v-2zM4 6h16v10H4z"}),"Computer");var Ow={},Dw=Te;Object.defineProperty(Ow,"__esModule",{value:!0});var zw=Ow.default=void 0,Lw=Dw(Zs()),Fw=c;zw=Ow.default=(0,Lw.default)((0,Fw.jsx)("path",{d:"M9 11.75c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25m6 0c-.69 0-1.25.56-1.25 1.25s.56 1.25 1.25 1.25 1.25-.56 1.25-1.25-.56-1.25-1.25-1.25M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8 0-.29.02-.58.05-.86 2.36-1.05 4.23-2.98 5.21-5.37C11.07 8.33 14.05 10 17.42 10c.78 0 1.53-.09 2.25-.26.21.71.33 1.47.33 2.26 0 4.41-3.59 8-8 8"}),"Face");var Bw={},Nw=Te;Object.defineProperty(Bw,"__esModule",{value:!0});var Ww=Bw.default=void 0,Uw=Nw(Zs()),Vw=c;Ww=Bw.default=(0,Uw.default)((0,Vw.jsx)("path",{d:"m20.71 5.63-2.34-2.34a.9959.9959 0 0 0-1.41 0l-3.12 3.12-1.93-1.91-1.41 1.41 1.42 1.42L3 16.25V21h4.75l8.92-8.92 1.42 1.42 1.41-1.41-1.92-1.92 3.12-3.12c.4-.4.4-1.03.01-1.42M6.92 19 5 17.08l8.06-8.06 1.92 1.92z"}),"Colorize");var qw={},Gw=Te;Object.defineProperty(qw,"__esModule",{value:!0});var Hw=qw.default=void 0,Kw=Gw(Zs()),Yw=c;Hw=qw.default=(0,Kw.default)((0,Yw.jsx)("path",{d:"M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2m9 7h-6v13h-2v-6h-2v6H9V9H3V7h18z"}),"Accessibility");var Jw={},Xw=Te;Object.defineProperty(Jw,"__esModule",{value:!0});var Qw=Jw.default=void 0,Zw=Xw(Zs()),e_=c;Qw=Jw.default=(0,Zw.default)((0,e_.jsx)("path",{d:"M10 12c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2M6 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m12-8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m-4 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m-4-4c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"Grain");var t_={},r_=Te;Object.defineProperty(t_,"__esModule",{value:!0});var s_=t_.default=void 0,i_=r_(Zs()),n_=c;s_=t_.default=(0,i_.default)((0,n_.jsx)("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3m13.71-9.37-1.34-1.34a.9959.9959 0 0 0-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41"}),"Brush");var a_={},o_=Te;Object.defineProperty(a_,"__esModule",{value:!0});var l_=a_.default=void 0,c_=o_(Zs()),d_=c;l_=a_.default=(0,c_.default)((0,d_.jsx)("path",{d:"m17.73 12.02 3.98-3.98c.39-.39.39-1.02 0-1.41l-4.34-4.34a.9959.9959 0 0 0-1.41 0l-3.98 3.98L8 2.29C7.8 2.1 7.55 2 7.29 2c-.25 0-.51.1-.7.29L2.25 6.63c-.39.39-.39 1.02 0 1.41l3.98 3.98L2.25 16c-.39.39-.39 1.02 0 1.41l4.34 4.34c.39.39 1.02.39 1.41 0l3.98-3.98 3.98 3.98c.2.2.45.29.71.29.26 0 .51-.1.71-.29l4.34-4.34c.39-.39.39-1.02 0-1.41zM12 9c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m-4.71 1.96L3.66 7.34l3.63-3.63 3.62 3.62zM10 13c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2 2c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m2-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2.66 9.34-3.63-3.62 3.63-3.63 3.62 3.62z"}),"Healing");var h_={},u_=Te;Object.defineProperty(h_,"__esModule",{value:!0});var p_=h_.default=void 0,m_=u_(Zs()),g_=c;p_=h_.default=(0,m_.default)((0,g_.jsx)("path",{d:"M15.5 11.5c0 2-2.5 3.5-2.5 5h-2c0-1.5-2.5-3-2.5-5C8.5 9.57 10.07 8 12 8s3.5 1.57 3.5 3.5m-2.5 6h-2V19h2zm9-5.5c0-2.76-1.12-5.26-2.93-7.07l-1.06 1.06C19.55 7.53 20.5 9.66 20.5 12s-.95 4.47-2.49 6.01l1.06 1.06C20.88 17.26 22 14.76 22 12M3.5 12c0-2.34.95-4.47 2.49-6.01L4.93 4.93C3.12 6.74 2 9.24 2 12c0 2.76 1.12 5.26 2.93 7.07l1.06-1.06C4.45 16.47 3.5 14.34 3.5 12m14 0c0 1.52-.62 2.89-1.61 3.89l1.06 1.06C18.22 15.68 19 13.93 19 12c0-1.93-.78-3.68-2.05-4.95l-1.06 1.06c.99 1 1.61 2.37 1.61 3.89M7.05 16.95l1.06-1.06c-1-1-1.61-2.37-1.61-3.89s.62-2.89 1.61-3.89L7.05 7.05C5.78 8.32 5 10.07 5 12c0 1.93.78 3.68 2.05 4.95"}),"OnlinePrediction");var f_={},x_=Te;Object.defineProperty(f_,"__esModule",{value:!0});var y_=f_.default=void 0,v_=x_(Zs()),b_=c;y_=f_.default=(0,v_.default)((0,b_.jsx)("path",{d:"M7 2v11h3v9l7-12h-4l4-8z"}),"FlashOn");var j_={},w_=Te;Object.defineProperty(j_,"__esModule",{value:!0});var __=j_.default=void 0,k_=w_(Zs()),C_=c;__=j_.default=(0,k_.default)((0,C_.jsx)("path",{d:"M3 3h8v8H3zm10 0h8v8h-8zM3 13h8v8H3zm15 0h-2v3h-3v2h3v3h2v-3h3v-2h-3z"}),"DashboardCustomize");var S_={},T_=Te;Object.defineProperty(S_,"__esModule",{value:!0});var P_=S_.default=void 0,A_=T_(Zs()),E_=c;P_=S_.default=(0,A_.default)((0,E_.jsx)("path",{d:"M4 4h7V2H4c-1.1 0-2 .9-2 2v7h2zm6 9-4 5h12l-3-4-2.03 2.71zm7-4.5c0-.83-.67-1.5-1.5-1.5S14 7.67 14 8.5s.67 1.5 1.5 1.5S17 9.33 17 8.5M20 2h-7v2h7v7h2V4c0-1.1-.9-2-2-2m0 18h-7v2h7c1.1 0 2-.9 2-2v-7h-2zM4 13H2v7c0 1.1.9 2 2 2h7v-2H4z"}),"Wallpaper");var I_={},$_=Te;Object.defineProperty(I_,"__esModule",{value:!0});var M_=I_.default=void 0,R_=$_(Zs()),O_=c;M_=I_.default=(0,R_.default)((0,O_.jsx)("path",{fillRule:"evenodd",d:"M20 3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M10 17H5v-2h5zm0-4H5v-2h5zm0-4H5V7h5zm4.82 6L12 12.16l1.41-1.41 1.41 1.42L17.99 9l1.42 1.42z"}),"FactCheck");var D_={},z_=Te;Object.defineProperty(D_,"__esModule",{value:!0});var L_=D_.default=void 0,F_=z_(Zs()),B_=c;L_=D_.default=(0,F_.default)((0,B_.jsx)("path",{d:"M8.4 18.2c.38.5.6 1.12.6 1.8 0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3c.44 0 .85.09 1.23.26l1.41-1.77c-.92-1.03-1.29-2.39-1.09-3.69l-2.03-.68c-.54.83-1.46 1.38-2.52 1.38-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3c0 .07 0 .14-.01.21l2.03.68c.64-1.21 1.82-2.09 3.22-2.32V5.91C9.96 5.57 9 4.4 9 3c0-1.66 1.34-3 3-3s3 1.34 3 3c0 1.4-.96 2.57-2.25 2.91v2.16c1.4.23 2.58 1.11 3.22 2.32L18 9.71V9.5c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3c-1.06 0-1.98-.55-2.52-1.37l-2.03.68c.2 1.29-.16 2.65-1.09 3.69l1.41 1.77c.38-.18.79-.27 1.23-.27 1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3c0-.68.22-1.3.6-1.8l-1.41-1.77c-1.35.75-3.01.76-4.37 0z"}),"Hub");var N_={},W_=Te;Object.defineProperty(N_,"__esModule",{value:!0});var U_=N_.default=void 0,V_=W_(Zs()),q_=c;U_=N_.default=(0,V_.default)([(0,q_.jsx)("path",{d:"m12 2-5.5 9h11z"},"0"),(0,q_.jsx)("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),(0,q_.jsx)("path",{d:"M3 13.5h8v8H3z"},"2")],"Category");const G_={search:c.jsx(Dj,{sx:{color:"#1976d2"}}),shield:c.jsx(Nj,{sx:{color:"#2e7d32"}}),build:c.jsx(Gj,{sx:{color:"#ed6c02"}}),auto_awesome:c.jsx(Xj,{sx:{color:"#9c27b0"}}),medical_services:c.jsx(rw,{sx:{color:"#d32f2f"}}),emoji_nature:c.jsx(ow,{sx:{color:"#388e3c"}}),grass:c.jsx(uw,{sx:{color:"#4caf50"}}),architecture:c.jsx(xw,{sx:{color:"#795548"}}),straighten:c.jsx(ww,{sx:{color:"#607d8b"}}),add_circle:c.jsx(Tw,{sx:{color:"#2196f3"}}),computer:c.jsx($w,{sx:{color:"#3f51b5"}}),face:c.jsx(zw,{sx:{color:"#ff9800"}}),colorize:c.jsx(Ww,{sx:{color:"#e91e63"}}),accessibility:c.jsx(Hw,{sx:{color:"#00bcd4"}}),grain:c.jsx(Qw,{sx:{color:"#8bc34a"}}),brush:c.jsx(s_,{sx:{color:"#ff5722"}}),healing:c.jsx(l_,{sx:{color:"#4caf50"}}),online_prediction:c.jsx(p_,{sx:{color:"#673ab7"}}),flash_on:c.jsx(y_,{sx:{color:"#ffc107"}}),dashboard_customize:c.jsx(__,{sx:{color:"#009688"}}),wallpaper:c.jsx(P_,{sx:{color:"#795548"}}),fact_check:c.jsx(M_,{sx:{color:"#4caf50"}}),hub:c.jsx(L_,{sx:{color:"#3f51b5"}}),category:c.jsx(U_,{sx:{color:"#757575"}})},H_=({categories:e,industry:t,selectedIndustry:s,selectedCategory:n,onSelectCategory:a,loading:l})=>{const[d,u]=ks.useState({}),p=r`
    from { opacity: 0; transform: translateY(4px); }
    to { opacity: 1; transform: none; }
  `,m=r`
    0% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.7; transform: scale(0.96); }
    100% { opacity: 1; transform: scale(1); }
  `,g=e.filter(e=>null===e.parent_id&&(e.applicable_to===s||"both"===e.applicable_to)).sort((e,t)=>(e.display_order||999)-(t.display_order||999)),x=({growth:e})=>{if(!e)return c.jsx("span",{children:"-"});let t="#2196f3";return e>15?t="#4caf50":e<5&&(t="#ff9800"),c.jsxs("span",{style:{display:"inline-flex",alignItems:"center",fontSize:"0.8rem",color:t,fontWeight:500},children:[c.jsx(ti,{fontSize:"small",style:{marginRight:4}}),`${e.toFixed(1)}%`]})},y=(t,r=0)=>{const s=d[t.id]||!1,i=n===t.id,l=(g=t.id,e.filter(e=>e.parent_id===g).sort((e,t)=>(e.display_order||999)-(t.display_order||999)));var g;const v=l.length>0,b=t.icon_name&&G_[t.icon_name]?G_[t.icon_name]:G_.category;return c.jsxs(Cs.Fragment,{children:[c.jsxs(Y,{button:!0,selected:i,onClick:()=>a(t.id),sx:{position:"relative",pl:2+2*r,bgcolor:i?"rgba(25, 118, 210, 0.08)":"transparent",opacity:0,transform:"translateY(4px)",animation:`${p} 0.3s ease forwards`,"@media (prefers-reduced-motion: reduce)":{animation:"none",opacity:1,transform:"none"},"&::before":{content:'""',position:"absolute",left:0,top:0,bottom:0,width:i?"4px":0,backgroundColor:t.color_code||"#1976d2",animation:i?`${m} 2s infinite`:"none","@media (prefers-reduced-motion: reduce)":{animation:"none"}},"&:hover":{bgcolor:"rgba(25, 118, 210, 0.04)"}},children:[c.jsx(tt,{sx:{color:t.color_code||"inherit",minWidth:36},children:b}),c.jsx(Q,{primary:c.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(h,{variant:"body1",component:"span",children:t.name}),t.is_featured&&c.jsx(H,{size:"small",label:"Featured",color:"primary",variant:"outlined",sx:{ml:1,fontSize:"0.7rem",height:20}})]}),secondaryTypographyProps:{component:"div"},secondary:c.jsxs(o,{sx:{display:"flex",alignItems:"center",mt:.5,gap:1},children:[c.jsx(o,{sx:{display:"flex",alignItems:"center"},children:c.jsx(Pe,{title:"Growth Rate",placement:"top",children:c.jsx("span",{children:c.jsx(x,{growth:t.avg_growth_rate})})})}),c.jsx(o,{sx:{display:"flex",alignItems:"center"},children:c.jsx(Pe,{title:"Market Size",placement:"top",children:c.jsx("span",{children:c.jsx(H,{size:"small",variant:"outlined",label:(j=t.market_size_usd_millions,j?j>=1e3?`$${(j/1e3).toFixed(1)}B`:`$${j}M`:"Unknown"),icon:c.jsx(Sj,{fontSize:"small"}),sx:{fontSize:"0.75rem"}})})})})]})}),v&&c.jsx(f,{edge:"end",size:"small",onClick:e=>{var r;e.stopPropagation(),r=t.id,u(e=>({...e,[r]:!e[r]}))},children:s?c.jsx(cj,{}):c.jsx(ij,{})})]}),v&&c.jsx(M,{in:s,timeout:"auto",unmountOnExit:!0,children:c.jsx(K,{component:"div",disablePadding:!0,children:l.map(e=>y(e,r+1))})})]},t.id);var j};return c.jsx(i,{variant:"outlined",sx:{mb:2,height:"100%"},children:c.jsxs(v,{sx:{p:1},children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[c.jsx(h,{variant:"h6",color:"primary",children:"Categories"}),c.jsx(Pe,{title:"Categories are organized in a hierarchy with market insights",children:c.jsx(f,{size:"small",children:c.jsx(Ij,{fontSize:"small"})})})]}),c.jsx(N,{sx:{mb:1}}),l?c.jsx(o,{sx:{px:2,py:1},children:[...Array(5)].map((e,t)=>c.jsx(Le,{variant:"rectangular",height:40,animation:"wave",sx:{mb:1,borderRadius:1}},t))}):c.jsx(K,{dense:!0,component:"nav",sx:{maxHeight:500,overflow:"auto"},children:g.map(e=>y(e))})]})})};H_.displayName="CategoryHierarchyView";const K_=()=>{const[e,t]=ks.useState([]),[r,s]=ks.useState([]),[n,l]=ks.useState([]),[u,p]=ks.useState([]),[m,f]=ks.useState([]),[x,y]=ks.useState([]),[b,w]=ks.useState([]),[_,k]=ks.useState(!0),[C,S]=ks.useState(!0),[T,P]=ks.useState(!0),[E,I]=ks.useState(null),[$,M]=ks.useState("dental"),[O,D]=ks.useState(null),[z,L]=ks.useState(0),[F,N]=ks.useState(10),[W,U]=ks.useState(0),[V,q]=ks.useState(10),[G,H]=ks.useState(0),[K,Y]=ks.useState(10),[J,X]=ks.useState(0),[Q,Z]=ks.useState(10),[ee,te]=ks.useState(0),[re,se]=ks.useState(5),[ie,ne]=ks.useState(0),[ae,oe]=ks.useState(5);ks.useEffect(()=>{(async()=>{k(!0),I(null);try{let e=await nl.from("dental_procedures").select("*");e.error&&(e=await nl.from("v_dental_procedures").select("*"),e.error&&(e=await nl.from("all_procedures").select("*").eq("industry","dental")));let r=await nl.from("aesthetic_procedures").select("*");if(r.error&&(r=await nl.from("aesthetic_procedures_view").select("*"),r.error&&(r=await nl.from("all_procedures").select("*").eq("industry","aesthetic"))),e.error)throw new Error(`Dental procedures: ${e.error.message}`);if(r.error)throw new Error(`Aesthetic procedures: ${r.error.message}`);const i=(e.data||[]).map(e=>({...e,id:e.id||Math.random(),name:e.procedure_name||e.name||e.title||"",category:e.category||e.procedure_category||"",clinical_category:e.clinical_category||e.specialty||"",average_cost_usd:e.average_cost_usd||e.cost||e.price||0,yearly_growth_percentage:e.yearly_growth_percentage||e.growth_rate||0})),n=(r.data||[]).map(e=>({...e,id:e.id||Math.random(),name:e.procedure_name||e.name||e.title||"",category:e.category||e.procedure_category||"",average_cost_usd:e.average_cost_usd||e.cost||e.cost_range||0,yearly_growth_percentage:e.yearly_growth_percentage||e.trend_score||0,downtime:e.downtime||"",body_areas_applicable:e.body_areas_applicable||e.body_area||""}));t(i),s(n),await(async()=>{S(!0);try{const{data:e,error:t}=await nl.from("dental_companies").select("*").order("name",{ascending:!0});if(t)throw t;l(e||[]);const{data:r,error:s}=await nl.from("aesthetic_companies").select("*").order("name",{ascending:!0});if(s)throw s;p(r||[])}catch(e){I(`Failed to load companies: ${e.message}`)}finally{S(!1)}})(),await(async()=>{P(!0);try{const{data:e,error:t}=await nl.from("category_hierarchy").select("*").order("display_order",{ascending:!0});if(t)throw t;w(e||[]);const r=e?.filter(e=>"dental"===e.applicable_to||"both"===e.applicable_to).map(e=>({id:e.id,name:e.name,description:e.description,market_size_usd_millions:e.market_size_usd_millions,avg_growth_rate:e.avg_growth_rate}))||[],s=e?.filter(e=>"aesthetic"===e.applicable_to||"both"===e.applicable_to).map(e=>({id:e.id,name:e.name,description:e.description,market_size_usd_millions:e.market_size_usd_millions,avg_growth_rate:e.avg_growth_rate}))||[];f(r),y(s)}catch(e){try{const{data:e,error:t}=await nl.from("dental_procedure_categories").select("*").order("name",{ascending:!0});if(t)throw t;f(e||[]);const{data:r,error:s}=await nl.from("aesthetic_categories").select("*").order("name",{ascending:!0});if(s)throw s;y(r||[])}catch(t){I(`Failed to load categories: ${t.message}`)}}finally{P(!1)}})()}catch(e){I(`Failed to load procedures: ${e.message}`)}finally{k(!1)}})()},[]);const le=(e,t=!1,r=1)=>{if(null==e||""===e)return"-";if(t){const t=parseFloat(String(e));return isNaN(t)?"-":`${t.toFixed(r)}%`}return String(e)};if(_)return c.jsxs(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:[c.jsx(B,{size:60,thickness:4}),c.jsx(h,{variant:"h6",sx:{ml:2},children:"Loading all procedures..."})]});if(E)return c.jsxs(d,{maxWidth:"lg",sx:{mt:4},children:[c.jsx(R,{severity:"error",sx:{my:2},children:E}),c.jsx(a,{variant:"contained",color:"primary",onClick:()=>window.location.reload(),sx:{mt:2},children:"Retry"})]});const ce=ks.useMemo(()=>O?e.filter(e=>e.category_id===O||e.procedure_category_id===O):e,[e,O]),de=ks.useMemo(()=>O?r.filter(e=>e.category_id===O||e.procedure_category_id===O):r,[r,O]),he=ce.slice(z*F,z*F+F),ue=de.slice(W*V,W*V+V),pe=n.slice(G*K,G*K+K),me=u.slice(J*Q,J*Q+Q);return c.jsxs(d,{maxWidth:"xl",sx:{mt:4,mb:8},children:[c.jsxs(h,{variant:"h4",gutterBottom:!0,children:["dental"===$?"Dental":"Aesthetic"," Procedures Dashboard"]}),c.jsxs(o,{sx:{mb:3,display:"flex",alignItems:"center"},children:[c.jsx(h,{component:"span",sx:{mr:1},children:"Dental"}),c.jsx(g,{checked:"aesthetic"===$,onChange:e=>{M(e.target.checked?"aesthetic":"dental"),D(null)},color:"primary"}),c.jsx(h,{component:"span",sx:{ml:1},children:"Aesthetic"})]}),c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,md:3,children:c.jsx(H_,{categories:b,selectedIndustry:$,selectedCategory:O,onSelectCategory:e=>{D(e===O?null:e),"dental"===$?L(0):U(0)},loading:T,industry:$})}),c.jsxs(A,{item:!0,xs:12,md:9,children:[c.jsx(i,{variant:"outlined",sx:{mb:3},children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[c.jsxs(h,{variant:"h6",color:"primary",gutterBottom:!0,children:["dental"===$?"Dental":"Aesthetic"," Procedures",O&&` - ${"dental"===$?m.find(e=>e.id===O)?.name:x.find(e=>e.id===O)?.name}`]}),O&&c.jsx(a,{size:"small",variant:"outlined",onClick:()=>D(null),children:"Clear Filter"})]}),c.jsx(nt,{component:j,variant:"outlined",children:c.jsxs(at,{size:"small",children:[c.jsx(ot,{children:c.jsxs(lt,{children:[c.jsx(ct,{children:"Procedure Name"}),c.jsx(ct,{children:"Category"}),c.jsx(ct,{align:"right",children:"Avg. Cost"}),c.jsx(ct,{align:"right",children:"Growth %"}),"aesthetic"===$&&c.jsx(ct,{children:"Downtime"}),"dental"===$&&c.jsx(ct,{children:"Clinical Category"})]})}),c.jsxs(ht,{children:[("dental"===$?he:ue).map(e=>c.jsxs(lt,{children:[c.jsx(ct,{children:c.jsx(Pe,{title:e.description||"No description available",children:c.jsx(h,{variant:"body2",children:e.name})})}),c.jsx(ct,{children:e.category}),c.jsx(ct,{align:"right",children:"number"==typeof e.average_cost_usd?`$${e.average_cost_usd.toLocaleString()}`:le(e.average_cost_usd)}),c.jsx(ct,{align:"right",children:le(e.yearly_growth_percentage,!0)}),"aesthetic"===$&&c.jsx(ct,{children:e.downtime||"-"}),"dental"===$&&c.jsx(ct,{children:e.clinical_category||"-"})]},e.id)),("dental"===$?!he.length:!ue.length)&&c.jsx(lt,{children:c.jsx(ct,{colSpan:5,align:"center",sx:{py:3},children:c.jsxs(h,{variant:"body2",color:"text.secondary",children:["No procedures found",O?" for the selected category":""]})})})]})]})}),c.jsx(yr,{rowsPerPageOptions:[5,10,25,50],component:"div",count:"dental"===$?ce.length:de.length,rowsPerPage:"dental"===$?F:V,page:"dental"===$?z:W,onPageChange:"dental"===$?(e,t)=>{L(t)}:(e,t)=>{U(t)},onRowsPerPageChange:"dental"===$?e=>{N(parseInt(e.target.value,10)),L(0)}:e=>{q(parseInt(e.target.value,10)),U(0)}})]})}),c.jsx(i,{variant:"outlined",children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",color:"primary",gutterBottom:!0,children:["dental"===$?"Dental":"Aesthetic"," Companies"]}),c.jsx(nt,{component:j,variant:"outlined",children:c.jsxs(at,{size:"small",children:[c.jsx(ot,{children:c.jsxs(lt,{children:[c.jsx(ct,{children:"Company Name"}),c.jsx(ct,{children:"Headquarters"}),c.jsx(ct,{align:"right",children:"Market Share %"}),c.jsx(ct,{align:"right",children:"Sales ($M)"}),c.jsx(ct,{align:"right",children:"Growth %"})]})}),c.jsxs(ht,{children:[("dental"===$?pe:me).map(e=>c.jsxs(lt,{children:[c.jsx(ct,{children:c.jsx(Pe,{title:e.description||"No description available",children:c.jsx(h,{variant:"body2",children:e.name})})}),c.jsx(ct,{children:e.headquarters||"-"}),c.jsx(ct,{align:"right",children:le(e.market_share_pct,!0)}),c.jsx(ct,{align:"right",children:e.last_year_sales_usd_million?`$${e.last_year_sales_usd_million.toLocaleString()}`:"-"}),c.jsx(ct,{align:"right",children:le(e.projected_growth_pct,!0)})]},e.id)),("dental"===$?!pe.length:!me.length)&&c.jsx(lt,{children:c.jsx(ct,{colSpan:5,align:"center",sx:{py:3},children:c.jsx(h,{variant:"body2",color:"text.secondary",children:"No companies found"})})})]})]})}),c.jsx(yr,{rowsPerPageOptions:[5,10,25,50],component:"div",count:"dental"===$?n.length:u.length,rowsPerPage:"dental"===$?K:Q,page:"dental"===$?G:J,onPageChange:"dental"===$?(e,t)=>{H(t)}:(e,t)=>{X(t)},onRowsPerPageChange:"dental"===$?e=>{Y(parseInt(e.target.value,10)),H(0)}:e=>{Z(parseInt(e.target.value,10)),X(0)}})]})})]})]})]})};K_.displayName="Dashboard";var Y_={},J_=Te;Object.defineProperty(Y_,"__esModule",{value:!0});var X_=Y_.default=void 0,Q_=J_(Zs()),Z_=c;X_=Y_.default=(0,Q_.default)((0,Z_.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");const ek=ks.createContext({gradientColors:{start:"#00ffc6",end:"#7B42F6"}}),tk=ks.createContext({colorMode:"dark",toggleColorMode:()=>{}}),rk=({children:e})=>{const[t,r]=ks.useState("dark"),s=ks.useMemo(()=>({colorMode:t,toggleColorMode:()=>{r(e=>"light"===e?"dark":"light")}}),[t]);return c.jsx(tk.Provider,{value:s,children:c.jsx(ek.Provider,{value:{gradientColors:{start:"#00ffc6",end:"#7B42F6"}},children:e})})};rk.displayName="OrbContextProvider";var sk={},ik=Te;Object.defineProperty(sk,"__esModule",{value:!0});var nk=sk.default=void 0,ak=ik(Zs()),ok=c;nk=sk.default=(0,ak.default)((0,ok.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6c3.31 0 6 2.69 6 6s-2.69 6-6 6"}),"Brightness4");var lk={},ck=Te;Object.defineProperty(lk,"__esModule",{value:!0});var dk=lk.default=void 0,hk=ck(Zs()),uk=c;dk=lk.default=(0,hk.default)((0,uk.jsx)("path",{d:"M20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zM12 18c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6m0-10c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4"}),"Brightness7");var pk={},mk=Te;Object.defineProperty(pk,"__esModule",{value:!0});var gk=pk.default=void 0,fk=mk(Zs()),xk=c;gk=pk.default=(0,fk.default)((0,xk.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert");const yk=ks.createContext(void 0),vk=({children:e})=>c.jsx(c.Fragment,{children:e}),bk=()=>{const e=ks.useContext(yk);if(!e)throw new Error("useAuth must be used within UnifiedAuthProvider");return e},jk=({children:e})=>c.jsx(vk,{children:e}),wk=ks.createContext(void 0),_k=({children:e,fallback:t=c.jsx("div",{children:"Loading..."}),redirectTo:r="/login",allowPublic:s=!1,publicComponent:i})=>{const{user:n,loading:a}=bk();return ks.useEffect(()=>{a||n||s||"undefined"==typeof window||r.startsWith("http")||(window.location.href=r)},[n,a,r,s]),a?c.jsx(c.Fragment,{children:t}):n?c.jsx(c.Fragment,{children:e}):s&&i?c.jsx(c.Fragment,{children:i}):c.jsx(c.Fragment,{children:t})};_k.displayName="AuthGuard";const kk=r`
  0% { background-position: -200% center; }
  100% { background-position: 200% center; }
`,Ck=r`
  0% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
  100% { transform: translateY(0px); }
`,Sk=r`
  0% { box-shadow: 0 0 5px rgba(0, 255, 198, 0.5); }
  50% { box-shadow: 0 0 20px rgba(0, 255, 198, 0.8), 0 0 30px rgba(0, 255, 198, 0.4); }
  100% { box-shadow: 0 0 5px rgba(0, 255, 198, 0.5); }
`;function Tk({open:e,onClose:t,onSuccess:r}){const s=l(),[i,n]=ks.useState("options"),[d,u]=ks.useState(!1),[p,m]=ks.useState(""),[g,x]=ks.useState(""),[y,v]=ks.useState(!1),[b,j]=ks.useState(!1),[w,_]=ks.useState(""),{signInWithEmail:k,signUpWithEmail:C,signInWithProvider:S}=bk();ks.useEffect(()=>{e||(n("options"),m(""),x(""),_(""),u(!1))},[e]);const T=async e=>{j(!0),_("");try{await S(e),r?.(),t()}catch(s){_(`Failed to sign in with ${e}`),j(!1)}};return c.jsx(fe,{open:e,onClose:t,TransitionComponent:P,closeAfterTransition:!0,BackdropComponent:vr,BackdropProps:{timeout:500,sx:{backgroundColor:"rgba(10, 10, 10, 0.8)",backdropFilter:"blur(8px)"}},PaperProps:{sx:{borderRadius:4,overflow:"hidden",maxWidth:440,width:"90%",backgroundColor:"transparent",boxShadow:"none"}},children:c.jsxs(o,{sx:{position:"relative",background:"dark"===s.palette.mode?"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)":"linear-gradient(135deg, #f5f5f5 0%, #e3e3e3 100%)",border:"1px solid",borderColor:"rgba(0, 255, 198, 0.3)",borderRadius:4,overflow:"hidden","&::before":{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:"linear-gradient(45deg, #00ffc6, #00a693, #00ffc6)",borderRadius:4,opacity:.3,zIndex:-1,animation:`${Sk} 3s ease-in-out infinite`}},children:[c.jsx(o,{sx:{position:"absolute",top:-50,right:-50,width:150,height:150,borderRadius:"50%",background:"radial-gradient(circle, rgba(0, 255, 198, 0.3) 0%, transparent 70%)",filter:"blur(40px)",animation:`${Ck} 6s ease-in-out infinite`}}),c.jsx(f,{onClick:t,sx:{position:"absolute",top:16,right:16,color:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)",zIndex:1,"&:hover":{color:"#00ffc6",backgroundColor:"rgba(0, 255, 198, 0.1)"}},children:c.jsx(Ee,{})}),c.jsxs(o,{sx:{p:4,position:"relative",zIndex:1},children:[c.jsxs(V,{direction:"row",alignItems:"center",spacing:1,sx:{mb:3},children:[c.jsx($e,{sx:{color:"#00ffc6",fontSize:28}}),c.jsx(h,{variant:"h5",sx:{color:"dark"===s.palette.mode?"#fff":"#000",fontWeight:700,background:"linear-gradient(135deg, #00ffc6 0%, #7B42F6 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",animation:`${kk} 3s linear infinite`,backgroundSize:"200% 200%"},children:"Market Data"})]}),c.jsx(h,{variant:"body2",sx:{color:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.8)",mb:3},children:"options"===i?"Access real-time market intelligence":d?"Create your account":"Welcome back"}),w&&c.jsx(R,{severity:"error",sx:{mb:2,backgroundColor:"rgba(211, 47, 47, 0.1)",color:"#ff6b6b","& .MuiAlert-icon":{color:"#ff6b6b"}},children:w}),"options"===i?c.jsxs(V,{spacing:2,children:[c.jsx(a,{fullWidth:!0,variant:"contained",onClick:()=>T("google"),disabled:b,startIcon:b?c.jsx(B,{size:20}):c.jsx(br,{}),sx:{py:1.5,backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"dark"===s.palette.mode?"#fff":"#000",fontSize:"15px",fontWeight:500,textTransform:"none",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",borderColor:"#00ffc6",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(0, 255, 198, 0.3)"}},children:"Continue with Google"}),c.jsx(a,{fullWidth:!0,variant:"contained",onClick:()=>T("facebook"),disabled:b,startIcon:b?c.jsx(B,{size:20}):c.jsx(jr,{}),sx:{py:1.5,backgroundColor:"rgba(24, 119, 242, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(24, 119, 242, 0.3)",color:"dark"===s.palette.mode?"#fff":"#000",fontSize:"15px",fontWeight:500,textTransform:"none",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(24, 119, 242, 0.3)",borderColor:"#1877F2",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(24, 119, 242, 0.3)"}},children:"Continue with Facebook"}),c.jsxs(o,{sx:{position:"relative",my:2},children:[c.jsx(N,{sx:{borderColor:"rgba(255, 255, 255, 0.1)"}}),c.jsx(h,{variant:"caption",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"dark"===s.palette.mode?"#1a1a2e":"#f5f5f5",px:2,color:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"},children:"or"})]}),c.jsx(a,{fullWidth:!0,variant:"outlined",onClick:()=>n("email"),startIcon:c.jsx(le,{}),sx:{py:1.5,borderColor:"rgba(0, 255, 198, 0.5)",color:"#00ffc6",fontSize:"15px",fontWeight:500,textTransform:"none",transition:"all 0.3s ease","&:hover":{borderColor:"#00ffc6",backgroundColor:"rgba(0, 255, 198, 0.1)",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(0, 255, 198, 0.2)"}},children:"Continue with Email"})]}):c.jsx(o,{component:"form",onSubmit:async e=>{if(e.preventDefault(),p&&g){j(!0),_("");try{d?await C(p,g):await k(p,g),r?.(),t()}catch(s){_(s.message||"Failed to "+(d?"sign up":"sign in"))}finally{j(!1)}}else _("Please fill in all fields")},children:c.jsxs(V,{spacing:2,children:[c.jsx(Ge,{fullWidth:!0,label:"Email",type:"email",value:p,onChange:e=>m(e.target.value),disabled:b,autoFocus:!0,sx:{"& .MuiOutlinedInput-root":{color:"dark"===s.palette.mode?"#fff":"#000",backgroundColor:"rgba(255, 255, 255, 0.05)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(0, 255, 198, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#00ffc6"}},"& .MuiInputLabel-root":{color:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"}}}),c.jsx(Ge,{fullWidth:!0,label:"Password",type:y?"text":"password",value:g,onChange:e=>x(e.target.value),disabled:b,InputProps:{endAdornment:c.jsx(He,{position:"end",children:c.jsx(f,{onClick:()=>v(!y),edge:"end",sx:{color:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"},children:y?c.jsx(wr,{}):c.jsx(pt,{})})})},sx:{"& .MuiOutlinedInput-root":{color:"dark"===s.palette.mode?"#fff":"#000",backgroundColor:"rgba(255, 255, 255, 0.05)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(0, 255, 198, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#00ffc6"}},"& .MuiInputLabel-root":{color:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"}}}),c.jsx(a,{type:"submit",fullWidth:!0,variant:"contained",disabled:b,startIcon:b?c.jsx(B,{size:20}):c.jsx(_r,{}),sx:{py:1.5,mt:1,backgroundColor:"#00ffc6",color:"#0a0a0a",fontSize:"15px",fontWeight:600,textTransform:"none",transition:"all 0.3s ease","&:hover":{backgroundColor:"#00d9a6",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(0, 255, 198, 0.4)"},"&:disabled":{backgroundColor:"rgba(0, 255, 198, 0.3)"}},children:d?"Create Account":"Sign In"}),c.jsxs(V,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[c.jsx(a,{variant:"text",size:"small",onClick:()=>n("options"),sx:{color:"dark"===s.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)",textTransform:"none","&:hover":{color:"#00ffc6",backgroundColor:"transparent"}},children:"â† Back"}),c.jsx(a,{variant:"text",size:"small",onClick:()=>u(!d),sx:{color:"#00ffc6",textTransform:"none","&:hover":{backgroundColor:"rgba(0, 255, 198, 0.1)"}},children:d?"Already have an account?":"Don't have an account?"})]})]})})]})]})})}function Pk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ak(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}
/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/Tk.displayName="GlobalAuthModal";var Ek,Ik,$k,Mk,Rk,Ok,Dk,zk,Lk,Fk,Bk,Nk,Wk,Uk,Vk,qk,Gk,Hk,Kk,Yk,Jk,Xk,Qk,Zk,eC,tC,rC,sC,iC,nC,aC,oC,lC={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},cC={duration:.5,overwrite:!1,delay:0},dC=1e8,hC=1e-8,uC=2*Math.PI,pC=uC/4,mC=0,gC=Math.sqrt,fC=Math.cos,xC=Math.sin,yC=function(e){return"string"==typeof e},vC=function(e){return"function"==typeof e},bC=function(e){return"number"==typeof e},jC=function(e){return void 0===e},wC=function(e){return"object"==typeof e},_C=function(e){return!1!==e},kC=function(){return"undefined"!=typeof window},CC=function(e){return vC(e)||yC(e)},SC="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},TC=Array.isArray,PC=/(?:-?\.?\d|\.)+/gi,AC=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,EC=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,IC=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,$C=/[+-]=-?[.\d]+/,MC=/[^,'"\[\]\s]+/gi,RC=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,OC={},DC={},zC=function(e){return(DC=pS(e,OC))&&pP},LC=function(e,t){},FC=function(e,t){return!t&&void 0},BC=function(e,t){return e&&(OC[e]=t)&&DC&&(DC[e]=t)||OC},NC=function(){return 0},WC={suppressEvents:!0,isStart:!0,kill:!1},UC={suppressEvents:!0,kill:!1},VC={suppressEvents:!0},qC={},GC=[],HC={},KC={},YC={},JC=30,XC=[],QC="",ZC=function(e){var t,r,s=e[0];if(wC(s)||vC(s)||(e=[e]),!(t=(s._gsap||{}).harness)){for(r=XC.length;r--&&!XC[r].targetTest(s););t=XC[r]}for(r=e.length;r--;)e[r]&&(e[r]._gsap||(e[r]._gsap=new TT(e[r],t)))||e.splice(r,1);return e},eS=function(e){return e._gsap||ZC(VS(e))[0]._gsap},tS=function(e,t,r){return(r=e[t])&&vC(r)?e[t]():jC(r)&&e.getAttribute&&e.getAttribute(t)||r},rS=function(e,t){return(e=e.split(",")).forEach(t)||e},sS=function(e){return Math.round(1e5*e)/1e5||0},iS=function(e){return Math.round(1e7*e)/1e7||0},nS=function(e,t){var r=t.charAt(0),s=parseFloat(t.substr(2));return e=parseFloat(e),"+"===r?e+s:"-"===r?e-s:"*"===r?e*s:e/s},aS=function(e,t){for(var r=t.length,s=0;e.indexOf(t[s])<0&&++s<r;);return s<r},oS=function(){var e,t,r=GC.length,s=GC.slice(0);for(HC={},GC.length=0,e=0;e<r;e++)(t=s[e])&&t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0)._lazy=0)},lS=function(e){return!!(e._initted||e._startAt||e.add)},cS=function(e,t,r,s){GC.length&&!Ik&&oS(),e.render(t,r,!!(Ik&&t<0&&lS(e))),GC.length&&!Ik&&oS()},dS=function(e){var t=parseFloat(e);return(t||0===t)&&(e+"").match(MC).length<2?t:yC(e)?e.trim():e},hS=function(e){return e},uS=function(e,t){for(var r in t)r in e||(e[r]=t[r]);return e},pS=function(e,t){for(var r in t)e[r]=t[r];return e},mS=function e(t,r){for(var s in r)"__proto__"!==s&&"constructor"!==s&&"prototype"!==s&&(t[s]=wC(r[s])?e(t[s]||(t[s]={}),r[s]):r[s]);return t},gS=function(e,t){var r,s={};for(r in e)r in t||(s[r]=e[r]);return s},fS=function(e){var t,r=e.parent||Mk,s=e.keyframes?(t=TC(e.keyframes),function(e,r){for(var s in r)s in e||"duration"===s&&t||"ease"===s||(e[s]=r[s])}):uS;if(_C(e.inherit))for(;r;)s(e,r.vars.defaults),r=r.parent||r._dp;return e},xS=function(e,t,r,s,i){var n,a=e[s];if(i)for(n=t[i];a&&a[i]>n;)a=a._prev;return a?(t._next=a._next,a._next=t):(t._next=e[r],e[r]=t),t._next?t._next._prev=t:e[s]=t,t._prev=a,t.parent=t._dp=e,t},yS=function(e,t,r,s){void 0===r&&(r="_first"),void 0===s&&(s="_last");var i=t._prev,n=t._next;i?i._next=n:e[r]===t&&(e[r]=n),n?n._prev=i:e[s]===t&&(e[s]=i),t._next=t._prev=t.parent=null},vS=function(e,t){e.parent&&(!t||e.parent.autoRemoveChildren)&&e.parent.remove&&e.parent.remove(e),e._act=0},bS=function(e,t){if(e&&(!t||t._end>e._dur||t._start<0))for(var r=e;r;)r._dirty=1,r=r.parent;return e},jS=function(e,t,r,s){return e._startAt&&(Ik?e._startAt.revert(UC):e.vars.immediateRender&&!e.vars.autoRevert||e._startAt.render(t,!0,s))},wS=function e(t){return!t||t._ts&&e(t.parent)},_S=function(e){return e._repeat?kS(e._tTime,e=e.duration()+e._rDelay)*e:0},kS=function(e,t){var r=Math.floor(e=iS(e/t));return e&&r===e?r-1:r},CS=function(e,t){return(e-t._start)*t._ts+(t._ts>=0?0:t._dirty?t.totalDuration():t._tDur)},SS=function(e){return e._end=iS(e._start+(e._tDur/Math.abs(e._ts||e._rts||hC)||0))},TS=function(e,t){var r=e._dp;return r&&r.smoothChildTiming&&e._ts&&(e._start=iS(r._time-(e._ts>0?t/e._ts:((e._dirty?e.totalDuration():e._tDur)-t)/-e._ts)),SS(e),r._dirty||bS(r,e)),e},PS=function(e,t){var r;if((t._time||!t._dur&&t._initted||t._start<e._time&&(t._dur||!t.add))&&(r=CS(e.rawTime(),t),(!t._dur||BS(0,t.totalDuration(),r)-t._tTime>hC)&&t.render(r,!0)),bS(e,t)._dp&&e._initted&&e._time>=e._dur&&e._ts){if(e._dur<e.duration())for(r=e;r._dp;)r.rawTime()>=0&&r.totalTime(r._tTime),r=r._dp;e._zTime=-1e-8}},AS=function(e,t,r,s){return t.parent&&vS(t),t._start=iS((bC(r)?r:r||e!==Mk?zS(e,r,t):e._time)+t._delay),t._end=iS(t._start+(t.totalDuration()/Math.abs(t.timeScale())||0)),xS(e,t,"_first","_last",e._sort?"_start":0),MS(t)||(e._recent=t),s||PS(e,t),e._ts<0&&TS(e,e._tTime),e},ES=function(e,t){return OC.ScrollTrigger?OC.ScrollTrigger.create(t,e):void 0},IS=function(e,t,r,s,i){return OT(e,t,i),e._initted?!r&&e._pt&&!Ik&&(e._dur&&!1!==e.vars.lazy||!e._dur&&e.vars.lazy)&&Lk!==mT.frame?(GC.push(e),e._lazy=[i,s],1):void 0:1},$S=function e(t){var r=t.parent;return r&&r._ts&&r._initted&&!r._lock&&(r.rawTime()<0||e(r))},MS=function(e){var t=e.data;return"isFromStart"===t||"isStart"===t},RS=function(e,t,r,s){var i=e._repeat,n=iS(t)||0,a=e._tTime/e._tDur;return a&&!s&&(e._time*=n/e._dur),e._dur=n,e._tDur=i?i<0?1e10:iS(n*(i+1)+e._rDelay*i):n,a>0&&!s&&TS(e,e._tTime=e._tDur*a),e.parent&&SS(e),r||bS(e.parent,e),e},OS=function(e){return e instanceof AT?bS(e):RS(e,e._dur)},DS={_start:0,endTime:NC,totalDuration:NC},zS=function e(t,r,s){var i,n,a,o=t.labels,l=t._recent||DS,c=t.duration()>=dC?l.endTime(!1):t._dur;return yC(r)&&(isNaN(r)||r in o)?(n=r.charAt(0),a="%"===r.substr(-1),i=r.indexOf("="),"<"===n||">"===n?(i>=0&&(r=r.replace(/=/,"")),("<"===n?l._start:l.endTime(l._repeat>=0))+(parseFloat(r.substr(1))||0)*(a?(i<0?l:s).totalDuration()/100:1)):i<0?(r in o||(o[r]=c),o[r]):(n=parseFloat(r.charAt(i-1)+r.substr(i+1)),a&&s&&(n=n/100*(TC(s)?s[0]:s).totalDuration()),i>1?e(t,r.substr(0,i-1),s)+n:c+n)):null==r?c:+r},LS=function(e,t,r){var s,i,n=bC(t[1]),a=(n?2:1)+(e<2?0:1),o=t[a];if(n&&(o.duration=t[1]),o.parent=r,e){for(s=o,i=r;i&&!("immediateRender"in s);)s=i.vars.defaults||{},i=_C(i.vars.inherit)&&i.parent;o.immediateRender=_C(s.immediateRender),e<2?o.runBackwards=1:o.startAt=t[a-1]}return new BT(t[0],o,t[a+1])},FS=function(e,t){return e||0===e?t(e):t},BS=function(e,t,r){return r<e?e:r>t?t:r},NS=function(e,t){return yC(e)&&(t=RC.exec(e))?t[1]:""},WS=[].slice,US=function(e,t){return e&&wC(e)&&"length"in e&&(!t&&!e.length||e.length-1 in e&&wC(e[0]))&&!e.nodeType&&e!==Rk},VS=function(e,t,r){return $k&&!t&&$k.selector?$k.selector(e):!yC(e)||r||!Ok&&gT()?TC(e)?function(e,t,r){return void 0===r&&(r=[]),e.forEach(function(e){var s;return yC(e)&&!t||US(e,1)?(s=r).push.apply(s,VS(e)):r.push(e)})||r}(e,r):US(e)?WS.call(e,0):e?[e]:[]:WS.call((t||Dk).querySelectorAll(e),0)},qS=function(e){return e=VS(e)[0]||FC()||{},function(t){var r=e.current||e.nativeElement||e;return VS(t,r.querySelectorAll?r:r===e?FC()||Dk.createElement("div"):e)}},GS=function(e){return e.sort(function(){return.5-Math.random()})},HS=function(e){if(vC(e))return e;var t=wC(e)?e:{each:e},r=wT(t.ease),s=t.from||0,i=parseFloat(t.base)||0,n={},a=s>0&&s<1,o=isNaN(s)||a,l=t.axis,c=s,d=s;return yC(s)?c=d={center:.5,edges:.5,end:1}[s]||0:!a&&o&&(c=s[0],d=s[1]),function(e,a,h){var u,p,m,g,f,x,y,v,b,j=(h||t).length,w=n[j];if(!w){if(!(b="auto"===t.grid?0:(t.grid||[1,dC])[1])){for(y=-1e8;y<(y=h[b++].getBoundingClientRect().left)&&b<j;);b<j&&b--}for(w=n[j]=[],u=o?Math.min(b,j)*c-.5:s%b,p=b===dC?0:o?j*d/b-.5:s/b|0,y=0,v=dC,x=0;x<j;x++)m=x%b-u,g=p-(x/b|0),w[x]=f=l?Math.abs("y"===l?g:m):gC(m*m+g*g),f>y&&(y=f),f<v&&(v=f);"random"===s&&GS(w),w.max=y-v,w.min=v,w.v=j=(parseFloat(t.amount)||parseFloat(t.each)*(b>j?j-1:l?"y"===l?j/b:b:Math.max(b,j/b))||0)*("edges"===s?-1:1),w.b=j<0?i-j:i,w.u=NS(t.amount||t.each)||0,r=r&&j<0?bT(r):r}return j=(w[e]-w.min)/w.max||0,iS(w.b+(r?r(j):j)*w.v)+w.u}},KS=function(e){var t=Math.pow(10,((e+"").split(".")[1]||"").length);return function(r){var s=iS(Math.round(parseFloat(r)/e)*e*t);return(s-s%1)/t+(bC(r)?0:NS(r))}},YS=function(e,t){var r,s,i=TC(e);return!i&&wC(e)&&(r=i=e.radius||dC,e.values?(e=VS(e.values),(s=!bC(e[0]))&&(r*=r)):e=KS(e.increment)),FS(t,i?vC(e)?function(t){return s=e(t),Math.abs(s-t)<=r?s:t}:function(t){for(var i,n,a=parseFloat(s?t.x:t),o=parseFloat(s?t.y:0),l=dC,c=0,d=e.length;d--;)(i=s?(i=e[d].x-a)*i+(n=e[d].y-o)*n:Math.abs(e[d]-a))<l&&(l=i,c=d);return c=!r||l<=r?e[c]:t,s||c===t||bC(t)?c:c+NS(t)}:KS(e))},JS=function(e,t,r,s){return FS(TC(e)?!t:!0===r?!!(r=0):!s,function(){return TC(e)?e[~~(Math.random()*e.length)]:(r=r||1e-5)&&(s=r<1?Math.pow(10,(r+"").length-2):1)&&Math.floor(Math.round((e-r/2+Math.random()*(t-e+.99*r))/r)*r*s)/s})},XS=function(e,t,r){return FS(r,function(r){return e[~~t(r)]})},QS=function(e){for(var t,r,s,i,n=0,a="";~(t=e.indexOf("random(",n));)s=e.indexOf(")",t),i="["===e.charAt(t+7),r=e.substr(t+7,s-t-7).match(i?MC:PC),a+=e.substr(n,t-n)+JS(i?r:+r[0],i?0:+r[1],+r[2]||1e-5),n=s+1;return a+e.substr(n,e.length-n)},ZS=function(e,t,r,s,i){var n=t-e,a=s-r;return FS(i,function(t){return r+((t-e)/n*a||0)})},eT=function(e,t,r){var s,i,n,a=e.labels,o=dC;for(s in a)(i=a[s]-t)<0==!!r&&i&&o>(i=Math.abs(i))&&(n=s,o=i);return n},tT=function(e,t,r){var s,i,n,a=e.vars,o=a[t],l=$k,c=e._ctx;if(o)return s=a[t+"Params"],i=a.callbackScope||e,r&&GC.length&&oS(),c&&($k=c),n=s?o.apply(i,s):o.call(i),$k=l,n},rT=function(e){return vS(e),e.scrollTrigger&&e.scrollTrigger.kill(!!Ik),e.progress()<1&&tT(e,"onInterrupt"),e},sT=[],iT=function(e){if(e)if(e=!e.name&&e.default||e,kC()||e.headless){var t=e.name,r=vC(e),s=t&&!r&&e.init?function(){this._props=[]}:e,i={init:NC,render:YT,add:MT,kill:XT,modifier:JT,rawVars:0},n={targetTest:0,get:0,getSetter:qT,aliases:{},register:0};if(gT(),e!==s){if(KC[t])return;uS(s,uS(gS(e,i),n)),pS(s.prototype,pS(i,gS(e,n))),KC[s.prop=t]=s,e.targetTest&&(XC.push(s),qC[t]=1),t=("css"===t?"CSS":t.charAt(0).toUpperCase()+t.substr(1))+"Plugin"}BC(t,s),e.register&&e.register(pP,s,eP)}else sT.push(e)},nT=255,aT={aqua:[0,nT,nT],lime:[0,nT,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,nT],navy:[0,0,128],white:[nT,nT,nT],olive:[128,128,0],yellow:[nT,nT,0],orange:[nT,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[nT,0,0],pink:[nT,192,203],cyan:[0,nT,nT],transparent:[nT,nT,nT,0]},oT=function(e,t,r){return(6*(e+=e<0?1:e>1?-1:0)<1?t+(r-t)*e*6:e<.5?r:3*e<2?t+(r-t)*(2/3-e)*6:t)*nT+.5|0},lT=function(e,t,r){var s,i,n,a,o,l,c,d,h,u,p=e?bC(e)?[e>>16,e>>8&nT,e&nT]:0:aT.black;if(!p){if(","===e.substr(-1)&&(e=e.substr(0,e.length-1)),aT[e])p=aT[e];else if("#"===e.charAt(0)){if(e.length<6&&(s=e.charAt(1),i=e.charAt(2),n=e.charAt(3),e="#"+s+s+i+i+n+n+(5===e.length?e.charAt(4)+e.charAt(4):"")),9===e.length)return[(p=parseInt(e.substr(1,6),16))>>16,p>>8&nT,p&nT,parseInt(e.substr(7),16)/255];p=[(e=parseInt(e.substr(1),16))>>16,e>>8&nT,e&nT]}else if("hsl"===e.substr(0,3))if(p=u=e.match(PC),t){if(~e.indexOf("="))return p=e.match(AC),r&&p.length<4&&(p[3]=1),p}else a=+p[0]%360/360,o=+p[1]/100,s=2*(l=+p[2]/100)-(i=l<=.5?l*(o+1):l+o-l*o),p.length>3&&(p[3]*=1),p[0]=oT(a+1/3,s,i),p[1]=oT(a,s,i),p[2]=oT(a-1/3,s,i);else p=e.match(PC)||aT.transparent;p=p.map(Number)}return t&&!u&&(s=p[0]/nT,i=p[1]/nT,n=p[2]/nT,l=((c=Math.max(s,i,n))+(d=Math.min(s,i,n)))/2,c===d?a=o=0:(h=c-d,o=l>.5?h/(2-c-d):h/(c+d),a=c===s?(i-n)/h+(i<n?6:0):c===i?(n-s)/h+2:(s-i)/h+4,a*=60),p[0]=~~(a+.5),p[1]=~~(100*o+.5),p[2]=~~(100*l+.5)),r&&p.length<4&&(p[3]=1),p},cT=function(e){var t=[],r=[],s=-1;return e.split(hT).forEach(function(e){var i=e.match(EC)||[];t.push.apply(t,i),r.push(s+=i.length+1)}),t.c=r,t},dT=function(e,t,r){var s,i,n,a,o="",l=(e+o).match(hT),c=t?"hsla(":"rgba(",d=0;if(!l)return e;if(l=l.map(function(e){return(e=lT(e,t,1))&&c+(t?e[0]+","+e[1]+"%,"+e[2]+"%,"+e[3]:e.join(","))+")"}),r&&(n=cT(e),(s=r.c).join(o)!==n.c.join(o)))for(a=(i=e.replace(hT,"1").split(EC)).length-1;d<a;d++)o+=i[d]+(~s.indexOf(d)?l.shift()||c+"0,0,0,0)":(n.length?n:l.length?l:r).shift());if(!i)for(a=(i=e.split(hT)).length-1;d<a;d++)o+=i[d]+l[d];return o+i[a]},hT=function(){var e,t="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(e in aT)t+="|"+e+"\\b";return new RegExp(t+")","gi")}(),uT=/hsl[a]?\(/,pT=function(e){var t,r=e.join(" ");if(hT.lastIndex=0,hT.test(r))return t=uT.test(r),e[1]=dT(e[1],t),e[0]=dT(e[0],t,cT(e[1])),!0},mT=(Hk=Date.now,Kk=500,Yk=33,Jk=Hk(),Xk=Jk,Zk=Qk=1e3/240,tC=function e(t){var r,s,i,n,a=Hk()-Xk,o=!0===t;if((a>Kk||a<0)&&(Jk+=a-Yk),((r=(i=(Xk+=a)-Jk)-Zk)>0||o)&&(n=++Vk.frame,qk=i-1e3*Vk.time,Vk.time=i/=1e3,Zk+=r+(r>=Qk?4:Qk-r),s=1),o||(Nk=Wk(e)),s)for(Gk=0;Gk<eC.length;Gk++)eC[Gk](i,qk,n,t)},Vk={time:0,frame:0,tick:function(){tC(!0)},deltaRatio:function(e){return qk/(1e3/(e||60))},wake:function(){zk&&(!Ok&&kC()&&(Rk=Ok=window,Dk=Rk.document||{},OC.gsap=pP,(Rk.gsapVersions||(Rk.gsapVersions=[])).push(pP.version),zC(DC||Rk.GreenSockGlobals||!Rk.gsap&&Rk||{}),sT.forEach(iT)),Uk="undefined"!=typeof requestAnimationFrame&&requestAnimationFrame,Nk&&Vk.sleep(),Wk=Uk||function(e){return setTimeout(e,Zk-1e3*Vk.time+1|0)},Bk=1,tC(2))},sleep:function(){(Uk?cancelAnimationFrame:clearTimeout)(Nk),Bk=0,Wk=NC},lagSmoothing:function(e,t){Kk=e||1/0,Yk=Math.min(t||33,Kk)},fps:function(e){Qk=1e3/(e||240),Zk=1e3*Vk.time+Qk},add:function(e,t,r){var s=t?function(t,r,i,n){e(t,r,i,n),Vk.remove(s)}:e;return Vk.remove(e),eC[r?"unshift":"push"](s),gT(),s},remove:function(e,t){~(t=eC.indexOf(e))&&eC.splice(t,1)&&Gk>=t&&Gk--},_listeners:eC=[]}),gT=function(){return!Bk&&mT.wake()},fT={},xT=/^[\d.\-M][\d.\-,\s]/,yT=/["']/g,vT=function(e){for(var t,r,s,i={},n=e.substr(1,e.length-3).split(":"),a=n[0],o=1,l=n.length;o<l;o++)r=n[o],t=o!==l-1?r.lastIndexOf(","):r.length,s=r.substr(0,t),i[a]=isNaN(s)?s.replace(yT,"").trim():+s,a=r.substr(t+1).trim();return i},bT=function(e){return function(t){return 1-e(1-t)}},jT=function e(t,r){for(var s,i=t._first;i;)i instanceof AT?e(i,r):!i.vars.yoyoEase||i._yoyo&&i._repeat||i._yoyo===r||(i.timeline?e(i.timeline,r):(s=i._ease,i._ease=i._yEase,i._yEase=s,i._yoyo=r)),i=i._next},wT=function(e,t){return e&&(vC(e)?e:fT[e]||function(e){var t,r,s,i,n=(e+"").split("("),a=fT[n[0]];return a&&n.length>1&&a.config?a.config.apply(null,~e.indexOf("{")?[vT(n[1])]:(t=e,r=t.indexOf("(")+1,s=t.indexOf(")"),i=t.indexOf("(",r),t.substring(r,~i&&i<s?t.indexOf(")",s+1):s)).split(",").map(dS)):fT._CE&&xT.test(e)?fT._CE("",e):a}(e))||t},_T=function(e,t,r,s){void 0===r&&(r=function(e){return 1-t(1-e)}),void 0===s&&(s=function(e){return e<.5?t(2*e)/2:1-t(2*(1-e))/2});var i,n={easeIn:t,easeOut:r,easeInOut:s};return rS(e,function(e){for(var t in fT[e]=OC[e]=n,fT[i=e.toLowerCase()]=r,n)fT[i+("easeIn"===t?".in":"easeOut"===t?".out":".inOut")]=fT[e+"."+t]=n[t]}),n},kT=function(e){return function(t){return t<.5?(1-e(1-2*t))/2:.5+e(2*(t-.5))/2}},CT=function e(t,r,s){var i=r>=1?r:1,n=(s||(t?.3:.45))/(r<1?r:1),a=n/uC*(Math.asin(1/i)||0),o=function(e){return 1===e?1:i*Math.pow(2,-10*e)*xC((e-a)*n)+1},l="out"===t?o:"in"===t?function(e){return 1-o(1-e)}:kT(o);return n=uC/n,l.config=function(r,s){return e(t,r,s)},l},ST=function e(t,r){void 0===r&&(r=1.70158);var s=function(e){return e?--e*e*((r+1)*e+r)+1:0},i="out"===t?s:"in"===t?function(e){return 1-s(1-e)}:kT(s);return i.config=function(r){return e(t,r)},i};rS("Linear,Quad,Cubic,Quart,Quint,Strong",function(e,t){var r=t<5?t+1:t;_T(e+",Power"+(r-1),t?function(e){return Math.pow(e,r)}:function(e){return e},function(e){return 1-Math.pow(1-e,r)},function(e){return e<.5?Math.pow(2*e,r)/2:1-Math.pow(2*(1-e),r)/2})}),fT.Linear.easeNone=fT.none=fT.Linear.easeIn,_T("Elastic",CT("in"),CT("out"),CT()),rC=7.5625,nC=2*(iC=1/(sC=2.75)),aC=2.5*iC,_T("Bounce",function(e){return 1-oC(1-e)},oC=function(e){return e<iC?rC*e*e:e<nC?rC*Math.pow(e-1.5/sC,2)+.75:e<aC?rC*(e-=2.25/sC)*e+.9375:rC*Math.pow(e-2.625/sC,2)+.984375}),_T("Expo",function(e){return Math.pow(2,10*(e-1))*e+e*e*e*e*e*e*(1-e)}),_T("Circ",function(e){return-(gC(1-e*e)-1)}),_T("Sine",function(e){return 1===e?1:1-fC(e*pC)}),_T("Back",ST("in"),ST("out"),ST()),fT.SteppedEase=fT.steps=OC.SteppedEase={config:function(e,t){void 0===e&&(e=1);var r=1/e,s=e+(t?0:1),i=t?1:0;return function(e){return((s*BS(0,.99999999,e)|0)+i)*r}}},cC.ease=fT["quad.out"],rS("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(e){return QC+=e+","+e+"Params,"});var TT=function(e,t){this.id=mC++,e._gsap=this,this.target=e,this.harness=t,this.get=t?t.get:tS,this.set=t?t.getSetter:qT},PT=function(){function e(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,RS(this,+e.duration,1,1),this.data=e.data,$k&&(this._ctx=$k,$k.data.push(this)),Bk||mT.wake()}var t=e.prototype;return t.delay=function(e){return e||0===e?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+e-this._delay),this._delay=e,this):this._delay},t.duration=function(e){return arguments.length?this.totalDuration(this._repeat>0?e+(e+this._rDelay)*this._repeat:e):this.totalDuration()&&this._dur},t.totalDuration=function(e){return arguments.length?(this._dirty=0,RS(this,this._repeat<0?e:(e-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(e,t){if(gT(),!arguments.length)return this._tTime;var r=this._dp;if(r&&r.smoothChildTiming&&this._ts){for(TS(this,e),!r._dp||r.parent||PS(r,this);r&&r.parent;)r.parent._time!==r._start+(r._ts>=0?r._tTime/r._ts:(r.totalDuration()-r._tTime)/-r._ts)&&r.totalTime(r._tTime,!0),r=r.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&e<this._tDur||this._ts<0&&e>0||!this._tDur&&!e)&&AS(this._dp,this,this._start-this._delay)}return(this._tTime!==e||!this._dur&&!t||this._initted&&Math.abs(this._zTime)===hC||!e&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=e),cS(this,e,t)),this},t.time=function(e,t){return arguments.length?this.totalTime(Math.min(this.totalDuration(),e+_S(this))%(this._dur+this._rDelay)||(e?this._dur:0),t):this._time},t.totalProgress=function(e,t){return arguments.length?this.totalTime(this.totalDuration()*e,t):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(e,t){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?e:1-e)+_S(this),t):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(e,t){var r=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(e-1)*r,t):this._repeat?kS(this._tTime,r)+1:1},t.timeScale=function(e,t){if(!arguments.length)return-1e-8===this._rts?0:this._rts;if(this._rts===e)return this;var r=this.parent&&this._ts?CS(this.parent._time,this):this._tTime;return this._rts=+e||0,this._ts=this._ps||-1e-8===e?0:this._rts,this.totalTime(BS(-Math.abs(this._delay),this.totalDuration(),r),!1!==t),SS(this),function(e){for(var t=e.parent;t&&t.parent;)t._dirty=1,t.totalDuration(),t=t.parent;return e}(this)},t.paused=function(e){return arguments.length?(this._ps!==e&&(this._ps=e,e?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(gT(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==hC&&(this._tTime-=hC)))),this):this._ps},t.startTime=function(e){if(arguments.length){this._start=e;var t=this.parent||this._dp;return t&&(t._sort||!this.parent)&&AS(t,this,e-this._delay),this}return this._start},t.endTime=function(e){return this._start+(_C(e)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(e){var t=this.parent||this._dp;return t?e&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?CS(t.rawTime(e),this):this._tTime:this._tTime},t.revert=function(e){void 0===e&&(e=VC);var t=Ik;return Ik=e,lS(this)&&(this.timeline&&this.timeline.revert(e),this.totalTime(-.01,e.suppressEvents)),"nested"!==this.data&&!1!==e.kill&&this.kill(),Ik=t,this},t.globalTime=function(e){for(var t=this,r=arguments.length?e:t.rawTime();t;)r=t._start+r/(Math.abs(t._ts)||1),t=t._dp;return!this.parent&&this._sat?this._sat.globalTime(e):r},t.repeat=function(e){return arguments.length?(this._repeat=e===1/0?-2:e,OS(this)):-2===this._repeat?1/0:this._repeat},t.repeatDelay=function(e){if(arguments.length){var t=this._time;return this._rDelay=e,OS(this),t?this.time(t):this}return this._rDelay},t.yoyo=function(e){return arguments.length?(this._yoyo=e,this):this._yoyo},t.seek=function(e,t){return this.totalTime(zS(this,e),_C(t))},t.restart=function(e,t){return this.play().totalTime(e?-this._delay:0,_C(t)),this._dur||(this._zTime=-1e-8),this},t.play=function(e,t){return null!=e&&this.seek(e,t),this.reversed(!1).paused(!1)},t.reverse=function(e,t){return null!=e&&this.seek(e||this.totalDuration(),t),this.reversed(!0).paused(!1)},t.pause=function(e,t){return null!=e&&this.seek(e,t),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(e){return arguments.length?(!!e!==this.reversed()&&this.timeScale(-this._rts||(e?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var e,t=this.parent||this._dp,r=this._start;return!(t&&!(this._ts&&this._initted&&t.isActive()&&(e=t.rawTime(!0))>=r&&e<this.endTime(!0)-hC))},t.eventCallback=function(e,t,r){var s=this.vars;return arguments.length>1?(t?(s[e]=t,r&&(s[e+"Params"]=r),"onUpdate"===e&&(this._onUpdate=t)):delete s[e],this):s[e]},t.then=function(e){var t=this;return new Promise(function(r){var s=vC(e)?e:hS,i=function(){var e=t.then;t.then=null,vC(s)&&(s=s(t))&&(s.then||s===t)&&(t.then=e),r(s),t.then=e};t._initted&&1===t.totalProgress()&&t._ts>=0||!t._tTime&&t._ts<0?i():t._prom=i})},t.kill=function(){rT(this)},e}();uS(PT.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var AT=function(e){function t(t,r){var s;return void 0===t&&(t={}),(s=e.call(this,t)||this).labels={},s.smoothChildTiming=!!t.smoothChildTiming,s.autoRemoveChildren=!!t.autoRemoveChildren,s._sort=_C(t.sortChildren),Mk&&AS(t.parent||Mk,Pk(s),r),t.reversed&&s.reverse(),t.paused&&s.paused(!0),t.scrollTrigger&&ES(Pk(s),t.scrollTrigger),s}Ak(t,e);var r=t.prototype;return r.to=function(e,t,r){return LS(0,arguments,this),this},r.from=function(e,t,r){return LS(1,arguments,this),this},r.fromTo=function(e,t,r,s){return LS(2,arguments,this),this},r.set=function(e,t,r){return t.duration=0,t.parent=this,fS(t).repeatDelay||(t.repeat=0),t.immediateRender=!!t.immediateRender,new BT(e,t,zS(this,r),1),this},r.call=function(e,t,r){return AS(this,BT.delayedCall(0,e,t),r)},r.staggerTo=function(e,t,r,s,i,n,a){return r.duration=t,r.stagger=r.stagger||s,r.onComplete=n,r.onCompleteParams=a,r.parent=this,new BT(e,r,zS(this,i)),this},r.staggerFrom=function(e,t,r,s,i,n,a){return r.runBackwards=1,fS(r).immediateRender=_C(r.immediateRender),this.staggerTo(e,t,r,s,i,n,a)},r.staggerFromTo=function(e,t,r,s,i,n,a,o){return s.startAt=r,fS(s).immediateRender=_C(s.immediateRender),this.staggerTo(e,t,s,i,n,a,o)},r.render=function(e,t,r){var s,i,n,a,o,l,c,d,h,u,p,m,g=this._time,f=this._dirty?this.totalDuration():this._tDur,x=this._dur,y=e<=0?0:iS(e),v=this._zTime<0!=e<0&&(this._initted||!x);if(this!==Mk&&y>f&&e>=0&&(y=f),y!==this._tTime||r||v){if(g!==this._time&&x&&(y+=this._time-g,e+=this._time-g),s=y,h=this._start,l=!(d=this._ts),v&&(x||(g=this._zTime),(e||!t)&&(this._zTime=e)),this._repeat){if(p=this._yoyo,o=x+this._rDelay,this._repeat<-1&&e<0)return this.totalTime(100*o+e,t,r);if(s=iS(y%o),y===f?(a=this._repeat,s=x):((a=~~(u=iS(y/o)))&&a===u&&(s=x,a--),s>x&&(s=x)),u=kS(this._tTime,o),!g&&this._tTime&&u!==a&&this._tTime-u*o-this._dur<=0&&(u=a),p&&1&a&&(s=x-s,m=1),a!==u&&!this._lock){var b=p&&1&u,j=b===(p&&1&a);if(a<u&&(b=!b),g=b?0:y%x?x:y,this._lock=1,this.render(g||(m?0:iS(a*o)),t,!x)._lock=0,this._tTime=y,!t&&this.parent&&tT(this,"onRepeat"),this.vars.repeatRefresh&&!m&&(this.invalidate()._lock=1),g&&g!==this._time||l!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(x=this._dur,f=this._tDur,j&&(this._lock=2,g=b?x:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!m&&this.invalidate()),this._lock=0,!this._ts&&!l)return this;jT(this,m)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=function(e,t,r){var s;if(r>t)for(s=e._first;s&&s._start<=r;){if("isPause"===s.data&&s._start>t)return s;s=s._next}else for(s=e._last;s&&s._start>=r;){if("isPause"===s.data&&s._start<t)return s;s=s._prev}}(this,iS(g),iS(s)),c&&(y-=s-(s=c._start))),this._tTime=y,this._time=s,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=e,g=0),!g&&y&&!t&&!u&&(tT(this,"onStart"),this._tTime!==y))return this;if(s>=g&&e>=0)for(i=this._first;i;){if(n=i._next,(i._act||s>=i._start)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,r);if(i.render(i._ts>0?(s-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(s-i._start)*i._ts,t,r),s!==this._time||!this._ts&&!l){c=0,n&&(y+=this._zTime=-1e-8);break}}i=n}else{i=this._last;for(var w=e<0?e:s;i;){if(n=i._prev,(i._act||w<=i._end)&&i._ts&&c!==i){if(i.parent!==this)return this.render(e,t,r);if(i.render(i._ts>0?(w-i._start)*i._ts:(i._dirty?i.totalDuration():i._tDur)+(w-i._start)*i._ts,t,r||Ik&&lS(i)),s!==this._time||!this._ts&&!l){c=0,n&&(y+=this._zTime=w?-1e-8:hC);break}}i=n}}if(c&&!t&&(this.pause(),c.render(s>=g?0:-1e-8)._zTime=s>=g?1:-1,this._ts))return this._start=h,SS(this),this.render(e,t,r);this._onUpdate&&!t&&tT(this,"onUpdate",!0),(y===f&&this._tTime>=this.totalDuration()||!y&&g)&&(h!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((e||!x)&&(y===f&&this._ts>0||!y&&this._ts<0)&&vS(this,1),t||e<0&&!g||!y&&!g&&f||(tT(this,y===f&&e>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(y<f&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(e,t){var r=this;if(bC(t)||(t=zS(this,t,e)),!(e instanceof PT)){if(TC(e))return e.forEach(function(e){return r.add(e,t)}),this;if(yC(e))return this.addLabel(e,t);if(!vC(e))return this;e=BT.delayedCall(0,e)}return this!==e?AS(this,e,t):this},r.getChildren=function(e,t,r,s){void 0===e&&(e=!0),void 0===t&&(t=!0),void 0===r&&(r=!0),void 0===s&&(s=-1e8);for(var i=[],n=this._first;n;)n._start>=s&&(n instanceof BT?t&&i.push(n):(r&&i.push(n),e&&i.push.apply(i,n.getChildren(!0,t,r)))),n=n._next;return i},r.getById=function(e){for(var t=this.getChildren(1,1,1),r=t.length;r--;)if(t[r].vars.id===e)return t[r]},r.remove=function(e){return yC(e)?this.removeLabel(e):vC(e)?this.killTweensOf(e):(e.parent===this&&yS(this,e),e===this._recent&&(this._recent=this._last),bS(this))},r.totalTime=function(t,r){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=iS(mT.time-(this._ts>0?t/this._ts:(this.totalDuration()-t)/-this._ts))),e.prototype.totalTime.call(this,t,r),this._forcing=0,this):this._tTime},r.addLabel=function(e,t){return this.labels[e]=zS(this,t),this},r.removeLabel=function(e){return delete this.labels[e],this},r.addPause=function(e,t,r){var s=BT.delayedCall(0,t||NC,r);return s.data="isPause",this._hasPause=1,AS(this,s,zS(this,e))},r.removePause=function(e){var t=this._first;for(e=zS(this,e);t;)t._start===e&&"isPause"===t.data&&vS(t),t=t._next},r.killTweensOf=function(e,t,r){for(var s=this.getTweensOf(e,r),i=s.length;i--;)ET!==s[i]&&s[i].kill(e,t);return this},r.getTweensOf=function(e,t){for(var r,s=[],i=VS(e),n=this._first,a=bC(t);n;)n instanceof BT?aS(n._targets,i)&&(a?(!ET||n._initted&&n._ts)&&n.globalTime(0)<=t&&n.globalTime(n.totalDuration())>t:!t||n.isActive())&&s.push(n):(r=n.getTweensOf(i,t)).length&&s.push.apply(s,r),n=n._next;return s},r.tweenTo=function(e,t){t=t||{};var r,s=this,i=zS(s,e),n=t,a=n.startAt,o=n.onStart,l=n.onStartParams,c=n.immediateRender,d=BT.to(s,uS({ease:t.ease||"none",lazy:!1,immediateRender:!1,time:i,overwrite:"auto",duration:t.duration||Math.abs((i-(a&&"time"in a?a.time:s._time))/s.timeScale())||hC,onStart:function(){if(s.pause(),!r){var e=t.duration||Math.abs((i-(a&&"time"in a?a.time:s._time))/s.timeScale());d._dur!==e&&RS(d,e,0,1).render(d._time,!0,!0),r=1}o&&o.apply(d,l||[])}},t));return c?d.render(0):d},r.tweenFromTo=function(e,t,r){return this.tweenTo(t,uS({startAt:{time:zS(this,e)}},r))},r.recent=function(){return this._recent},r.nextLabel=function(e){return void 0===e&&(e=this._time),eT(this,zS(this,e))},r.previousLabel=function(e){return void 0===e&&(e=this._time),eT(this,zS(this,e),1)},r.currentLabel=function(e){return arguments.length?this.seek(e,!0):this.previousLabel(this._time+hC)},r.shiftChildren=function(e,t,r){void 0===r&&(r=0);for(var s,i=this._first,n=this.labels;i;)i._start>=r&&(i._start+=e,i._end+=e),i=i._next;if(t)for(s in n)n[s]>=r&&(n[s]+=e);return bS(this)},r.invalidate=function(t){var r=this._first;for(this._lock=0;r;)r.invalidate(t),r=r._next;return e.prototype.invalidate.call(this,t)},r.clear=function(e){void 0===e&&(e=!0);for(var t,r=this._first;r;)t=r._next,this.remove(r),r=t;return this._dp&&(this._time=this._tTime=this._pTime=0),e&&(this.labels={}),bS(this)},r.totalDuration=function(e){var t,r,s,i=0,n=this,a=n._last,o=dC;if(arguments.length)return n.timeScale((n._repeat<0?n.duration():n.totalDuration())/(n.reversed()?-e:e));if(n._dirty){for(s=n.parent;a;)t=a._prev,a._dirty&&a.totalDuration(),(r=a._start)>o&&n._sort&&a._ts&&!n._lock?(n._lock=1,AS(n,a,r-a._delay,1)._lock=0):o=r,r<0&&a._ts&&(i-=r,(!s&&!n._dp||s&&s.smoothChildTiming)&&(n._start+=r/n._ts,n._time-=r,n._tTime-=r),n.shiftChildren(-r,!1,-1/0),o=0),a._end>i&&a._ts&&(i=a._end),a=t;RS(n,n===Mk&&n._time>i?n._time:i,1,1),n._dirty=0}return n._tDur},t.updateRoot=function(e){if(Mk._ts&&(cS(Mk,CS(e,Mk)),Lk=mT.frame),mT.frame>=JC){JC+=lC.autoSleep||120;var t=Mk._first;if((!t||!t._ts)&&lC.autoSleep&&mT._listeners.length<2){for(;t&&!t._ts;)t=t._next;t||mT.sleep()}}},t}(PT);uS(AT.prototype,{_lock:0,_hasPause:0,_forcing:0});var ET,IT,$T=function(e,t,r,s,i,n,a){var o,l,c,d,h,u,p,m,g=new eP(this._pt,e,t,0,1,KT,null,i),f=0,x=0;for(g.b=r,g.e=s,r+="",(p=~(s+="").indexOf("random("))&&(s=QS(s)),n&&(n(m=[r,s],e,t),r=m[0],s=m[1]),l=r.match(IC)||[];o=IC.exec(s);)d=o[0],h=s.substring(f,o.index),c?c=(c+1)%5:"rgba("===h.substr(-5)&&(c=1),d!==l[x++]&&(u=parseFloat(l[x-1])||0,g._pt={_next:g._pt,p:h||1===x?h:",",s:u,c:"="===d.charAt(1)?nS(u,d)-u:parseFloat(d)-u,m:c&&c<4?Math.round:0},f=IC.lastIndex);return g.c=f<s.length?s.substring(f,s.length):"",g.fp=a,($C.test(s)||p)&&(g.e=0),this._pt=g,g},MT=function(e,t,r,s,i,n,a,o,l,c){vC(s)&&(s=s(i||0,e,n));var d,h=e[t],u="get"!==r?r:vC(h)?l?e[t.indexOf("set")||!vC(e["get"+t.substr(3)])?t:"get"+t.substr(3)](l):e[t]():h,p=vC(h)?l?UT:WT:NT;if(yC(s)&&(~s.indexOf("random(")&&(s=QS(s)),"="===s.charAt(1)&&((d=nS(u,s)+(NS(u)||0))||0===d)&&(s=d)),!c||u!==s||IT)return isNaN(u*s)||""===s?$T.call(this,e,t,u,s,p,o||lC.stringFilter,l):(d=new eP(this._pt,e,t,+u||0,s-(u||0),"boolean"==typeof h?HT:GT,0,p),l&&(d.fp=l),a&&d.modifier(a,this,e),this._pt=d)},RT=function(e,t,r,s,i,n){var a,o,l,c;if(KC[e]&&!1!==(a=new KC[e]).init(i,a.rawVars?t[e]:function(e,t,r,s,i){if(vC(e)&&(e=zT(e,i,t,r,s)),!wC(e)||e.style&&e.nodeType||TC(e)||SC(e))return yC(e)?zT(e,i,t,r,s):e;var n,a={};for(n in e)a[n]=zT(e[n],i,t,r,s);return a}(t[e],s,i,n,r),r,s,n)&&(r._pt=o=new eP(r._pt,i,e,0,1,a.render,a,0,a.priority),r!==Fk))for(l=r._ptLookup[r._targets.indexOf(i)],c=a._props.length;c--;)l[a._props[c]]=o;return a},OT=function e(t,r,s){var i,n,a,o,l,c,d,h,u,p,m,g,f,x=t.vars,y=x.ease,v=x.startAt,b=x.immediateRender,j=x.lazy,w=x.onUpdate,_=x.runBackwards,k=x.yoyoEase,C=x.keyframes,S=x.autoRevert,T=t._dur,P=t._startAt,A=t._targets,E=t.parent,I=E&&"nested"===E.data?E.vars.targets:A,$="auto"===t._overwrite&&!Ek,M=t.timeline;if(M&&(!C||!y)&&(y="none"),t._ease=wT(y,cC.ease),t._yEase=k?bT(wT(!0===k?y:k,cC.ease)):0,k&&t._yoyo&&!t._repeat&&(k=t._yEase,t._yEase=t._ease,t._ease=k),t._from=!M&&!!x.runBackwards,!M||C&&!x.stagger){if(g=(h=A[0]?eS(A[0]).harness:0)&&x[h.prop],i=gS(x,qC),P&&(P._zTime<0&&P.progress(1),r<0&&_&&b&&!S?P.render(-1,!0):P.revert(_&&T?UC:WC),P._lazy=0),v){if(vS(t._startAt=BT.set(A,uS({data:"isStart",overwrite:!1,parent:E,immediateRender:!0,lazy:!P&&_C(j),startAt:null,delay:0,onUpdate:w&&function(){return tT(t,"onUpdate")},stagger:0},v))),t._startAt._dp=0,t._startAt._sat=t,r<0&&(Ik||!b&&!S)&&t._startAt.revert(UC),b&&T&&r<=0&&s<=0)return void(r&&(t._zTime=r))}else if(_&&T&&!P)if(r&&(b=!1),a=uS({overwrite:!1,data:"isFromStart",lazy:b&&!P&&_C(j),immediateRender:b,stagger:0,parent:E},i),g&&(a[h.prop]=g),vS(t._startAt=BT.set(A,a)),t._startAt._dp=0,t._startAt._sat=t,r<0&&(Ik?t._startAt.revert(UC):t._startAt.render(-1,!0)),t._zTime=r,b){if(!r)return}else e(t._startAt,hC,hC);for(t._pt=t._ptCache=0,j=T&&_C(j)||j&&!T,n=0;n<A.length;n++){if(d=(l=A[n])._gsap||ZC(A)[n]._gsap,t._ptLookup[n]=p={},HC[d.id]&&GC.length&&oS(),m=I===A?n:I.indexOf(l),h&&!1!==(u=new h).init(l,g||i,t,m,I)&&(t._pt=o=new eP(t._pt,l,u.name,0,1,u.render,u,0,u.priority),u._props.forEach(function(e){p[e]=o}),u.priority&&(c=1)),!h||g)for(a in i)KC[a]&&(u=RT(a,i,t,m,l,I))?u.priority&&(c=1):p[a]=o=MT.call(t,l,a,"get",i[a],m,I,0,x.stringFilter);t._op&&t._op[n]&&t.kill(l,t._op[n]),$&&t._pt&&(ET=t,Mk.killTweensOf(l,p,t.globalTime(r)),f=!t.parent,ET=0),t._pt&&j&&(HC[d.id]=1)}c&&ZT(t),t._onInit&&t._onInit(t)}t._onUpdate=w,t._initted=(!t._op||t._pt)&&!f,C&&r<=0&&M.render(dC,!0,!0)},DT=function(e,t,r,s){var i,n,a=t.ease||s||"power1.inOut";if(TC(t))n=r[e]||(r[e]=[]),t.forEach(function(e,r){return n.push({t:r/(t.length-1)*100,v:e,e:a})});else for(i in t)n=r[i]||(r[i]=[]),"ease"===i||n.push({t:parseFloat(e),v:t[i],e:a})},zT=function(e,t,r,s,i){return vC(e)?e.call(t,r,s,i):yC(e)&&~e.indexOf("random(")?QS(e):e},LT=QC+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",FT={};rS(LT+",id,stagger,delay,duration,paused,scrollTrigger",function(e){return FT[e]=1});var BT=function(e){function t(t,r,s,i){var n;"number"==typeof r&&(s.duration=r,r=s,s=null);var a,o,l,c,d,h,u,p,m=(n=e.call(this,i?r:fS(r))||this).vars,g=m.duration,f=m.delay,x=m.immediateRender,y=m.stagger,v=m.overwrite,b=m.keyframes,j=m.defaults,w=m.scrollTrigger,_=m.yoyoEase,k=r.parent||Mk,C=(TC(t)||SC(t)?bC(t[0]):"length"in r)?[t]:VS(t);if(n._targets=C.length?ZC(C):FC(0,!lC.nullTargetWarn)||[],n._ptLookup=[],n._overwrite=v,b||y||CC(g)||CC(f)){if(r=n.vars,(a=n.timeline=new AT({data:"nested",defaults:j||{},targets:k&&"nested"===k.data?k.vars.targets:C})).kill(),a.parent=a._dp=Pk(n),a._start=0,y||CC(g)||CC(f)){if(c=C.length,u=y&&HS(y),wC(y))for(d in y)~LT.indexOf(d)&&(p||(p={}),p[d]=y[d]);for(o=0;o<c;o++)(l=gS(r,FT)).stagger=0,_&&(l.yoyoEase=_),p&&pS(l,p),h=C[o],l.duration=+zT(g,Pk(n),o,h,C),l.delay=(+zT(f,Pk(n),o,h,C)||0)-n._delay,!y&&1===c&&l.delay&&(n._delay=f=l.delay,n._start+=f,l.delay=0),a.to(h,l,u?u(o,h,C):0),a._ease=fT.none;a.duration()?g=f=0:n.timeline=0}else if(b){fS(uS(a.vars.defaults,{ease:"none"})),a._ease=wT(b.ease||r.ease||"none");var S,T,P,A=0;if(TC(b))b.forEach(function(e){return a.to(C,e,">")}),a.duration();else{for(d in l={},b)"ease"===d||"easeEach"===d||DT(d,b[d],l,b.easeEach);for(d in l)for(S=l[d].sort(function(e,t){return e.t-t.t}),A=0,o=0;o<S.length;o++)(P={ease:(T=S[o]).e,duration:(T.t-(o?S[o-1].t:0))/100*g})[d]=T.v,a.to(C,P,A),A+=P.duration;a.duration()<g&&a.to({},{duration:g-a.duration()})}}g||n.duration(g=a.duration())}else n.timeline=0;return!0!==v||Ek||(ET=Pk(n),Mk.killTweensOf(C),ET=0),AS(k,Pk(n),s),r.reversed&&n.reverse(),r.paused&&n.paused(!0),(x||!g&&!b&&n._start===iS(k._time)&&_C(x)&&wS(Pk(n))&&"nested"!==k.data)&&(n._tTime=-1e-8,n.render(Math.max(0,-f)||0)),w&&ES(Pk(n),w),n}Ak(t,e);var r=t.prototype;return r.render=function(e,t,r){var s,i,n,a,o,l,c,d,h,u=this._time,p=this._tDur,m=this._dur,g=e<0,f=e>p-hC&&!g?p:e<hC?0:e;if(m){if(f!==this._tTime||!e||r||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==g||this._lazy){if(s=f,d=this.timeline,this._repeat){if(a=m+this._rDelay,this._repeat<-1&&g)return this.totalTime(100*a+e,t,r);if(s=iS(f%a),f===p?(n=this._repeat,s=m):(n=~~(o=iS(f/a)))&&n===o?(s=m,n--):s>m&&(s=m),(l=this._yoyo&&1&n)&&(h=this._yEase,s=m-s),o=kS(this._tTime,a),s===u&&!r&&this._initted&&n===o)return this._tTime=f,this;n!==o&&(d&&this._yEase&&jT(d,l),this.vars.repeatRefresh&&!l&&!this._lock&&s!==a&&this._initted&&(this._lock=r=1,this.render(iS(a*n),!0).invalidate()._lock=0))}if(!this._initted){if(IS(this,g?e:s,r,t,f))return this._tTime=0,this;if(!(u===this._time||r&&this.vars.repeatRefresh&&n!==o))return this;if(m!==this._dur)return this.render(e,t,r)}if(this._tTime=f,this._time=s,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=c=(h||this._ease)(s/m),this._from&&(this.ratio=c=1-c),!u&&f&&!t&&!o&&(tT(this,"onStart"),this._tTime!==f))return this;for(i=this._pt;i;)i.r(c,i.d),i=i._next;d&&d.render(e<0?e:d._dur*d._ease(s/this._dur),t,r)||this._startAt&&(this._zTime=e),this._onUpdate&&!t&&(g&&jS(this,e,0,r),tT(this,"onUpdate")),this._repeat&&n!==o&&this.vars.onRepeat&&!t&&this.parent&&tT(this,"onRepeat"),f!==this._tDur&&f||this._tTime!==f||(g&&!this._onUpdate&&jS(this,e,0,!0),(e||!m)&&(f===this._tDur&&this._ts>0||!f&&this._ts<0)&&vS(this,1),t||g&&!u||!(f||u||l)||(tT(this,f===p?"onComplete":"onReverseComplete",!0),this._prom&&!(f<p&&this.timeScale()>0)&&this._prom()))}}else!function(e,t,r,s){var i,n,a,o=e.ratio,l=t<0||!t&&(!e._start&&$S(e)&&(e._initted||!MS(e))||(e._ts<0||e._dp._ts<0)&&!MS(e))?0:1,c=e._rDelay,d=0;if(c&&e._repeat&&(d=BS(0,e._tDur,t),n=kS(d,c),e._yoyo&&1&n&&(l=1-l),n!==kS(e._tTime,c)&&(o=1-l,e.vars.repeatRefresh&&e._initted&&e.invalidate())),l!==o||Ik||s||e._zTime===hC||!t&&e._zTime){if(!e._initted&&IS(e,t,s,r,d))return;for(a=e._zTime,e._zTime=t||(r?hC:0),r||(r=t&&!a),e.ratio=l,e._from&&(l=1-l),e._time=0,e._tTime=d,i=e._pt;i;)i.r(l,i.d),i=i._next;t<0&&jS(e,t,0,!0),e._onUpdate&&!r&&tT(e,"onUpdate"),d&&e._repeat&&!r&&e.parent&&tT(e,"onRepeat"),(t>=e._tDur||t<0)&&e.ratio===l&&(l&&vS(e,1),r||Ik||(tT(e,l?"onComplete":"onReverseComplete",!0),e._prom&&e._prom()))}else e._zTime||(e._zTime=t)}(this,e,t,r);return this},r.targets=function(){return this._targets},r.invalidate=function(t){return(!t||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(t),e.prototype.invalidate.call(this,t)},r.resetTo=function(e,t,r,s,i){Bk||mT.wake(),this._ts||this.play();var n=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||OT(this,n),function(e,t,r,s,i,n,a,o){var l,c,d,h,u=(e._pt&&e._ptCache||(e._ptCache={}))[t];if(!u)for(u=e._ptCache[t]=[],d=e._ptLookup,h=e._targets.length;h--;){if((l=d[h][t])&&l.d&&l.d._pt)for(l=l.d._pt;l&&l.p!==t&&l.fp!==t;)l=l._next;if(!l)return IT=1,e.vars[t]="+=0",OT(e,a),IT=0,o?FC():1;u.push(l)}for(h=u.length;h--;)(l=(c=u[h])._pt||c).s=!s&&0!==s||i?l.s+(s||0)+n*l.c:s,l.c=r-l.s,c.e&&(c.e=sS(r)+NS(c.e)),c.b&&(c.b=l.s+NS(c.b))}(this,e,t,r,s,this._ease(n/this._dur),n,i)?this.resetTo(e,t,r,s,1):(TS(this,0),this.parent||xS(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(e,t){if(void 0===t&&(t="all"),!(e||t&&"all"!==t))return this._lazy=this._pt=0,this.parent?rT(this):this.scrollTrigger&&this.scrollTrigger.kill(!!Ik),this;if(this.timeline){var r=this.timeline.totalDuration();return this.timeline.killTweensOf(e,t,ET&&!0!==ET.vars.overwrite)._first||rT(this),this.parent&&r!==this.timeline.totalDuration()&&RS(this,this._dur*this.timeline._tDur/r,0,1),this}var s,i,n,a,o,l,c,d=this._targets,h=e?VS(e):d,u=this._ptLookup,p=this._pt;if((!t||"all"===t)&&function(e,t){for(var r=e.length,s=r===t.length;s&&r--&&e[r]===t[r];);return r<0}(d,h))return"all"===t&&(this._pt=0),rT(this);for(s=this._op=this._op||[],"all"!==t&&(yC(t)&&(o={},rS(t,function(e){return o[e]=1}),t=o),t=function(e,t){var r,s,i,n,a=e[0]?eS(e[0]).harness:0,o=a&&a.aliases;if(!o)return t;for(s in r=pS({},t),o)if(s in r)for(i=(n=o[s].split(",")).length;i--;)r[n[i]]=r[s];return r}(d,t)),c=d.length;c--;)if(~h.indexOf(d[c]))for(o in i=u[c],"all"===t?(s[c]=t,a=i,n={}):(n=s[c]=s[c]||{},a=t),a)(l=i&&i[o])&&("kill"in l.d&&!0!==l.d.kill(o)||yS(this,l,"_pt"),delete i[o]),"all"!==n&&(n[o]=1);return this._initted&&!this._pt&&p&&rT(this),this},t.to=function(e,r){return new t(e,r,arguments[2])},t.from=function(e,t){return LS(1,arguments)},t.delayedCall=function(e,r,s,i){return new t(r,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:e,onComplete:r,onReverseComplete:r,onCompleteParams:s,onReverseCompleteParams:s,callbackScope:i})},t.fromTo=function(e,t,r){return LS(2,arguments)},t.set=function(e,r){return r.duration=0,r.repeatDelay||(r.repeat=0),new t(e,r)},t.killTweensOf=function(e,t,r){return Mk.killTweensOf(e,t,r)},t}(PT);uS(BT.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),rS("staggerTo,staggerFrom,staggerFromTo",function(e){BT[e]=function(){var t=new AT,r=WS.call(arguments,0);return r.splice("staggerFromTo"===e?5:4,0,0),t[e].apply(t,r)}});var NT=function(e,t,r){return e[t]=r},WT=function(e,t,r){return e[t](r)},UT=function(e,t,r,s){return e[t](s.fp,r)},VT=function(e,t,r){return e.setAttribute(t,r)},qT=function(e,t){return vC(e[t])?WT:jC(e[t])&&e.setAttribute?VT:NT},GT=function(e,t){return t.set(t.t,t.p,Math.round(1e6*(t.s+t.c*e))/1e6,t)},HT=function(e,t){return t.set(t.t,t.p,!!(t.s+t.c*e),t)},KT=function(e,t){var r=t._pt,s="";if(!e&&t.b)s=t.b;else if(1===e&&t.e)s=t.e;else{for(;r;)s=r.p+(r.m?r.m(r.s+r.c*e):Math.round(1e4*(r.s+r.c*e))/1e4)+s,r=r._next;s+=t.c}t.set(t.t,t.p,s,t)},YT=function(e,t){for(var r=t._pt;r;)r.r(e,r.d),r=r._next},JT=function(e,t,r,s){for(var i,n=this._pt;n;)i=n._next,n.p===s&&n.modifier(e,t,r),n=i},XT=function(e){for(var t,r,s=this._pt;s;)r=s._next,s.p===e&&!s.op||s.op===e?yS(this,s,"_pt"):s.dep||(t=1),s=r;return!t},QT=function(e,t,r,s){s.mSet(e,t,s.m.call(s.tween,r,s.mt),s)},ZT=function(e){for(var t,r,s,i,n=e._pt;n;){for(t=n._next,r=s;r&&r.pr>n.pr;)r=r._next;(n._prev=r?r._prev:i)?n._prev._next=n:s=n,(n._next=r)?r._prev=n:i=n,n=t}e._pt=s},eP=function(){function e(e,t,r,s,i,n,a,o,l){this.t=t,this.s=s,this.c=i,this.p=r,this.r=n||GT,this.d=a||this,this.set=o||NT,this.pr=l||0,this._next=e,e&&(e._prev=this)}return e.prototype.modifier=function(e,t,r){this.mSet=this.mSet||this.set,this.set=QT,this.m=e,this.mt=r,this.tween=t},e}();rS(QC+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(e){return qC[e]=1}),OC.TweenMax=OC.TweenLite=BT,OC.TimelineLite=OC.TimelineMax=AT,Mk=new AT({sortChildren:!1,defaults:cC,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),lC.stringFilter=pT;var tP=[],rP={},sP=[],iP=0,nP=0,aP=function(e){return(rP[e]||sP).map(function(e){return e()})},oP=function(){var e=Date.now(),t=[];e-iP>2&&(aP("matchMediaInit"),tP.forEach(function(e){var r,s,i,n,a=e.queries,o=e.conditions;for(s in a)(r=Rk.matchMedia(a[s]).matches)&&(i=1),r!==o[s]&&(o[s]=r,n=1);n&&(e.revert(),i&&t.push(e))}),aP("matchMediaRevert"),t.forEach(function(e){return e.onMatch(e,function(t){return e.add(null,t)})}),iP=e,aP("matchMedia"))},lP=function(){function e(e,t){this.selector=t&&qS(t),this.data=[],this._r=[],this.isReverted=!1,this.id=nP++,e&&this.add(e)}var t=e.prototype;return t.add=function(e,t,r){vC(e)&&(r=t,t=e,e=vC);var s=this,i=function(){var e,i=$k,n=s.selector;return i&&i!==s&&i.data.push(s),r&&(s.selector=qS(r)),$k=s,e=t.apply(s,arguments),vC(e)&&s._r.push(e),$k=i,s.selector=n,s.isReverted=!1,e};return s.last=i,e===vC?i(s,function(e){return s.add(null,e)}):e?s[e]=i:i},t.ignore=function(e){var t=$k;$k=null,e(this),$k=t},t.getTweens=function(){var t=[];return this.data.forEach(function(r){return r instanceof e?t.push.apply(t,r.getTweens()):r instanceof BT&&!(r.parent&&"nested"===r.parent.data)&&t.push(r)}),t},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(e,t){var r=this;if(e?function(){for(var t,s=r.getTweens(),i=r.data.length;i--;)"isFlip"===(t=r.data[i]).data&&(t.revert(),t.getChildren(!0,!0,!1).forEach(function(e){return s.splice(s.indexOf(e),1)}));for(s.map(function(e){return{g:e._dur||e._delay||e._sat&&!e._sat.vars.immediateRender?e.globalTime(0):-1/0,t:e}}).sort(function(e,t){return t.g-e.g||-1/0}).forEach(function(t){return t.t.revert(e)}),i=r.data.length;i--;)(t=r.data[i])instanceof AT?"nested"!==t.data&&(t.scrollTrigger&&t.scrollTrigger.revert(),t.kill()):!(t instanceof BT)&&t.revert&&t.revert(e);r._r.forEach(function(t){return t(e,r)}),r.isReverted=!0}():this.data.forEach(function(e){return e.kill&&e.kill()}),this.clear(),t)for(var s=tP.length;s--;)tP[s].id===this.id&&tP.splice(s,1)},t.revert=function(e){this.kill(e||{})},e}(),cP=function(){function e(e){this.contexts=[],this.scope=e,$k&&$k.data.push(this)}var t=e.prototype;return t.add=function(e,t,r){wC(e)||(e={matches:e});var s,i,n,a=new lP(0,r||this.scope),o=a.conditions={};for(i in $k&&!a.selector&&(a.selector=$k.selector),this.contexts.push(a),t=a.add("onMatch",t),a.queries=e,e)"all"===i?n=1:(s=Rk.matchMedia(e[i]))&&(tP.indexOf(a)<0&&tP.push(a),(o[i]=s.matches)&&(n=1),s.addListener?s.addListener(oP):s.addEventListener("change",oP));return n&&t(a,function(e){return a.add(null,e)}),this},t.revert=function(e){this.kill(e||{})},t.kill=function(e){this.contexts.forEach(function(t){return t.kill(e,!0)})},e}(),dP={registerPlugin:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach(function(e){return iT(e)})},timeline:function(e){return new AT(e)},getTweensOf:function(e,t){return Mk.getTweensOf(e,t)},getProperty:function(e,t,r,s){yC(e)&&(e=VS(e)[0]);var i=eS(e||{}).get,n=r?hS:dS;return"native"===r&&(r=""),e?t?n((KC[t]&&KC[t].get||i)(e,t,r,s)):function(t,r,s){return n((KC[t]&&KC[t].get||i)(e,t,r,s))}:e},quickSetter:function(e,t,r){if((e=VS(e)).length>1){var s=e.map(function(e){return pP.quickSetter(e,t,r)}),i=s.length;return function(e){for(var t=i;t--;)s[t](e)}}e=e[0]||{};var n=KC[t],a=eS(e),o=a.harness&&(a.harness.aliases||{})[t]||t,l=n?function(t){var s=new n;Fk._pt=0,s.init(e,r?t+r:t,Fk,0,[e]),s.render(1,s),Fk._pt&&YT(1,Fk)}:a.set(e,o);return n?l:function(t){return l(e,o,r?t+r:t,a,1)}},quickTo:function(e,t,r){var s,i=pP.to(e,uS(((s={})[t]="+=0.1",s.paused=!0,s.stagger=0,s),r||{})),n=function(e,r,s){return i.resetTo(t,e,r,s)};return n.tween=i,n},isTweening:function(e){return Mk.getTweensOf(e,!0).length>0},defaults:function(e){return e&&e.ease&&(e.ease=wT(e.ease,cC.ease)),mS(cC,e||{})},config:function(e){return mS(lC,e||{})},registerEffect:function(e){var t=e.name,r=e.effect,s=e.plugins,i=e.defaults,n=e.extendTimeline;(s||"").split(",").forEach(function(e){return e&&!KC[e]&&!OC[e]&&FC()}),YC[t]=function(e,t,s){return r(VS(e),uS(t||{},i),s)},n&&(AT.prototype[t]=function(e,r,s){return this.add(YC[t](e,wC(r)?r:(s=r)&&{},this),s)})},registerEase:function(e,t){fT[e]=wT(t)},parseEase:function(e,t){return arguments.length?wT(e,t):fT},getById:function(e){return Mk.getById(e)},exportRoot:function(e,t){void 0===e&&(e={});var r,s,i=new AT(e);for(i.smoothChildTiming=_C(e.smoothChildTiming),Mk.remove(i),i._dp=0,i._time=i._tTime=Mk._time,r=Mk._first;r;)s=r._next,!t&&!r._dur&&r instanceof BT&&r.vars.onComplete===r._targets[0]||AS(i,r,r._start-r._delay),r=s;return AS(Mk,i,0),i},context:function(e,t){return e?new lP(e,t):$k},matchMedia:function(e){return new cP(e)},matchMediaRefresh:function(){return tP.forEach(function(e){var t,r,s=e.conditions;for(r in s)s[r]&&(s[r]=!1,t=1);t&&e.revert()})||oP()},addEventListener:function(e,t){var r=rP[e]||(rP[e]=[]);~r.indexOf(t)||r.push(t)},removeEventListener:function(e,t){var r=rP[e],s=r&&r.indexOf(t);s>=0&&r.splice(s,1)},utils:{wrap:function e(t,r,s){var i=r-t;return TC(t)?XS(t,e(0,t.length),r):FS(s,function(e){return(i+(e-t)%i)%i+t})},wrapYoyo:function e(t,r,s){var i=r-t,n=2*i;return TC(t)?XS(t,e(0,t.length-1),r):FS(s,function(e){return t+((e=(n+(e-t)%n)%n||0)>i?n-e:e)})},distribute:HS,random:JS,snap:YS,normalize:function(e,t,r){return ZS(e,t,0,1,r)},getUnit:NS,clamp:function(e,t,r){return FS(r,function(r){return BS(e,t,r)})},splitColor:lT,toArray:VS,selector:qS,mapRange:ZS,pipe:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return t.reduce(function(e,t){return t(e)},e)}},unitize:function(e,t){return function(r){return e(parseFloat(r))+(t||NS(r))}},interpolate:function e(t,r,s,i){var n=isNaN(t+r)?0:function(e){return(1-e)*t+e*r};if(!n){var a,o,l,c,d,h=yC(t),u={};if(!0===s&&(i=1)&&(s=null),h)t={p:t},r={p:r};else if(TC(t)&&!TC(r)){for(l=[],c=t.length,d=c-2,o=1;o<c;o++)l.push(e(t[o-1],t[o]));c--,n=function(e){e*=c;var t=Math.min(d,~~e);return l[t](e-t)},s=r}else i||(t=pS(TC(t)?[]:{},t));if(!l){for(a in r)MT.call(u,t,a,"get",r[a]);n=function(e){return YT(e,u)||(h?t.p:t)}}}return FS(s,n)},shuffle:GS},install:zC,effects:YC,ticker:mT,updateRoot:AT.updateRoot,plugins:KC,globalTimeline:Mk,core:{PropTween:eP,globals:BC,Tween:BT,Timeline:AT,Animation:PT,getCache:eS,_removeLinkedListItem:yS,reverting:function(){return Ik},context:function(e){return e&&$k&&($k.data.push(e),e._ctx=$k),$k},suppressOverwrites:function(e){return Ek=e}}};rS("to,from,fromTo,delayedCall,set,killTweensOf",function(e){return dP[e]=BT[e]}),mT.add(AT.updateRoot),Fk=dP.to({},{duration:0});var hP=function(e,t){for(var r=e._pt;r&&r.p!==t&&r.op!==t&&r.fp!==t;)r=r._next;return r},uP=function(e,t){return{name:e,headless:1,rawVars:1,init:function(e,r,s){s._onInit=function(e){var s,i;if(yC(r)&&(s={},rS(r,function(e){return s[e]=1}),r=s),t){for(i in s={},r)s[i]=t(r[i]);r=s}!function(e,t){var r,s,i,n=e._targets;for(r in t)for(s=n.length;s--;)(i=e._ptLookup[s][r])&&(i=i.d)&&(i._pt&&(i=hP(i,r)),i&&i.modifier&&i.modifier(t[r],e,n[s],r))}(e,r)}}}},pP=dP.registerPlugin({name:"attr",init:function(e,t,r,s,i){var n,a,o;for(n in this.tween=r,t)o=e.getAttribute(n)||"",(a=this.add(e,"setAttribute",(o||0)+"",t[n],s,i,0,0,n)).op=n,a.b=o,this._props.push(n)},render:function(e,t){for(var r=t._pt;r;)Ik?r.set(r.t,r.p,r.b,r):r.r(e,r.d),r=r._next}},{name:"endArray",headless:1,init:function(e,t){for(var r=t.length;r--;)this.add(e,r,e[r]||0,t[r],0,0,0,0,0,1)}},uP("roundProps",KS),uP("modifiers"),uP("snap",YS))||dP;BT.version=AT.version=pP.version="3.13.0",zk=1,kC()&&gT(),fT.Power0,fT.Power1,fT.Power2,fT.Power3,fT.Power4,fT.Linear,fT.Quad,fT.Cubic,fT.Quart,fT.Quint,fT.Strong,fT.Elastic,fT.Back,fT.SteppedEase,fT.Bounce,fT.Sine,fT.Expo,fT.Circ;
/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/
var mP,gP,fP,xP,yP,vP,bP,jP,wP={},_P=180/Math.PI,kP=Math.PI/180,CP=Math.atan2,SP=/([A-Z])/g,TP=/(left|right|width|margin|padding|x)/i,PP=/[\s,\(]\S/,AP={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},EP=function(e,t){return t.set(t.t,t.p,Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},IP=function(e,t){return t.set(t.t,t.p,1===e?t.e:Math.round(1e4*(t.s+t.c*e))/1e4+t.u,t)},$P=function(e,t){return t.set(t.t,t.p,e?Math.round(1e4*(t.s+t.c*e))/1e4+t.u:t.b,t)},MP=function(e,t){var r=t.s+t.c*e;t.set(t.t,t.p,~~(r+(r<0?-.5:.5))+t.u,t)},RP=function(e,t){return t.set(t.t,t.p,e?t.e:t.b,t)},OP=function(e,t){return t.set(t.t,t.p,1!==e?t.b:t.e,t)},DP=function(e,t,r){return e.style[t]=r},zP=function(e,t,r){return e.style.setProperty(t,r)},LP=function(e,t,r){return e._gsap[t]=r},FP=function(e,t,r){return e._gsap.scaleX=e._gsap.scaleY=r},BP=function(e,t,r,s,i){var n=e._gsap;n.scaleX=n.scaleY=r,n.renderTransform(i,n)},NP=function(e,t,r,s,i){var n=e._gsap;n[t]=r,n.renderTransform(i,n)},WP="transform",UP=WP+"Origin",VP=function e(t,r){var s=this,i=this.target,n=i.style,a=i._gsap;if(t in wP&&n){if(this.tfm=this.tfm||{},"transform"===t)return AP.transform.split(",").forEach(function(t){return e.call(s,t,r)});if(~(t=AP[t]||t).indexOf(",")?t.split(",").forEach(function(e){return s.tfm[e]=lA(i,e)}):this.tfm[t]=a.x?a[t]:lA(i,t),t===UP&&(this.tfm.zOrigin=a.zOrigin),this.props.indexOf(WP)>=0)return;a.svg&&(this.svgo=i.getAttribute("data-svg-origin"),this.props.push(UP,r,"")),t=WP}(n||r)&&this.props.push(t,r,n[t])},qP=function(e){e.translate&&(e.removeProperty("translate"),e.removeProperty("scale"),e.removeProperty("rotate"))},GP=function(){var e,t,r=this.props,s=this.target,i=s.style,n=s._gsap;for(e=0;e<r.length;e+=3)r[e+1]?2===r[e+1]?s[r[e]](r[e+2]):s[r[e]]=r[e+2]:r[e+2]?i[r[e]]=r[e+2]:i.removeProperty("--"===r[e].substr(0,2)?r[e]:r[e].replace(SP,"-$1").toLowerCase());if(this.tfm){for(t in this.tfm)n[t]=this.tfm[t];n.svg&&(n.renderTransform(),s.setAttribute("data-svg-origin",this.svgo||"")),(e=bP())&&e.isStart||i[WP]||(qP(i),n.zOrigin&&i[UP]&&(i[UP]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},HP=function(e,t){var r={target:e,props:[],revert:GP,save:VP};return e._gsap||pP.core.getCache(e),t&&e.style&&e.nodeType&&t.split(",").forEach(function(e){return r.save(e)}),r},KP=function(e,t){var r=gP.createElementNS?gP.createElementNS((t||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),e):gP.createElement(e);return r&&r.style?r:gP.createElement(e)},YP=function e(t,r,s){var i=getComputedStyle(t);return i[r]||i.getPropertyValue(r.replace(SP,"-$1").toLowerCase())||i.getPropertyValue(r)||!s&&e(t,XP(r)||r,1)||""},JP="O,Moz,ms,Ms,Webkit".split(","),XP=function(e,t,r){var s=(t||yP).style,i=5;if(e in s&&!r)return e;for(e=e.charAt(0).toUpperCase()+e.substr(1);i--&&!(JP[i]+e in s););return i<0?null:(3===i?"ms":i>=0?JP[i]:"")+e},QP=function(){"undefined"!=typeof window&&window.document&&(mP=window,gP=mP.document,fP=gP.documentElement,yP=KP("div")||{style:{}},KP("div"),WP=XP(WP),UP=WP+"Origin",yP.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",jP=!!XP("perspective"),bP=pP.core.reverting,xP=1)},ZP=function(e){var t,r=e.ownerSVGElement,s=KP("svg",r&&r.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),i=e.cloneNode(!0);i.style.display="block",s.appendChild(i),fP.appendChild(s);try{t=i.getBBox()}catch(n){}return s.removeChild(i),fP.removeChild(s),t},eA=function(e,t){for(var r=t.length;r--;)if(e.hasAttribute(t[r]))return e.getAttribute(t[r])},tA=function(e){var t,r;try{t=e.getBBox()}catch(s){t=ZP(e),r=1}return t&&(t.width||t.height)||r||(t=ZP(e)),!t||t.width||t.x||t.y?t:{x:+eA(e,["x","cx","x1"])||0,y:+eA(e,["y","cy","y1"])||0,width:0,height:0}},rA=function(e){return!(!e.getCTM||e.parentNode&&!e.ownerSVGElement||!tA(e))},sA=function(e,t){if(t){var r,s=e.style;t in wP&&t!==UP&&(t=WP),s.removeProperty?("ms"!==(r=t.substr(0,2))&&"webkit"!==t.substr(0,6)||(t="-"+t),s.removeProperty("--"===r?t:t.replace(SP,"-$1").toLowerCase())):s.removeAttribute(t)}},iA=function(e,t,r,s,i,n){var a=new eP(e._pt,t,r,0,1,n?OP:RP);return e._pt=a,a.b=s,a.e=i,e._props.push(r),a},nA={deg:1,rad:1,turn:1},aA={grid:1,flex:1},oA=function e(t,r,s,i){var n,a,o,l,c=parseFloat(s)||0,d=(s+"").trim().substr((c+"").length)||"px",h=yP.style,u=TP.test(r),p="svg"===t.tagName.toLowerCase(),m=(p?"client":"offset")+(u?"Width":"Height"),g=100,f="px"===i,x="%"===i;if(i===d||!c||nA[i]||nA[d])return c;if("px"!==d&&!f&&(c=e(t,r,s,"px")),l=t.getCTM&&rA(t),(x||"%"===d)&&(wP[r]||~r.indexOf("adius")))return n=l?t.getBBox()[u?"width":"height"]:t[m],sS(x?c/n*g:c/100*n);if(h[u?"width":"height"]=g+(f?d:i),a="rem"!==i&&~r.indexOf("adius")||"em"===i&&t.appendChild&&!p?t:t.parentNode,l&&(a=(t.ownerSVGElement||{}).parentNode),a&&a!==gP&&a.appendChild||(a=gP.body),(o=a._gsap)&&x&&o.width&&u&&o.time===mT.time&&!o.uncache)return sS(c/o.width*g);if(!x||"height"!==r&&"width"!==r)(x||"%"===d)&&!aA[YP(a,"display")]&&(h.position=YP(t,"position")),a===t&&(h.position="static"),a.appendChild(yP),n=yP[m],a.removeChild(yP),h.position="absolute";else{var y=t.style[r];t.style[r]=g+i,n=t[m],y?t.style[r]=y:sA(t,r)}return u&&x&&((o=eS(a)).time=mT.time,o.width=a[m]),sS(f?n*c/g:n&&c?g/n*c:0)},lA=function(e,t,r,s){var i;return xP||QP(),t in AP&&"transform"!==t&&~(t=AP[t]).indexOf(",")&&(t=t.split(",")[0]),wP[t]&&"transform"!==t?(i=bA(e,s),i="transformOrigin"!==t?i[t]:i.svg?i.origin:jA(YP(e,UP))+" "+i.zOrigin+"px"):(!(i=e.style[t])||"auto"===i||s||~(i+"").indexOf("calc("))&&(i=pA[t]&&pA[t](e,t,r)||YP(e,t)||tS(e,t)||("opacity"===t?1:0)),r&&!~(i+"").trim().indexOf(" ")?oA(e,t,i,r)+r:i},cA=function(e,t,r,s){if(!r||"none"===r){var i=XP(t,e,1),n=i&&YP(e,i,1);n&&n!==r?(t=i,r=n):"borderColor"===t&&(r=YP(e,"borderTopColor"))}var a,o,l,c,d,h,u,p,m,g,f,x=new eP(this._pt,e.style,t,0,1,KT),y=0,v=0;if(x.b=r,x.e=s,r+="","var(--"===(s+="").substring(0,6)&&(s=YP(e,s.substring(4,s.indexOf(")")))),"auto"===s&&(h=e.style[t],e.style[t]=s,s=YP(e,t)||s,h?e.style[t]=h:sA(e,t)),pT(a=[r,s]),s=a[1],l=(r=a[0]).match(EC)||[],(s.match(EC)||[]).length){for(;o=EC.exec(s);)u=o[0],m=s.substring(y,o.index),d?d=(d+1)%5:"rgba("!==m.substr(-5)&&"hsla("!==m.substr(-5)||(d=1),u!==(h=l[v++]||"")&&(c=parseFloat(h)||0,f=h.substr((c+"").length),"="===u.charAt(1)&&(u=nS(c,u)+f),p=parseFloat(u),g=u.substr((p+"").length),y=EC.lastIndex-g.length,g||(g=g||lC.units[t]||f,y===s.length&&(s+=g,x.e+=g)),f!==g&&(c=oA(e,t,h,g)||0),x._pt={_next:x._pt,p:m||1===v?m:",",s:c,c:p-c,m:d&&d<4||"zIndex"===t?Math.round:0});x.c=y<s.length?s.substring(y,s.length):""}else x.r="display"===t&&"none"===s?OP:RP;return $C.test(s)&&(x.e=0),this._pt=x,x},dA={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},hA=function(e){var t=e.split(" "),r=t[0],s=t[1]||"50%";return"top"!==r&&"bottom"!==r&&"left"!==s&&"right"!==s||(e=r,r=s,s=e),t[0]=dA[r]||r,t[1]=dA[s]||s,t.join(" ")},uA=function(e,t){if(t.tween&&t.tween._time===t.tween._dur){var r,s,i,n=t.t,a=n.style,o=t.u,l=n._gsap;if("all"===o||!0===o)a.cssText="",s=1;else for(i=(o=o.split(",")).length;--i>-1;)r=o[i],wP[r]&&(s=1,r="transformOrigin"===r?UP:WP),sA(n,r);s&&(sA(n,WP),l&&(l.svg&&n.removeAttribute("transform"),a.scale=a.rotate=a.translate="none",bA(n,1),l.uncache=1,qP(a)))}},pA={clearProps:function(e,t,r,s,i){if("isFromStart"!==i.data){var n=e._pt=new eP(e._pt,t,r,0,0,uA);return n.u=s,n.pr=-10,n.tween=i,e._props.push(r),1}}},mA=[1,0,0,1,0,0],gA={},fA=function(e){return"matrix(1, 0, 0, 1, 0, 0)"===e||"none"===e||!e},xA=function(e){var t=YP(e,WP);return fA(t)?mA:t.substr(7).match(AC).map(sS)},yA=function(e,t){var r,s,i,n,a=e._gsap||eS(e),o=e.style,l=xA(e);return a.svg&&e.getAttribute("transform")?"1,0,0,1,0,0"===(l=[(i=e.transform.baseVal.consolidate().matrix).a,i.b,i.c,i.d,i.e,i.f]).join(",")?mA:l:(l!==mA||e.offsetParent||e===fP||a.svg||(i=o.display,o.display="block",(r=e.parentNode)&&(e.offsetParent||e.getBoundingClientRect().width)||(n=1,s=e.nextElementSibling,fP.appendChild(e)),l=xA(e),i?o.display=i:sA(e,"display"),n&&(s?r.insertBefore(e,s):r?r.appendChild(e):fP.removeChild(e))),t&&l.length>6?[l[0],l[1],l[4],l[5],l[12],l[13]]:l)},vA=function(e,t,r,s,i,n){var a,o,l,c=e._gsap,d=i||yA(e,!0),h=c.xOrigin||0,u=c.yOrigin||0,p=c.xOffset||0,m=c.yOffset||0,g=d[0],f=d[1],x=d[2],y=d[3],v=d[4],b=d[5],j=t.split(" "),w=parseFloat(j[0])||0,_=parseFloat(j[1])||0;r?d!==mA&&(o=g*y-f*x)&&(l=w*(-f/o)+_*(g/o)-(g*b-f*v)/o,w=w*(y/o)+_*(-x/o)+(x*b-y*v)/o,_=l):(w=(a=tA(e)).x+(~j[0].indexOf("%")?w/100*a.width:w),_=a.y+(~(j[1]||j[0]).indexOf("%")?_/100*a.height:_)),s||!1!==s&&c.smooth?(v=w-h,b=_-u,c.xOffset=p+(v*g+b*x)-v,c.yOffset=m+(v*f+b*y)-b):c.xOffset=c.yOffset=0,c.xOrigin=w,c.yOrigin=_,c.smooth=!!s,c.origin=t,c.originIsAbsolute=!!r,e.style[UP]="0px 0px",n&&(iA(n,c,"xOrigin",h,w),iA(n,c,"yOrigin",u,_),iA(n,c,"xOffset",p,c.xOffset),iA(n,c,"yOffset",m,c.yOffset)),e.setAttribute("data-svg-origin",w+" "+_)},bA=function(e,t){var r=e._gsap||new TT(e);if("x"in r&&!t&&!r.uncache)return r;var s,i,n,a,o,l,c,d,h,u,p,m,g,f,x,y,v,b,j,w,_,k,C,S,T,P,A,E,I,$,M,R,O=e.style,D=r.scaleX<0,z="px",L="deg",F=getComputedStyle(e),B=YP(e,UP)||"0";return s=i=n=l=c=d=h=u=p=0,a=o=1,r.svg=!(!e.getCTM||!rA(e)),F.translate&&("none"===F.translate&&"none"===F.scale&&"none"===F.rotate||(O[WP]=("none"!==F.translate?"translate3d("+(F.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==F.rotate?"rotate("+F.rotate+") ":"")+("none"!==F.scale?"scale("+F.scale.split(" ").join(",")+") ":"")+("none"!==F[WP]?F[WP]:"")),O.scale=O.rotate=O.translate="none"),f=yA(e,r.svg),r.svg&&(r.uncache?(T=e.getBBox(),B=r.xOrigin-T.x+"px "+(r.yOrigin-T.y)+"px",S=""):S=!t&&e.getAttribute("data-svg-origin"),vA(e,S||B,!!S||r.originIsAbsolute,!1!==r.smooth,f)),m=r.xOrigin||0,g=r.yOrigin||0,f!==mA&&(b=f[0],j=f[1],w=f[2],_=f[3],s=k=f[4],i=C=f[5],6===f.length?(a=Math.sqrt(b*b+j*j),o=Math.sqrt(_*_+w*w),l=b||j?CP(j,b)*_P:0,(h=w||_?CP(w,_)*_P+l:0)&&(o*=Math.abs(Math.cos(h*kP))),r.svg&&(s-=m-(m*b+g*w),i-=g-(m*j+g*_))):(R=f[6],$=f[7],A=f[8],E=f[9],I=f[10],M=f[11],s=f[12],i=f[13],n=f[14],c=(x=CP(R,I))*_P,x&&(S=k*(y=Math.cos(-x))+A*(v=Math.sin(-x)),T=C*y+E*v,P=R*y+I*v,A=k*-v+A*y,E=C*-v+E*y,I=R*-v+I*y,M=$*-v+M*y,k=S,C=T,R=P),d=(x=CP(-w,I))*_P,x&&(y=Math.cos(-x),M=_*(v=Math.sin(-x))+M*y,b=S=b*y-A*v,j=T=j*y-E*v,w=P=w*y-I*v),l=(x=CP(j,b))*_P,x&&(S=b*(y=Math.cos(x))+j*(v=Math.sin(x)),T=k*y+C*v,j=j*y-b*v,C=C*y-k*v,b=S,k=T),c&&Math.abs(c)+Math.abs(l)>359.9&&(c=l=0,d=180-d),a=sS(Math.sqrt(b*b+j*j+w*w)),o=sS(Math.sqrt(C*C+R*R)),x=CP(k,C),h=Math.abs(x)>2e-4?x*_P:0,p=M?1/(M<0?-M:M):0),r.svg&&(S=e.getAttribute("transform"),r.forceCSS=e.setAttribute("transform","")||!fA(YP(e,WP)),S&&e.setAttribute("transform",S))),Math.abs(h)>90&&Math.abs(h)<270&&(D?(a*=-1,h+=l<=0?180:-180,l+=l<=0?180:-180):(o*=-1,h+=h<=0?180:-180)),t=t||r.uncache,r.x=s-((r.xPercent=s&&(!t&&r.xPercent||(Math.round(e.offsetWidth/2)===Math.round(-s)?-50:0)))?e.offsetWidth*r.xPercent/100:0)+z,r.y=i-((r.yPercent=i&&(!t&&r.yPercent||(Math.round(e.offsetHeight/2)===Math.round(-i)?-50:0)))?e.offsetHeight*r.yPercent/100:0)+z,r.z=n+z,r.scaleX=sS(a),r.scaleY=sS(o),r.rotation=sS(l)+L,r.rotationX=sS(c)+L,r.rotationY=sS(d)+L,r.skewX=h+L,r.skewY=u+L,r.transformPerspective=p+z,(r.zOrigin=parseFloat(B.split(" ")[2])||!t&&r.zOrigin||0)&&(O[UP]=jA(B)),r.xOffset=r.yOffset=0,r.force3D=lC.force3D,r.renderTransform=r.svg?PA:jP?TA:_A,r.uncache=0,r},jA=function(e){return(e=e.split(" "))[0]+" "+e[1]},wA=function(e,t,r){var s=NS(t);return sS(parseFloat(t)+parseFloat(oA(e,"x",r+"px",s)))+s},_A=function(e,t){t.z="0px",t.rotationY=t.rotationX="0deg",t.force3D=0,TA(e,t)},kA="0deg",CA="0px",SA=") ",TA=function(e,t){var r=t||this,s=r.xPercent,i=r.yPercent,n=r.x,a=r.y,o=r.z,l=r.rotation,c=r.rotationY,d=r.rotationX,h=r.skewX,u=r.skewY,p=r.scaleX,m=r.scaleY,g=r.transformPerspective,f=r.force3D,x=r.target,y=r.zOrigin,v="",b="auto"===f&&e&&1!==e||!0===f;if(y&&(d!==kA||c!==kA)){var j,w=parseFloat(c)*kP,_=Math.sin(w),k=Math.cos(w);w=parseFloat(d)*kP,j=Math.cos(w),n=wA(x,n,_*j*-y),a=wA(x,a,-Math.sin(w)*-y),o=wA(x,o,k*j*-y+y)}g!==CA&&(v+="perspective("+g+SA),(s||i)&&(v+="translate("+s+"%, "+i+"%) "),(b||n!==CA||a!==CA||o!==CA)&&(v+=o!==CA||b?"translate3d("+n+", "+a+", "+o+") ":"translate("+n+", "+a+SA),l!==kA&&(v+="rotate("+l+SA),c!==kA&&(v+="rotateY("+c+SA),d!==kA&&(v+="rotateX("+d+SA),h===kA&&u===kA||(v+="skew("+h+", "+u+SA),1===p&&1===m||(v+="scale("+p+", "+m+SA),x.style[WP]=v||"translate(0, 0)"},PA=function(e,t){var r,s,i,n,a,o=t||this,l=o.xPercent,c=o.yPercent,d=o.x,h=o.y,u=o.rotation,p=o.skewX,m=o.skewY,g=o.scaleX,f=o.scaleY,x=o.target,y=o.xOrigin,v=o.yOrigin,b=o.xOffset,j=o.yOffset,w=o.forceCSS,_=parseFloat(d),k=parseFloat(h);u=parseFloat(u),p=parseFloat(p),(m=parseFloat(m))&&(p+=m=parseFloat(m),u+=m),u||p?(u*=kP,p*=kP,r=Math.cos(u)*g,s=Math.sin(u)*g,i=Math.sin(u-p)*-f,n=Math.cos(u-p)*f,p&&(m*=kP,a=Math.tan(p-m),i*=a=Math.sqrt(1+a*a),n*=a,m&&(a=Math.tan(m),r*=a=Math.sqrt(1+a*a),s*=a)),r=sS(r),s=sS(s),i=sS(i),n=sS(n)):(r=g,n=f,s=i=0),(_&&!~(d+"").indexOf("px")||k&&!~(h+"").indexOf("px"))&&(_=oA(x,"x",d,"px"),k=oA(x,"y",h,"px")),(y||v||b||j)&&(_=sS(_+y-(y*r+v*i)+b),k=sS(k+v-(y*s+v*n)+j)),(l||c)&&(a=x.getBBox(),_=sS(_+l/100*a.width),k=sS(k+c/100*a.height)),a="matrix("+r+","+s+","+i+","+n+","+_+","+k+")",x.setAttribute("transform",a),w&&(x.style[WP]=a)},AA=function(e,t,r,s,i){var n,a,o=360,l=yC(i),c=parseFloat(i)*(l&&~i.indexOf("rad")?_P:1)-s,d=s+c+"deg";return l&&("short"===(n=i.split("_")[1])&&(c%=o)!==c%180&&(c+=c<0?o:-360),"cw"===n&&c<0?c=(c+36e9)%o-~~(c/o)*o:"ccw"===n&&c>0&&(c=(c-36e9)%o-~~(c/o)*o)),e._pt=a=new eP(e._pt,t,r,s,c,IP),a.e=d,a.u="deg",e._props.push(r),a},EA=function(e,t){for(var r in t)e[r]=t[r];return e},IA=function(e,t,r){var s,i,n,a,o,l,c,d=EA({},r._gsap),h=r.style;for(i in d.svg?(n=r.getAttribute("transform"),r.setAttribute("transform",""),h[WP]=t,s=bA(r,1),sA(r,WP),r.setAttribute("transform",n)):(n=getComputedStyle(r)[WP],h[WP]=t,s=bA(r,1),h[WP]=n),wP)(n=d[i])!==(a=s[i])&&"perspective,force3D,transformOrigin,svgOrigin".indexOf(i)<0&&(o=NS(n)!==(c=NS(a))?oA(r,i,n,c):parseFloat(n),l=parseFloat(a),e._pt=new eP(e._pt,s,i,o,l-o,EP),e._pt.u=c||0,e._props.push(i));EA(s,d)};rS("padding,margin,Width,Radius",function(e,t){var r="Top",s="Right",i="Bottom",n="Left",a=(t<3?[r,s,i,n]:[r+n,r+s,i+s,i+n]).map(function(r){return t<2?e+r:"border"+r+e});pA[t>1?"border"+e:e]=function(e,t,r,s,i){var n,o;if(arguments.length<4)return n=a.map(function(t){return lA(e,t,r)}),5===(o=n.join(" ")).split(n[0]).length?n[0]:o;n=(s+"").split(" "),o={},a.forEach(function(e,t){return o[e]=n[t]=n[t]||n[(t-1)/2|0]}),e.init(t,o,i)}});var $A,MA,RA,OA={name:"css",register:QP,targetTest:function(e){return e.style&&e.nodeType},init:function(e,t,r,s,i){var n,a,o,l,c,d,h,u,p,m,g,f,x,y,v,b,j=this._props,w=e.style,_=r.vars.startAt;for(h in xP||QP(),this.styles=this.styles||HP(e),b=this.styles.props,this.tween=r,t)if("autoRound"!==h&&(a=t[h],!KC[h]||!RT(h,t,r,s,e,i)))if(c=typeof a,d=pA[h],"function"===c&&(c=typeof(a=a.call(r,s,e,i))),"string"===c&&~a.indexOf("random(")&&(a=QS(a)),d)d(this,e,h,a,r)&&(v=1);else if("--"===h.substr(0,2))n=(getComputedStyle(e).getPropertyValue(h)+"").trim(),a+="",hT.lastIndex=0,hT.test(n)||(u=NS(n),p=NS(a)),p?u!==p&&(n=oA(e,h,n,p)+p):u&&(a+=u),this.add(w,"setProperty",n,a,s,i,0,0,h),j.push(h),b.push(h,0,w[h]);else if("undefined"!==c){if(_&&h in _?(n="function"==typeof _[h]?_[h].call(r,s,e,i):_[h],yC(n)&&~n.indexOf("random(")&&(n=QS(n)),NS(n+"")||"auto"===n||(n+=lC.units[h]||NS(lA(e,h))||""),"="===(n+"").charAt(1)&&(n=lA(e,h))):n=lA(e,h),l=parseFloat(n),(m="string"===c&&"="===a.charAt(1)&&a.substr(0,2))&&(a=a.substr(2)),o=parseFloat(a),h in AP&&("autoAlpha"===h&&(1===l&&"hidden"===lA(e,"visibility")&&o&&(l=0),b.push("visibility",0,w.visibility),iA(this,w,"visibility",l?"inherit":"hidden",o?"inherit":"hidden",!o)),"scale"!==h&&"transform"!==h&&~(h=AP[h]).indexOf(",")&&(h=h.split(",")[0])),g=h in wP)if(this.styles.save(h),"string"===c&&"var(--"===a.substring(0,6)&&(a=YP(e,a.substring(4,a.indexOf(")"))),o=parseFloat(a)),f||((x=e._gsap).renderTransform&&!t.parseTransform||bA(e,t.parseTransform),y=!1!==t.smoothOrigin&&x.smooth,(f=this._pt=new eP(this._pt,w,WP,0,1,x.renderTransform,x,0,-1)).dep=1),"scale"===h)this._pt=new eP(this._pt,x,"scaleY",x.scaleY,(m?nS(x.scaleY,m+o):o)-x.scaleY||0,EP),this._pt.u=0,j.push("scaleY",h),h+="X";else{if("transformOrigin"===h){b.push(UP,0,w[UP]),a=hA(a),x.svg?vA(e,a,0,y,0,this):((p=parseFloat(a.split(" ")[2])||0)!==x.zOrigin&&iA(this,x,"zOrigin",x.zOrigin,p),iA(this,w,h,jA(n),jA(a)));continue}if("svgOrigin"===h){vA(e,a,1,y,0,this);continue}if(h in gA){AA(this,x,h,l,m?nS(l,m+a):a);continue}if("smoothOrigin"===h){iA(this,x,"smooth",x.smooth,a);continue}if("force3D"===h){x[h]=a;continue}if("transform"===h){IA(this,a,e);continue}}else h in w||(h=XP(h)||h);if(g||(o||0===o)&&(l||0===l)&&!PP.test(a)&&h in w)o||(o=0),(u=(n+"").substr((l+"").length))!==(p=NS(a)||(h in lC.units?lC.units[h]:u))&&(l=oA(e,h,n,p)),this._pt=new eP(this._pt,g?x:w,h,l,(m?nS(l,m+o):o)-l,g||"px"!==p&&"zIndex"!==h||!1===t.autoRound?EP:MP),this._pt.u=p||0,u!==p&&"%"!==p&&(this._pt.b=n,this._pt.r=$P);else if(h in w)cA.call(this,e,h,n,m?m+a:a);else if(h in e)this.add(e,h,n||e[h],m?m+a:a,s,i);else if("parseTransform"!==h){LC();continue}g||(h in w?b.push(h,0,w[h]):"function"==typeof e[h]?b.push(h,2,e[h]()):b.push(h,1,n||e[h])),j.push(h)}v&&ZT(this)},render:function(e,t){if(t.tween._time||!bP())for(var r=t._pt;r;)r.r(e,r.d),r=r._next;else t.styles.revert()},get:lA,aliases:AP,getSetter:function(e,t,r){var s=AP[t];return s&&s.indexOf(",")<0&&(t=s),t in wP&&t!==UP&&(e._gsap.x||lA(e,"x"))?r&&vP===r?"scale"===t?FP:LP:(vP=r||{})&&("scale"===t?BP:NP):e.style&&!jC(e.style[t])?DP:~t.indexOf("-")?zP:qT(e,t)},core:{_removeProperty:sA,_getMatrix:yA}};pP.utils.checkPrefix=XP,pP.core.getStyleSaver=HP,RA=rS(($A="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(MA="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",function(e){wP[e]=1}),rS(MA,function(e){lC.units[e]="deg",gA[e]=1}),AP[RA[13]]=$A+","+MA,rS("0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",function(e){var t=e.split(":");AP[t[1]]=RA[t[0]]}),rS("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(e){lC.units[e]="px"}),pP.registerPlugin(OA);var DA=pP.registerPlugin(OA)||pP;DA.core.Tween;const zA=({isOpen:e,onClose:t,onSuccess:r})=>{const[s,i]=ks.useState(!1),n=ks.useRef(null),a=ks.useRef(null),{signOut:o,user:l}=bk(),d=As();ks.useEffect(()=>{if(!e)return;DA.registerPlugin(),DA.fromTo(n.current,{scale:.9,opacity:0},{duration:.5,scale:1,opacity:1,ease:"power2.out",delay:.1});const t=n.current?.querySelectorAll(".screw");t&&t.length>0&&DA.from(t,{duration:.6,scale:0,rotation:-180,stagger:.15,ease:"back.out(1.7)",delay:.3});const r=n.current?.querySelectorAll(".power-node");r&&r.length>0&&DA.from(r,{duration:.4,scale:0,stagger:.1,ease:"power2.out",delay:.5});const s=n.current?.querySelectorAll(".action-btn");s?.forEach(e=>{const t=e=>{DA.to(e.target,{duration:.3,y:-1.5,ease:"power2.out"})},r=e=>{DA.to(e.target,{duration:.3,y:0,ease:"power2.out"})};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r)}});const i=n.current?.querySelectorAll(".screw");i?.forEach(e=>{const t=()=>{DA.to(e,{duration:.4,rotation:"+=360",ease:"power2.inOut"})};return e.addEventListener("mouseenter",t),()=>{e.removeEventListener("mouseenter",t)}});const a=n.current;if(!a)return;let o=a.getBoundingClientRect();const l=e=>{const t=e.clientX-o.left-o.width/2,r=(e.clientY-o.top-o.height/2)/o.height*5,s=-t/o.width*5;DA.to(a,{duration:.3,rotationX:r,rotationY:s,ease:"power2.out"})},c=()=>{DA.to(a,{duration:.5,rotationX:0,rotationY:0,ease:"power2.out"})};a.addEventListener("mousemove",l),a.addEventListener("mouseleave",c);const d=()=>{o=a.getBoundingClientRect()};return window.addEventListener("resize",d),()=>{a.removeEventListener("mousemove",l),a.removeEventListener("mouseleave",c),window.removeEventListener("resize",d)}},[e]),ks.useEffect(()=>{const t=t=>{"Escape"===t.key&&e&&h()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]);const h=()=>{DA.to(n.current,{duration:.3,scale:.9,opacity:0,ease:"power2.in",onComplete:()=>{t()}})};return e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"starfield",children:c.jsx("div",{className:"stars"})}),c.jsx("div",{className:"modal-overlay",ref:a,children:c.jsxs("div",{className:"logout-modal",ref:n,children:[c.jsxs("div",{className:"power-rail",children:[c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"})]}),c.jsx("div",{className:"screw screw-tl",style:{"--screw-index":0}}),c.jsx("div",{className:"screw screw-tr",style:{"--screw-index":1}}),c.jsx("div",{className:"screw screw-bl",style:{"--screw-index":2}}),c.jsx("div",{className:"screw screw-br",style:{"--screw-index":3}}),c.jsx("button",{className:"close-btn","aria-label":"Close",onClick:h}),c.jsxs("div",{className:"logo-section",children:[c.jsx("div",{className:"logo-icon",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"sphereGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ff4444",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff6b35",stopOpacity:1}})]}),c.jsxs("radialGradient",{id:"jewelGradient",cx:"50%",cy:"50%",r:"50%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ffffff",stopOpacity:1}}),c.jsx("stop",{offset:"30%",style:{stopColor:"#ff4444",stopOpacity:1}}),c.jsx("stop",{offset:"60%",style:{stopColor:"#ff6b35",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff0040",stopOpacity:.9}})]})]}),c.jsx("circle",{cx:"32",cy:"32",r:"24",fill:"none",stroke:"url(#sphereGradient)",strokeWidth:"3",opacity:"0.8"}),c.jsx("circle",{cx:"32",cy:"32",r:"16",fill:"none",stroke:"url(#sphereGradient)",strokeWidth:"2",opacity:"0.6"}),c.jsxs("circle",{cx:"32",cy:"32",r:"6",fill:"url(#jewelGradient)",className:"logo-jewel",children:[c.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"opacity",values:"0.8;1;0.8",dur:"3s",repeatCount:"indefinite"})]}),c.jsx("circle",{cx:"32",cy:"8",r:"3",fill:"#ff4444",opacity:"0.8"}),c.jsx("circle",{cx:"56",cy:"32",r:"3",fill:"#ff6b35",opacity:"0.8"}),c.jsx("circle",{cx:"32",cy:"56",r:"3",fill:"#ffd93d",opacity:"0.8"}),c.jsx("circle",{cx:"8",cy:"32",r:"3",fill:"#ff8866",opacity:"0.8"})]})}),c.jsx("h1",{className:"logo-title",children:"Sign Out"})]}),c.jsx("p",{className:"logout-message",children:"Are you sure you want to sign out of your RepSpheres account?"}),c.jsxs("div",{className:"session-info",children:[c.jsxs("div",{className:"session-item",children:[c.jsx("span",{className:"session-label",children:"Session Duration"}),c.jsx("span",{className:"session-value",children:"2h 34m"})]}),c.jsxs("div",{className:"session-item",children:[c.jsx("span",{className:"session-label",children:"Account"}),c.jsx("span",{className:"session-value",children:l?.email||"user@repspheres.com"})]})]}),c.jsxs("div",{className:"action-buttons",children:[c.jsx("button",{className:"action-btn cancel",onClick:h,disabled:s,children:"Cancel"}),c.jsx("button",{className:"action-btn logout",onClick:async()=>{i(!0);try{if($f.info("Starting logout process"),!l)return $f.info("No user session found, closing modal"),void t();await o(),$f.info("SignOut completed successfully"),DA.to(n.current,{duration:.6,scale:0,rotation:360,opacity:0,ease:"power2.in",onComplete:()=>{$f.debug("Animation completed, executing callbacks"),i(!1),r?.(),t(),d("/")}})}catch(e){$f.error("Logout error",{error:Mf(e)}),i(!1)}},disabled:s,children:"Sign Out"})]}),c.jsx("div",{className:"modal-footer",children:c.jsxs("div",{className:"security-text",children:[c.jsx("span",{className:"led-indicator"}),c.jsx("span",{children:"SECURE SESSION TERMINATION"}),c.jsx("span",{className:"led-indicator"}),c.jsx("span",{className:"led-indicator"})]})}),c.jsx("div",{className:"loading-overlay "+(s?"active":""),id:"loadingOverlay",children:c.jsxs("svg",{className:"loading-jewel",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[c.jsx("defs",{children:c.jsxs("radialGradient",{id:"loadingGradient",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ffffff",stopOpacity:1}}),c.jsx("stop",{offset:"30%",style:{stopColor:"#ff4444",stopOpacity:1}}),c.jsx("stop",{offset:"60%",style:{stopColor:"#ff6b35",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff0040",stopOpacity:.9}})]})}),c.jsx("circle",{cx:"24",cy:"24",r:"20",fill:"none",stroke:"url(#loadingGradient)",strokeWidth:"4"}),c.jsx("circle",{cx:"24",cy:"24",r:"10",fill:"url(#loadingGradient)"})]})})]})})]}):null};zA.displayName="LogoutModal";var LA={},FA=Te;Object.defineProperty(LA,"__esModule",{value:!0});var BA=LA.default=void 0,NA=FA(Zs()),WA=c;BA=LA.default=(0,NA.default)((0,WA.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person");var UA={},VA=Te;Object.defineProperty(UA,"__esModule",{value:!0});var qA=UA.default=void 0,GA=VA(Zs()),HA=c;qA=UA.default=(0,GA.default)((0,HA.jsx)("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2m6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1z"}),"Notifications");var KA={},YA=Te;Object.defineProperty(KA,"__esModule",{value:!0});var JA=KA.default=void 0,XA=YA(Zs()),QA=c;JA=KA.default=(0,XA.default)((0,QA.jsx)("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette");var ZA={},eE=Te;Object.defineProperty(ZA,"__esModule",{value:!0});var tE=ZA.default=void 0,rE=eE(Zs()),sE=c;tE=ZA.default=(0,rE.default)((0,sE.jsx)("path",{d:"M13 2.05v3.03c3.39.49 6 3.39 6 6.92 0 .9-.18 1.75-.48 2.54l2.6 1.53c.56-1.24.88-2.62.88-4.07 0-5.18-3.95-9.45-9-9.95M12 19c-3.87 0-7-3.13-7-7 0-3.53 2.61-6.43 6-6.92V2.05c-5.06.5-9 4.76-9 9.95 0 5.52 4.47 10 9.99 10 3.31 0 6.24-1.61 8.06-4.09l-2.6-1.53C16.17 17.98 14.21 19 12 19"}),"DataUsage");var iE={},nE=Te;Object.defineProperty(iE,"__esModule",{value:!0});var aE=iE.default=void 0,oE=nE(Zs()),lE=c;aE=iE.default=(0,oE.default)((0,lE.jsx)("path",{d:"m20.5 3-.16.03L15 5.1 9 3 3.36 4.9c-.21.07-.36.25-.36.48V20.5c0 .28.22.5.5.5l.16-.03L9 18.9l6 2.1 5.64-1.9c.21-.07.36-.25.36-.48V3.5c0-.28-.22-.5-.5-.5M15 19l-6-2.11V5l6 2.11z"}),"Map");var cE={},dE=Te;Object.defineProperty(cE,"__esModule",{value:!0});var hE=cE.default=void 0,uE=dE(Zs()),pE=c;hE=cE.default=(0,uE.default)((0,pE.jsx)("path",{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8m0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4z"}),"Sync");var mE={},gE=Te;Object.defineProperty(mE,"__esModule",{value:!0});var fE=mE.default=void 0,xE=gE(Zs()),yE=c;fE=mE.default=(0,xE.default)((0,yE.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload");var vE={},bE=Te;Object.defineProperty(vE,"__esModule",{value:!0});var jE=vE.default=void 0,wE=bE(Zs()),_E=c;jE=vE.default=(0,wE.default)((0,_E.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle");var kE={},CE=Te;Object.defineProperty(kE,"__esModule",{value:!0});var SE=kE.default=void 0,TE=CE(Zs()),PE=c;SE=kE.default=(0,TE.default)((0,PE.jsx)("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");const AE=ks.createContext(void 0),EE=({children:e})=>{const[t,r]=ks.useState("dark"),s=(e=>{let t=Sr({palette:{mode:e,primary:{main:"light"===e?"#1565c0":"#90caf9"},secondary:{main:"light"===e?"#dc004e":"#f48fb1"},background:{default:"light"===e?"#f5f5f5":"#121212",paper:"light"===e?"#ffffff":"#1e1e1e"},text:{primary:"light"===e?"rgba(0, 0, 0, 0.87)":"rgba(255, 255, 255, 0.87)",secondary:"light"===e?"rgba(0, 0, 0, 0.6)":"rgba(255, 255, 255, 0.6)"}},typography:{fontFamily:["-apple-system","BlinkMacSystemFont",'"Segoe UI"',"Roboto",'"Helvetica Neue"',"Arial","sans-serif",'"Apple Color Emoji"','"Segoe UI Emoji"','"Segoe UI Symbol"'].join(","),h1:{fontWeight:600},h2:{fontWeight:500}},components:{MuiCssBaseline:{styleOverrides:{html:{height:"100%",scrollBehavior:"smooth"},body:{margin:0,padding:0,minHeight:"100vh",overflowY:"auto",overflowX:"hidden","&::-webkit-scrollbar":{width:"12px",height:"12px"},"&::-webkit-scrollbar-track":{background:"light"===e?"#f1f1f1":"#2a2a2a",borderRadius:"6px"},"&::-webkit-scrollbar-thumb":{background:"light"===e?"#888":"#555",borderRadius:"6px"},"&::-webkit-scrollbar-thumb:hover":{background:"light"===e?"#555":"#777"}},"#root":{minHeight:"100vh",display:"flex",flexDirection:"column"}}},MuiCard:{styleOverrides:{root:{borderRadius:12,transition:"transform 0.2s ease-in-out, background-color 0.3s ease","&:hover":{transform:"translateY(-4px)",backgroundColor:"light"===e?"rgba(0, 0, 0, 0.04)":"rgba(255, 255, 255, 0.08)"}}}},MuiButton:{styleOverrides:{root:{textTransform:"none",borderRadius:8,transition:"background-color 0.3s ease","&:hover":{backgroundColor:"light"===e?"#115293":"#64b5f6"}}}},MuiTableCell:{styleOverrides:{root:{borderBottom:"dark"===e?"1px solid rgba(255, 255, 255, 0.12)":void 0}}},MuiTableRow:{styleOverrides:{root:{"&:hover":{backgroundColor:"dark"===e?"rgba(255, 255, 255, 0.08)":"rgba(0, 0, 0, 0.04)"}}}}}});return t=Tr(t),t})(t);ks.useEffect(()=>{r((()=>{const e=localStorage.getItem("themeMode");return!e||"light"!==e&&"dark"!==e?"dark":e})())},[]),ks.useEffect(()=>{localStorage.setItem("themeMode",t)},[t]);return c.jsx(AE.Provider,{value:{mode:t,toggleTheme:()=>{r(e=>"light"===e?"dark":"light")}},children:c.jsxs(kr,{theme:s,children:[c.jsx(Cr,{}),e]})})};EE.displayName="ThemeProvider";function IE(e){const{children:t,value:r,index:s,...i}=e;return c.jsx("div",{role:"tabpanel",hidden:r!==s,id:`settings-tabpanel-${s}`,"aria-labelledby":`settings-tab-${s}`,...i,children:r===s&&c.jsx(o,{sx:{p:3},children:t})})}const $E=({open:e,onClose:t})=>{const r=l(),{user:s}=bk(),{mode:d,toggleTheme:u}=(()=>{const e=ks.useContext(AE);if(void 0===e)throw new Error("useThemeContext must be used within a ThemeProvider");return e})(),[m,x]=ks.useState(0),[y,b]=ks.useState({displayName:s?.email||"",phoneNumber:"",territory:"NY/FL",emailNotifications:!0,smsNotifications:!1,desktopNotifications:!0,newsletterSubscription:!0,darkMode:"dark"===d,compactView:!1,showAnimations:!0,colorScheme:"default",dataSharing:!0,anonymousUsage:!0,autoExport:!1,dataRetention:"90",primaryTerritory:"NY",secondaryTerritories:["FL"],autoDetectLocation:!0,marketRadius:"50"}),j=(e,t)=>{b(r=>({...r,[e]:t}))};return c.jsxs(fe,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,PaperProps:{sx:{borderRadius:3,minHeight:"600px",background:"dark"===r.palette.mode?"rgba(18, 18, 18, 0.95)":"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)"}},children:[c.jsxs(xe,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",borderBottom:`1px solid ${r.palette.divider}`,pb:2},children:[c.jsx(h,{variant:"h5",sx:{fontWeight:600},children:"Settings"}),c.jsx(f,{onClick:t,size:"small",children:c.jsx(mj,{})})]}),c.jsxs(ye,{sx:{p:0},children:[c.jsx(o,{sx:{borderBottom:1,borderColor:"divider"},children:c.jsxs(w,{value:m,onChange:(e,t)=>{x(t)},variant:"scrollable",scrollButtons:"auto",sx:{"& .MuiTab-root":{minHeight:64,textTransform:"none",fontSize:"0.95rem"}},children:[c.jsx(_,{icon:c.jsx(BA,{}),label:"Profile",iconPosition:"start"}),c.jsx(_,{icon:c.jsx(qA,{}),label:"Notifications",iconPosition:"start"}),c.jsx(_,{icon:c.jsx(JA,{}),label:"Appearance",iconPosition:"start"}),c.jsx(_,{icon:c.jsx(tE,{}),label:"Data & Privacy",iconPosition:"start"}),c.jsx(_,{icon:c.jsx(aE,{}),label:"Territory",iconPosition:"start"}),c.jsx(_,{icon:c.jsx(hE,{}),label:"Integrations",iconPosition:"start"})]})}),c.jsx(IE,{value:m,index:0,children:c.jsxs(V,{spacing:3,children:[c.jsxs(R,{severity:"info",sx:{borderRadius:2},children:["Connected as: ",s?.email]}),c.jsx(Ge,{label:"Display Name",value:y.displayName,onChange:e=>j("displayName",e.target.value),fullWidth:!0,variant:"outlined"}),c.jsx(Ge,{label:"Phone Number",value:y.phoneNumber,onChange:e=>j("phoneNumber",e.target.value),fullWidth:!0,variant:"outlined",placeholder:"+1 (555) 123-4567"}),c.jsxs(Rt,{fullWidth:!0,children:[c.jsx(Ot,{children:"Primary Territory"}),c.jsxs(Dt,{value:y.territory,onChange:e=>j("territory",e.target.value),label:"Primary Territory",children:[c.jsx(zt,{value:"NY/FL",children:"New York & Florida"}),c.jsx(zt,{value:"NY",children:"New York Only"}),c.jsx(zt,{value:"FL",children:"Florida Only"}),c.jsx(zt,{value:"CA",children:"California"}),c.jsx(zt,{value:"TX",children:"Texas"})]})]}),c.jsx(i,{sx:{bgcolor:n(r.palette.primary.main,.05)},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Account Status"}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[c.jsx(jE,{color:"success"}),c.jsx(h,{variant:"body2",children:"Premium Account Active"})]})]})})]})}),c.jsx(IE,{value:m,index:1,children:c.jsxs(V,{spacing:3,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Email Notifications"}),c.jsxs(Pr,{children:[c.jsx(p,{control:c.jsx(g,{checked:y.emailNotifications,onChange:e=>j("emailNotifications",e.target.checked)}),label:"Enable email notifications"}),c.jsx(p,{control:c.jsx(g,{checked:y.newsletterSubscription,onChange:e=>j("newsletterSubscription",e.target.checked)}),label:"Weekly market insights newsletter"})]}),c.jsx(N,{}),c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Push Notifications"}),c.jsxs(Pr,{children:[c.jsx(p,{control:c.jsx(g,{checked:y.smsNotifications,onChange:e=>j("smsNotifications",e.target.checked)}),label:"SMS notifications for urgent updates"}),c.jsx(p,{control:c.jsx(g,{checked:y.desktopNotifications,onChange:e=>j("desktopNotifications",e.target.checked)}),label:"Desktop push notifications"})]}),c.jsx(R,{severity:"warning",sx:{borderRadius:2},children:"SMS notifications require phone number verification"})]})}),c.jsx(IE,{value:m,index:2,children:c.jsxs(V,{spacing:3,children:[c.jsxs(Pr,{children:[c.jsx(p,{control:c.jsx(g,{checked:y.darkMode,onChange:e=>{j("darkMode",e.target.checked),u()}}),label:"Dark mode"}),c.jsx(p,{control:c.jsx(g,{checked:y.compactView,onChange:e=>j("compactView",e.target.checked)}),label:"Compact view"}),c.jsx(p,{control:c.jsx(g,{checked:y.showAnimations,onChange:e=>j("showAnimations",e.target.checked)}),label:"Enable animations"})]}),c.jsx(N,{}),c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Color Scheme"}),c.jsx(A,{container:!0,spacing:2,children:["default","blue","purple","green"].map(e=>c.jsx(A,{item:!0,xs:6,children:c.jsx(i,{sx:{cursor:"pointer",border:y.colorScheme===e?2:0,borderColor:"primary.main"},onClick:()=>j("colorScheme",e),children:c.jsxs(v,{sx:{textAlign:"center"},children:[c.jsx(o,{sx:{width:60,height:60,borderRadius:2,bgcolor:"default"===e?"#00ffc6":"blue"===e?"#2196f3":"purple"===e?"#9c27b0":"#4caf50",mx:"auto",mb:1}}),c.jsx(h,{variant:"caption",sx:{textTransform:"capitalize"},children:e})]})})},e))})]})}),c.jsx(IE,{value:m,index:3,children:c.jsxs(V,{spacing:3,children:[c.jsx(R,{severity:"info",sx:{borderRadius:2},children:"Your data is encrypted and stored securely. We never sell your information."}),c.jsxs(Pr,{children:[c.jsx(p,{control:c.jsx(g,{checked:y.dataSharing,onChange:e=>j("dataSharing",e.target.checked)}),label:"Share anonymous usage data to improve the product"}),c.jsx(p,{control:c.jsx(g,{checked:y.anonymousUsage,onChange:e=>j("anonymousUsage",e.target.checked)}),label:"Contribute to market trends analysis"}),c.jsx(p,{control:c.jsx(g,{checked:y.autoExport,onChange:e=>j("autoExport",e.target.checked)}),label:"Auto-export data weekly"})]}),c.jsx(N,{}),c.jsxs(Rt,{fullWidth:!0,children:[c.jsx(Ot,{children:"Data Retention Period"}),c.jsxs(Dt,{value:y.dataRetention,onChange:e=>j("dataRetention",e.target.value),label:"Data Retention Period",children:[c.jsx(zt,{value:"30",children:"30 days"}),c.jsx(zt,{value:"90",children:"90 days"}),c.jsx(zt,{value:"180",children:"180 days"}),c.jsx(zt,{value:"365",children:"1 year"}),c.jsx(zt,{value:"forever",children:"Forever"})]})]}),c.jsx(a,{variant:"outlined",color:"error",startIcon:c.jsx(SE,{}),fullWidth:!0,children:"Delete All My Data"})]})}),c.jsx(IE,{value:m,index:4,children:c.jsxs(V,{spacing:3,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Territory Management"}),c.jsxs(Rt,{fullWidth:!0,children:[c.jsx(Ot,{children:"Primary Territory"}),c.jsxs(Dt,{value:y.primaryTerritory,onChange:e=>j("primaryTerritory",e.target.value),label:"Primary Territory",children:[c.jsx(zt,{value:"NY",children:"New York"}),c.jsx(zt,{value:"FL",children:"Florida"}),c.jsx(zt,{value:"CA",children:"California"}),c.jsx(zt,{value:"TX",children:"Texas"})]})]}),c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Secondary Territories"}),c.jsxs(V,{direction:"row",spacing:1,flexWrap:"wrap",children:[y.secondaryTerritories.map(e=>c.jsx(H,{label:e,onDelete:()=>{j("secondaryTerritories",y.secondaryTerritories.filter(t=>t!==e))},color:"primary",variant:"outlined"},e)),c.jsx(H,{label:"+ Add Territory",onClick:()=>{},variant:"outlined",sx:{borderStyle:"dashed"}})]})]}),c.jsx(p,{control:c.jsx(g,{checked:y.autoDetectLocation,onChange:e=>j("autoDetectLocation",e.target.checked)}),label:"Auto-detect my location"}),c.jsx(Ge,{label:"Market Radius (miles)",value:y.marketRadius,onChange:e=>j("marketRadius",e.target.value),type:"number",fullWidth:!0,InputProps:{endAdornment:c.jsx(h,{variant:"caption",children:"miles"})}}),c.jsx(i,{sx:{bgcolor:n(r.palette.info.main,.05)},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Coverage Statistics"}),c.jsxs(A,{container:!0,spacing:2,sx:{mt:1},children:[c.jsxs(A,{item:!0,xs:6,children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Total Providers"}),c.jsx(h,{variant:"h6",children:"2,847"})]}),c.jsxs(A,{item:!0,xs:6,children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Market Value"}),c.jsx(h,{variant:"h6",children:"$1.2B"})]})]})]})})]})}),c.jsx(IE,{value:m,index:5,children:c.jsxs(V,{spacing:3,children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Connected Services"}),c.jsx(i,{children:c.jsx(v,{children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle1",children:"Salesforce CRM"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Sync contacts and opportunities"})]}),c.jsx(H,{label:"Connected",color:"success",size:"small",icon:c.jsx(jE,{})})]})})}),c.jsx(i,{children:c.jsx(v,{children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle1",children:"Google Calendar"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Sync appointments and scheduling"})]}),c.jsx(a,{variant:"outlined",size:"small",children:"Connect"})]})})}),c.jsx(i,{children:c.jsx(v,{children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle1",children:"Slack"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Receive notifications in Slack"})]}),c.jsx(a,{variant:"outlined",size:"small",children:"Connect"})]})})}),c.jsx(N,{}),c.jsx(h,{variant:"h6",gutterBottom:!0,children:"API Access"}),c.jsx(i,{sx:{bgcolor:n(r.palette.warning.main,.05)},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"API Key"}),c.jsx(h,{variant:"body2",sx:{fontFamily:"monospace",mb:2},children:"sk_live_****************************7d9f"}),c.jsx(a,{variant:"outlined",size:"small",fullWidth:!0,children:"Regenerate API Key"})]})})]})})]}),c.jsxs(o,{sx:{p:3,borderTop:`1px solid ${r.palette.divider}`,display:"flex",justifyContent:"space-between"},children:[c.jsx(a,{onClick:t,color:"inherit",children:"Cancel"}),c.jsx(a,{variant:"contained",onClick:()=>{t()},startIcon:c.jsx(fE,{}),children:"Save Changes"})]})]})};$E.displayName="SettingsModal";var ME={},RE=Te;Object.defineProperty(ME,"__esModule",{value:!0});var OE=ME.default=void 0,DE=RE(Zs()),zE=c;OE=ME.default=(0,DE.default)((0,zE.jsx)("path",{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58c.18-.14.23-.41.12-.61l-1.92-3.32c-.12-.22-.37-.29-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54c-.04-.24-.24-.41-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58c-.18.14-.23.41-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6"}),"Settings");const LE=[{label:"About RepSpheres",href:"https://repspheres.com/about"},{label:"Contact",href:"https://repspheres.com/contact"},{label:"Careers",href:"https://repspheres.com/careers"},{label:"Legal",href:"https://repspheres.com/legal"}];function FE({onSalesModeToggle:e}){const[t,r]=Cs.useState(!1),[s,i]=Cs.useState(null),[n,d]=Cs.useState(!1),[h,u]=Cs.useState(!1),{user:p}=bk(),{isAuthModalOpen:m,openAuthModal:g,closeAuthModal:x,handleAuthSuccess:y}=(()=>{const[e,t]=ks.useState(!1),[r,s]=ks.useState(null),i=ks.useCallback(e=>{t(!0),e&&s(()=>e)},[]),n=ks.useCallback(()=>{t(!1),s(null)},[]),a=ks.useCallback(()=>{r&&r(),n()},[r,n]);return{isAuthModalOpen:e,openAuthModal:i,closeAuthModal:n,handleAuthSuccess:a}})(),v=l(),{colorMode:b,toggleColorMode:j}=ks.useContext(tk),w=rt(v.breakpoints.down("md"));rt(v.breakpoints.down("sm"));const _=[],{gradientColors:k}=ks.useContext(ek),C=c.jsxs("svg",{width:"100%",height:"100%",viewBox:"0 0 32 32",style:{filter:"drop-shadow(0 0 6px #7B42F6AA)"},children:[c.jsx("defs",{children:c.jsxs("radialGradient",{id:"orbGrad",cx:"50%",cy:"50%",r:"70%",children:[c.jsx("stop",{offset:"0%",stopColor:k.start}),c.jsx("stop",{offset:"100%",stopColor:k.end})]})}),c.jsx("circle",{cx:"16",cy:"16",r:"14",fill:"url(#orbGrad)",opacity:"0.85"}),c.jsx("circle",{cx:"16",cy:"16",r:"8",fill:"#fff",opacity:"0.08"})]}),S=e=>t=>{("keydown"!==t.type||"Tab"!==t.key&&"Shift"!==t.key)&&r(e)},T=()=>{i(null)},P={fontWeight:500,letterSpacing:"0.03em",whiteSpace:"nowrap",minWidth:"auto",textTransform:"none",borderRadius:0,transition:"all 0.2s"},A={...P,fontSize:{xs:"0.9rem",sm:"0.95rem"},px:{xs:.5,sm:1},py:.5,mx:{xs:.5,sm:1},color:"#fff","&:hover":{background:"rgba(255,255,255,0.1)"}},E={...P,fontSize:{xs:"0.85rem",sm:"0.9rem"},fontWeight:600,px:{xs:1.5,sm:2},py:.7,border:"2px solid transparent",borderRadius:"24px",color:"#fff",background:"rgba(102, 126, 234, 0.15)",backdropFilter:"blur(8px)",position:"relative",overflow:"hidden",transition:"all 0.3s ease","&::before":{content:'""',position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",opacity:0,transition:"opacity 0.3s ease"},"&:hover":{transform:"translateY(-1px)",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)",borderColor:"rgba(102, 126, 234, 0.5)","&::before":{opacity:.2}}},I={...P,fontSize:{xs:"0.85rem",sm:"0.9rem"},fontWeight:600,px:{xs:1.2,sm:1.5},py:.5,ml:{xs:.5,sm:1},borderRadius:"16px",color:"#fff",background:"linear-gradient(90deg, #00ffc6 0%, #7B42F6 100%)","&:hover":{background:"linear-gradient(90deg, #5B3CFF 0%, #00ffc6 100%)",transform:"scale(1.03)"}},$=c.jsxs(o,{sx:{width:"260px",p:2,background:"rgba(20,14,38,0.96)",borderLeft:"2px solid",borderImage:"linear-gradient(180deg, #7B42F6 0%, #00ffc6 100%) 1",height:"100%",color:"#fff"},role:"presentation",onClick:S(!1),onKeyDown:S(!1),children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:4,mt:2,cursor:"pointer"},onClick:()=>"undefined"!=typeof window&&(window.location.href="https://repspheres.com"),children:[c.jsx(o,{sx:{width:32,height:32,mr:1.5},children:C}),c.jsxs(o,{sx:{fontSize:"1.2rem",fontWeight:800,display:"flex"},children:[c.jsx("span",{children:"Rep"}),c.jsx(o,{component:"span",sx:{background:"linear-gradient(90deg, #00ffc6 0%, #7B42F6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Spheres"})]})]}),c.jsx(K,{sx:{mb:2},children:_.map(e=>c.jsx(Y,{disablePadding:!0,sx:{mb:1},children:c.jsxs(Ar,{component:"a",href:e.href,sx:{py:1,borderRadius:"8px","&:hover":{bgcolor:"rgba(255,255,255,0.1)"}},children:[c.jsx(o,{sx:{mr:2,display:"flex",alignItems:"center"},children:e.icon}),c.jsx(Q,{primary:e.label})]})},e.href))}),c.jsx(N,{sx:{bgcolor:"rgba(255,255,255,0.1)",my:2}}),c.jsxs(K,{children:[LE.map((e,t)=>c.jsx(Y,{disablePadding:!0,sx:{mb:.5},children:c.jsx(Ar,{component:"a",href:e.href,sx:{py:.75,px:2,borderRadius:"8px",fontSize:"0.9rem"},children:e.label})},t)),c.jsx(Y,{disablePadding:!0,sx:{mb:.5},children:c.jsxs(Ar,{onClick:()=>{j()},sx:{py:.75,px:2,borderRadius:"8px",fontSize:"0.9rem"},children:["dark"===v.palette.mode?c.jsx(dk,{fontSize:"small",sx:{mr:1.5}}):c.jsx(nk,{fontSize:"small",sx:{mr:1.5}}),"dark"===v.palette.mode?"Light Mode":"Dark Mode"]})}),c.jsx(Y,{disablePadding:!0,sx:{mb:.5},children:c.jsxs(Ar,{onClick:()=>{S(!1)({type:"click"}),u(!0)},sx:{py:.75,px:2,borderRadius:"8px",fontSize:"0.9rem"},children:[c.jsx(OE,{fontSize:"small",sx:{mr:1.5}}),"Settings"]})})]}),c.jsxs(o,{sx:{mt:4,px:1},children:[c.jsx(a,{fullWidth:!0,variant:"outlined",onClick:()=>g(),sx:{...E,mb:2,justifyContent:"center"},children:"Log In"}),c.jsx(a,{fullWidth:!0,variant:"contained",onClick:()=>g(),sx:{...I,ml:0,justifyContent:"center"},children:"Sign Up"})]})]});return c.jsxs(c.Fragment,{children:[c.jsx(Er,{position:"sticky",elevation:0,sx:{background:"rgba(24,24,43,0.52)",backdropFilter:"blur(10px)",WebkitBackdropFilter:"blur(10px)",boxShadow:"0 6px 24px 0 rgba(123,66,246,0.15)",border:"1px solid rgba(123,66,246,0.13)",borderBottom:"1px solid rgba(123,66,246,0.10)",borderRadius:{xs:"0 0 16px 16px",md:"0 0 24px 24px"},mx:"auto",mt:{xs:.5,md:1},width:{xs:"calc(100% - 10px)",sm:"calc(100% - 20px)",md:"calc(100% - 40px)"},maxWidth:"1800px",overflow:"hidden",zIndex:1200},children:c.jsxs(Ir,{sx:{px:{xs:1,sm:2},height:{xs:"60px",sm:"64px"},minHeight:{xs:"60px",sm:"64px"},display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs(o,{component:"a",href:"https://repspheres.com",sx:{display:"flex",alignItems:"center",textDecoration:"none",color:"inherit"},children:[c.jsx(o,{sx:{display:"flex",alignItems:"center",mr:1,width:{xs:28,sm:32},height:{xs:28,sm:32}},children:C}),c.jsxs(o,{sx:{display:"flex",fontSize:{xs:"1.1rem",sm:"1.2rem"},fontWeight:800,letterSpacing:"0.03em"},children:[c.jsx(o,{component:"span",children:"Rep"}),c.jsx(o,{component:"span",sx:{background:"linear-gradient(90deg, #00ffc6 0%, #7B42F6 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Spheres"})]}),c.jsx(o,{component:"span",onClick:t=>{t.preventDefault(),t.stopPropagation(),e&&e()},sx:{ml:.5,cursor:"pointer",color:"transparent",userSelect:"none",fontSize:"1rem","&:hover":{color:"transparent"}},children:"g"})]}),!w&&c.jsx(o,{sx:{display:"flex",alignItems:"center",justifyContent:"center",mx:"auto",position:"absolute",left:"50%",transform:"translateX(-50%)"},children:c.jsx(o,{sx:{display:"flex",alignItems:"center",height:"100%",px:{sm:1,md:2},maxWidth:{sm:"65vw",md:"70vw"},overflowX:"auto","&::-webkit-scrollbar":{display:"none"},msOverflowStyle:"none",scrollbarWidth:"none"},children:_.map(e=>c.jsxs(a,{component:"a",href:e.href,sx:{...A,"& .buttonText":{display:{xs:"none",sm:"inline"}}},children:[c.jsx(o,{sx:{mr:{xs:0,sm:1},display:"flex",alignItems:"center"},children:e.icon}),c.jsx(o,{component:"span",className:"buttonText",children:e.label})]},e.href))})}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",ml:"auto",gap:{xs:.5,sm:1}},children:[c.jsx(o,{sx:{display:"flex",alignItems:"center"},children:p?c.jsx(a,{variant:"outlined",onClick:()=>d(!0),sx:E,children:"Log Out"}):c.jsxs(c.Fragment,{children:[c.jsx(a,{variant:"outlined",onClick:()=>g(),sx:E,children:"Log In"}),c.jsx(a,{variant:"contained",onClick:()=>g(),sx:I,children:"Sign Up"})]})}),w&&c.jsx(f,{edge:"end",color:"inherit","aria-label":"menu",onClick:S(!0),sx:{ml:1},children:c.jsx(X_,{})}),!w&&c.jsx(f,{"aria-label":"more options","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:e=>{i(e.currentTarget)},sx:{ml:.5,color:"#fff",display:{xs:"none",md:"flex"}},children:c.jsx(gk,{})}),c.jsxs(ur,{id:"menu-appbar",anchorEl:s,keepMounted:!0,open:Boolean(s),onClose:T,anchorOrigin:{vertical:"bottom",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},PaperProps:{sx:{mt:1.5,background:"rgba(20,14,38,0.96)",boxShadow:"0 8px 32px rgba(0,0,0,0.2)",borderRadius:2,border:"1px solid rgba(123,66,246,0.15)",minWidth:180}},children:[c.jsxs(zt,{onClick:()=>{j(),T()},sx:{color:"#fff",display:"flex",alignItems:"center",gap:1.5},children:["dark"===v.palette.mode?c.jsx(dk,{fontSize:"small"}):c.jsx(nk,{fontSize:"small"}),"dark"===v.palette.mode?"Light Mode":"Dark Mode"]}),c.jsxs(zt,{onClick:()=>{T(),u(!0)},sx:{color:"#fff",display:"flex",alignItems:"center",gap:1.5},children:[c.jsx(OE,{fontSize:"small"}),"Settings"]}),c.jsx(N,{sx:{borderColor:"rgba(255,255,255,0.1)",my:1}}),LE.map((e,t)=>c.jsx(zt,{component:"a",href:e.href,onClick:T,sx:{color:"#fff"},children:e.label},t))]})]}),c.jsx(ft,{anchor:"right",open:t,onClose:S(!1),children:$})]})}),c.jsx(Tk,{open:m,onClose:x,onSuccess:y}),c.jsx(zA,{isOpen:n,onClose:()=>d(!1)}),c.jsx($E,{open:h,onClose:()=>u(!1)})]})}const BE=r`
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
`,NE=r`
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
`;function WE(){const[e,t]=ks.useState(""),[r,s]=ks.useState(""),[i,n]=ks.useState(!1),[u,p]=ks.useState(!1),[m,g]=ks.useState(!1),[x,y]=ks.useState(!1),[v,b]=ks.useState(""),w=As(),_=l(),{user:k,signInWithEmail:C,signUpWithEmail:S,signInWithProvider:T}=bk();ks.useEffect(()=>{k&&w("/")},[k,w]);const P=async e=>{y(!0),b("");try{await T(e),w("/")}catch(t){b(`Failed to sign in with ${e}`),y(!1)}};return c.jsxs("div",{children:[c.jsx(FE,{}),c.jsx(d,{maxWidth:"sm",sx:{pt:8,pb:6},children:c.jsxs(j,{elevation:6,sx:{p:4,background:"dark"===_.palette.mode?"linear-gradient(-45deg, #1a1a2e, #16213e, #0f3460, #16213e)":"linear-gradient(-45deg, #f5f5f5, #e3e3e3, #d1d1d1, #e3e3e3)",backgroundSize:"400% 400%",animation:`${BE} 15s ease infinite`,border:"1px solid rgba(0, 255, 198, 0.3)",borderRadius:3,backdropFilter:"blur(20px)",position:"relative",overflow:"hidden","&::before":{content:'""',position:"absolute",top:-2,left:-2,right:-2,bottom:-2,background:"linear-gradient(45deg, #00ffc6, #00a693, #00ffc6)",borderRadius:3,opacity:.2,zIndex:-1}},children:[c.jsxs(o,{sx:{textAlign:"center",mb:4},children:[c.jsx(o,{sx:{display:"flex",justifyContent:"center",mb:2},children:c.jsx($e,{sx:{fontSize:48,color:"#00ffc6",animation:`${NE} 2s ease-in-out infinite`}})}),c.jsx(h,{variant:"h4",component:"h1",sx:{color:"dark"===_.palette.mode?"#fff":"#000",fontWeight:700,mb:1,background:"linear-gradient(135deg, #00ffc6 0%, #7B42F6 100%)",backgroundClip:"text",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},children:"Market Data Insights"}),c.jsx(h,{variant:"body1",sx:{color:"dark"===_.palette.mode?"rgba(255, 255, 255, 0.8)":"rgba(0, 0, 0, 0.8)"},children:u?m?"Create your account":"Sign in to your account":"Access real-time market intelligence"})]}),v&&c.jsx(R,{severity:"error",sx:{mb:3,backgroundColor:"rgba(211, 47, 47, 0.1)",color:"#ff6b6b",border:"1px solid rgba(211, 47, 47, 0.3)","& .MuiAlert-icon":{color:"#ff6b6b"}},children:v}),u?c.jsx(o,{component:"form",onSubmit:async t=>{if(t.preventDefault(),e&&r){y(!0),b("");try{m?await S(e,r):await C(e,r),w("/")}catch(s){b(s.message||"Failed to "+(m?"sign up":"sign in"))}finally{y(!1)}}else b("Please fill in all fields")},children:c.jsxs(V,{spacing:2,children:[c.jsx(Ge,{fullWidth:!0,label:"Email",type:"email",value:e,onChange:e=>t(e.target.value),disabled:x,autoFocus:!0,sx:{"& .MuiOutlinedInput-root":{color:"dark"===_.palette.mode?"#fff":"#000",backgroundColor:"rgba(255, 255, 255, 0.05)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(0, 255, 198, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#00ffc6"}},"& .MuiInputLabel-root":{color:"dark"===_.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"}}}),c.jsx(Ge,{fullWidth:!0,label:"Password",type:i?"text":"password",value:r,onChange:e=>s(e.target.value),disabled:x,InputProps:{endAdornment:c.jsx(He,{position:"end",children:c.jsx(f,{onClick:()=>n(!i),edge:"end",sx:{color:"dark"===_.palette.mode?"rgba(255, 255, 255, 0.5)":"rgba(0, 0, 0, 0.5)"},children:i?c.jsx(wr,{}):c.jsx(pt,{})})})},sx:{"& .MuiOutlinedInput-root":{color:"dark"===_.palette.mode?"#fff":"#000",backgroundColor:"rgba(255, 255, 255, 0.05)","& fieldset":{borderColor:"rgba(255, 255, 255, 0.2)"},"&:hover fieldset":{borderColor:"rgba(0, 255, 198, 0.5)"},"&.Mui-focused fieldset":{borderColor:"#00ffc6"}},"& .MuiInputLabel-root":{color:"dark"===_.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)"}}}),c.jsx(a,{type:"submit",fullWidth:!0,variant:"contained",size:"large",disabled:x,sx:{py:1.5,mt:1,backgroundColor:"#00ffc6",color:"#0a0a0a",fontSize:"16px",fontWeight:600,textTransform:"none",transition:"all 0.3s ease","&:hover":{backgroundColor:"#00d9a6",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(0, 255, 198, 0.4)"},"&:disabled":{backgroundColor:"rgba(0, 255, 198, 0.3)"}},children:x?c.jsx(B,{size:24}):m?"Create Account":"Sign In"}),c.jsxs(V,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[c.jsx(a,{variant:"text",size:"small",onClick:()=>p(!1),sx:{color:"dark"===_.palette.mode?"rgba(255, 255, 255, 0.7)":"rgba(0, 0, 0, 0.7)",textTransform:"none","&:hover":{color:"#00ffc6",backgroundColor:"transparent"}},children:"â† Back"}),c.jsx(a,{variant:"text",size:"small",onClick:()=>g(!m),sx:{color:"#00ffc6",textTransform:"none","&:hover":{backgroundColor:"rgba(0, 255, 198, 0.1)"}},children:m?"Already have an account?":"Don't have an account?"})]})]})}):c.jsxs(V,{spacing:2,children:[c.jsx(a,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>P("google"),disabled:x,startIcon:x?c.jsx(B,{size:20}):c.jsx(br,{}),sx:{py:1.5,backgroundColor:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"dark"===_.palette.mode?"#fff":"#000",fontSize:"16px",fontWeight:500,textTransform:"none",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.15)",borderColor:"#00ffc6",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(0, 255, 198, 0.3)"}},children:"Continue with Google"}),c.jsx(a,{fullWidth:!0,variant:"contained",size:"large",onClick:()=>P("facebook"),disabled:x,startIcon:x?c.jsx(B,{size:20}):c.jsx(jr,{}),sx:{py:1.5,backgroundColor:"rgba(24, 119, 242, 0.2)",backdropFilter:"blur(10px)",border:"1px solid rgba(24, 119, 242, 0.3)",color:"dark"===_.palette.mode?"#fff":"#000",fontSize:"16px",fontWeight:500,textTransform:"none",transition:"all 0.3s ease","&:hover":{backgroundColor:"rgba(24, 119, 242, 0.3)",borderColor:"#1877F2",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(24, 119, 242, 0.3)"}},children:"Continue with Facebook"}),c.jsxs(o,{sx:{position:"relative",my:2},children:[c.jsx(N,{sx:{borderColor:"rgba(255, 255, 255, 0.2)"}}),c.jsx(h,{variant:"caption",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",backgroundColor:"dark"===_.palette.mode?"#1a1a2e":"#f5f5f5",px:2,color:"dark"===_.palette.mode?"rgba(255, 255, 255, 0.6)":"rgba(0, 0, 0, 0.6)"},children:"or"})]}),c.jsx(a,{fullWidth:!0,variant:"outlined",size:"large",onClick:()=>p(!0),startIcon:c.jsx(le,{}),sx:{py:1.5,borderColor:"rgba(0, 255, 198, 0.5)",color:"#00ffc6",fontSize:"16px",fontWeight:500,textTransform:"none",transition:"all 0.3s ease","&:hover":{borderColor:"#00ffc6",backgroundColor:"rgba(0, 255, 198, 0.1)",transform:"translateY(-2px)",boxShadow:"0 4px 20px rgba(0, 255, 198, 0.2)"}},children:"Continue with Email"})]})]})})]})}function UE(){const e=As();return ks.useEffect(()=>{(async()=>{try{const r=new URLSearchParams(window.location.search);if(r.get("code"))return $f.info("Authorization code found, letting Supabase AuthContext handle PKCE exchange"),void setTimeout(()=>{window.history.replaceState({},document.title,window.location.pathname),e("/")},1500);const s=new URLSearchParams(window.location.hash.substring(1));let i=s.get("access_token"),n=s.get("refresh_token");if(!i||!n){const e=localStorage.getItem("supabase.auth.token");if(e)try{const t=JSON.parse(e);i=t.access_token,n=t.refresh_token,localStorage.removeItem("supabase.auth.token")}catch(t){$f.error("Error parsing stored tokens",{error:Mf(t)})}}if(i&&n){const{data:t,error:r}=await nl.auth.setSession({access_token:i,refresh_token:n});if(r)return $f.error("Auth callback error",{error:Mf(r)}),void e("/");if(t.session)return $f.info("Auth callback successful, user logged in"),window.history.replaceState({},document.title,window.location.pathname),void e("/")}const{data:{session:a},error:o}=await nl.auth.getSession();if(o)return $f.error("Auth callback error",{error:Mf(o)}),void e("/");a?($f.info("Existing session found"),e("/")):($f.info("No session found, redirecting to home"),e("/"))}catch(r){$f.error("Unexpected error during auth callback",{error:Mf(r)}),e("/")}})()},[e]),c.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:e=>e.palette.background.default},children:[c.jsx(B,{size:48,sx:{color:"#00ffc6",mb:2}}),c.jsx(h,{variant:"h6",sx:{color:"text.primary"},children:"Completing sign in..."})]})}function VE(){const e=As(),t=Es();return ks.useEffect(()=>{(async()=>{try{const r=new URLSearchParams(t.hash.substring(1)),s=r.get("access_token"),i=r.get("refresh_token");if(s&&i){const{data:t,error:r}=await nl.auth.setSession({access_token:s,refresh_token:i});if(r);else if(t.session)return window.history.replaceState({},document.title,window.location.pathname),void e("/")}e("/")}catch(r){e("/")}})()},[e,t.hash]),c.jsxs(o,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",backgroundColor:"background.default",color:"text.primary"},children:[c.jsx(B,{size:48,sx:{color:"#00ffc6",mb:2}}),c.jsx(h,{variant:"h6",children:"Processing authentication..."}),c.jsx(h,{variant:"body2",sx:{mt:1,opacity:.7},children:"Setting up your session"})]})}WE.displayName="SimpleLogin",UE.displayName="AuthCallback",VE.displayName="ManualAuthHandler";const qE=({open:e,onClose:t,onSuccess:r})=>{const{signInWithEmail:s,signInWithProvider:i,loading:n,error:l}=(()=>{const e=ks.useContext(wk);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e})(),[d,u]=ks.useState(!1),[p,m]=ks.useState(""),[g,x]=ks.useState(""),[y,v]=ks.useState(!1),[b,j]=ks.useState(null),w=async e=>{v(!0),j(null);try{await i(e,{redirectTo:window.location.href})}catch(t){j(t.message||"Authentication failed"),v(!1)}},_=n||y,k=l?.message||b;return c.jsxs(fe,{open:e,onClose:t,maxWidth:"sm",fullWidth:!0,PaperProps:{sx:{borderRadius:2,background:"linear-gradient(135deg, rgba(26,26,46,0.95) 0%, rgba(15,15,30,0.98) 100%)",backdropFilter:"blur(20px)",border:"1px solid rgba(123,66,246,0.2)"}},children:[c.jsxs(xe,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",color:"white"},children:[c.jsx(h,{variant:"h5",fontWeight:"bold",children:d?"Sign Up":"Sign In"}),c.jsx(f,{onClick:t,sx:{color:"white"},disabled:_,children:c.jsx(Ee,{})})]}),c.jsxs(ye,{sx:{color:"white"},children:[c.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Access full market intelligence and premium features"}),k&&c.jsx(R,{severity:"error",sx:{mb:3},children:k}),c.jsxs(o,{sx:{display:"flex",gap:2,mb:3},children:[c.jsx(a,{fullWidth:!0,variant:"outlined",startIcon:c.jsx(br,{}),onClick:()=>w("google"),disabled:_,sx:{borderColor:"rgba(255,255,255,0.3)",color:"white","&:hover":{borderColor:"#00ffc6",backgroundColor:"rgba(0,255,198,0.1)"}},children:"Google"}),c.jsx(a,{fullWidth:!0,variant:"outlined",startIcon:c.jsx($r,{}),onClick:()=>w("github"),disabled:_,sx:{borderColor:"rgba(255,255,255,0.3)",color:"white","&:hover":{borderColor:"#00ffc6",backgroundColor:"rgba(0,255,198,0.1)"}},children:"GitHub"})]}),c.jsx(N,{sx:{my:3,borderColor:"rgba(255,255,255,0.1)"},children:c.jsx(h,{variant:"body2",color:"text.secondary",children:"or continue with email"})}),c.jsxs(o,{component:"form",onSubmit:async e=>{e.preventDefault(),v(!0),j(null);try{await s(p,g),r?.(),t()}catch(i){j(i.message||"Authentication failed")}finally{v(!1)}},children:[c.jsx(Ge,{fullWidth:!0,label:"Email",type:"email",value:p,onChange:e=>m(e.target.value),required:!0,disabled:_,sx:{mb:2,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"},"&:hover fieldset":{borderColor:"#00ffc6"},"&.Mui-focused fieldset":{borderColor:"#00ffc6"}},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)","&.Mui-focused":{color:"#00ffc6"}}}}),c.jsx(Ge,{fullWidth:!0,label:"Password",type:"password",value:g,onChange:e=>x(e.target.value),required:!0,disabled:_,sx:{mb:3,"& .MuiOutlinedInput-root":{color:"white","& fieldset":{borderColor:"rgba(255,255,255,0.3)"},"&:hover fieldset":{borderColor:"#00ffc6"},"&.Mui-focused fieldset":{borderColor:"#00ffc6"}},"& .MuiInputLabel-root":{color:"rgba(255,255,255,0.7)","&.Mui-focused":{color:"#00ffc6"}}}}),c.jsx(a,{type:"submit",fullWidth:!0,variant:"contained",disabled:_||!p||!g,sx:{py:1.5,background:"linear-gradient(45deg, #7B42F6 30%, #00ffc6 90%)","&:hover":{background:"linear-gradient(45deg, #6B32E6 30%, #00e6b6 90%)"},"&:disabled":{background:"rgba(255,255,255,0.1)"}},children:_?c.jsx(B,{size:24,sx:{color:"white"}}):d?"Create Account":"Sign In"})]}),c.jsx(o,{sx:{textAlign:"center",mt:2},children:c.jsx(a,{onClick:()=>u(!d),disabled:_,sx:{color:"#00ffc6",textTransform:"none",fontSize:"0.9rem"},children:d?"Already have an account? Sign In":"Don't have an account? Sign Up"})})]})]})};qE.displayName="QuickLoginModal";const GE=s(a)(({theme:e})=>({background:"linear-gradient(45deg, #7B42F6 30%, #00ffc6 90%)",borderRadius:"20px",border:0,color:"white",height:48,padding:"0 30px",boxShadow:"0 3px 5px 2px rgba(123, 66, 246, .3)","&:hover":{background:"linear-gradient(45deg, #6B32E6 30%, #00e6b6 90%)",transform:"translateY(-2px)",boxShadow:"0 6px 10px 2px rgba(123, 66, 246, .4)"}})),HE=s(i,{shouldForwardProp:e=>"expanded"!==e})(({theme:e,expanded:t})=>({transition:"all 0.3s ease",cursor:"pointer","&:hover":{transform:"translateY(-4px)",boxShadow:"0 8px 16px rgba(0,0,0,0.1)"},...t&&{boxShadow:"0 8px 16px rgba(123, 66, 246, 0.2)"}})),KE=()=>{const[e,t]=ks.useState([]),[r,s]=ks.useState(!0),[i,l]=ks.useState(""),[u,p]=ks.useState(!1),[m,g]=ks.useState(new Set);ks.useEffect(()=>{x()},[]);const x=async()=>{try{const{data:e,error:r}=await nl.from("procedures").select("id, name, category_name, avg_price, market_size, growth_rate, description").order("market_size",{ascending:!1});if(r)throw r;const s=new Map;e?.forEach(e=>{const t=e.category_name||"Other";s.has(t)||s.set(t,{name:t,procedure_count:0,avg_price:0,total_market_size:0,procedures:[]});const r=s.get(t);r.procedures.push(e),r.procedure_count++,r.total_market_size+=e.market_size||0,r.avg_price=(r.avg_price*(r.procedure_count-1)+e.avg_price)/r.procedure_count});const i=Array.from(s.values()).sort((e,t)=>t.total_market_size-e.total_market_size);t(i)}catch(e){}finally{s(!1)}},y=e.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.procedures.some(e=>e.name.toLowerCase().includes(i.toLowerCase()))),w=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return c.jsxs(d,{maxWidth:"xl",sx:{py:4},children:[c.jsxs(o,{sx:{mb:4,textAlign:"center"},children:[c.jsx(h,{variant:"h3",gutterBottom:!0,sx:{fontWeight:"bold",color:"white"},children:"Aesthetic Procedures Market Intelligence"}),c.jsx(h,{variant:"h6",color:"text.secondary",sx:{mb:3},children:"Explore market data for aesthetic and cosmetic procedures"}),c.jsx(R,{severity:"info",sx:{mb:3,maxWidth:800,mx:"auto",background:"linear-gradient(135deg, rgba(123, 66, 246, 0.1) 0%, rgba(0, 255, 198, 0.1) 100%)",border:"1px solid rgba(123, 66, 246, 0.3)",color:"white","& .MuiAlert-message":{width:"100%"}},children:c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",width:"100%"},children:[c.jsx(h,{variant:"body1",children:"ðŸ”“ Public view - Sign in for detailed analytics and pricing insights"}),c.jsx(GE,{startIcon:c.jsx(Mr,{}),onClick:()=>p(!0),size:"small",children:"Sign In"})]})})]}),c.jsx(o,{sx:{mb:4,maxWidth:600,mx:"auto"},children:c.jsx(Ge,{fullWidth:!0,variant:"outlined",placeholder:"Search procedures or categories...",value:i,onChange:e=>l(e.target.value),InputProps:{startAdornment:c.jsx(He,{position:"start",children:c.jsx(Ce,{})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:"25px",backgroundColor:n("#ffffff",.1),"&:hover":{backgroundColor:n("#ffffff",.15)}}}})}),r?c.jsx(A,{container:!0,spacing:3,children:[1,2,3,4].map(e=>c.jsx(A,{item:!0,xs:12,children:c.jsx(Le,{variant:"rectangular",height:200})},e))}):c.jsx(A,{container:!0,spacing:3,children:y.map(e=>{const t=m.has(e.name),r=e.procedures.slice(0,3),s=e.procedures.length-3;return c.jsx(A,{item:!0,xs:12,children:c.jsxs(HE,{expanded:t,children:[c.jsxs(v,{onClick:()=>(e=>{const t=new Set(m);t.has(e)?t.delete(e):t.add(e),g(t)})(e.name),children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(ie,{color:"primary"}),c.jsx(h,{variant:"h5",fontWeight:"bold",children:e.name}),c.jsx(H,{label:`${e.procedure_count} procedures`,size:"small",color:"primary",variant:"outlined"})]}),c.jsx(f,{children:t?c.jsx(I,{}):c.jsx($,{})})]}),c.jsxs(A,{container:!0,spacing:2,sx:{mb:2},children:[c.jsx(A,{item:!0,xs:12,sm:4,children:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Market Size"}),c.jsx(h,{variant:"h6",fontWeight:"bold",children:(i=e.total_market_size,i>=1e9?`$${(i/1e9).toFixed(1)}B`:i>=1e6?`$${(i/1e6).toFixed(1)}M`:i>=1e3?`$${(i/1e3).toFixed(1)}K`:w(i))})]})}),c.jsx(A,{item:!0,xs:12,sm:4,children:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Average Price"}),c.jsx(h,{variant:"h6",fontWeight:"bold",children:w(e.avg_price)})]})}),c.jsx(A,{item:!0,xs:12,sm:4,children:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Top Procedure"}),c.jsx(h,{variant:"h6",fontWeight:"bold",children:r[0]?.name||"N/A"})]})})]}),c.jsxs(o,{sx:{mb:2},children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",sx:{mb:1},children:"Popular Procedures:"}),c.jsxs(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:[r.map(e=>c.jsx(H,{label:`${e.name} (${w(e.avg_price)})`,size:"small",icon:c.jsx(b,{})},e.id)),s>0&&c.jsx(H,{label:`+${s} more`,size:"small",color:"primary",variant:"outlined"})]})]})]}),c.jsx(M,{in:t,children:c.jsx(o,{sx:{px:2,pb:2},children:c.jsxs(j,{sx:{p:2,backgroundColor:n("#ffffff",.05)},children:[c.jsxs(h,{variant:"subtitle1",fontWeight:"bold",sx:{mb:2},children:["All Procedures in ",e.name]}),c.jsx(A,{container:!0,spacing:2,children:e.procedures.map((e,t)=>c.jsx(A,{item:!0,xs:12,sm:6,md:4,children:c.jsxs(o,{sx:{p:2,border:"1px solid",borderColor:"divider",borderRadius:1,backgroundColor:n("#ffffff",.03),...t>=5&&{opacity:.6,position:"relative"}},children:[c.jsx(h,{variant:"subtitle2",fontWeight:"medium",children:e.name}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mt:1},children:[c.jsxs(h,{variant:"body2",color:"text.secondary",children:["Price: ",t<5?w(e.avg_price):"***"]}),e.growth_rate&&c.jsx(H,{label:t<5?`+${e.growth_rate}%`:"+**%",size:"small",color:"success",icon:c.jsx($e,{})})]}),t>=5&&c.jsx(o,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:c.jsx(Rr,{fontSize:"small"})})]})},e.id))}),e.procedures.length>5&&c.jsx(R,{severity:"info",sx:{mt:2},action:c.jsx(a,{color:"inherit",size:"small",onClick:()=>p(!0),startIcon:c.jsx(ut,{}),children:"Unlock All"}),children:"Sign in to view detailed pricing and analytics for all procedures"})]})})})]})},e.name);var i})}),c.jsx(o,{sx:{textAlign:"center",mt:6},children:c.jsxs(j,{sx:{p:4,background:"linear-gradient(135deg, rgba(123, 66, 246, 0.1) 0%, rgba(0, 255, 198, 0.1) 100%)",border:"1px solid rgba(123, 66, 246, 0.3)"},children:[c.jsx(yt,{sx:{fontSize:48,color:"primary.main",mb:2}}),c.jsx(h,{variant:"h5",gutterBottom:!0,fontWeight:"bold",children:"Get Full Market Intelligence Access"}),c.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:3},children:"Unlock detailed analytics, pricing trends, competitive insights, and territory data for 500+ procedures"}),c.jsx(GE,{size:"large",startIcon:c.jsx(ut,{}),onClick:()=>p(!0),children:"Start Free Trial"})]})}),c.jsx(qE,{open:u,onClose:()=>p(!1),onSuccess:()=>window.location.reload()})]})};KE.displayName="PublicProceduresList";const YE=({isOpen:e,onClose:t})=>{const[r,s]=ks.useState(!1),[i]=ks.useState(!1),n=ks.useRef(null),a=ks.useRef(null),{signInWithProvider:o}=bk(),l=As();ks.useEffect(()=>{if(!e)return;DA.registerPlugin(),DA.from(n.current,{duration:.8,scale:.8,rotationX:10,rotationY:10,opacity:0,ease:"elastic.out(1, 0.5)",delay:.1});const t=n.current?.querySelectorAll(".screw");t&&t.length>0&&DA.from(t,{duration:.6,scale:0,rotation:-180,stagger:.15,ease:"back.out(1.7)",delay:.5});const r=n.current?.querySelectorAll(".power-node");r&&r.length>0&&DA.from(r,{duration:.4,scale:0,stagger:.1,ease:"power2.out",delay:.7});const s=n.current?.querySelectorAll(".social-btn");s?.forEach(e=>{const t=e=>{DA.to(e.target,{duration:.3,y:-2,ease:"power2.out"})},r=e=>{DA.to(e.target,{duration:.3,y:0,ease:"power2.out"})};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r)}});const i=n.current?.querySelectorAll(".screw");i?.forEach(e=>{const t=()=>{DA.to(e,{duration:.4,rotation:"+=360",ease:"power2.inOut"})};return e.addEventListener("mouseenter",t),()=>{e.removeEventListener("mouseenter",t)}});const a=n.current;if(!a)return;let o=a.getBoundingClientRect();const l=e=>{const t=e.clientX-o.left-o.width/2,r=(e.clientY-o.top-o.height/2)/o.height*5,s=-t/o.width*5;DA.to(a,{duration:.3,rotationX:r,rotationY:s,ease:"power2.out"})},c=()=>{DA.to(a,{duration:.5,rotationX:0,rotationY:0,ease:"power2.out"})};a.addEventListener("mousemove",l),a.addEventListener("mouseleave",c);const d=()=>{o=a.getBoundingClientRect()};return window.addEventListener("resize",d),()=>{a.removeEventListener("mousemove",l),a.removeEventListener("mouseleave",c),window.removeEventListener("resize",d)}},[e]),ks.useEffect(()=>{const t=t=>{"Escape"===t.key&&e&&d()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]);const d=()=>{DA.to(n.current,{duration:.4,scale:.8,opacity:0,ease:"power2.in",onComplete:()=>{t()}})};return e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"starfield",children:c.jsx("div",{className:"stars"})}),c.jsx("div",{className:"modal-overlay",ref:a,children:c.jsxs("div",{className:"login-modal",ref:n,children:[c.jsxs("div",{className:"power-rail",children:[c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"})]}),c.jsx("div",{className:"screw screw-tl",style:{"--screw-index":0}}),c.jsx("div",{className:"screw screw-tr",style:{"--screw-index":1}}),c.jsx("div",{className:"screw screw-bl",style:{"--screw-index":2}}),c.jsx("div",{className:"screw screw-br",style:{"--screw-index":3}}),c.jsx("button",{className:"close-btn","aria-label":"Close",onClick:d}),c.jsxs("div",{className:"logo-section",children:[c.jsx("div",{className:"logo-icon",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"sphereGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#9f58fa",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#4B96DC",stopOpacity:1}})]}),c.jsxs("radialGradient",{id:"jewelGradient",cx:"50%",cy:"50%",r:"50%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ffffff",stopOpacity:1}}),c.jsx("stop",{offset:"30%",style:{stopColor:"#ff00ff",stopOpacity:1}}),c.jsx("stop",{offset:"60%",style:{stopColor:"#00ffff",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff00aa",stopOpacity:.9}})]})]}),c.jsx("circle",{cx:"32",cy:"32",r:"24",fill:"none",stroke:"url(#sphereGradient)",strokeWidth:"3",opacity:"0.8"}),c.jsx("circle",{cx:"32",cy:"32",r:"16",fill:"none",stroke:"url(#sphereGradient)",strokeWidth:"2",opacity:"0.6"}),c.jsxs("circle",{cx:"32",cy:"32",r:"6",fill:"url(#jewelGradient)",className:"logo-jewel",children:[c.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"opacity",values:"0.8;1;0.8",dur:"3s",repeatCount:"indefinite"})]}),c.jsx("circle",{cx:"32",cy:"8",r:"3",fill:"#9f58fa",opacity:"0.8"}),c.jsx("circle",{cx:"56",cy:"32",r:"3",fill:"#4B96DC",opacity:"0.8"}),c.jsx("circle",{cx:"32",cy:"56",r:"3",fill:"#4bd48e",opacity:"0.8"}),c.jsx("circle",{cx:"8",cy:"32",r:"3",fill:"#00d4ff",opacity:"0.8"})]})}),c.jsx("h1",{className:"logo-title",children:"Secure Access"}),c.jsx("p",{className:"logo-subtitle",children:"RepSpheres Authentication Portal"})]}),c.jsxs("div",{className:"auth-section",children:[c.jsxs("button",{className:"social-btn google",onClick:async()=>{s(!0);try{await o("google")}catch(e){$f.error("Google auth error",{error:Mf(e)}),s(!1)}},disabled:r,children:[c.jsx("span",{className:"social-icon",children:c.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 48 48",children:[c.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),c.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),c.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),c.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"})]})}),c.jsx("span",{children:"Continue with Google"})]}),c.jsxs("button",{className:"social-btn facebook",onClick:async()=>{s(!0);try{await o("facebook")}catch(e){$f.error("Facebook auth error",{error:Mf(e)}),s(!1)}},disabled:r,children:[c.jsx("span",{className:"social-icon",children:c.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"white",children:c.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})}),c.jsx("span",{children:"Continue with Facebook"})]})]}),c.jsxs("div",{className:"divider",children:[c.jsx("span",{className:"divider-dot"}),c.jsx("span",{className:"divider-text",children:"OR"}),c.jsx("span",{className:"divider-dot"})]}),c.jsx("div",{className:"email-option",children:c.jsx("a",{href:"#",className:"email-link",onClick:e=>{e.preventDefault(),l("/login"),t()},children:"Advanced Access with Email"})}),c.jsxs("div",{className:"terms",children:["By continuing, you agree to our",c.jsx("br",{}),c.jsx("a",{href:"#",children:"Terms of Service"})," and ",c.jsx("a",{href:"#",children:"Privacy Policy"})]}),c.jsx("div",{className:"modal-footer",children:c.jsxs("div",{className:"security-text",children:[c.jsx("span",{className:"led-indicator"}),c.jsx("span",{children:"PROTECTED BY REPSPHERES SECURITY"}),c.jsx("span",{className:"led-indicator"}),c.jsx("span",{className:"led-indicator"})]})}),c.jsx("div",{className:"loading-overlay "+(r?"active":""),id:"loadingOverlay",children:c.jsxs("svg",{className:"loading-jewel",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[c.jsx("defs",{children:c.jsxs("radialGradient",{id:"loadingGradient",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ffffff",stopOpacity:1}}),c.jsx("stop",{offset:"30%",style:{stopColor:"#ff00ff",stopOpacity:1}}),c.jsx("stop",{offset:"60%",style:{stopColor:"#00ffff",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff00aa",stopOpacity:.9}})]})}),c.jsx("circle",{cx:"24",cy:"24",r:"20",fill:"none",stroke:"url(#loadingGradient)",strokeWidth:"4"}),c.jsx("circle",{cx:"24",cy:"24",r:"10",fill:"url(#loadingGradient)"})]})}),c.jsx("div",{className:"success-flare "+(i?"active":""),id:"successFlare",children:c.jsxs("svg",{viewBox:"0 0 200 200",children:[c.jsx("defs",{children:c.jsxs("radialGradient",{id:"flareGradient",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ff00ff",stopOpacity:1}}),c.jsx("stop",{offset:"50%",style:{stopColor:"#00ffff",stopOpacity:.5}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff00aa",stopOpacity:0}})]})}),c.jsx("path",{d:"M100,0 L110,90 L200,100 L110,110 L100,200 L90,110 L0,100 L90,90 Z",fill:"url(#flareGradient)"})]})})]})})]}):null};YE.displayName="LoginModal";const JE=({isOpen:e,onClose:t,onSuccess:r})=>{const[s,i]=ks.useState(!1),[n,a]=ks.useState(!1),[o,l]=ks.useState(""),[d,h]=ks.useState(""),[u,p]=ks.useState(""),[m,g]=ks.useState(""),f=ks.useRef(null),x=ks.useRef(null),{signUpWithEmail:y,signInWithProvider:v}=bk(),b=As();ks.useEffect(()=>{if(!e)return;DA.registerPlugin(),f.current&&DA.from(f.current,{duration:.8,scale:.8,rotationX:10,rotationY:10,opacity:0,ease:"elastic.out(1, 0.5)",delay:.1});const t=f.current?.querySelectorAll(".screw");t&&t.length>0&&DA.from(t,{duration:.6,scale:0,rotation:-180,stagger:.15,ease:"back.out(1.7)",delay:.5});const r=f.current?.querySelectorAll(".power-node");r&&r.length>0&&DA.from(r,{duration:.4,scale:0,stagger:.1,ease:"power2.out",delay:.7});const s=f.current?.querySelectorAll(".form-input");s?.forEach(e=>{const t=e=>{DA.to(e.target,{duration:.3,scale:1.02,ease:"power2.out"})},r=e=>{DA.to(e.target,{duration:.3,scale:1,ease:"power2.out"})};return e.addEventListener("focus",t),e.addEventListener("blur",r),()=>{e.removeEventListener("focus",t),e.removeEventListener("blur",r)}});const i=f.current?.querySelectorAll(".social-btn, .submit-btn");i?.forEach(e=>{const t=e=>{DA.to(e.target,{duration:.3,y:-1.5,ease:"power2.out"})},r=e=>{DA.to(e.target,{duration:.3,y:0,ease:"power2.out"})};return e.addEventListener("mouseenter",t),e.addEventListener("mouseleave",r),()=>{e.removeEventListener("mouseenter",t),e.removeEventListener("mouseleave",r)}});const n=f.current?.querySelectorAll(".screw");n?.forEach(e=>{const t=()=>{DA.to(e,{duration:.4,rotation:"+=360",ease:"power2.inOut"})};return e.addEventListener("mouseenter",t),()=>{e.removeEventListener("mouseenter",t)}});const a=f.current;if(!a)return;let o=a.getBoundingClientRect();const l=e=>{const t=e.clientX-o.left-o.width/2,r=(e.clientY-o.top-o.height/2)/o.height*5,s=-t/o.width*5;DA.to(a,{duration:.3,rotationX:r,rotationY:s,ease:"power2.out"})},c=()=>{DA.to(a,{duration:.5,rotationX:0,rotationY:0,ease:"power2.out"})};a.addEventListener("mousemove",l),a.addEventListener("mouseleave",c);const d=()=>{o=a.getBoundingClientRect()};return window.addEventListener("resize",d),()=>{a.removeEventListener("mousemove",l),a.removeEventListener("mouseleave",c),window.removeEventListener("resize",d)}},[e]),ks.useEffect(()=>{const t=t=>{"Escape"===t.key&&e&&j()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]);const j=()=>{DA.to(f.current,{duration:.4,scale:.8,opacity:0,ease:"power2.in",onComplete:()=>{t(),l(""),h(""),p(""),g("")}})};return e?c.jsxs(c.Fragment,{children:[c.jsx("div",{className:"starfield",children:c.jsx("div",{className:"stars"})}),c.jsx("div",{className:"modal-overlay",ref:x,children:c.jsxs("div",{className:"signup-modal",ref:f,children:[c.jsxs("div",{className:"power-rail",children:[c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"}),c.jsx("div",{className:"power-node"})]}),c.jsx("div",{className:"screw screw-tl",style:{"--screw-index":0}}),c.jsx("div",{className:"screw screw-tr",style:{"--screw-index":1}}),c.jsx("div",{className:"screw screw-bl",style:{"--screw-index":2}}),c.jsx("div",{className:"screw screw-br",style:{"--screw-index":3}}),c.jsx("button",{className:"close-btn","aria-label":"Close",onClick:j}),c.jsxs("div",{className:"logo-section",children:[c.jsx("div",{className:"logo-icon",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"sphereGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ff00aa",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#00d4ff",stopOpacity:1}})]}),c.jsxs("radialGradient",{id:"jewelGradient",cx:"50%",cy:"50%",r:"50%",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ffffff",stopOpacity:1}}),c.jsx("stop",{offset:"30%",style:{stopColor:"#ff00aa",stopOpacity:1}}),c.jsx("stop",{offset:"60%",style:{stopColor:"#00ffff",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff00ff",stopOpacity:.9}})]})]}),c.jsx("circle",{cx:"32",cy:"32",r:"24",fill:"none",stroke:"url(#sphereGradient)",strokeWidth:"3",opacity:"0.8"}),c.jsx("circle",{cx:"32",cy:"32",r:"16",fill:"none",stroke:"url(#sphereGradient)",strokeWidth:"2",opacity:"0.6"}),c.jsxs("circle",{cx:"32",cy:"32",r:"6",fill:"url(#jewelGradient)",className:"logo-jewel",children:[c.jsx("animate",{attributeName:"r",values:"6;8;6",dur:"3s",repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"opacity",values:"0.8;1;0.8",dur:"3s",repeatCount:"indefinite"})]}),c.jsx("circle",{cx:"32",cy:"8",r:"3",fill:"#ff00aa",opacity:"0.8"}),c.jsx("circle",{cx:"56",cy:"32",r:"3",fill:"#00d4ff",opacity:"0.8"}),c.jsx("circle",{cx:"32",cy:"56",r:"3",fill:"#4bd48e",opacity:"0.8"}),c.jsx("circle",{cx:"8",cy:"32",r:"3",fill:"#9f58fa",opacity:"0.8"})]})}),c.jsx("h1",{className:"logo-title",children:"Create Account"}),c.jsx("p",{className:"logo-subtitle",children:"Join the RepSpheres Network"})]}),c.jsx("div",{className:"form-section",children:c.jsxs("form",{id:"signupForm",onSubmit:async e=>{if(e.preventDefault(),g(""),d===u)if(d.length<6)g("Password must be at least 6 characters");else{i(!0);try{await y(o,d),a(!0),setTimeout(()=>{a(!1),r?.(),t()},800)}catch(s){$f.error("Signup error",{error:Mf(s)}),g(s.message||"Failed to create account"),i(!1)}}else g("Passwords do not match")},children:[c.jsx("input",{type:"email",className:"form-input",placeholder:"Email address",value:o,onChange:e=>l(e.target.value),required:!0}),c.jsx("input",{type:"password",className:"form-input",placeholder:"Password",value:d,onChange:e=>h(e.target.value),required:!0}),c.jsx("input",{type:"password",className:"form-input",placeholder:"Confirm password",value:u,onChange:e=>p(e.target.value),required:!0}),m&&c.jsx("div",{className:"error-message",children:m}),c.jsx("button",{type:"submit",className:"submit-btn",disabled:s,children:"Create Account"})]})}),c.jsx("div",{className:"divider",children:c.jsx("span",{className:"divider-text",children:"OR SIGN UP WITH"})}),c.jsx("div",{className:"auth-section",children:c.jsxs("button",{className:"social-btn google",onClick:async()=>{i(!0);try{await v("google")}catch(e){$f.error("Google signup error",{error:Mf(e)}),i(!1)}},disabled:s,children:[c.jsx("span",{className:"social-icon",children:c.jsxs("svg",{width:"15",height:"15",viewBox:"0 0 48 48",children:[c.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),c.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),c.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),c.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"})]})}),c.jsx("span",{children:"Continue with Google"})]})}),c.jsx("div",{className:"login-link",children:c.jsx("a",{href:"#",onClick:e=>{e.preventDefault(),t(),b("/login")},children:"Already have an account? Sign in"})}),c.jsx("div",{className:"modal-footer",children:c.jsxs("div",{className:"security-text",children:[c.jsx("span",{className:"led-indicator"}),c.jsx("span",{children:"SECURE ACCOUNT CREATION"}),c.jsx("span",{className:"led-indicator"}),c.jsx("span",{className:"led-indicator"})]})}),c.jsx("div",{className:"loading-overlay "+(s?"active":""),id:"loadingOverlay",children:c.jsxs("svg",{className:"loading-jewel",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[c.jsx("defs",{children:c.jsxs("radialGradient",{id:"loadingGradient",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ffffff",stopOpacity:1}}),c.jsx("stop",{offset:"30%",style:{stopColor:"#ff00aa",stopOpacity:1}}),c.jsx("stop",{offset:"60%",style:{stopColor:"#00ffff",stopOpacity:1}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff00ff",stopOpacity:.9}})]})}),c.jsx("circle",{cx:"24",cy:"24",r:"20",fill:"none",stroke:"url(#loadingGradient)",strokeWidth:"4"}),c.jsx("circle",{cx:"24",cy:"24",r:"10",fill:"url(#loadingGradient)"})]})}),c.jsx("div",{className:"success-flare "+(n?"active":""),id:"successFlare",children:c.jsxs("svg",{viewBox:"0 0 200 200",children:[c.jsx("defs",{children:c.jsxs("radialGradient",{id:"flareGradient",children:[c.jsx("stop",{offset:"0%",style:{stopColor:"#ff00aa",stopOpacity:1}}),c.jsx("stop",{offset:"50%",style:{stopColor:"#00ffff",stopOpacity:.5}}),c.jsx("stop",{offset:"100%",style:{stopColor:"#ff00ff",stopOpacity:0}})]})}),c.jsx("path",{d:"M100,0 L110,90 L200,100 L110,110 L100,200 L90,110 L0,100 L90,90 Z",fill:"url(#flareGradient)"})]})})]})})]}):null};JE.displayName="SignUpModal";const XE=({customLinks:e=[],logoHref:t="/"})=>{const[r,s]=ks.useState(!1),[i,n]=ks.useState(!1),[a,o]=ks.useState(0),[l,d]=ks.useState(!1),[h,u]=ks.useState(!1),[p,m]=ks.useState(!1),{user:g}=bk(),f=Es(),x=e.length>0?e:[{href:"https://marketdata.repspheres.com/",label:"Market Data",icon:"market",external:!0},{href:"/",label:"Canvas",icon:"canvas"},{href:"#pipeline",label:"Pipeline",icon:"pipeline"},{href:"https://crm.repspheres.com/",label:"CRM",icon:"sphere",external:!0},{href:"https://workshop-homepage.netlify.app/?page=podcast",label:"Podcasts",icon:"podcasts",external:!0}],y=["â± AI SYNC 97%","ðŸ”— NEURAL LINK ACTIVE","âš¡ QUANTUM CORE 100%","ðŸ“Š DATA STREAM LIVE","ðŸ›¡ï¸ SECURITY OPTIMAL","ðŸŒ NETWORK STABLE","ðŸ’Ž GEMS ALIGNED","ðŸ”® PREDICTION MODE"];ks.useEffect(()=>{const e=()=>{s(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),ks.useEffect(()=>{const e=setInterval(()=>{o(e=>(e+1)%y.length)},5e3);return()=>clearInterval(e)},[]),ks.useEffect(()=>(document.body.style.overflow=i?"hidden":"",()=>{document.body.style.overflow=""}),[i]);const v=(e,t)=>{if(t.startsWith("#")){e.preventDefault();const r=document.querySelector(t);r&&r.scrollIntoView({behavior:"smooth"})}n(!1)},b=()=>{d(!0)},j=()=>{m(!0)},w=()=>{u(!0)};return c.jsxs(c.Fragment,{children:[c.jsxs("div",{className:"repspheres-header-container "+(r?"scrolled":""),children:[c.jsxs("nav",{className:"repspheres-nav-container",children:[c.jsx("div",{className:"nav-edge left-edge"}),c.jsx("div",{className:"nav-edge right-edge"}),c.jsxs("div",{className:"nav-screws",children:[c.jsx("div",{className:"screw-wrapper screw-wrapper-top-left",children:c.jsx("div",{className:"screw",children:c.jsx("div",{className:"screw-jewel"})})}),c.jsx("div",{className:"screw-wrapper screw-wrapper-top-right",children:c.jsx("div",{className:"screw",children:c.jsx("div",{className:"screw-jewel"})})}),c.jsx("div",{className:"screw-wrapper screw-wrapper-bot-left",children:c.jsx("div",{className:"screw",children:c.jsx("div",{className:"screw-jewel"})})}),c.jsx("div",{className:"screw-wrapper screw-wrapper-bot-right",children:c.jsx("div",{className:"screw",children:c.jsx("div",{className:"screw-jewel"})})})]}),c.jsxs("div",{className:"nav-inner",children:[c.jsxs(Is,{to:t,className:"nav-logo",children:[c.jsx("div",{className:"nav-logo-icon",children:c.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"sphereGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:"#9f58fa"}),c.jsx("stop",{offset:"100%",stopColor:"#4B96DC"})]}),c.jsxs("radialGradient",{id:"jewelGradient",cx:"50%",cy:"50%",r:"50%",children:[c.jsx("stop",{offset:"0%",stopColor:"#fff",stopOpacity:"1"}),c.jsx("stop",{offset:"30%",stopColor:"#ff00ff",stopOpacity:"1"}),c.jsx("stop",{offset:"60%",stopColor:"#00ffff",stopOpacity:"1"}),c.jsx("stop",{offset:"100%",stopColor:"#ff00aa",stopOpacity:"0.9"})]}),c.jsxs("filter",{id:"glowTrail",children:[c.jsx("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"0.6",result:"blur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"blur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),c.jsx("circle",{cx:"16",cy:"16",r:"12",fill:"none",stroke:"url(#sphereGradient)",strokeWidth:"2",opacity:"0.8"}),c.jsx("circle",{cx:"16",cy:"16",r:"8",fill:"none",stroke:"url(#sphereGradient)",strokeWidth:"1.5",opacity:"0.5"}),c.jsxs("circle",{cx:"16",cy:"16",r:"3",fill:"url(#jewelGradient)",children:[c.jsx("animate",{attributeName:"r",values:"3;4;3",dur:"2s",repeatCount:"indefinite"}),c.jsx("animate",{attributeName:"opacity",values:"0.8;1;0.8",dur:"2s",repeatCount:"indefinite"})]}),c.jsx("circle",{cx:"16",cy:"4",r:"1.5",fill:"#9f58fa",filter:"url(#glowTrail)",children:c.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"6s",repeatCount:"indefinite"})}),c.jsx("circle",{cx:"28",cy:"16",r:"1.5",fill:"#4B96DC",filter:"url(#glowTrail)",children:c.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"8s",repeatCount:"indefinite"})}),c.jsx("circle",{cx:"16",cy:"28",r:"1.5",fill:"#4bd48e",filter:"url(#glowTrail)",children:c.jsx("animateTransform",{attributeName:"transform",type:"rotate",from:"0 16 16",to:"360 16 16",dur:"10s",repeatCount:"indefinite"})})]})}),c.jsx("span",{className:"nav-logo-text",children:"RepSpheres"})]}),c.jsx("nav",{className:"nav-links",children:x.map((e,t)=>e.external?c.jsxs("a",{href:e.href,className:"nav-link",target:"_blank",rel:"noopener noreferrer",children:[c.jsx("span",{className:`nav-link-icon icon-${e.icon}`}),c.jsx("span",{children:e.label})]},t):c.jsxs(Is,{to:e.href,className:"nav-link "+(f.pathname===e.href?"active":""),onClick:t=>v(t,e.href),children:[c.jsx("span",{className:`nav-link-icon icon-${e.icon}`}),c.jsx("span",{children:e.label})]},t))}),c.jsxs("div",{className:"nav-actions",children:[g?c.jsx("button",{className:"nav-cta",onClick:w,children:"Sign Out"}):c.jsxs(c.Fragment,{children:[c.jsx("button",{className:"nav-cta-secondary",onClick:b,children:"Login"}),c.jsx("button",{className:"nav-cta",onClick:j,children:"Sign Up"})]}),c.jsx("button",{className:"nav-more","aria-label":"More options",children:c.jsxs("div",{className:"nav-more-icon",children:[c.jsx("span",{className:"nav-more-dot"}),c.jsx("span",{className:"nav-more-dot"}),c.jsx("span",{className:"nav-more-dot"})]})}),c.jsx("button",{className:"nav-hamburger "+(i?"active":""),onClick:()=>n(!i),"aria-label":"Toggle menu",children:c.jsxs("div",{className:"hamburger-icon",children:[c.jsx("span",{className:"hamburger-line"}),c.jsx("span",{className:"hamburger-line"}),c.jsx("span",{className:"hamburger-line"})]})})]})]})]}),c.jsx("div",{className:"telemetry-container",children:c.jsx("div",{className:"telemetry-rail-system",children:c.jsxs("div",{className:"telemetry-rail-wrapper unified",children:[c.jsx("div",{className:"telemetry-node left"}),c.jsx("div",{className:"telemetry-status-inline",children:y[a]}),c.jsx("div",{className:"telemetry-node right"})]})})})]}),c.jsx("div",{className:"mobile-menu-overlay "+(i?"active":""),onClick:e=>{e.target.classList.contains("mobile-menu-overlay")&&n(!1)},children:c.jsx("div",{className:"mobile-menu",children:c.jsxs("nav",{className:"mobile-menu-links",children:[x.map((e,t)=>e.external?c.jsxs("a",{href:e.href,className:"mobile-menu-link",target:"_blank",rel:"noopener noreferrer",onClick:()=>n(!1),children:[c.jsx("span",{className:`nav-link-icon icon-${e.icon}`}),c.jsx("span",{children:e.label})]},t):c.jsxs(Is,{to:e.href,className:"mobile-menu-link",onClick:t=>v(t,e.href),children:[c.jsx("span",{className:`nav-link-icon icon-${e.icon}`}),c.jsx("span",{children:e.label})]},t)),g?c.jsxs("button",{className:"mobile-menu-link",onClick:()=>{w(),n(!1)},children:[c.jsx("span",{className:"nav-link-icon icon-logout"}),c.jsx("span",{children:"Sign Out"})]}):c.jsxs(c.Fragment,{children:[c.jsxs("button",{className:"mobile-menu-link",onClick:()=>{b(),n(!1)},children:[c.jsx("span",{className:"nav-link-icon icon-login"}),c.jsx("span",{children:"Login"})]}),c.jsxs("button",{className:"mobile-menu-link",onClick:()=>{j(),n(!1)},children:[c.jsx("span",{className:"nav-link-icon icon-signup"}),c.jsx("span",{children:"Sign Up"})]})]})]})})}),c.jsx(YE,{isOpen:l,onClose:()=>d(!1),onSuccess:()=>{d(!1),window.location.reload()}}),c.jsx(JE,{isOpen:p,onClose:()=>m(!1),onSuccess:()=>{m(!1),window.location.reload()}}),c.jsx(zA,{isOpen:h,onClose:()=>u(!1),onSuccess:()=>{u(!1),window.location.reload()}})]})};XE.displayName="RepSpheresNavBar";const QE=({title:e,value:t,change:r,icon:s,color:n,subtitle:a})=>{const d=l();return c.jsx(xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:c.jsx(i,{sx:{height:"100%",background:`linear-gradient(135deg, ${n}15 0%, ${n}05 100%)`,borderLeft:`4px solid ${n}`,"&:hover":{transform:"translateY(-4px)",boxShadow:d.shadows[8]},transition:"all 0.3s ease"},children:c.jsxs(v,{children:[c.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:2,children:[c.jsx(X,{sx:{backgroundColor:n,width:56,height:56},children:s}),void 0!==r&&c.jsx(H,{icon:r>0?c.jsx($e,{}):c.jsx(xt,{}),label:`${r>0?"+":""}${r}%`,size:"small",sx:{backgroundColor:r>0?d.palette.success.light:d.palette.error.light,color:r>0?d.palette.success.dark:d.palette.error.dark}})]}),c.jsx(h,{variant:"h4",fontWeight:"bold",gutterBottom:!0,children:t}),c.jsx(h,{variant:"subtitle1",color:"text.secondary",children:e}),a&&c.jsx(h,{variant:"caption",color:"text.secondary",children:a})]})})})},ZE=({name:e,type:t,lastVisit:r,health:s,revenue:n,nextAction:a})=>{const d=l(),u={good:d.palette.success.main,warning:d.palette.warning.main,"at-risk":d.palette.error.main};return c.jsx(i,{sx:{cursor:"pointer","&:hover":{boxShadow:d.shadows[4],transform:"scale(1.02)"},transition:"all 0.2s ease"},children:c.jsxs(v,{children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2,children:[c.jsxs(o,{children:[c.jsx(h,{variant:"h6",fontWeight:"bold",children:e}),c.jsx(h,{variant:"body2",color:"text.secondary",children:t})]}),c.jsx(H,{size:"small",label:s,sx:{backgroundColor:`${u[s]}20`,color:u[s],fontWeight:"bold"}})]}),c.jsxs(V,{spacing:1,children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Last Visit"}),c.jsx(h,{variant:"body2",fontWeight:"medium",children:r})]}),c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:"Revenue (YTD)"}),c.jsxs(h,{variant:"body2",fontWeight:"medium",children:["$",n.toLocaleString()]})]})]}),c.jsx(N,{sx:{my:2}}),c.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[c.jsx(_e,{fontSize:"small",color:"primary"}),c.jsx(h,{variant:"body2",color:"primary",children:a})]}),c.jsxs(o,{display:"flex",justifyContent:"space-around",mt:2,children:[c.jsx(f,{size:"small",color:"primary",children:c.jsx(oe,{fontSize:"small"})}),c.jsx(f,{size:"small",color:"primary",children:c.jsx(le,{fontSize:"small"})}),c.jsx(f,{size:"small",color:"primary",children:c.jsx(Xe,{fontSize:"small"})}),c.jsx(f,{size:"small",color:"primary",children:c.jsx(pe,{fontSize:"small"})})]})]})})},eI=({title:e,account:t,value:r,probability:s,daysLeft:i})=>{const n=l();return c.jsx(j,{sx:{p:2,mb:2,borderLeft:`4px solid ${n.palette.primary.main}`,"&:hover":{backgroundColor:n.palette.action.hover},cursor:"pointer"},children:c.jsx(o,{display:"flex",justifyContent:"space-between",alignItems:"start",children:c.jsxs(o,{flex:1,children:[c.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:e}),c.jsx(h,{variant:"body2",color:"text.secondary",children:t}),c.jsxs(o,{display:"flex",gap:2,mt:1,children:[c.jsx(H,{size:"small",label:`$${(r/1e3).toFixed(0)}k`,icon:c.jsx(b,{fontSize:"small"})}),c.jsx(H,{size:"small",label:`${s}% likely`,color:s>=70?"success":s>=40?"warning":"default"}),c.jsx(H,{size:"small",label:`${i}d left`,color:i<=7?"error":"default"})]})]})})})},tI=()=>{const e=l(),t=rt(e.breakpoints.down("sm")),[r,s]=ks.useState(0),n=[{title:"Revenue (QTD)",value:"$342,500",change:12,icon:c.jsx(b,{}),color:e.palette.success.main,subtitle:"68% of quota"},{title:"Pipeline Value",value:"$1.2M",change:8,icon:c.jsx(Or,{}),color:e.palette.primary.main,subtitle:"42 opportunities"},{title:"Win Rate",value:"32%",change:-3,icon:c.jsx(D,{}),color:e.palette.warning.main,subtitle:"Last 30 days"},{title:"Activities",value:"142",change:15,icon:c.jsx(Ie,{}),color:e.palette.info.main,subtitle:"This week"}];return c.jsxs(o,{sx:{p:t?2:3},children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[c.jsxs(o,{children:[c.jsx(h,{variant:"h4",fontWeight:"bold",children:"Sales Dashboard"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Welcome back, Sarah! Here's your performance overview."})]}),c.jsxs(V,{direction:"row",spacing:1,children:[c.jsx(Ke,{badgeContent:3,color:"error",children:c.jsx(f,{children:c.jsx(Dr,{})})}),c.jsx(a,{variant:"contained",startIcon:c.jsx(x,{}),sx:{background:`linear-gradient(135deg, ${e.palette.primary.main} 0%, ${e.palette.primary.dark} 100%)`},children:"Territory Map"})]})]}),c.jsx(A,{container:!0,spacing:3,mb:4,children:n.map((e,t)=>c.jsx(A,{item:!0,xs:12,sm:6,md:3,children:c.jsx(QE,{...e})},t))}),c.jsx(j,{sx:{mb:3},children:c.jsxs(w,{value:r,onChange:(e,t)=>s(t),variant:"scrollable",scrollButtons:"auto",children:[c.jsx(_,{label:"Top Accounts",icon:c.jsx(ut,{}),iconPosition:"start"}),c.jsx(_,{label:"Hot Opportunities",icon:c.jsx($e,{}),iconPosition:"start"}),c.jsx(_,{label:"Territory Insights",icon:c.jsx(It,{}),iconPosition:"start"}),c.jsx(_,{label:"Team Performance",icon:c.jsx(At,{}),iconPosition:"start"})]})}),0===r&&c.jsx(A,{container:!0,spacing:3,children:[{name:"Smile Dental Group",type:"Dental Chain",lastVisit:"3 days ago",health:"good",revenue:125e3,nextAction:"Follow up on implant systems quote"},{name:"Aesthetic Med Spa",type:"Medical Spa",lastVisit:"2 weeks ago",health:"warning",revenue:85e3,nextAction:"Schedule Botox training session"},{name:"Downtown Dental",type:"Private Practice",lastVisit:"1 month ago",health:"at-risk",revenue:45e3,nextAction:"Urgent: Address service complaints"}].map((e,t)=>c.jsx(A,{item:!0,xs:12,md:4,children:c.jsx(ZE,{...e})},t))}),1===r&&c.jsxs(o,{children:[c.jsx(h,{variant:"h6",fontWeight:"bold",mb:2,children:"Opportunities Requiring Attention"}),[{title:"Invisalign System Upgrade",account:"Smile Dental Group",value:85e3,probability:80,daysLeft:5},{title:"Dermal Filler Package",account:"Beverly Hills Aesthetics",value:45e3,probability:60,daysLeft:12},{title:"Digital X-Ray System",account:"Family Dental Care",value:12e4,probability:40,daysLeft:20}].map((e,t)=>c.jsx(eI,{...e},t)),c.jsx(a,{variant:"outlined",fullWidth:!0,sx:{mt:2},children:"View All Opportunities"})]}),2===r&&c.jsxs(o,{children:[c.jsx(h,{variant:"h6",fontWeight:"bold",mb:2,children:"Territory Performance Map"}),c.jsx(i,{sx:{height:400,display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(h,{color:"text.secondary",children:"Interactive territory map will be displayed here"})})]}),3===r&&c.jsxs(o,{children:[c.jsx(h,{variant:"h6",fontWeight:"bold",mb:2,children:"Team Leaderboard"}),c.jsx(i,{sx:{p:3},children:c.jsx(h,{color:"text.secondary",children:"Team performance metrics and rankings"})})]})]})};tI.displayName="SalesDashboard";const rI=({icon:e,label:t,color:r,onClick:s})=>{const n=l();return c.jsx(xf.div,{whileTap:{scale:.95},initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.2},children:c.jsxs(i,{sx:{p:2,textAlign:"center",cursor:"pointer",background:`linear-gradient(135deg, ${r}15 0%, ${r}05 100%)`,borderTop:`3px solid ${r}`,"&:hover":{transform:"translateY(-4px)",boxShadow:n.shadows[4]},transition:"all 0.3s ease"},onClick:s,children:[c.jsx(X,{sx:{backgroundColor:r,width:48,height:48,margin:"0 auto",mb:1},children:e}),c.jsx(h,{variant:"body2",fontWeight:"medium",children:t})]})})},sI=({isRecording:e,onToggle:t})=>{const r=l(),[s,i]=ks.useState(0);Cs.useEffect(()=>{if(e){const e=setInterval(()=>{i(e=>e+1)},1e3);return()=>clearInterval(e)}},[e]);return c.jsxs(j,{sx:{p:2,background:e?`linear-gradient(135deg, ${r.palette.error.light}20 0%, ${r.palette.error.light}10 100%)`:r.palette.background.paper,border:e?`2px solid ${r.palette.error.main}`:"none"},children:[c.jsxs(o,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[c.jsxs(o,{display:"flex",alignItems:"center",gap:2,children:[c.jsx(f,{onClick:t,sx:{backgroundColor:e?r.palette.error.main:r.palette.primary.main,color:"white","&:hover":{backgroundColor:e?r.palette.error.dark:r.palette.primary.dark}},children:c.jsx(m,{})}),c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle1",fontWeight:"bold",children:e?"Recording...":"Voice Note"}),e&&c.jsx(h,{variant:"body2",color:"error",children:(n=s,`${Math.floor(n/60)}:${(n%60).toString().padStart(2,"0")}`)})]})]}),e&&c.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[c.jsx(o,{sx:{width:8,height:8,borderRadius:"50%",backgroundColor:r.palette.error.main,animation:"pulse 1.5s infinite","@keyframes pulse":{"0%":{opacity:1},"50%":{opacity:.5},"100%":{opacity:1}}}}),c.jsx(h,{variant:"caption",color:"error",children:"REC"})]})]}),!e&&c.jsx(h,{variant:"body2",color:"text.secondary",mt:1,children:"Tap to record meeting notes"})]});var n},iI=()=>{l();const[e,t]=ks.useState([{procedure:"Botox (50 units)",quantity:1,price:500},{procedure:"Dermal Filler",quantity:2,price:600}]),r=e.reduce((e,t)=>e+t.quantity*t.price,0);return c.jsx(i,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",fontWeight:"bold",mb:2,children:"Quick Quote Generator"}),c.jsx(K,{children:e.map((e,t)=>c.jsxs(Y,{sx:{px:0},children:[c.jsx(Q,{primary:e.procedure,secondary:`Qty: ${e.quantity}`}),c.jsxs(h,{variant:"subtitle1",fontWeight:"bold",children:["$",(e.quantity*e.price).toLocaleString()]})]},t))}),c.jsx(N,{sx:{my:2}}),c.jsxs(o,{display:"flex",justifyContent:"space-between",mb:2,children:[c.jsx(h,{variant:"h6",children:"Total"}),c.jsxs(h,{variant:"h6",color:"primary",fontWeight:"bold",children:["$",r.toLocaleString()]})]}),c.jsxs(V,{spacing:1,children:[c.jsx(a,{variant:"contained",fullWidth:!0,startIcon:c.jsx(le,{}),children:"Email Quote"}),c.jsx(a,{variant:"outlined",fullWidth:!0,startIcon:c.jsx(Vr,{}),children:"Generate PDF"})]})]})})},nI=()=>{const e=l(),[t,r]=ks.useState(!1),[s,i]=ks.useState(!1),[n,a]=ks.useState(!1),[d,u]=ks.useState(!1),x=[{icon:c.jsx(m,{}),name:"Voice Note",color:e.palette.error.main},{icon:c.jsx(rr,{}),name:"Photo",color:e.palette.info.main},{icon:c.jsx(zr,{}),name:"Quote",color:e.palette.success.main},{icon:c.jsx(Lr,{}),name:"Calculator",color:e.palette.warning.main},{icon:c.jsx(It,{}),name:"Check-in",color:e.palette.primary.main}],y=[{icon:c.jsx(oe,{}),label:"Call Client",color:e.palette.primary.main,onClick:()=>{}},{icon:c.jsx(Fr,{}),label:"Demo Mode",color:e.palette.success.main,onClick:()=>u(!0)},{icon:c.jsx(Br,{}),label:"Sync Data",color:e.palette.info.main,onClick:()=>{}},{icon:c.jsx(Nr,{}),label:"Briefcase",color:e.palette.warning.main,onClick:()=>a(!0)}];return c.jsxs(c.Fragment,{children:[c.jsxs(o,{sx:{p:2,pb:10},children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[c.jsxs(o,{children:[c.jsx(h,{variant:"h5",fontWeight:"bold",children:"Field Tools"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Everything you need on the go"})]}),c.jsxs(V,{direction:"row",spacing:1,alignItems:"center",children:[c.jsx(H,{icon:t?c.jsx(Wr,{}):c.jsx(Ur,{}),label:t?"Offline":"Online",size:"small",color:t?"error":"success"}),c.jsx(p,{control:c.jsx(g,{checked:t,onChange:e=>r(e.target.checked),size:"small"}),label:""})]})]}),c.jsx(o,{mb:3,children:c.jsx(sI,{isRecording:s,onToggle:()=>i(!s)})}),c.jsxs(o,{mb:3,children:[c.jsx(h,{variant:"subtitle1",fontWeight:"bold",mb:2,children:"Quick Actions"}),c.jsx(o,{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:2,children:y.map((e,t)=>c.jsx(rI,{...e},t))})]}),c.jsxs(o,{mb:3,children:[c.jsx(h,{variant:"subtitle1",fontWeight:"bold",mb:2,children:"Today's Schedule"}),c.jsxs(V,{spacing:2,children:[c.jsx(j,{sx:{p:2},children:c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[c.jsxs(o,{children:[c.jsx(h,{variant:"body1",fontWeight:"medium",children:"Smile Dental Group"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"10:00 AM - Product Demo"})]}),c.jsxs(V,{direction:"row",spacing:1,children:[c.jsx(f,{size:"small",color:"primary",children:c.jsx(It,{})}),c.jsx(f,{size:"small",color:"primary",children:c.jsx(pe,{})})]})]})}),c.jsx(j,{sx:{p:2},children:c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[c.jsxs(o,{children:[c.jsx(h,{variant:"body1",fontWeight:"medium",children:"Beverly Hills Aesthetics"}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"2:00 PM - Follow-up Visit"})]}),c.jsxs(V,{direction:"row",spacing:1,children:[c.jsx(f,{size:"small",color:"primary",children:c.jsx(It,{})}),c.jsx(f,{size:"small",color:"primary",children:c.jsx(pe,{})})]})]})})]})]}),c.jsx(iI,{})]}),c.jsx(de,{ariaLabel:"Quick actions",sx:{position:"fixed",bottom:16,right:16},icon:c.jsx(ge,{}),children:x.map(e=>c.jsx(he,{icon:e.icon,tooltipTitle:e.name,sx:{backgroundColor:e.color,color:"white","&:hover":{backgroundColor:e.color}}},e.name))}),c.jsx(ft,{anchor:"bottom",open:n,onClose:()=>a(!1),PaperProps:{sx:{borderTopLeftRadius:20,borderTopRightRadius:20,maxHeight:"80vh"}},children:c.jsxs(o,{p:3,children:[c.jsx(h,{variant:"h6",fontWeight:"bold",mb:2,children:"Digital Briefcase"}),c.jsxs(K,{children:[c.jsxs(Y,{children:[c.jsx(J,{children:c.jsx(X,{sx:{backgroundColor:e.palette.primary.main},children:c.jsx(Vr,{})})}),c.jsx(Q,{primary:"Product Catalogs",secondary:"15 documents"})]}),c.jsxs(Y,{children:[c.jsx(J,{children:c.jsx(X,{sx:{backgroundColor:e.palette.success.main},children:c.jsx(b,{})})}),c.jsx(Q,{primary:"Price Lists",secondary:"Updated 2 days ago"})]}),c.jsxs(Y,{children:[c.jsx(J,{children:c.jsx(X,{sx:{backgroundColor:e.palette.warning.main},children:c.jsx(z,{})})}),c.jsx(Q,{primary:"Demo Videos",secondary:"5 videos available offline"})]})]})]})}),c.jsx(gu,{children:d&&c.jsxs(xf.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:e.palette.background.default,zIndex:9999},children:[c.jsx(Er,{position:"static",color:"transparent",elevation:0,children:c.jsxs(Ir,{children:[c.jsx(h,{variant:"h6",sx:{flexGrow:1},children:"Presentation Mode"}),c.jsx(f,{onClick:()=>u(!1),children:c.jsx(Ee,{})})]})}),c.jsx(o,{display:"flex",alignItems:"center",justifyContent:"center",height:"calc(100vh - 64px)",p:3,children:c.jsx(h,{variant:"h4",textAlign:"center",children:"Your presentation content here"})})]})})]})};nI.displayName="FieldTools";const aI=({children:e,value:t,index:r,...s})=>c.jsx("div",{role:"tabpanel",hidden:t!==r,id:`industry-tabpanel-${r}`,"aria-labelledby":`industry-tab-${r}`,...s,children:t===r&&c.jsx(o,{sx:{pt:3},children:e})}),oI=()=>{const e=l(),[t,r]=ks.useState({procedureType:"botox",pricePerUnit:12,unitsPerTreatment:50,treatmentsPerMonth:20,overhead:30}),[s,n]=ks.useState(!1),d=t.unitsPerTreatment*t.pricePerUnit*t.treatmentsPerMonth,u=d*(1-t.overhead/100),p=12*u,m=[{name:"Lip Filler",growth:"+45%",platform:"TikTok",icon:c.jsx(Jr,{})},{name:"PDO Threads",growth:"+32%",platform:"Instagram",icon:c.jsx(Jr,{})},{name:"PRF Treatment",growth:"+28%",platform:"YouTube",icon:c.jsx(Xr,{})},{name:"Body Contouring",growth:"+25%",platform:"Instagram",icon:c.jsx(Jr,{})}],g=[{name:"Dr. Miami",followers:"5.2M",engagement:"8.2%",specialty:"Body Sculpting"},{name:"The Lip King",followers:"2.8M",engagement:"12.5%",specialty:"Lip Enhancement"},{name:"Nurse Jamie",followers:"1.5M",engagement:"10.8%",specialty:"Non-Surgical"}];return c.jsxs(o,{children:[c.jsx(i,{sx:{mb:3},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",mb:3,children:[c.jsx(Lr,{sx:{mr:1,verticalAlign:"middle"}}),"Treatment ROI Calculator"]}),c.jsxs(A,{container:!0,spacing:3,children:[c.jsxs(A,{item:!0,xs:12,md:6,children:[c.jsxs(Rt,{fullWidth:!0,margin:"normal",children:[c.jsx(Ot,{children:"Procedure Type"}),c.jsxs(Dt,{value:t.procedureType,onChange:e=>r({...t,procedureType:e.target.value}),children:[c.jsx(zt,{value:"botox",children:"Botox"}),c.jsx(zt,{value:"filler",children:"Dermal Filler"}),c.jsx(zt,{value:"pdo",children:"PDO Threads"}),c.jsx(zt,{value:"prp",children:"PRP/PRF"})]})]}),c.jsx(Ge,{fullWidth:!0,label:"Price per Unit/Syringe",type:"number",value:t.pricePerUnit,onChange:e=>r({...t,pricePerUnit:Number(e.target.value)}),margin:"normal",InputProps:{startAdornment:c.jsx(He,{position:"start",children:"$"})}}),c.jsx(Ge,{fullWidth:!0,label:"Units/Syringes per Treatment",type:"number",value:t.unitsPerTreatment,onChange:e=>r({...t,unitsPerTreatment:Number(e.target.value)}),margin:"normal"})]}),c.jsxs(A,{item:!0,xs:12,md:6,children:[c.jsx(Ge,{fullWidth:!0,label:"Treatments per Month",type:"number",value:t.treatmentsPerMonth,onChange:e=>r({...t,treatmentsPerMonth:Number(e.target.value)}),margin:"normal"}),c.jsxs(o,{mt:2,mb:3,children:[c.jsx(h,{gutterBottom:!0,children:"Overhead (%)"}),c.jsx(qr,{value:t.overhead,onChange:(e,s)=>r({...t,overhead:s}),valueLabelDisplay:"auto",min:0,max:50})]}),c.jsx(j,{sx:{p:2,background:e.palette.success.light+"20"},children:c.jsxs(V,{spacing:1,children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{children:"Monthly Revenue:"}),c.jsxs(h,{fontWeight:"bold",children:["$",d.toLocaleString()]})]}),c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{children:"Monthly Profit:"}),c.jsxs(h,{fontWeight:"bold",color:"success.main",children:["$",u.toLocaleString()]})]}),c.jsx(N,{}),c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{variant:"h6",children:"Annual Profit:"}),c.jsxs(h,{variant:"h6",color:"success.main",fontWeight:"bold",children:["$",p.toLocaleString()]})]})]})})]})]})]})}),c.jsx(i,{sx:{mb:3},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",mb:3,children:[c.jsx($e,{sx:{mr:1,verticalAlign:"middle"}}),"Trending Treatments on Social Media"]}),c.jsx(A,{container:!0,spacing:2,children:m.map((t,r)=>c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsxs(j,{sx:{p:2,display:"flex",alignItems:"center",justifyContent:"space-between",borderLeft:`3px solid ${e.palette.primary.main}`},children:[c.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[c.jsx(X,{sx:{backgroundColor:e.palette.primary.light},children:t.icon}),c.jsxs(o,{children:[c.jsx(h,{fontWeight:"medium",children:t.name}),c.jsx(h,{variant:"body2",color:"text.secondary",children:t.platform})]})]}),c.jsx(H,{label:t.growth,color:"success",size:"small",sx:{fontWeight:"bold"}})]})},r))})]})}),c.jsx(i,{sx:{mb:3},children:c.jsxs(v,{children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",children:[c.jsx(ue,{sx:{mr:1,verticalAlign:"middle"}}),"Before/After Gallery"]}),c.jsx(a,{variant:"outlined",startIcon:c.jsx(Gr,{}),onClick:()=>n(!s),children:"Toggle Comparison"})]}),c.jsx(R,{severity:"info",sx:{mb:2},children:"Professional before/after photos help increase conversion rates by up to 37%"}),c.jsx(A,{container:!0,spacing:2,children:[1,2,3,4].map(t=>c.jsx(A,{item:!0,xs:6,md:3,children:c.jsxs(i,{children:[c.jsx(Hr,{component:"div",sx:{height:150,backgroundColor:e.palette.grey[200],display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsx(ue,{color:"disabled"})}),c.jsx(v,{children:c.jsxs(h,{variant:"body2",textAlign:"center",children:["Case Study #",t]})})]})},t))})]})}),c.jsx(i,{children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",mb:3,children:[c.jsx(ae,{sx:{mr:1,verticalAlign:"middle"}}),"Potential Influencer Partnerships"]}),c.jsx(K,{children:g.map((t,r)=>c.jsxs(Cs.Fragment,{children:[c.jsxs(Y,{children:[c.jsx(tt,{children:c.jsx(X,{sx:{backgroundColor:e.palette.secondary.main},children:t.name.charAt(0)})}),c.jsx(Q,{primary:t.name,secondary:`${t.followers} followers â€¢ ${t.engagement} engagement â€¢ ${t.specialty}`}),c.jsx(a,{variant:"outlined",size:"small",children:"View Profile"})]}),r<g.length-1&&c.jsx(N,{})]},r))})]})})]})},lI=()=>{const e=l(),[t,r]=ks.useState("D2740"),[s,n]=ks.useState(100),[d,u]=ks.useState("carecredit");return c.jsxs(o,{children:[c.jsx(i,{sx:{mb:3},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",mb:3,children:[c.jsx(Vr,{sx:{mr:1,verticalAlign:"middle"}}),"CDT Code Quick Reference"]}),c.jsx(Ge,{fullWidth:!0,placeholder:"Search CDT codes...",variant:"outlined",size:"small",sx:{mb:2},InputProps:{startAdornment:c.jsx(He,{position:"start",children:c.jsx(Ce,{})})}}),c.jsx(K,{children:[{code:"D2740",name:"Crown - Porcelain/Ceramic",coverage:"50%",avgFee:"$1,200"},{code:"D6010",name:"Implant - Endosteal",coverage:"0%",avgFee:"$2,500"},{code:"D8090",name:"Invisalign Treatment",coverage:"0-50%",avgFee:"$5,000"},{code:"D4341",name:"Scaling & Root Planing",coverage:"80%",avgFee:"$300"}].map((s,i)=>c.jsx(Cs.Fragment,{children:c.jsx(Y,{button:!0,selected:t===s.code,onClick:()=>r(s.code),sx:{borderRadius:1,mb:1,"&.Mui-selected":{backgroundColor:e.palette.primary.light+"20"}},children:c.jsx(Q,{primary:c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{fontWeight:"bold",children:s.code}),c.jsx(h,{color:"primary",fontWeight:"bold",children:s.avgFee})]}),secondary:c.jsxs(o,{children:[c.jsx(h,{variant:"body2",children:s.name}),c.jsx(H,{label:`Insurance: ${s.coverage}`,size:"small",color:"0%"===s.coverage?"error":"success",sx:{mt:.5}})]})})})},s.code))})]})}),c.jsx(i,{sx:{mb:3},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",mb:3,children:[c.jsx(Kr,{sx:{mr:1,verticalAlign:"middle"}}),"Practice Volume Estimator"]}),c.jsxs(o,{mb:3,children:[c.jsx(h,{gutterBottom:!0,children:"Average Patients per Month"}),c.jsx(qr,{value:s,onChange:(e,t)=>n(t),valueLabelDisplay:"auto",min:50,max:500,step:10,marks:[{value:50,label:"50"},{value:250,label:"250"},{value:500,label:"500"}]})]}),c.jsxs(A,{container:!0,spacing:2,children:[c.jsx(A,{item:!0,xs:6,children:c.jsxs(j,{sx:{p:2,textAlign:"center",backgroundColor:e.palette.info.light+"20"},children:[c.jsx(h,{variant:"h4",color:"info.main",fontWeight:"bold",children:Math.round(.3*s)}),c.jsx(h,{variant:"body2",children:"Hygiene Visits"})]})}),c.jsx(A,{item:!0,xs:6,children:c.jsxs(j,{sx:{p:2,textAlign:"center",backgroundColor:e.palette.warning.light+"20"},children:[c.jsx(h,{variant:"h4",color:"warning.main",fontWeight:"bold",children:Math.round(.15*s)}),c.jsx(h,{variant:"body2",children:"Major Procedures"})]})})]}),c.jsxs(R,{severity:"success",sx:{mt:2},children:["Estimated annual revenue potential: $",(2e3*s*12).toLocaleString()]})]})}),c.jsx(i,{sx:{mb:3},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",mb:3,children:[c.jsx(Yr,{sx:{mr:1,verticalAlign:"middle"}}),"Insurance Mix Analysis"]}),[{name:"Delta Dental",patients:"40%",reimbursement:"High"},{name:"Cigna Dental",patients:"25%",reimbursement:"Medium"},{name:"Aetna Dental",patients:"20%",reimbursement:"Medium"},{name:"Cash/Self-Pay",patients:"15%",reimbursement:"N/A"}].map((t,r)=>c.jsxs(o,{mb:2,children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",mb:1,children:[c.jsx(h,{variant:"body1",children:t.name}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:[t.patients," of patients"]})]}),c.jsx(Ae,{variant:"determinate",value:parseInt(t.patients),sx:{height:8,borderRadius:4,backgroundColor:e.palette.grey[200],"& .MuiLinearProgress-bar":{borderRadius:4}}}),c.jsxs(h,{variant:"caption",color:"text.secondary",children:["Reimbursement Rate: ",t.reimbursement]})]},r))]})}),c.jsx(i,{children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",mb:3,children:[c.jsx(ke,{sx:{mr:1,verticalAlign:"middle"}}),"Equipment Financing Options"]}),c.jsxs(Ue,{value:d,exclusive:!0,onChange:(e,t)=>t&&u(t),fullWidth:!0,sx:{mb:3},children:[c.jsx(Ve,{value:"carecredit",children:"CareCredit"}),c.jsx(Ve,{value:"wells",children:"Wells Fargo"}),c.jsx(Ve,{value:"td",children:"TD Bank"})]}),c.jsx(j,{sx:{p:2,backgroundColor:e.palette.primary.light+"10"},children:c.jsxs(V,{spacing:2,children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{children:"Equipment Cost:"}),c.jsx(h,{fontWeight:"bold",children:"$45,000"})]}),c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{children:"Down Payment:"}),c.jsx(h,{children:"$4,500 (10%)"})]}),c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{children:"Term:"}),c.jsx(h,{children:"60 months"})]}),c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{children:"Interest Rate:"}),c.jsx(h,{children:"5.9% APR"})]}),c.jsx(N,{}),c.jsxs(o,{display:"flex",justifyContent:"space-between",children:[c.jsx(h,{variant:"h6",children:"Monthly Payment:"}),c.jsx(h,{variant:"h6",color:"primary",fontWeight:"bold",children:"$782"})]})]})}),c.jsx(a,{variant:"contained",fullWidth:!0,sx:{mt:2},children:"Generate Financing Proposal"})]})})]})},cI=()=>{const[e,t]=ks.useState(0);return c.jsxs(o,{sx:{p:3},children:[c.jsx(h,{variant:"h4",fontWeight:"bold",mb:3,children:"Industry-Specific Tools"}),c.jsx(j,{sx:{mb:3},children:c.jsxs(w,{value:e,onChange:(e,r)=>t(r),variant:"fullWidth",sx:{"& .MuiTab-root":{py:2,fontSize:"1rem",fontWeight:"medium"}},children:[c.jsx(_,{label:"Aesthetic Industry",icon:c.jsx(U,{}),iconPosition:"start"}),c.jsx(_,{label:"Dental Industry",icon:c.jsx(Ft,{}),iconPosition:"start"})]})}),c.jsx(aI,{value:e,index:0,children:c.jsx(oI,{})}),c.jsx(aI,{value:e,index:1,children:c.jsx(lI,{})})]})};cI.displayName="IndustrySpecificTools";const dI=({children:e,value:t,index:r})=>c.jsx("div",{hidden:t!==r,children:t===r&&c.jsx(o,{sx:{pt:3},children:e})}),hI=({competitor:e,product:t,category:r,ourStrengths:s,theirStrengths:n,objections:a,winRate:d,saved:u=!1})=>{const p=l(),[m,g]=ks.useState(u),[x,y]=ks.useState(!1);return c.jsx(i,{sx:{mb:2,border:`1px solid ${p.palette.divider}`,"&:hover":{boxShadow:p.shadows[4]}},children:c.jsxs(v,{children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"start",mb:2,children:[c.jsxs(o,{children:[c.jsxs(h,{variant:"h6",fontWeight:"bold",children:[e," - ",t]}),c.jsxs(o,{display:"flex",gap:1,mt:1,children:[r&&c.jsx(H,{size:"small",label:r.charAt(0).toUpperCase()+r.slice(1),color:"dental"===r?"info":"secondary",variant:"outlined"}),c.jsx(H,{size:"small",label:`Win Rate: ${d}%`,color:d>=60?"success":d>=40?"warning":"error",icon:c.jsx(D,{})}),c.jsx(H,{size:"small",label:`${a.length} Objections`,icon:c.jsx(Zr,{})})]})]}),c.jsxs(V,{direction:"row",spacing:1,children:[c.jsx(f,{onClick:()=>{},children:u?c.jsx(es,{color:"primary"}):c.jsx(ts,{})}),c.jsx(f,{children:c.jsx(_t,{})})]})]}),c.jsxs(A,{container:!0,spacing:2,children:[c.jsx(A,{item:!0,xs:12,md:6,children:c.jsxs(j,{sx:{p:2,backgroundColor:p.palette.success.light+"10"},children:[c.jsxs(h,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:[c.jsx(rs,{sx:{mr:1,fontSize:18,verticalAlign:"middle"}}),"Our Advantages"]}),c.jsx(K,{dense:!0,children:s.map((e,t)=>c.jsxs(Y,{sx:{py:0},children:[c.jsx(tt,{sx:{minWidth:32},children:c.jsx(me,{color:"success",fontSize:"small"})}),c.jsx(Q,{primary:e})]},t))})]})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsxs(j,{sx:{p:2,backgroundColor:p.palette.error.light+"10"},children:[c.jsxs(h,{variant:"subtitle2",fontWeight:"bold",gutterBottom:!0,children:[c.jsx(ss,{sx:{mr:1,fontSize:18,verticalAlign:"middle"}}),"Their Advantages"]}),c.jsx(K,{dense:!0,children:n.map((e,t)=>c.jsxs(Y,{sx:{py:0},children:[c.jsx(tt,{sx:{minWidth:32},children:c.jsx(is,{color:"error",fontSize:"small"})}),c.jsx(Q,{primary:e})]},t))})]})})]}),c.jsxs(ns,{expanded:x,onChange:()=>y(!x),sx:{mt:2},children:[c.jsx(as,{expandIcon:c.jsx($,{}),children:c.jsx(h,{fontWeight:"medium",children:"Common Objections & Responses"})}),c.jsx(os,{children:a.map((e,t)=>c.jsxs(o,{mb:2,children:[c.jsx(R,{severity:"warning",icon:c.jsx(U,{}),sx:{mb:1},children:c.jsxs(h,{variant:"subtitle2",fontWeight:"bold",children:['"',e.question,'"']})}),c.jsx(R,{severity:"success",icon:c.jsx(L,{}),children:c.jsx(h,{variant:"body2",children:e.response})})]},t))})]})]})})},uI=()=>{const e=l(),[t,r]=ks.useState("quarter"),s=(t,r)=>t.map((t,s)=>c.jsxs(o,{mb:2,children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1,children:[c.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[c.jsx(h,{variant:"body1",children:t.reason}),"up"===t.trend&&c.jsx($e,{color:"success",fontSize:"small"}),"down"===t.trend&&c.jsx(xt,{color:"error",fontSize:"small"})]}),c.jsxs(o,{display:"flex",alignItems:"center",gap:1,children:[c.jsx(H,{label:`${t.count} deals`,size:"small"}),c.jsxs(h,{variant:"body2",fontWeight:"bold",children:[t.percentage,"%"]})]})]}),c.jsx(Ae,{variant:"determinate",value:t.percentage,sx:{height:8,borderRadius:4,backgroundColor:e.palette.grey[200],"& .MuiLinearProgress-bar":{backgroundColor:"win"===r?e.palette.success.main:e.palette.error.main}}})]},s));return c.jsxs(o,{children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[c.jsx(h,{variant:"h6",fontWeight:"bold",children:"Win/Loss Analysis"}),c.jsxs(Ue,{value:t,exclusive:!0,onChange:(e,t)=>t&&r(t),size:"small",children:[c.jsx(Ve,{value:"month",children:"Month"}),c.jsx(Ve,{value:"quarter",children:"Quarter"}),c.jsx(Ve,{value:"year",children:"Year"})]})]}),c.jsxs(A,{container:!0,spacing:3,children:[c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{sx:{height:"100%"},children:c.jsxs(v,{children:[c.jsxs(o,{display:"flex",alignItems:"center",gap:1,mb:2,children:[c.jsx(X,{sx:{backgroundColor:e.palette.success.main},children:c.jsx(D,{})}),c.jsxs(o,{children:[c.jsx(h,{variant:"h6",children:"Win Reasons"}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["120 wins this ",t]})]})]}),s([{reason:"Superior Technology",percentage:35,trend:"up",count:42},{reason:"Better Pricing",percentage:28,trend:"stable",count:34},{reason:"Customer Service",percentage:22,trend:"up",count:26},{reason:"Existing Relationship",percentage:15,trend:"down",count:18}],"win")]})})}),c.jsx(A,{item:!0,xs:12,md:6,children:c.jsx(i,{sx:{height:"100%"},children:c.jsxs(v,{children:[c.jsxs(o,{display:"flex",alignItems:"center",gap:1,mb:2,children:[c.jsx(X,{sx:{backgroundColor:e.palette.error.main},children:c.jsx(_e,{})}),c.jsxs(o,{children:[c.jsx(h,{variant:"h6",children:"Loss Reasons"}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["71 losses this ",t]})]})]}),s([{reason:"Price Too High",percentage:40,trend:"up",count:28},{reason:"Missing Features",percentage:25,trend:"stable",count:18},{reason:"Competitor Relationship",percentage:20,trend:"down",count:14},{reason:"Poor Timing",percentage:15,trend:"stable",count:11}],"loss")]})})})]}),c.jsxs(R,{severity:"info",sx:{mt:3},icon:c.jsx(L,{}),children:[c.jsx(h,{variant:"subtitle2",fontWeight:"bold",children:"Key Insight: Price objections increased 15% this quarter"}),c.jsx(h,{variant:"body2",children:"Consider offering flexible payment terms or emphasizing ROI in your pitch"})]})]})},pI=()=>{l();return c.jsxs(o,{children:[c.jsx(h,{variant:"h6",fontWeight:"bold",mb:3,children:"Competitive Pricing Matrix"}),c.jsx(nt,{component:j,children:c.jsxs(at,{children:[c.jsx(ot,{children:c.jsxs(lt,{children:[c.jsx(ct,{children:"Product"}),c.jsx(ct,{align:"center",children:"Our Price"}),c.jsx(ct,{align:"center",children:"Allergan/Dexis"}),c.jsx(ct,{align:"center",children:"Merz/Schick"}),c.jsx(ct,{align:"center",children:"Revance/Carestream"})]})}),c.jsx(ht,{children:[{product:"Botox (50 units)",ourPrice:"$500",competitor1:{name:"Allergan",price:"$550",diff:"+10%"},competitor2:{name:"Merz",price:"$480",diff:"-4%"},competitor3:{name:"Revance",price:"$520",diff:"+4%"}},{product:"Dermal Filler (1ml)",ourPrice:"$600",competitor1:{name:"Juvederm",price:"$650",diff:"+8%"},competitor2:{name:"Restylane",price:"$580",diff:"-3%"},competitor3:{name:"RHA",price:"$620",diff:"+3%"}},{product:"Digital X-Ray System",ourPrice:"$45,000",competitor1:{name:"Dexis",price:"$48,000",diff:"+7%"},competitor2:{name:"Schick",price:"$43,000",diff:"-4%"},competitor3:{name:"Carestream",price:"$46,000",diff:"+2%"}}].map((e,t)=>c.jsxs(lt,{children:[c.jsx(ct,{children:c.jsx(h,{fontWeight:"medium",children:e.product})}),c.jsx(ct,{align:"center",children:c.jsx(h,{fontWeight:"bold",color:"primary",children:e.ourPrice})}),c.jsx(ct,{align:"center",children:c.jsxs(o,{children:[c.jsx(h,{children:e.competitor1.price}),c.jsx(H,{label:e.competitor1.diff,size:"small",color:e.competitor1.diff.startsWith("+")?"success":"error",sx:{mt:.5}})]})}),c.jsx(ct,{align:"center",children:c.jsxs(o,{children:[c.jsx(h,{children:e.competitor2.price}),c.jsx(H,{label:e.competitor2.diff,size:"small",color:e.competitor2.diff.startsWith("+")?"success":"error",sx:{mt:.5}})]})}),c.jsx(ct,{align:"center",children:c.jsxs(o,{children:[c.jsx(h,{children:e.competitor3.price}),c.jsx(H,{label:e.competitor3.diff,size:"small",color:e.competitor3.diff.startsWith("+")?"success":"error",sx:{mt:.5}})]})})]},t))})]})}),c.jsxs(V,{spacing:2,mt:3,children:[c.jsx(R,{severity:"success",children:c.jsxs(h,{variant:"body2",children:[c.jsx("strong",{children:"Pricing Advantage:"})," We're competitively priced for most products with room for negotiation"]})}),c.jsx(R,{severity:"warning",children:c.jsxs(h,{variant:"body2",children:[c.jsx("strong",{children:"Watch Out:"})," Merz/Schick consistently undercuts on price - emphasize quality and service"]})})]})]})},mI=()=>{l();const[e,t]=ks.useState(0),[r,s]=ks.useState(""),[n,d]=ks.useState("all"),u=[{competitor:"Allergan",product:"Botox Cosmetic",category:"aesthetic",ourStrengths:["Lower price point","Faster onset of action","Longer shelf life","Better customer support"],theirStrengths:["Market leader brand recognition","Extensive clinical data","Established provider network"],objections:[{question:"Why should I switch from the market leader?",response:"While Allergan has strong brand recognition, our product offers faster onset (3-5 days vs 7-10 days) at a 10% lower cost. Plus, our dedicated support team provides 24/7 assistance and training."},{question:"Is your product FDA approved?",response:"Yes, our product has full FDA approval with over 5 years of safety data. We also offer additional clinical studies showing comparable efficacy with improved patient satisfaction scores."}],winRate:45},{competitor:"Invisalign",product:"Clear Aligners",category:"dental",ourStrengths:["30% lower cost","Faster treatment time","No exclusive provider requirements","Better margin for practices"],theirStrengths:["First mover advantage","Consumer brand awareness","Extensive case database"],objections:[{question:"Patients specifically ask for Invisalign by name",response:"That's great brand awareness! We help practices educate patients that clear aligner technology has evolved. Our system offers the same results in 20% less time, and the cost savings allow practices to treat more patients."},{question:"What about complex cases?",response:"Our AI-powered treatment planning handles complex cases with a 95% first-fit accuracy rate. Plus, unlimited refinements are included at no extra cost."}],winRate:62},{competitor:"Juvederm",product:"Dermal Fillers",category:"aesthetic",ourStrengths:["15% longer lasting results","Lower injection force required","Better patient comfort","Competitive pricing"],theirStrengths:["Strong brand recognition","Wide product portfolio","Established training programs"],objections:[{question:"Juvederm has been around longer, is it safer?",response:"Both products have excellent safety profiles. Our hyaluronic acid technology actually provides smoother injection and longer-lasting results, backed by 3+ years of clinical data."},{question:"What about the learning curve?",response:"We provide comprehensive training and our product has similar injection techniques. Most practitioners are comfortable after just 2-3 cases."}],winRate:58},{competitor:"Nobel Biocare",product:"Dental Implants",category:"dental",ourStrengths:["25% better osseointegration","Simplified surgical protocol","Lower cost per unit","Comprehensive prosthetic options"],theirStrengths:["Premium brand reputation","Extensive research backing","Global market presence"],objections:[{question:"Nobel has the gold standard reputation",response:"While Nobel has a strong reputation, our latest surface technology shows 25% faster healing times in clinical studies. We offer the same quality at a better value proposition."},{question:"What about compatibility with my current system?",response:"Our implants are compatible with most major prosthetic platforms, and we provide conversion guides for seamless integration."}],winRate:52}],p=ks.useMemo(()=>u.filter(e=>{const t="all"===n||e.category===n,s=""===r||e.product.toLowerCase().includes(r.toLowerCase())||e.competitor.toLowerCase().includes(r.toLowerCase());return t&&s}),[u,n,r]);return c.jsxs(o,{sx:{p:3},children:[c.jsxs(o,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3,children:[c.jsx(h,{variant:"h4",fontWeight:"bold",children:"Sales Intelligence Hub"}),c.jsx(Ge,{placeholder:"Search battlecards, competitors, products...",variant:"outlined",size:"small",value:r,onChange:e=>s(e.target.value),sx:{minWidth:300},InputProps:{startAdornment:c.jsx(He,{position:"start",children:c.jsx(Ce,{})})}})]}),c.jsx(j,{sx:{mb:3},children:c.jsxs(w,{value:e,onChange:(e,r)=>t(r),variant:"scrollable",scrollButtons:"auto",children:[c.jsx(_,{label:"Battlecards",icon:c.jsx(Vt,{}),iconPosition:"start"}),c.jsx(_,{label:"Win/Loss Analysis",icon:c.jsx(Or,{}),iconPosition:"start"}),c.jsx(_,{label:"Competitive Pricing",icon:c.jsx(b,{}),iconPosition:"start"}),c.jsx(_,{label:"Market Trends",icon:c.jsx(Qr,{}),iconPosition:"start"})]})}),c.jsxs(dI,{value:e,index:0,children:[c.jsx(o,{mb:3,children:c.jsxs(V,{direction:"row",spacing:2,alignItems:"center",children:[c.jsx(h,{variant:"body1",children:"Filter by:"}),c.jsx(H,{label:`All Products (${u.length})`,clickable:!0,color:"all"===n?"primary":"default",onClick:()=>d("all")}),c.jsx(H,{label:`Dental (${u.filter(e=>"dental"===e.category).length})`,clickable:!0,color:"dental"===n?"primary":"default",onClick:()=>d("dental")}),c.jsx(H,{label:`Aesthetic (${u.filter(e=>"aesthetic"===e.category).length})`,clickable:!0,color:"aesthetic"===n?"primary":"default",onClick:()=>d("aesthetic")})]})}),p.length>0?p.map((e,t)=>c.jsx(xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*t},children:c.jsx(hI,{...e})},t)):c.jsxs(i,{sx:{p:3,textAlign:"center"},children:[c.jsx(h,{variant:"h6",color:"text.secondary",children:"No battlecards found for the selected filter"}),c.jsx(h,{variant:"body2",color:"text.secondary",sx:{mt:1},children:"Try adjusting your search or filter criteria"})]}),c.jsx(a,{variant:"outlined",fullWidth:!0,sx:{mt:2},children:"Load More Battlecards"})]}),c.jsx(dI,{value:e,index:1,children:c.jsx(uI,{})}),c.jsx(dI,{value:e,index:2,children:c.jsx(pI,{})}),c.jsx(dI,{value:e,index:3,children:c.jsxs(o,{children:[c.jsx(h,{variant:"h6",fontWeight:"bold",mb:3,children:"Market Trends & Insights"}),c.jsx(i,{children:c.jsx(v,{children:c.jsx(h,{color:"text.secondary",textAlign:"center",children:"Market trend analysis coming soon..."})})})]})})]})};mI.displayName="SalesIntelligenceHub";const gI=new class{constructor(){t(this,"cache",new Map),t(this,"CACHE_DURATION",3e5)}async getCategoryAggregates(e){const t=`categories_${e||"all"}`,r=this.getFromCache(t);if(r)return r;try{let r=nl.from("procedures").select("*").order("market_size_2025_usd_millions",{ascending:!1});e&&(r=r.or(`industry.eq.${e},industry.eq.both`));const{data:s,error:i}=await r;if(i)throw i;const n=new Map;s?.forEach(e=>{const t=e.category||"Uncategorized";n.has(t)||n.set(t,[]),n.get(t).push(e)});const a=Array.from(n.entries()).map(([e,t])=>{const r=t.reduce((e,t)=>e+(t.market_size_2025_usd_millions||0),0),s=t.reduce((e,t)=>e+(t.yoy_growth_2024_to_2025_percent||0),0)/t.length,i=t.reduce((e,t)=>e+(t.innovation_index||50),0)/t.length,n=t.reduce((e,t)=>e+(t.trending_score_1_to_100||50),0)/t.length,a=n>70?"up":n<30?"down":"stable";return{id:e.toLowerCase().replace(/\s+/g,"_"),name:e,industry:t[0].industry,total_market_size:r,avg_growth_rate:s,procedure_count:t.length,innovation_score:i,trending_direction:a,top_procedures:t.slice(0,5),market_signals:[],sales_opportunities:this.generateSalesOpportunities(e,t)}});return a.sort((e,t)=>t.total_market_size-e.total_market_size),this.setCache(t,a),a}catch(s){return $f.error("Error fetching category aggregates",{error:s.message}),this.getDemoCategories()}}async enrichWithMarketIntelligence(e){return await Promise.all(e.map(async e=>{try{const t=`${e.name} dental aesthetic market trends 2025`,r=(await Nf.searchNews(t,{count:5,freshness:"pw"})).map(t=>({id:`signal_${Date.now()}_${Math.random()}`,type:this.categorizeSignal(t.title+" "+t.description),title:t.title,description:t.description,source:t.source||"Brave Search",url:t.url,relevance_score:t.relevance_score||.5,urgency:this.calculateUrgency(t),detected_at:new Date,affected_procedures:e.top_procedures.map(e=>e.procedure_name),sales_action:this.generateSalesAction(t,e)}));return{...e,market_signals:r}}catch(t){return $f.error("Error enriching category",{categoryName:e.name,error:t.message}),e}}))}generateSalesOpportunities(e,t){const r=[],s=t.filter(e=>e.yoy_growth_2024_to_2025_percent>15);return s.length>0&&r.push({id:`opp_growth_${e}`,type:"NEW_ACCOUNT",title:`High Growth in ${e}`,description:`${s.length} procedures growing >15% YoY. Target practices not yet offering these services.`,potential_revenue:s.reduce((e,t)=>e+100*t.average_cost_usd,0),probability:.65,recommended_actions:["Identify practices without these capabilities","Prepare ROI calculator showing growth potential","Schedule educational webinars"],urgency_score:85}),t.length>3&&r.push({id:`opp_bundle_${e}`,type:"CROSS_SELL",title:`Bundle Opportunity in ${e}`,description:`Practices typically adopt ${Math.floor(.6*t.length)} of ${t.length} available procedures.`,potential_revenue:t.slice(0,3).reduce((e,t)=>e+50*t.average_cost_usd,0),probability:.75,recommended_actions:["Analyze current customer procedure mix","Create bundle pricing proposals","Highlight operational synergies"],urgency_score:70}),r}categorizeSignal(e){const t=e.toLowerCase();return t.includes("fda")||t.includes("approval")?"FDA_APPROVAL":t.includes("competitor")||t.includes("acquisition")?"COMPETITOR_MOVE":t.includes("price")||t.includes("cost")?"PRICE_CHANGE":t.includes("technology")||t.includes("innovation")?"NEW_TECHNOLOGY":"MARKET_TREND"}calculateUrgency(e){const t=(e.title+" "+e.description).toLowerCase();return["immediate","urgent","now","breaking","alert"].some(e=>t.includes(e))||(e.relevance_score||0)>.8?"HIGH":(e.relevance_score||0)>.5?"MEDIUM":"LOW"}generateSalesAction(e,t){switch(this.categorizeSignal(e.title)){case"FDA_APPROVAL":return`Contact all ${t.name} accounts about new approved technology. Prepare first-mover advantage pitch.`;case"COMPETITOR_MOVE":return"Review competitive positioning. Update battle cards. Schedule retention calls with at-risk accounts.";case"PRICE_CHANGE":return"Update pricing strategy. Communicate value proposition. Consider promotional bundles.";case"NEW_TECHNOLOGY":return"Schedule innovation workshops. Identify early adopter accounts. Prepare technology ROI models.";default:return"Monitor market development. Update account strategies. Share insights with customers."}}getFromCache(e){const t=this.cache.get(e);return t&&Date.now()-t.timestamp<this.CACHE_DURATION?t.data:null}setCache(e,t){this.cache.set(e,{data:t,timestamp:Date.now(),key:e,ttl:this.CACHE_DURATION})}getDemoCategories(){return[{id:"dental_implants",name:"Dental Implants",industry:"dental",total_market_size:4500,avg_growth_rate:12.5,procedure_count:15,innovation_score:85,trending_direction:"up",top_procedures:[],market_signals:[],sales_opportunities:[]}]}},fI=({isPlaying:e})=>{const t=l(),r=Array.from({length:50},(e,t)=>({id:t,size:4*Math.random()+2,x:100*Math.random(),y:100*Math.random(),duration:20*Math.random()+10,delay:5*Math.random()}));return c.jsx(o,{sx:{position:"absolute",top:0,left:0,width:"100%",height:"100%",overflow:"hidden",pointerEvents:"none",background:`radial-gradient(ellipse at center, ${t.palette.primary.main}15 0%, transparent 70%)`},children:r.map(r=>c.jsx(xf.div,{style:{position:"absolute",left:`${r.x}%`,top:`${r.y}%`,width:r.size,height:r.size,borderRadius:"50%",background:`radial-gradient(circle, ${t.palette.primary.main}80, transparent)`,boxShadow:`0 0 ${2*r.size}px ${t.palette.primary.main}40`},animate:e?{y:[-20,20,-20],x:[-10,10,-10],opacity:[.3,.8,.3],scale:[.8,1.2,.8]}:{},transition:{duration:r.duration,delay:r.delay,repeat:1/0,ease:"easeInOut"}},r.id))})};fI.displayName="ParticleField";const xI=({category:e,isSelected:t,onClick:r,delay:s})=>{const i=l(),n=Math.min(Math.max(50,e.market_size_usd_millions/100),150),a=Math.abs(e.avg_growth_rate)/20;return c.jsx(xf.div,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1,x:e.position.x,y:e.position.y,z:e.position.z},transition:{delay:s,duration:.8,type:"spring",stiffness:100},whileHover:{scale:1.1,transition:{duration:.2}},style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",transformStyle:"preserve-3d"},onClick:t=>r(e.id,t),children:c.jsxs(o,{sx:{position:"relative",width:n,height:n,cursor:"pointer"},children:[c.jsx(xf.div,{animate:{scale:[1,1.2,1],opacity:[.3,.6,.3]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},style:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",background:`radial-gradient(circle, ${e.color}40 0%, transparent 70%)`,filter:`blur(${10*a}px)`,transform:"scale(1.5)"}}),c.jsxs(j,{elevation:t?20:10,sx:{position:"relative",width:"100%",height:"100%",borderRadius:"50%",background:`radial-gradient(circle at 30% 30%, ${"dark"===i.palette.mode?"#333":"#fff"}, ${e.color})`,border:`2px solid ${e.color}`,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",overflow:"hidden",transition:"all 0.3s ease","&::before":{content:'""',position:"absolute",top:"10%",left:"20%",width:"30%",height:"30%",background:"radial-gradient(circle, rgba(255,255,255,0.8) 0%, transparent 70%)",borderRadius:"50%",filter:"blur(3px)"}},children:[c.jsx(h,{variant:"caption",sx:{fontWeight:"bold",textAlign:"center",px:1,color:i.palette.getContrastText(e.color)},children:e.name}),c.jsxs(h,{variant:"h6",sx:{fontWeight:"bold",color:i.palette.getContrastText(e.color)},children:["$",(e.market_size_usd_millions/1e3).toFixed(1),"B"]}),c.jsx(H,{icon:(()=>{switch(e.trend_direction){case"up":return c.jsx($e,{});case"down":return c.jsx(xt,{});default:return c.jsx(ls,{})}})(),label:`${e.avg_growth_rate>0?"+":""}${e.avg_growth_rate.toFixed(1)}%`,size:"small",sx:{position:"absolute",bottom:5,backgroundColor:`${e.color}CC`,color:i.palette.getContrastText(e.color),"& .MuiChip-icon":{color:"inherit"}}}),e.innovation_score>70&&c.jsx(xf.div,{animate:{rotate:360},transition:{duration:20,repeat:1/0,ease:"linear"},style:{position:"absolute",top:5,right:5},children:c.jsx(q,{sx:{fontSize:16,color:"#FFD700"}})})]}),e.avg_growth_rate>10&&c.jsx(xf.div,{animate:{rotateZ:360},transition:{duration:10,repeat:1/0,ease:"linear"},style:{position:"absolute",width:"120%",height:"120%",top:"-10%",left:"-10%",borderRadius:"50%",border:`1px solid ${e.color}40`,borderTopColor:e.color,borderRightColor:e.color}}),t&&c.jsx(xf.div,{initial:{scale:0},animate:{scale:1},style:{position:"absolute",width:"150%",height:"150%",top:"-25%",left:"-25%",borderRadius:"50%",border:`3px solid ${e.color}`,boxShadow:`0 0 20px ${e.color}`}})]})})};xI.displayName="CategorySphere";const yI=({categories:e,selectedCategory:t})=>{const r=l(),s=ks.useMemo(()=>{const r=[];return e.forEach((s,i)=>{e.forEach((e,n)=>{if(i<n){const a=Math.abs(s.avg_growth_rate-e.avg_growth_rate),o=Math.max(0,1-a/20);(o>.7||t&&(s.id===t||e.id===t))&&r.push({from:i,to:n,strength:o})}})}),r},[e,t]);return c.jsxs("svg",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",pointerEvents:"none"},viewBox:"-500 -500 1000 1000",preserveAspectRatio:"xMidYMid meet",children:[c.jsxs("defs",{children:[c.jsxs("linearGradient",{id:"connectionGradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[c.jsx("stop",{offset:"0%",stopColor:r.palette.primary.main,stopOpacity:"0.8"}),c.jsx("stop",{offset:"50%",stopColor:r.palette.secondary.main,stopOpacity:"0.5"}),c.jsx("stop",{offset:"100%",stopColor:r.palette.primary.main,stopOpacity:"0.8"})]}),c.jsxs("filter",{id:"glow",children:[c.jsx("feGaussianBlur",{stdDeviation:"3",result:"coloredBlur"}),c.jsxs("feMerge",{children:[c.jsx("feMergeNode",{in:"coloredBlur"}),c.jsx("feMergeNode",{in:"SourceGraphic"})]})]})]}),s.map((s,i)=>{const n=e[s.from],a=e[s.to],o=n.position.x,l=n.position.y,d=a.position.x,h=a.position.y,u=(o+d)/2,p=(l+h)/2,m=.2*Math.sqrt((d-o)**2+(h-l)**2),g=t&&(n.id===t||a.id===t);return c.jsxs(xf.g,{children:[c.jsx(xf.path,{d:`M ${o} ${l} Q ${u} ${p-m} ${d} ${h}`,fill:"none",stroke:"url(#connectionGradient)",strokeWidth:g?3:2*s.strength,opacity:g?1:.3*s.strength,filter:g?"url(#glow)":void 0,initial:{pathLength:0,opacity:0},animate:{pathLength:1,opacity:g?1:.3*s.strength},transition:{duration:1.5,delay:.05*i,ease:"easeInOut"}}),g&&c.jsxs(c.Fragment,{children:[c.jsx(xf.circle,{cx:o,cy:l,r:"5",fill:r.palette.primary.main,opacity:"0.8",animate:{r:[5,15,5],opacity:[.8,.2,.8]},transition:{duration:2,repeat:1/0,ease:"easeInOut"}}),c.jsx(xf.circle,{cx:d,cy:h,r:"5",fill:r.palette.primary.main,opacity:"0.8",animate:{r:[5,15,5],opacity:[.8,.2,.8]},transition:{duration:2,repeat:1/0,ease:"easeInOut",delay:1}})]})]},i)})]})};yI.displayName="ConnectionLines";const vI=({x:e,y:t})=>{const r=l();return c.jsxs(xf.div,{initial:{scale:0,opacity:1},animate:{scale:3,opacity:0},exit:{opacity:0},transition:{duration:2,ease:"easeOut"},style:{position:"absolute",left:e,top:t,width:100,height:100,marginLeft:-50,marginTop:-50,pointerEvents:"none"},children:[[0,.3,.6].map((e,t)=>c.jsx(xf.div,{initial:{scale:0,opacity:.8},animate:{scale:1,opacity:0},transition:{duration:1.5,delay:e,ease:"easeOut"},style:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",border:`2px solid ${r.palette.primary.main}`,boxShadow:`0 0 20px ${r.palette.primary.main}`}},t)),c.jsx(xf.div,{initial:{scale:0,opacity:1},animate:{scale:.5,opacity:0},transition:{duration:.5,ease:"easeOut"},style:{position:"absolute",width:"100%",height:"100%",borderRadius:"50%",background:`radial-gradient(circle, ${r.palette.primary.main} 0%, transparent 70%)`,filter:"blur(10px)"}}),Array.from({length:8}).map((e,t)=>{const s=t/8*Math.PI*2;return c.jsx(xf.div,{initial:{x:0,y:0,scale:1,opacity:1},animate:{x:50*Math.cos(s),y:50*Math.sin(s),scale:0,opacity:0},transition:{duration:1,delay:.1,ease:"easeOut"},style:{position:"absolute",left:"50%",top:"50%",width:4,height:4,marginLeft:-2,marginTop:-2,borderRadius:"50%",backgroundColor:r.palette.secondary.main,boxShadow:`0 0 10px ${r.palette.secondary.main}`}},`particle-${t}`)})]})};vI.displayName="DataRipple";const bI=()=>{const e=l(),t=ks.useRef(null),[r,s]=ks.useState([]),[n,d]=ks.useState(null),[u,p]=ks.useState(!0),[m,g]=ks.useState(null),[x,y]=ks.useState(1),[w,_]=ks.useState({x:-20,y:0}),[k,C]=ks.useState(!0),[S,T]=ks.useState(1),[P,A]=ks.useState(!0),[E,I]=ks.useState([]),[$,M]=ks.useState("all");Cf();const O=(e,t,r)=>{const s=e/t*Math.PI*2,i=300+r/100*30,n=50*Math.sin(.5*e);return{x:Math.cos(s)*i,y:n,z:Math.sin(s)*i}};ks.useEffect(()=>{(async()=>{p(!0),g(null);try{const t=await gI.getCategoryAggregates("all"===$?void 0:$),r=await gI.enrichWithMarketIntelligence(t),i=r.map((t,s)=>({...t,position:O(s,r.length,t.total_market_size),velocity:{x:.01*t.avg_growth_rate,y:.001*t.innovation_score},color:"up"===t.trending_direction?e.palette.success.main:"down"===t.trending_direction?e.palette.error.main:e.palette.info.main}));s(i)}catch(t){g("Failed to load market data. Please check your connection.")}finally{p(!1)}})()},[e,$]),ks.useEffect(()=>{if(k&&!u){const e=setInterval(()=>{_(e=>({...e,y:(e.y+.5*S)%360}))},50);return()=>clearInterval(e)}},[k,S,u]);const D=(e,s)=>{const i=r.find(t=>t.id===e);if(i){d(i);const e=t.current?.getBoundingClientRect();if(e){const t={id:`ripple-${Date.now()}`,x:s.clientX-e.left,y:s.clientY-e.top};I(e=>[...e,t]),setTimeout(()=>{I(e=>e.filter(e=>e.id!==t.id))},2e3)}}},z=ks.useMemo(()=>({total:r.reduce((e,t)=>e+t.total_market_size,0),avgGrowth:r.reduce((e,t)=>e+t.avg_growth_rate,0)/(r.length||1),totalOpportunities:r.reduce((e,t)=>e+(t.sales_opportunities?.length||0),0)}),[r]);return u?c.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh"},children:c.jsx(B,{size:60})}):m?c.jsx(o,{sx:{p:4},children:c.jsx(R,{severity:"error",children:m})}):c.jsxs(o,{ref:t,sx:{position:"relative",width:"100%",height:"80vh",overflow:"hidden",background:`radial-gradient(ellipse at center, ${e.palette.background.default} 0%, ${e.palette.action.hover} 100%)`,perspective:"2000px",transformStyle:"preserve-3d"},children:[c.jsx(fI,{isPlaying:k}),c.jsxs(xf.div,{animate:{rotateX:w.x,rotateY:w.y,scale:x},transition:{type:"spring",stiffness:50},style:{position:"absolute",width:"100%",height:"100%",transformStyle:"preserve-3d"},children:[c.jsx(o,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%) translateZ(0)",textAlign:"center",zIndex:10},children:c.jsx(xf.div,{animate:{scale:[1,1.1,1],opacity:[.8,1,.8]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:c.jsxs(j,{elevation:10,sx:{p:4,background:`rgba(${"dark"===e.palette.mode?"0,0,0":"255,255,255"}, 0.9)`,backdropFilter:"blur(10px)",border:`2px solid ${e.palette.primary.main}`,borderRadius:"50%",width:200,height:200,display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[c.jsxs(h,{variant:"h4",sx:{fontWeight:"bold",mb:1},children:["$",(z.total/1e3).toFixed(1),"B"]}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"Total Market"}),c.jsx(H,{icon:c.jsx($e,{}),label:`+${z.avgGrowth.toFixed(1)}%`,color:"success",size:"small",sx:{mt:1}}),c.jsxs(h,{variant:"caption",color:"primary",sx:{mt:1},children:[z.totalOpportunities," opportunities"]})]})})}),P&&c.jsx(yI,{categories:r.map(e=>({id:e.id,name:e.name,position:e.position,market_size_usd_millions:e.total_market_size,avg_growth_rate:e.avg_growth_rate})),selectedCategory:n?.id||null}),r.map((e,t)=>c.jsx(xI,{category:{...e,market_size_usd_millions:e.total_market_size,avg_growth_rate:e.avg_growth_rate,innovation_score:e.innovation_score,trend_direction:e.trending_direction},isSelected:n?.id===e.id,onClick:D,delay:.1*t},e.id)),c.jsx(gu,{children:E.map(e=>c.jsx(vI,{x:e.x,y:e.y},e.id))})]}),c.jsxs(j,{elevation:4,sx:{position:"absolute",bottom:20,left:"50%",transform:"translateX(-50%)",p:2,display:"flex",gap:2,alignItems:"center",background:`rgba(${"dark"===e.palette.mode?"0,0,0":"255,255,255"}, 0.95)`,backdropFilter:"blur(10px)"},children:[c.jsx(f,{onClick:()=>C(!k),color:"primary",children:k?c.jsx(cs,{}):c.jsx(ds,{})}),c.jsxs(o,{sx:{width:150},children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Time Scale"}),c.jsx(qr,{value:S,onChange:(e,t)=>T(t),min:.1,max:3,step:.1,size:"small"})]}),c.jsx(f,{onClick:()=>y(1.2*x),children:c.jsx(hs,{})}),c.jsx(f,{onClick:()=>y(.8*x),children:c.jsx(us,{})}),c.jsx(Pe,{title:"Toggle 3D Rotation",children:c.jsx(f,{onClick:()=>_(e=>({x:-20===e.x?-45:-20,y:e.y})),color:-45===w.x?"primary":"default",children:c.jsx(ps,{})})}),c.jsx(Pe,{title:"Toggle Connections",children:c.jsx(f,{onClick:()=>A(!P),color:P?"primary":"default",children:c.jsx(Qr,{})})})]}),c.jsx(gu,{children:n&&c.jsx(xf.div,{initial:{x:300,opacity:0},animate:{x:0,opacity:1},exit:{x:300,opacity:0},style:{position:"absolute",right:20,top:20,width:350,maxHeight:"90vh",overflowY:"auto"},children:c.jsxs(j,{elevation:6,sx:{p:3,background:`rgba(${"dark"===e.palette.mode?"0,0,0":"255,255,255"}, 0.95)`,backdropFilter:"blur(10px)"},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[c.jsxs(o,{sx:{flex:1},children:[c.jsx(h,{variant:"h5",gutterBottom:!0,children:n.name}),c.jsxs(o,{sx:{display:"flex",gap:1,mb:2},children:[c.jsx(H,{label:`$${(n.total_market_size/1e3).toFixed(1)}B market`,color:"primary",size:"small"}),c.jsx(H,{label:`${n.procedure_count} procedures`,variant:"outlined",size:"small"})]})]}),c.jsx(f,{onClick:()=>d(null),size:"small",children:"Ã—"})]}),c.jsx(N,{sx:{my:2}}),c.jsxs(o,{sx:{mb:3},children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Growth Rate"}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Ae,{variant:"determinate",value:Math.min(3*n.avg_growth_rate,100),sx:{flex:1,height:8,borderRadius:4}}),c.jsxs(h,{variant:"body2",color:"primary",children:["+",n.avg_growth_rate.toFixed(1),"%"]})]})]}),c.jsxs(o,{sx:{mb:3},children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Innovation Score"}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Ae,{variant:"determinate",value:n.innovation_score,sx:{flex:1,height:8,borderRadius:4},color:"secondary"}),c.jsxs(h,{variant:"body2",color:"secondary",children:[n.innovation_score.toFixed(0),"/100"]})]})]}),n?c.jsx(i,{elevation:6,sx:{mb:2},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(ms,{color:"primary"}),"Sales Actions"]}),c.jsxs(V,{spacing:2,children:[c.jsx(a,{variant:"contained",fullWidth:!0,startIcon:c.jsx(Oe,{}),onClick:()=>{},children:"Generate Pitch Deck"}),c.jsx(a,{variant:"outlined",fullWidth:!0,startIcon:c.jsx(ae,{}),onClick:()=>{},children:"Find Decision Makers"}),c.jsx(a,{variant:"outlined",fullWidth:!0,startIcon:c.jsx(ne,{}),onClick:()=>{},children:"Schedule Campaign"})]})]})}):null,n.sales_opportunities&&n.sales_opportunities.length>0&&(W=n.sales_opportunities,c.jsx(i,{elevation:6,sx:{mb:2},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(L,{color:"warning"}),"Opportunities (",W.length,")"]}),c.jsx(K,{dense:!0,children:W.map(e=>c.jsxs(Y,{children:[c.jsxs(tt,{children:["CROSS_SELL"===e.type&&c.jsx(q,{color:"primary"}),"NEW_ACCOUNT"===e.type&&c.jsx(ae,{color:"success"}),"UPSELL"===e.type&&c.jsx($e,{color:"info"})]}),c.jsx(Q,{primary:e.title,secondary:c.jsxs(c.Fragment,{children:[c.jsx(h,{variant:"body2",color:"text.secondary",children:e.description}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mt:1},children:[c.jsx(b,{fontSize:"small"}),c.jsxs(h,{variant:"caption",color:"success.main",children:["$",(e.potential_revenue/1e3).toFixed(0),"k potential"]}),c.jsx(H,{label:`${(100*e.probability).toFixed(0)}% probability`,size:"small",variant:"outlined"})]})]})})]},e.id))})]})})),n.market_signals&&(F=n.market_signals,F&&0!==F.length?c.jsx(i,{elevation:6,children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Ie,{color:"error"}),"Live Market Signals"]}),c.jsx(V,{spacing:1,children:F.slice(0,3).map(e=>c.jsxs(R,{severity:"HIGH"===e.urgency?"error":"MEDIUM"===e.urgency?"warning":"info",action:c.jsx(a,{size:"small",onClick:()=>window.open(e.url,"_blank"),children:"View"}),children:[c.jsx(h,{variant:"subtitle2",children:e.title}),e.sales_action&&c.jsxs(h,{variant:"caption",display:"block",sx:{mt:.5},children:["Action: ",e.sales_action]})]},e.id))})]})}):null),n.top_procedures&&n.top_procedures.length>0&&c.jsx(i,{elevation:6,sx:{mt:2},children:c.jsxs(v,{children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Top Procedures"}),c.jsx(K,{dense:!0,children:n.top_procedures.slice(0,3).map((e,t)=>c.jsx(Y,{children:c.jsx(Q,{primary:`${t+1}. ${e.procedure_name}`,secondary:`$${(e.market_size_2025_usd_millions/1e3).toFixed(1)}B market`})},e.id))})]})})]})})})]});var F,W};bI.displayName="MarketGalaxyMap";const jI=({onResultSelect:e,onClose:t})=>{const[r,s]=ks.useState(""),[i,n]=ks.useState([]),[l,d]=ks.useState(!1),[u,p]=ks.useState([]),[m,g]=ks.useState([]),x=ks.useRef(null);ks.useEffect(()=>{const e=localStorage.getItem("ai_command_recent");e&&g(JSON.parse(e))},[]);const y=async(e,t)=>{try{let r=nl.from("procedures").select("*").ilike("procedure_name",`%${e}%`).order("market_size_2025_usd_millions",{ascending:!1}).limit(5);t&&(r=r.or(`industry.eq.${t},industry.eq.both`));const{data:s,error:i}=await r;return i||!s?[]:s.map(e=>({id:e.id,type:"procedure",title:e.procedure_name,description:`${e.industry} â€¢ $${(e.market_size_2025_usd_millions/1e3).toFixed(1)}B market â€¢ +${e.yoy_growth_2024_to_2025_percent}% growth`,data:e,icon:c.jsx($e,{color:"primary"}),relevance:e.trending_score_1_to_100/100}))}catch(r){return[]}},v=async(e,t,r)=>[{id:"practice1",type:"company",title:"Elite Dental Partners",description:"Miami, FL â€¢ 12 locations â€¢ $8.5M revenue â€¢ Specializes in implants",icon:c.jsx(ve,{color:"secondary"}),data:{name:"Elite Dental Partners",locations:12,revenue:85e5,specialties:["implants","orthodontics"]}},{id:"practice2",type:"company",title:"Aesthetic Excellence Group",description:"Los Angeles, CA â€¢ 5 locations â€¢ $4.2M revenue â€¢ Leading in injectables",icon:c.jsx(ve,{color:"secondary"}),data:{name:"Aesthetic Excellence Group",locations:5,revenue:42e5,specialties:["injectables","body contouring"]}}].filter(s=>!(e&&!s.description.toLowerCase().includes(e.toLowerCase()))&&(!(t&&!s.description.toLowerCase().includes(t.toLowerCase()))&&!(r&&s.data.revenue<r))),b=async e=>{try{return(await Bf(`${e} market trends healthcare dental aesthetic`,5)).map((e,t)=>({id:`trend_${t}`,type:"insight",title:e.title,description:e.description,icon:c.jsx(Oe,{color:"info"}),data:e,relevance:e.intelligence_score||.5}))}catch(t){return[]}},w=async(e,t)=>{const r=[],s=e.toLowerCase();if((s.includes("opportunity")||s.includes("potential"))&&r.push({id:"insight_opp",type:"insight",title:"AI Insight: Market Opportunity Analysis",description:"Based on your query, I found 3 high-growth categories with low market penetration in your territory",icon:c.jsx(U,{color:"warning"}),action:()=>{}}),t.length>0){const e=t.filter(e=>"procedure"===e.type&&e.data?.yoy_growth_2024_to_2025_percent).reduce((e,t)=>e+t.data.yoy_growth_2024_to_2025_percent,0)/t.length;e>10&&r.push({id:"insight_growth",type:"insight",title:"AI Insight: High Growth Alert",description:`These procedures show ${e.toFixed(1)}% average growth - significantly above market average`,icon:c.jsx(q,{color:"success"})})}return r},_=async e=>{const t=[];return t.push(...await y(e)),t.push(...await b(e)),t},k=e=>({id:"action_pitch",type:"action",title:"Generate Pitch Deck",description:"Create a customized pitch deck based on market data and your query",icon:c.jsx(ms,{color:"primary"}),action:()=>{}}),C=e=>({id:"action_report",type:"action",title:"Generate Market Report",description:"Create comprehensive market analysis report with charts and insights",icon:c.jsx(Oe,{color:"primary"}),action:()=>{}}),S=e=>({id:"action_campaign",type:"action",title:"Create Marketing Campaign",description:"Design targeted campaign based on market intelligence",icon:c.jsx(ms,{color:"primary"}),action:()=>{}}),T=e=>({id:"action_automation",type:"action",title:"Schedule Automation",description:"Set up automated workflows based on market triggers",icon:c.jsx(q,{color:"primary"}),action:()=>{}}),P=async e=>{const t=e.toLowerCase().indexOf("vs");if(-1===t)return[];return[{id:"compare_result",type:"data",title:`Comparison: ${e.substring(0,t).trim()} vs ${e.substring(t+2).trim()}`,description:"Side-by-side market analysis and competitive positioning",icon:c.jsx(Oe,{color:"info"}),action:()=>{}}]},A=e=>{const t=e.match(/(?:in|at|near)\s+([A-Za-z\s]+(?:,\s*[A-Z]{2})?)/i);return t?t[1].trim():void 0},E=e=>{const t=e.toLowerCase();return["implants","dental implants","aligners","invisalign","veneers","whitening","crowns","braces","orthodontics","root canal","fillings","botox","fillers","dermal fillers","lip filler","pdo threads","prp","prf","body contouring","liposuction","laser treatments","injectables"].find(e=>t.includes(e))},I=e=>{const t=e.match(/\$?([\d.]+)\s*(m|million|k|thousand)/i);if(t){return parseFloat(t[1])*(t[2].toLowerCase().startsWith("m")?1e6:1e3)}},$=async()=>{if(r.trim()){d(!0);try{const e=await(async e=>{const t=e.toLowerCase(),r=[];if(t.includes("show")||t.includes("find")||t.includes("search"))if(t.includes("practice")||t.includes("account")||t.includes("clinic")){const t=A(e),s=E(e),i=I(e);r.push(...await v(t,s,i))}else if(t.includes("procedure")||t.includes("treatment")){const s=t.includes("dental")?"dental":t.includes("aesthetic")?"aesthetic":void 0;r.push(...await y(e,s))}else(t.includes("trend")||t.includes("growing"))&&r.push(...await b(e));else t.includes("generate")||t.includes("create")?t.includes("pitch")||t.includes("deck")?r.push(k(e)):t.includes("report")||t.includes("analysis")?r.push(C(e)):t.includes("campaign")&&r.push(S(e)):t.includes("compare")?r.push(...await P(e)):t.includes("schedule")||t.includes("automate")?r.push(T(e)):r.push(...await _(e));const s=await w(e,r);return r.unshift(...s),r})(r);n(e);const t=[r,...m.filter(e=>e!==r)].slice(0,5);g(t),localStorage.setItem("ai_command_recent",JSON.stringify(t))}catch(e){n([{id:"error",type:"data",title:"Search Error",description:"Unable to process your query. Please try again.",icon:c.jsx(gs,{color:"error"})}])}finally{d(!1)}}};return ks.useEffect(()=>{if(r.length>2){const e=["Show me all practices in Miami doing over $2M in implants","Which aesthetic procedures are growing fastest?","Compare our products vs competitors","Generate pitch deck for body contouring","Find decision makers at aesthetic clinics","Schedule follow-ups with interested accounts"].filter(e=>e.toLowerCase().includes(r.toLowerCase()));p(e.slice(0,3))}else p([])},[r]),c.jsxs(j,{elevation:6,sx:{position:"relative",width:"100%",maxWidth:800,mx:"auto",overflow:"hidden"},children:[c.jsxs(o,{sx:{p:3,borderBottom:1,borderColor:"divider"},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsx(U,{color:"primary",sx:{fontSize:32}}),c.jsx(Ge,{ref:x,fullWidth:!0,variant:"outlined",placeholder:"Ask me anything: 'Show practices in Miami doing $2M+ in implants' or 'Generate pitch for aligners'",value:r,onChange:e=>s(e.target.value),onKeyPress:e=>"Enter"===e.key&&$(),InputProps:{endAdornment:c.jsxs(c.Fragment,{children:[r&&c.jsx(f,{size:"small",onClick:()=>s(""),children:c.jsx(gs,{})}),c.jsx(f,{color:"primary",onClick:$,disabled:!r.trim()||l,children:l?c.jsx(B,{size:24}):c.jsx(fs,{})})]})}})]}),u.length>0&&c.jsxs(o,{sx:{mt:2},children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Suggestions:"}),c.jsx(V,{direction:"row",spacing:1,sx:{mt:1,flexWrap:"wrap"},children:u.map((e,t)=>c.jsx(H,{label:e,size:"small",onClick:()=>{s(e),$()},sx:{mb:1}},t))})]})]}),c.jsxs(o,{sx:{maxHeight:400,overflowY:"auto"},children:[i.length>0?c.jsx(K,{children:c.jsx(gu,{children:i.map((t,r)=>c.jsxs(xf.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.05*r},children:[c.jsxs(Y,{button:!0,onClick:()=>{t.action&&t.action(),e&&e(t)},sx:{"&:hover":{backgroundColor:"action.hover"}},children:[c.jsx(tt,{children:t.icon}),c.jsx(Q,{primary:t.title,secondary:t.description}),t.relevance&&c.jsx(H,{label:`${(100*t.relevance).toFixed(0)}%`,size:"small",color:t.relevance>.7?"success":"default"})]}),r<i.length-1&&c.jsx(N,{})]},t.id))})}):!l&&r&&c.jsx(o,{sx:{p:3,textAlign:"center"},children:c.jsx(h,{color:"text.secondary",children:"No results found. Try rephrasing your query."})}),!r&&m.length>0&&c.jsxs(o,{sx:{p:3},children:[c.jsxs(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:[c.jsx(xs,{fontSize:"small",sx:{verticalAlign:"middle",mr:1}}),"Recent Searches"]}),c.jsx(V,{spacing:1,sx:{mt:2},children:m.map((e,t)=>c.jsx(H,{label:e,variant:"outlined",onClick:()=>{s(e),$()},sx:{justifyContent:"flex-start"}},t))})]})]}),!r&&!l&&c.jsxs(o,{sx:{p:3,borderTop:1,borderColor:"divider"},children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Quick Actions"}),c.jsxs(V,{direction:"row",spacing:1,sx:{mt:2,flexWrap:"wrap"},children:[c.jsx(a,{size:"small",startIcon:c.jsx(L,{}),onClick:()=>{s("Show me high growth opportunities in my territory"),$()},children:"Find Opportunities"}),c.jsx(a,{size:"small",startIcon:c.jsx(ms,{}),onClick:()=>{s("Generate pitch deck for top trending procedures"),$()},children:"Create Pitch"}),c.jsx(a,{size:"small",startIcon:c.jsx(Oe,{}),onClick:()=>{s("Compare dental implants vs clear aligners market"),$()},children:"Market Analysis"})]})]})]})};jI.displayName="AICommandBar";const wI=()=>{const e=l(),[t,r]=ks.useState("map"),[s,n]=ks.useState("all"),[d,u]=ks.useState(null),[p,m]=ks.useState({totalAccounts:124,totalRevenue:8.5,marketPenetration:42,growthRate:18.5,atRiskAccounts:3,topOpportunity:"Digital Dentistry expansion in Miami"}),g=t=>{switch(t){case"customer":return c.jsx(ve,{sx:{color:e.palette.success.main}});case"prospect":return c.jsx(vs,{sx:{color:e.palette.info.main}});case"competitor":return c.jsx(_e,{sx:{color:e.palette.error.main}});case"opportunity":return c.jsx($e,{sx:{color:e.palette.warning.main}})}},f=e=>{switch(e){case"active":return"success";case"at-risk":return"error";case"growth":return"warning";case"new":return"info";default:return"default"}},y=[{id:"1",name:"Elite Dental Partners",type:"customer",location:{lat:25.7617,lng:-80.1918},revenue:25e5,procedures:["Implants","Orthodontics","Cosmetic"],status:"active",lastContact:new Date("2024-01-15"),nextAction:"Quarterly review scheduled"},{id:"2",name:"Aesthetic Excellence Group",type:"customer",location:{lat:25.7825,lng:-80.2221},revenue:18e5,procedures:["Injectables","Body Contouring"],status:"growth",lastContact:new Date("2024-01-10"),nextAction:"Upsell laser equipment"},{id:"3",name:"Smile Innovations",type:"prospect",location:{lat:25.7489,lng:-80.2586},revenue:0,procedures:["Orthodontics"],status:"new",nextAction:"Initial demo scheduled"},{id:"4",name:"Miami Beach Aesthetics",type:"customer",location:{lat:25.7907,lng:-80.13},revenue:95e4,procedures:["Fillers","Botox"],status:"at-risk",lastContact:new Date("2023-12-01"),nextAction:"Urgent: Retention call needed"},{id:"5",name:"Coral Gables Dental",type:"opportunity",location:{lat:25.7211,lng:-80.2684},revenue:0,procedures:["Digital Dentistry"],status:"new",nextAction:"High potential for CAD/CAM systems"}].filter(e=>"all"===s||e.type===s);return c.jsxs(o,{sx:{height:"100%",display:"flex",flexDirection:"column",p:3},children:[c.jsxs(A,{container:!0,spacing:2,sx:{mb:3},children:[c.jsx(A,{item:!0,xs:12,md:6,lg:3,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Accounts"}),c.jsx(h,{variant:"h4",children:p.totalAccounts}),c.jsx(H,{size:"small",label:"+12 this month",color:"success",sx:{mt:1}})]})})}),c.jsx(A,{item:!0,xs:12,md:6,lg:3,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Territory Revenue"}),c.jsxs(h,{variant:"h4",children:["$",p.totalRevenue,"M"]}),c.jsx(Ae,{variant:"determinate",value:3*p.growthRate,sx:{mt:1}})]})})}),c.jsx(A,{item:!0,xs:12,md:6,lg:3,children:c.jsx(i,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Market Penetration"}),c.jsxs(h,{variant:"h4",children:[p.marketPenetration,"%"]}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"58% opportunity remaining"})]})})}),c.jsx(A,{item:!0,xs:12,md:6,lg:3,children:c.jsx(i,{sx:{backgroundColor:e.palette.warning.light},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",children:"At-Risk Accounts"}),c.jsx(h,{variant:"h4",children:p.atRiskAccounts}),c.jsx(a,{size:"small",sx:{mt:1},children:"View All"})]})})})]}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[c.jsxs(Ue,{value:t,exclusive:!0,onChange:(e,t)=>t&&r(t),children:[c.jsxs(Ve,{value:"map",children:[c.jsx(x,{sx:{mr:1}})," Map View"]}),c.jsxs(Ve,{value:"list",children:[c.jsx(ys,{sx:{mr:1}})," List View"]})]}),c.jsxs(V,{direction:"row",spacing:1,children:[c.jsx(H,{label:"All",onClick:()=>n("all"),color:"all"===s?"primary":"default"}),c.jsx(H,{label:"Customers",onClick:()=>n("customer"),color:"customer"===s?"primary":"default",icon:c.jsx(me,{})}),c.jsx(H,{label:"Prospects",onClick:()=>n("prospect"),color:"prospect"===s?"primary":"default",icon:c.jsx(vs,{})}),c.jsx(H,{label:"Opportunities",onClick:()=>n("opportunity"),color:"opportunity"===s?"primary":"default",icon:c.jsx($e,{})})]})]}),c.jsx(j,{sx:{flex:1,position:"relative",overflow:"hidden"},children:"map"===t?c.jsx(o,{sx:{width:"100%",height:"100%",background:`linear-gradient(135deg, ${e.palette.grey[100]} 0%, ${e.palette.grey[200]} 100%)`,position:"relative",display:"flex",alignItems:"center",justifyContent:"center"},children:c.jsxs(o,{sx:{position:"relative",width:"80%",height:"80%"},children:[c.jsx(h,{variant:"h6",sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",color:"text.secondary",textAlign:"center"},children:"Miami-Dade Territory"}),y.map((t,r)=>c.jsx(xf.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.1*r},style:{position:"absolute",left:20+500*(t.location.lng+80.3)+"%",top:80-500*(t.location.lat-25.7)+"%",cursor:"pointer"},onClick:()=>u(t),children:c.jsx(Pe,{title:t.name,children:c.jsx(X,{sx:{backgroundColor:"at-risk"===t.status?e.palette.error.main:e.palette.background.paper,border:`2px solid ${e.palette.divider}`,width:"customer"===t.type?48:40,height:"customer"===t.type?48:40,boxShadow:d?.id===t.id?4:1},children:g(t.type)})})},t.id)),d&&c.jsx(xf.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},style:{position:"absolute",bottom:20,left:20,right:20,zIndex:10},children:c.jsx(i,{elevation:4,children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[c.jsx(h,{variant:"h6",children:d.name}),c.jsx(H,{label:d.status,size:"small",color:f(d.status)})]}),c.jsxs(A,{container:!0,spacing:2,children:[c.jsxs(A,{item:!0,xs:6,children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Type"}),c.jsx(h,{variant:"body2",children:d.type.charAt(0).toUpperCase()+d.type.slice(1)})]}),c.jsxs(A,{item:!0,xs:6,children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Revenue"}),c.jsxs(h,{variant:"body2",children:["$",(d.revenue/1e6).toFixed(1),"M"]})]}),c.jsxs(A,{item:!0,xs:12,children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Procedures"}),c.jsx(V,{direction:"row",spacing:.5,sx:{mt:.5},children:d.procedures.map(e=>c.jsx(H,{label:e,size:"small"},e))})]}),d.nextAction&&c.jsxs(A,{item:!0,xs:12,children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:"Next Action"}),c.jsx(h,{variant:"body2",color:"primary",children:d.nextAction})]})]}),c.jsxs(o,{sx:{mt:2,display:"flex",gap:1},children:[c.jsx(a,{size:"small",variant:"contained",children:"View Details"}),c.jsx(a,{size:"small",variant:"outlined",children:"Schedule Activity"})]})]})})})]})}):c.jsx(o,{sx:{p:2,height:"100%",overflow:"auto"},children:c.jsx(V,{spacing:2,children:y.map(e=>c.jsx(i,{sx:{cursor:"pointer"},children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsx(X,{children:g(e.type)}),c.jsxs(o,{sx:{flex:1},children:[c.jsx(h,{variant:"subtitle1",children:e.name}),c.jsx(h,{variant:"body2",color:"text.secondary",children:e.procedures.join(" â€¢ ")})]}),c.jsxs(o,{sx:{textAlign:"right"},children:[c.jsxs(h,{variant:"h6",children:["$",(e.revenue/1e6).toFixed(1),"M"]}),c.jsx(H,{label:e.status,size:"small",color:f(e.status)})]})]}),e.nextAction&&c.jsxs(h,{variant:"caption",color:"primary",sx:{mt:1,display:"block"},children:["â†’ ",e.nextAction]})]})},e.id))})})})]})};wI.displayName="TerritoryMap";const _I=()=>{const e=l(),[t,r]=ks.useState(0),[s,n]=ks.useState([]),[d,u]=ks.useState(!0),[p,m]=ks.useState("all"),g=[{id:"opp1",type:"NEW_ACCOUNT",title:"Digital Dentistry Expansion - Elite Dental",description:"Elite Dental Partners looking to upgrade to full digital workflow. High interest in CAD/CAM systems and intraoral scanners.",potential_revenue:285e3,probability:.75,urgency_score:90,recommended_actions:["Schedule in-person demo of latest scanner","Prepare ROI analysis for digital workflow","Invite to upcoming digital dentistry workshop"],account:"Elite Dental Partners",daysRemaining:12,competitors:["CompetitorX","TechDent Solutions"],keyContacts:["Dr. Sarah Johnson","Mark Chen (CFO)"],nextStep:"Demo scheduled for next Tuesday",saved:!0},{id:"opp2",type:"CROSS_SELL",title:"Injectable Bundle Opportunity - Aesthetic Excellence",description:"Current Botox customer interested in expanding to full injectable portfolio including fillers and biostimulators.",potential_revenue:156e3,probability:.85,urgency_score:75,recommended_actions:["Present new product portfolio","Offer training package","Discuss volume discounts"],account:"Aesthetic Excellence Group",daysRemaining:8,keyContacts:["Dr. Maria Rodriguez"],nextStep:"Waiting for approval from practice manager"},{id:"opp3",type:"COMPETITIVE_DISPLACEMENT",title:"Competitor Vulnerability - Miami Beach Aesthetics",description:"Customer unhappy with current vendor support. Opportunity to switch their entire laser equipment line.",potential_revenue:425e3,probability:.6,urgency_score:95,recommended_actions:["Emphasize our 24/7 support","Offer equipment trade-in program","Provide comparison chart vs competitor"],account:"Miami Beach Aesthetics",daysRemaining:5,competitors:["Current: LaserCorp"],keyContacts:["Dr. James Wilson","Lisa Park (Operations)"],nextStep:"Emergency meeting requested by customer"},{id:"opp4",type:"UPSELL",title:"Clear Aligner System Upgrade - Smile Innovations",description:"Existing aligner customer ready to upgrade to premium tier with advanced features and better margins.",potential_revenue:98e3,probability:.9,urgency_score:65,recommended_actions:["Demo new AI treatment planning","Show case success stories","Calculate increased revenue potential"],account:"Smile Innovations",daysRemaining:20,keyContacts:["Dr. Kevin Lee"],nextStep:"Contract review in progress"}];ks.useEffect(()=>{setTimeout(()=>{n(g),u(!1)},1e3)},[]);const x=e=>{switch(e){case"NEW_ACCOUNT":return c.jsx(ae,{color:"primary"});case"CROSS_SELL":return c.jsx(q,{color:"secondary"});case"UPSELL":return c.jsx($e,{color:"success"});case"COMPETITIVE_DISPLACEMENT":return c.jsx(Be,{color:"error"});default:return c.jsx(b,{})}},y=s.filter(e=>{switch(p){case"high-value":return e.potential_revenue>2e5;case"closing-soon":return(e.daysRemaining||30)<=10;case"new":return"NEW_ACCOUNT"===e.type;default:return!0}}),j=s.reduce((e,t)=>e+t.potential_revenue,0),w=s.reduce((e,t)=>e+t.potential_revenue*t.probability,0);return c.jsxs(o,{sx:{height:"100%",display:"flex",flexDirection:"column",p:3},children:[c.jsxs(o,{sx:{mb:3},children:[c.jsx(h,{variant:"h5",gutterBottom:!0,children:"Opportunity Pipeline"}),c.jsxs(V,{direction:"row",spacing:3,sx:{mb:3},children:[c.jsx(i,{sx:{flex:1},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Total Pipeline"}),c.jsxs(h,{variant:"h4",children:["$",(j/1e6).toFixed(2),"M"]})]})}),c.jsx(i,{sx:{flex:1},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Weighted Value"}),c.jsxs(h,{variant:"h4",children:["$",(w/1e6).toFixed(2),"M"]})]})}),c.jsx(i,{sx:{flex:1},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",children:"Opportunities"}),c.jsx(h,{variant:"h4",children:s.length})]})})]}),c.jsxs(V,{direction:"row",spacing:1,alignItems:"center",children:[c.jsx(ys,{sx:{color:"text.secondary"}}),c.jsx(H,{label:"All",onClick:()=>m("all"),color:"all"===p?"primary":"default",size:"small"}),c.jsx(H,{label:"High Value",onClick:()=>m("high-value"),color:"high-value"===p?"primary":"default",size:"small",icon:c.jsx(b,{})}),c.jsx(H,{label:"Closing Soon",onClick:()=>m("closing-soon"),color:"closing-soon"===p?"primary":"default",size:"small",icon:c.jsx(Z,{})}),c.jsx(H,{label:"New Accounts",onClick:()=>m("new"),color:"new"===p?"primary":"default",size:"small",icon:c.jsx(ae,{})})]})]}),c.jsx(o,{sx:{flex:1,overflow:"auto"},children:c.jsx(gu,{children:c.jsx(V,{spacing:2,children:y.map((t,r)=>{return c.jsx(xf.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},transition:{delay:.05*r},children:c.jsx(i,{elevation:t.urgency_score>80?4:1,sx:{position:"relative",borderLeft:`4px solid ${e.palette[(s=t.urgency_score,s>=80?"error":s>=60?"warning":"info")].main}`,"&:hover":{boxShadow:4}},children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"flex-start",mb:2},children:[c.jsx(X,{sx:{bgcolor:"background.paper",mr:2},children:x(t.type)}),c.jsxs(o,{sx:{flex:1},children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:t.title}),c.jsx(h,{variant:"body2",color:"text.secondary",children:t.description})]}),c.jsxs(V,{direction:"row",spacing:1,children:[c.jsx(f,{size:"small",onClick:()=>{const e={...t,saved:!t.saved};n(r=>r.map(r=>r.id===t.id?e:r))},children:t.saved?c.jsx(es,{color:"primary"}):c.jsx(ts,{})}),c.jsx(f,{size:"small",children:c.jsx(_t,{})}),c.jsx(f,{size:"small",children:c.jsx(ce,{})})]})]}),c.jsxs(V,{direction:"row",spacing:3,sx:{mb:2},children:[c.jsxs(o,{children:[c.jsxs(h,{variant:"h5",color:"primary",children:["$",(t.potential_revenue/1e3).toFixed(0),"k"]}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Potential Revenue"})]}),c.jsxs(o,{children:[c.jsxs(h,{variant:"h5",children:[(100*t.probability).toFixed(0),"%"]}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Probability"})]}),t.daysRemaining&&c.jsxs(o,{children:[c.jsx(h,{variant:"h5",color:t.daysRemaining<=7?"error":"text.primary",children:t.daysRemaining}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Days Left"})]})]}),c.jsxs(o,{sx:{mb:2},children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[c.jsx(h,{variant:"caption",children:"Progress"}),c.jsxs(h,{variant:"caption",children:[Math.round(100*t.probability),"% Complete"]})]}),c.jsx(Ae,{variant:"determinate",value:100*t.probability,sx:{height:6,borderRadius:3}})]}),c.jsxs(V,{direction:"row",spacing:1,sx:{mb:2,flexWrap:"wrap"},children:[t.account&&c.jsx(H,{label:t.account,size:"small",icon:c.jsx(ve,{})}),t.keyContacts?.map(e=>c.jsx(H,{label:e,size:"small",variant:"outlined"},e)),t.competitors?.map(e=>c.jsx(H,{label:e,size:"small",color:"error",variant:"outlined"},e))]}),t.nextStep&&c.jsx(R,{severity:"info",icon:c.jsx(Ie,{}),sx:{mb:2},children:c.jsxs(h,{variant:"body2",children:[c.jsx("strong",{children:"Next:"})," ",t.nextStep]})}),c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Recommended Actions"}),c.jsx(V,{spacing:1,children:t.recommended_actions.slice(0,2).map((e,t)=>c.jsxs(o,{sx:{display:"flex",alignItems:"center"},children:[c.jsx(me,{sx:{fontSize:16,color:"text.secondary",mr:1}}),c.jsx(h,{variant:"body2",children:e})]},t))})]}),c.jsxs(V,{direction:"row",spacing:1,sx:{mt:2},children:[c.jsx(a,{variant:"contained",size:"small",children:"View Details"}),c.jsx(a,{variant:"outlined",size:"small",children:"Update Status"}),c.jsx(a,{variant:"text",size:"small",children:"Add Note"})]})]})})},t.id);var s})})})})]})};_I.displayName="OpportunityFeed";const kI=()=>{const[e,t]=ks.useState([{id:"1",name:"High Growth Alert",type:"market-trigger",status:"active",trigger:{condition:"Category growth rate exceeds",value:15,comparison:"greater"},actions:["Email top 10 prospects in category","Schedule follow-up calls","Generate market report"],lastRun:new Date("2024-01-18"),nextRun:new Date("2024-01-25"),successRate:82,notificationsSent:47},{id:"2",name:"Competitor Activity Monitor",type:"event-based",status:"active",trigger:{condition:"Competitor launches new product"},actions:["Alert sales team","Update battle cards","Prepare counter-offer templates"],lastRun:new Date("2024-01-15"),successRate:95,notificationsSent:12},{id:"3",name:"Quarterly Business Review",type:"time-based",status:"active",trigger:{condition:"Every 3 months"},actions:["Generate QBR deck","Schedule customer meetings","Send pre-meeting surveys"],nextRun:new Date("2024-02-01"),successRate:100,notificationsSent:28},{id:"4",name:"At-Risk Account Alert",type:"threshold",status:"paused",trigger:{condition:"No activity for",value:60,comparison:"greater"},actions:["Flag account as at-risk","Assign to retention specialist","Offer special promotion"],successRate:71,notificationsSent:8}]),[r,s]=ks.useState(!1),[n,l]=ks.useState(null),d=e=>{switch(e){case"market-trigger":return c.jsx($e,{});case"time-based":return c.jsx(ne,{});case"event-based":return c.jsx(G,{});case"threshold":return c.jsx(_e,{})}},u=e=>{switch(e){case"active":return"success";case"paused":return"warning";case"draft":return"default"}};return c.jsxs(o,{sx:{p:3},children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[c.jsx(h,{variant:"h6",children:"Sales Automations"}),c.jsx(a,{variant:"contained",startIcon:c.jsx(bs,{}),onClick:()=>s(!0),size:"small",children:"New Automation"})]}),c.jsxs(V,{direction:"row",spacing:2,sx:{mb:3},children:[c.jsx(i,{sx:{flex:1},children:c.jsxs(v,{sx:{py:2},children:[c.jsx(h,{variant:"h4",children:e.filter(e=>"active"===e.status).length}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Active"})]})}),c.jsx(i,{sx:{flex:1},children:c.jsxs(v,{sx:{py:2},children:[c.jsx(h,{variant:"h4",children:e.reduce((e,t)=>e+(t.notificationsSent||0),0)}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Actions Taken"})]})}),c.jsx(i,{sx:{flex:1},children:c.jsxs(v,{sx:{py:2},children:[c.jsxs(h,{variant:"h4",children:[Math.round(e.reduce((e,t)=>e+(t.successRate||0),0)/e.length),"%"]}),c.jsx(h,{variant:"caption",color:"text.secondary",children:"Success Rate"})]})})]}),c.jsx(V,{spacing:2,children:e.map(e=>c.jsx(xf.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},whileHover:{scale:1.01},children:c.jsx(i,{elevation:"active"===e.status?2:1,children:c.jsxs(v,{children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",mb:2},children:[c.jsx(tt,{children:d(e.type)}),c.jsxs(o,{sx:{flex:1},children:[c.jsx(h,{variant:"subtitle1",sx:{fontWeight:"medium"},children:e.name}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:[e.trigger.condition," ",e.trigger.value&&`${e.trigger.value}${e.trigger.condition.includes("days")?" days":"%"}`]})]}),c.jsxs(V,{direction:"row",spacing:1,alignItems:"center",children:[c.jsx(H,{label:e.status,size:"small",color:u(e.status)}),c.jsx(g,{checked:"active"===e.status,onChange:()=>{return r=e.id,void t(e=>e.map(e=>e.id===r?{...e,status:"active"===e.status?"paused":"active"}:e));var r},size:"small"}),c.jsx(f,{size:"small",children:c.jsx(y,{})})]})]}),c.jsxs(o,{sx:{mb:2},children:[c.jsx(h,{variant:"caption",color:"text.secondary",gutterBottom:!0,children:"Actions:"}),c.jsx(V,{direction:"row",spacing:1,sx:{mt:.5,flexWrap:"wrap"},children:e.actions.map((e,t)=>c.jsx(H,{label:e,size:"small",variant:"outlined",icon:e.includes("Email")?c.jsx(le,{}):e.includes("Schedule")?c.jsx(ne,{}):c.jsx(ms,{}),sx:{mb:1}},t))})]}),e.successRate&&c.jsxs(o,{sx:{mb:2},children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[c.jsx(h,{variant:"caption",children:"Success Rate"}),c.jsxs(h,{variant:"caption",children:[e.successRate,"%"]})]}),c.jsx(Ae,{variant:"determinate",value:e.successRate,color:e.successRate>80?"success":"warning",sx:{height:4,borderRadius:2}})]}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(V,{direction:"row",spacing:2,children:[e.lastRun&&c.jsxs(h,{variant:"caption",color:"text.secondary",children:["Last run: ",e.lastRun.toLocaleDateString()]}),e.nextRun&&c.jsxs(h,{variant:"caption",color:"primary",children:["Next run: ",e.nextRun.toLocaleDateString()]})]}),c.jsx(a,{size:"small",startIcon:c.jsx(ds,{}),children:"Run Now"})]})]})})},e.id))}),c.jsxs(o,{sx:{mt:4},children:[c.jsx(h,{variant:"subtitle2",color:"text.secondary",gutterBottom:!0,children:"Quick Templates"}),c.jsxs(V,{direction:"row",spacing:1,sx:{flexWrap:"wrap"},children:[c.jsx(H,{label:"New Product Launch",onClick:()=>{},icon:c.jsx(q,{})}),c.jsx(H,{label:"Win-Back Campaign",onClick:()=>{},icon:c.jsx(ms,{})}),c.jsx(H,{label:"Seasonal Promotion",onClick:()=>{},icon:c.jsx(z,{})}),c.jsx(H,{label:"Competition Alert",onClick:()=>{},icon:c.jsx(_e,{})})]})]}),c.jsxs(fe,{open:r,onClose:()=>s(!1),maxWidth:"sm",fullWidth:!0,children:[c.jsx(xe,{children:"Create New Automation"}),c.jsx(ye,{children:c.jsxs(V,{spacing:3,sx:{mt:2},children:[c.jsx(Ge,{label:"Automation Name",fullWidth:!0,placeholder:"e.g., High Growth Category Alert"}),c.jsxs(Rt,{fullWidth:!0,children:[c.jsx(Ot,{children:"Trigger Type"}),c.jsxs(Dt,{defaultValue:"market-trigger",children:[c.jsx(zt,{value:"market-trigger",children:"Market Trigger"}),c.jsx(zt,{value:"time-based",children:"Time Based"}),c.jsx(zt,{value:"event-based",children:"Event Based"}),c.jsx(zt,{value:"threshold",children:"Threshold"})]})]}),c.jsx(Ge,{label:"Trigger Condition",fullWidth:!0,placeholder:"e.g., When category growth exceeds 15%",multiline:!0,rows:2}),c.jsxs(o,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Actions to Perform"}),c.jsxs(V,{spacing:1,children:[c.jsx(p,{control:c.jsx(js,{defaultChecked:!0}),label:"Send email to relevant accounts"}),c.jsx(p,{control:c.jsx(js,{defaultChecked:!0}),label:"Create tasks in CRM"}),c.jsx(p,{control:c.jsx(js,{}),label:"Generate market report"}),c.jsx(p,{control:c.jsx(js,{}),label:"Schedule follow-up calls"})]})]})]})}),c.jsxs(be,{children:[c.jsx(a,{onClick:()=>s(!1),children:"Cancel"}),c.jsx(a,{variant:"contained",onClick:()=>s(!1),children:"Create Automation"})]})]})]})};kI.displayName="AutomationPanel";const CI=({children:e,value:t,index:r})=>c.jsx(o,{hidden:t!==r,sx:{height:"100%"},children:t===r&&e}),SI=()=>{const e=l(),t=rt(e.breakpoints.down("md")),[r,s]=ks.useState("galaxy"),[n,d]=ks.useState(0),[u,p]=ks.useState(!1),[m,g]=ks.useState(5),[y,b]=ks.useState(!1),k=47,C=85,S="Digital Dentistry",T=3,P=[{id:"galaxy",label:"Market Galaxy",icon:c.jsx(_s,{}),view:"galaxy"},{id:"territory",label:"Territory Map",icon:c.jsx(x,{}),view:"territory"},{id:"opportunities",label:"Opportunities",icon:c.jsx($e,{}),view:"opportunities"}];return c.jsxs(o,{sx:{display:"flex",height:"100vh",position:"relative"},children:[c.jsx(ft,{variant:t?"temporary":"permanent",open:!t||y,onClose:()=>b(!1),sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240,boxSizing:"border-box",backgroundColor:e.palette.background.paper,borderRight:`1px solid ${e.palette.divider}`}},children:c.jsxs(o,{sx:{p:2},children:[c.jsx(h,{variant:"h6",sx:{fontWeight:"bold",mb:3},children:"Sales Workspace"}),c.jsx(i,{sx:{mb:3,backgroundColor:e.palette.primary.main,color:"white"},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",sx:{opacity:.9},children:"Monthly Progress"}),c.jsxs(h,{variant:"h4",sx:{fontWeight:"bold"},children:[C,"%"]}),c.jsxs(h,{variant:"caption",sx:{opacity:.8},children:["$",(1200*C).toLocaleString()," of $120,000"]})]})}),c.jsx(K,{children:P.map(t=>c.jsxs(Y,{button:!0,selected:r===t.view,onClick:()=>s(t.view),sx:{borderRadius:1,mb:1,"&.Mui-selected":{backgroundColor:e.palette.action.selected}},children:[c.jsx(tt,{children:t.icon}),c.jsx(Q,{primary:t.label}),"opportunities"===t.id&&c.jsx(H,{label:k,size:"small"})]},t.id))}),c.jsx(N,{sx:{my:2}}),c.jsx(h,{variant:"subtitle2",color:"text.secondary",sx:{mb:2},children:"Quick Actions"}),c.jsxs(V,{spacing:1,children:[c.jsx(a,{fullWidth:!0,variant:"outlined",startIcon:c.jsx(U,{}),onClick:()=>p(!0),sx:{justifyContent:"flex-start"},children:"AI Assistant"}),c.jsx(a,{fullWidth:!0,variant:"outlined",startIcon:c.jsx(ms,{}),sx:{justifyContent:"flex-start"},children:"New Campaign"}),c.jsx(a,{fullWidth:!0,variant:"outlined",startIcon:c.jsx(ne,{}),sx:{justifyContent:"flex-start"},children:"Schedule Demo"})]}),c.jsx(i,{sx:{mt:3,backgroundColor:e.palette.error.light},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"subtitle2",sx:{display:"flex",alignItems:"center",gap:1},children:[c.jsx(Ie,{})," ",T," Urgent Actions"]}),c.jsx(h,{variant:"caption",children:"New competitor activity detected"})]})})]})}),c.jsxs(o,{sx:{flex:1,display:"flex",flexDirection:"column"},children:[c.jsxs(j,{elevation:0,sx:{p:2,borderBottom:`1px solid ${e.palette.divider}`,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[t&&c.jsx(f,{onClick:()=>b(!0),children:c.jsx(ws,{})}),c.jsx(h,{variant:"h6",children:P.find(e=>e.view===r)?.label}),c.jsx(H,{icon:c.jsx($e,{}),label:`Trending: ${S}`,color:"success",size:"small"})]}),c.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:2},children:[c.jsx(Pe,{title:"AI Command Center",children:c.jsx(f,{onClick:()=>p(!0),color:"primary",children:c.jsx(U,{})})}),c.jsx(Ke,{badgeContent:m,color:"error",children:c.jsx(f,{children:c.jsx(Dr,{})})})]})]}),c.jsxs(o,{sx:{flex:1,display:"flex",overflow:"hidden"},children:[c.jsx(o,{sx:{flex:t?1:.65,position:"relative"},children:(()=>{switch(r){case"galaxy":default:return c.jsx(bI,{});case"territory":return c.jsx(wI,{});case"opportunities":return c.jsx(_I,{})}})()}),!t&&c.jsxs(j,{elevation:3,sx:{flex:.35,borderLeft:`1px solid ${e.palette.divider}`,display:"flex",flexDirection:"column",overflow:"hidden"},children:[c.jsxs(w,{value:n,onChange:(e,t)=>d(t),sx:{borderBottom:1,borderColor:"divider"},children:[c.jsx(_,{label:"Insights",icon:c.jsx(Oe,{}),iconPosition:"start"}),c.jsx(_,{label:"Actions",icon:c.jsx(q,{}),iconPosition:"start"}),c.jsx(_,{label:"Timeline",icon:c.jsx(Qr,{}),iconPosition:"start"})]}),c.jsxs(o,{sx:{flex:1,overflow:"auto"},children:[c.jsx(CI,{value:n,index:0,children:c.jsxs(o,{sx:{p:3},children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Market Insights"}),c.jsx(i,{sx:{mb:2},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",color:"primary",gutterBottom:!0,children:"ðŸŽ¯ Top Opportunity"}),c.jsx(h,{variant:"body2",children:"Body contouring showing 22.3% growth in your territory with only 15% market penetration"}),c.jsx(a,{size:"small",sx:{mt:1},children:"View Details"})]})}),c.jsx(i,{sx:{mb:2},children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",color:"error",gutterBottom:!0,children:"âš¡ Market Alert"}),c.jsx(h,{variant:"body2",children:"Competitor launched new clear aligner product with aggressive pricing"}),c.jsx(a,{size:"small",sx:{mt:1},children:"Prepare Response"})]})}),c.jsx(i,{children:c.jsxs(v,{children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Your Performance"}),c.jsxs(V,{spacing:1,children:[c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between"},children:[c.jsx(h,{variant:"body2",children:"Leads Generated"}),c.jsx(H,{label:"23",size:"small",color:"success"})]}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between"},children:[c.jsx(h,{variant:"body2",children:"Demos Scheduled"}),c.jsx(H,{label:"8",size:"small",color:"info"})]}),c.jsxs(o,{sx:{display:"flex",justifyContent:"space-between"},children:[c.jsx(h,{variant:"body2",children:"Pipeline Value"}),c.jsx(H,{label:"$450K",size:"small",color:"primary"})]})]})]})})]})}),c.jsx(CI,{value:n,index:1,children:c.jsx(kI,{})}),c.jsx(CI,{value:n,index:2,children:c.jsxs(o,{sx:{p:3},children:[c.jsx(h,{variant:"h6",gutterBottom:!0,children:"Activity Timeline"}),c.jsx(V,{spacing:2,children:[{time:"10:30 AM",event:"Demo with Elite Dental",type:"meeting"},{time:"2:00 PM",event:"Follow-up: Aesthetic Excellence",type:"call"},{time:"3:30 PM",event:"Proposal deadline: Miami Smiles",type:"deadline"},{time:"Tomorrow",event:"Quarterly review",type:"important"}].map((e,t)=>c.jsx(i,{variant:"outlined",children:c.jsxs(v,{sx:{py:1.5},children:[c.jsx(h,{variant:"caption",color:"text.secondary",children:e.time}),c.jsx(h,{variant:"body2",children:e.event})]})},t))})]})})]})]})]})]}),c.jsx(gu,{children:u&&c.jsx(xf.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1300},onClick:()=>p(!1),children:c.jsx(xf.div,{initial:{scale:.9,y:20},animate:{scale:1,y:0},exit:{scale:.9,y:20},onClick:e=>e.stopPropagation(),style:{width:"90%",maxWidth:800},children:c.jsx(jI,{onClose:()=>p(!1),onResultSelect:e=>{p(!1)}})})})})]})};SI.displayName="SalesWorkspace";const TI={async getAllDentalProcedures(){const{data:e,error:t}=await nl.from("dental_procedures").select("*");return t?[]:(e||[]).map(e=>({...e,id:e.id||`dental_${e.procedure_name||e.name}`,procedure_name:e.procedure_name||e.name||"Unknown Procedure",category:e.category||e.clinical_category||"General Dentistry",industry:"dental"}))},async getAllAestheticProcedures(){const{data:e,error:t}=await nl.from("aesthetic_procedures").select("*"),{data:r,error:s}=await nl.from("aesthetic_categories").select("*");return t?[]:(e||[]).map(e=>{const t=(r||[]).find(t=>t.id===e.aesthetic_category_id||t.name===e.category||t.name===e.aesthetic_category);return{...e,id:String(e.id||Math.floor(1e6*Math.random())),procedure_name:String(e.procedure_name||e.name||"Unknown Procedure"),category:t?.name||e.category||"Aesthetic Medicine",category_id:t?.id||e.aesthetic_category_id,category_description:t?.description,industry:"aesthetic"}})},async getDentalProceduresByCategory(e){const{data:t,error:r}=await nl.from("dental_procedures").select("*").or(`category.eq.${e},clinical_category.eq.${e}`);return r?[]:(t||[]).map(e=>({...e,id:e.id||`dental_${e.procedure_name||e.name}`,procedure_name:e.procedure_name||e.name||"Unknown Procedure",category:e.category||e.clinical_category||"General Dentistry",industry:"dental"}))},async getAestheticProceduresByCategory(e){const{data:t,error:r}=await nl.from("aesthetic_procedures").select("*").or(`category.eq.${e},aesthetic_category.eq.${e}`);return r?[]:(t||[]).map(e=>({...e,id:e.id||`aesthetic_${e.procedure_name||e.name}`,procedure_name:e.procedure_name||e.name||"Unknown Procedure",category:e.category||"Aesthetic Medicine",industry:"aesthetic"}))},async getAllProcedures(){const[e,t]=await Promise.all([this.getAllDentalProcedures(),this.getAllAestheticProcedures()]);return[...e,...t]},async testConnection(){const[e,t]=await Promise.allSettled([nl.from("dental_procedures").select("*").limit(3),nl.from("aesthetic_procedures").select("*").limit(3)]);return{dental:e,aesthetic:t}}},PI=()=>{const[e,t]=ks.useState("Testing..."),[r,s]=ks.useState(null),i=async()=>{t("Testing connection...");try{const e=await TI.testConnection(),[r,i]=await Promise.all([TI.getAllDentalProcedures(),TI.getAllAestheticProcedures()]);s({dental:{count:r.length,sample:r.slice(0,3),categories:[...new Set(r.map(e=>e.category))]},aesthetic:{count:i.length,sample:i.slice(0,3),categories:[...new Set(i.map(e=>e.category))]},serviceTest:e}),0===r.length&&0===i.length?t("âš ï¸ Connection works but no data found in tables"):t(`âœ… Service working! Found ${r.length} dental and ${i.length} aesthetic procedures`)}catch(e){t(`Test failed: ${e}`)}};return ks.useEffect(()=>{i()},[]),c.jsxs(o,{sx:{p:3,maxWidth:800},children:[c.jsx(h,{variant:"h4",gutterBottom:!0,children:"Supabase Connection Test"}),c.jsx(R,{severity:e.includes("âœ…")?"success":"warning",sx:{mb:2},children:e}),c.jsx(a,{variant:"contained",onClick:i,sx:{mb:2},children:"Retest Connection"}),r&&c.jsxs(o,{sx:{mt:2},children:[c.jsx(h,{variant:"h6",children:"Test Results:"}),c.jsx("pre",{style:{background:"#f5f5f5",padding:"10px",fontSize:"12px",overflow:"auto"},children:JSON.stringify(r,null,2)})]})]})};PI.displayName="SupabaseTest";class AI{static generateToken(){return Bs()+"-"+Date.now()}static async createMagicLink(e){const t=this.generateToken(),r=e.expiryHours||24,s=new Date;s.setHours(s.getHours()+r);const{error:i}=await nl.from("magic_link_tokens").insert({email:e.email,token:t,expires_at:s.toISOString(),content_type:e.contentType,content_id:e.contentId,price_tier:e.priceTier,price:e.price});if(i)throw i;return{token:t,url:`${window.location.origin}/magic-link/${t}`}}static async verifyMagicLink(e){const{data:t,error:r}=await nl.from("magic_link_tokens").select("*").eq("token",e).eq("used",!1).gt("expires_at",(new Date).toISOString()).single();return r||!t?{valid:!1}:(await nl.from("magic_link_tokens").update({used:!0,used_at:(new Date).toISOString()}).eq("token",e),await nl.from("premium_content_access").insert({user_email:t.email,content_type:t.content_type,content_id:t.content_id,access_token:e,price_paid:t.price}),{valid:!0,email:t.email,contentType:t.content_type,contentId:t.content_id,price:t.price})}static async generateMailtoLink(e,t){return`mailto:${e}?subject=${encodeURIComponent(t.subject)}&body=${encodeURIComponent(t.body)}`}static async createPremiumContentEmail(e,t){let r="",s="";switch(e){case"market_report":r=`Market Intelligence Report - ${t.market} - ${(new Date).toLocaleDateString()}`,s=this.formatMarketReport(t);break;case"provider_intel":r=`Provider Intelligence Brief - ${t.providerName}`,s=this.formatProviderIntel(t);break;case"territory_insights":r=`Territory Insights - ${t.territory} - Sales Opportunities`,s=this.formatTerritoryInsights(t);break;case"cpt_analysis":r=`CPT Code Analysis - ${t.procedureCategory}`,s=this.formatCPTAnalysis(t)}return{subject:r,body:s}}static formatMarketReport(e){return`\nMARKET INTELLIGENCE REPORT\n${e.market} Market Analysis\nGenerated: ${(new Date).toLocaleDateString()}\n\nEXECUTIVE SUMMARY\n${e.executiveSummary}\n\nKEY MARKET METRICS\nâ€¢ Market Size: $${e.marketSize}M\nâ€¢ YoY Growth: ${e.growth}%\nâ€¢ Top Procedures: ${e.topProcedures.join(", ")}\nâ€¢ Leading Providers: ${e.leadingProviders}\n\nOPPORTUNITY ANALYSIS\n${e.opportunities}\n\nCOMPETITIVE LANDSCAPE\n${e.competitive}\n\nRECOMMENDATIONS\n${e.recommendations}\n\n---\nThis report was generated by Sphere Market Intelligence\nFor questions, contact: support@sphere.com\n    `}static formatProviderIntel(e){return`\nPROVIDER INTELLIGENCE BRIEF\nDr. ${e.providerName}\n${e.specialty} | ${e.location}\n\nPRACTICE OVERVIEW\nâ€¢ Years in Practice: ${e.yearsInPractice}\nâ€¢ Practice Size: ${e.practiceSize}\nâ€¢ Patient Volume: ${e.patientVolume}/month\nâ€¢ Key Procedures: ${e.keyProcedures.join(", ")}\n\nTECHNOLOGY ADOPTION\n${e.techAdoption}\n\nPURCHASING PATTERNS\n${e.purchasingPatterns}\n\nENGAGEMENT STRATEGY\n${e.engagementStrategy}\n\nTALKING POINTS\n${e.talkingPoints}\n\n---\nIntelligence compiled by Sphere Sales Intelligence Platform\n    `}static formatTerritoryInsights(e){return`\nTERRITORY INSIGHTS REPORT\nTerritory: ${e.territory}\nPeriod: ${e.period}\n\nTOP OPPORTUNITIES\n${e.opportunities.map(e=>`â€¢ ${e.provider} - ${e.potential} - ${e.reason}`).join("\n")}\n\nMARKET DYNAMICS\nâ€¢ Territory Value: $${e.territoryValue}M\nâ€¢ Penetration Rate: ${e.penetration}%\nâ€¢ Growth Potential: ${e.growthPotential}%\n\nCOMPETITIVE INTEL\n${e.competitive}\n\nACTION ITEMS\n${e.actionItems.map(e=>`â–¡ ${e}`).join("\n")}\n\nFORECAST\n${e.forecast}\n\n---\nGenerated by Sphere Territory Intelligence\n    `}static formatCPTAnalysis(e){return`\nCPT CODE ANALYSIS\nCategory: ${e.procedureCategory}\nAnalysis Date: ${(new Date).toLocaleDateString()}\n\nPROCEDURE BREAKDOWN\n${e.procedures.map(e=>`\n${e.code} - ${e.name}\nâ€¢ Average Cost: $${e.avgCost}\nâ€¢ Insurance Coverage: ${e.insuranceCoverage}%\nâ€¢ Market Volume: ${e.volume}/year\nâ€¢ Growth Rate: ${e.growth}%\n`).join("\n")}\n\nREIMBURSEMENT INSIGHTS\n${e.reimbursementInsights}\n\nREGIONAL VARIATIONS\n${e.regionalVariations}\n\nOPTIMIZATION OPPORTUNITIES\n${e.opportunities}\n\n---\nCPT Intelligence by Sphere Medical Analytics\n    `}static async sendMagicLinkEmail(e,t,r,s){$f.info("Magic link generated",{email:e,contentType:r})}}var EI={},II=Te;Object.defineProperty(EI,"__esModule",{value:!0});var $I=EI.default=void 0,MI=II(Zs()),RI=c;$I=EI.default=(0,MI.default)((0,RI.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 4-8 5-8-5V6l8 5 8-5z"}),"Email");var OI={},DI=Te;Object.defineProperty(OI,"__esModule",{value:!0});var zI=OI.default=void 0,LI=DI(Zs()),FI=c;zI=OI.default=(0,LI.default)((0,FI.jsx)("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error");const BI=()=>{const{token:e}=$s(),t=As(),[r,s]=ks.useState(!0),[i,n]=ks.useState("verifying"),[l,d]=ks.useState(null),[u,p]=ks.useState("");ks.useEffect(()=>{e&&m()},[e]);const m=async()=>{try{n("verifying");const t=await AI.verifyMagicLink(e);if(!t.valid)return n("error"),p("This link is invalid or has expired."),void s(!1);const r=await g(t.contentType,t.contentId),i=await AI.createPremiumContentEmail(t.contentType,r),a=await AI.generateMailtoLink(t.email,i);d({...r,email:t.email,contentType:t.contentType,price:t.price,mailtoLink:a}),n("success"),setTimeout(()=>{window.location.href=a},2e3)}catch(t){n("error"),p("An error occurred processing your request.")}finally{s(!1)}},g=async(e,t)=>{switch(e){case"market_report":return{market:"New York Metro",executiveSummary:"The NYC dental market shows strong growth with aesthetic procedures leading adoption.",marketSize:450,growth:12.5,topProcedures:["Invisalign","Dental Implants","Teeth Whitening"],leadingProviders:"15 key practices identified",opportunities:"Digital dentistry adoption accelerating, particularly in Manhattan practices.",competitive:"Competitive landscape favors tech-forward practices.",recommendations:"Focus on digital workflow solutions and aesthetic procedures."};case"provider_intel":return{providerName:"Dr. Sarah Chen",specialty:"Cosmetic Dentistry",location:"Manhattan, NY",yearsInPractice:15,practiceSize:"Large (6+ chairs)",patientVolume:450,keyProcedures:["Veneers","Invisalign","Dental Implants"],techAdoption:"Early adopter - Uses CAD/CAM, 3D imaging, digital impressions",purchasingPatterns:"Quarterly bulk orders, prefers premium brands",engagementStrategy:"Values clinical evidence and ROI data",talkingPoints:"Focus on patient satisfaction metrics and workflow efficiency"};case"territory_insights":return{territory:"Manhattan East",period:"Q1 2025",opportunities:[{provider:"Park Avenue Dental",potential:"$125K",reason:"Expanding to 3rd location"},{provider:"Madison Smiles",potential:"$85K",reason:"Upgrading imaging equipment"},{provider:"East Side Orthodontics",potential:"$95K",reason:"Adding clear aligner service"}],territoryValue:12.5,penetration:35,growthPotential:45,competitive:"Primary competitor has 25% share, vulnerable on service",actionItems:["Schedule Q1 business reviews with top 5 accounts","Demo new digital workflow at Madison Smiles","Proposal for Park Avenue expansion project"],forecast:"Projected 25% growth based on identified opportunities"};case"cpt_analysis":return{procedureCategory:"Restorative Dentistry",procedures:[{code:"D2740",name:"Crown - Porcelain/Ceramic",avgCost:1200,insuranceCoverage:50,volume:125e3,growth:8},{code:"D2750",name:"Crown - Porcelain fused to metal",avgCost:1e3,insuranceCoverage:50,volume:98e3,growth:-2},{code:"D2391",name:"Composite filling - 1 surface",avgCost:250,insuranceCoverage:80,volume:45e4,growth:5}],reimbursementInsights:"Insurance companies trending toward ceramic crown coverage",regionalVariations:"NYC rates 25% above national average",opportunities:"Ceramic crowns showing strongest growth and margin potential"};default:throw new Error("Unknown content type")}};return c.jsx(o,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",bgcolor:"background.default",p:3,children:c.jsx(j,{elevation:6,sx:{p:6,maxWidth:600,width:"100%"},children:c.jsxs(o,{textAlign:"center",children:[c.jsx(h,{variant:"h4",gutterBottom:!0,sx:{mb:4},children:"Sphere Intelligence Platform"}),r?c.jsxs(o,{display:"flex",flexDirection:"column",alignItems:"center",gap:3,children:[c.jsx(B,{size:60}),c.jsx(h,{variant:"h5",children:"verifying"===i?"Verifying your access...":"Preparing your content..."})]}):"error"===i?c.jsxs(o,{display:"flex",flexDirection:"column",alignItems:"center",gap:3,children:[c.jsx(zI,{sx:{fontSize:60,color:"error.main"}}),c.jsx(h,{variant:"h5",color:"error",children:"Access Error"}),c.jsx(h,{color:"text.secondary",children:u}),c.jsx(a,{variant:"contained",onClick:()=>t("/"),children:"Return to Home"})]}):"success"===i&&l?c.jsxs(o,{display:"flex",flexDirection:"column",alignItems:"center",gap:3,children:[c.jsx(jE,{sx:{fontSize:60,color:"success.main"}}),c.jsx(h,{variant:"h5",color:"success.main",children:"Content Ready!"}),c.jsxs(h,{variant:"body1",align:"center",children:["Your premium ",l.contentType.replace("_"," ")," is being opened in your email client."]}),c.jsx(h,{variant:"body2",color:"text.secondary",align:"center",children:"The email will be pre-populated with your personalized content. Simply review and click send!"}),c.jsxs(j,{elevation:3,sx:{p:3,mt:2,maxWidth:500},children:[c.jsx(h,{variant:"subtitle2",gutterBottom:!0,children:"Content Details:"}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["â€¢ Type: ",l.contentType.replace("_"," ").toUpperCase()]}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["â€¢ Recipient: ",l.email]}),c.jsxs(h,{variant:"body2",color:"text.secondary",children:["â€¢ Price Paid: $",l.price]})]}),c.jsxs(o,{display:"flex",gap:2,mt:2,children:[c.jsx(a,{variant:"contained",startIcon:c.jsx($I,{}),onClick:()=>window.location.href=l.mailtoLink,children:"Open in Email Client"}),c.jsx(a,{variant:"outlined",onClick:()=>t("/"),children:"Return to Dashboard"})]}),c.jsx(h,{variant:"caption",color:"text.secondary",sx:{mt:2},children:"If your email client doesn't open automatically, click the button above."})]}):null]})})})};BI.displayName="MagicLinkHandler";var NI={},WI=Te;Object.defineProperty(NI,"__esModule",{value:!0});var UI=NI.default=void 0,VI=WI(Zs()),qI=c;UI=NI.default=(0,VI.default)((0,qI.jsx)("path",{d:"M2.01 21 23 12 2.01 3 2 10l15 2-15 2z"}),"Send");var GI={},HI=Te;Object.defineProperty(GI,"__esModule",{value:!0});var KI=GI.default=void 0,YI=HI(Zs()),JI=c;KI=GI.default=(0,YI.default)((0,JI.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-5h2zm4 0h-2v-3h2zm0-5h-2v-2h2zm4 5h-2V7h2z"}),"Analytics");var XI={},QI=Te;Object.defineProperty(XI,"__esModule",{value:!0});var ZI=XI.default=void 0,e$=QI(Zs()),t$=c;ZI=XI.default=(0,e$.default)((0,t$.jsx)("path",{d:"M19 3H5c-1.1 0-1.99.9-1.99 2L3 19c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-1 11h-4v4h-4v-4H6v-4h4V6h4v4h4z"}),"LocalHospital");var r$={},s$=Te;Object.defineProperty(r$,"__esModule",{value:!0});var i$=r$.default=void 0,n$=s$(Zs()),a$=c;i$=r$.default=(0,n$.default)((0,a$.jsx)("path",{d:"M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8zm2 16H8v-2h8zm0-4H8v-2h8zm-3-5V3.5L18.5 9z"}),"Description");const o$=[{type:"market_report",title:"Market Intelligence Report",description:"Comprehensive market analysis with trends, opportunities, and competitive insights",icon:c.jsx(KI,{sx:{fontSize:40}}),basePrice:99,fields:[{name:"market",label:"Market Location",type:"select",options:["New York Metro","Miami-Dade","Los Angeles","Chicago","Houston"],required:!0},{name:"specialty",label:"Specialty Focus",type:"select",options:["All Specialties","Dental","Aesthetic","Orthodontic","Oral Surgery"]},{name:"depth",label:"Analysis Depth",type:"select",options:["Executive Summary","Standard Report","Deep Dive Analysis"]}]},{type:"provider_intel",title:"Provider Intelligence Brief",description:"Detailed provider profile with purchasing patterns and engagement strategies",icon:c.jsx(ZI,{sx:{fontSize:40}}),basePrice:49,fields:[{name:"providerName",label:"Provider Name",type:"text",required:!0},{name:"location",label:"Location",type:"text",required:!0},{name:"includeCompetitive",label:"Include Competitive Intel",type:"select",options:["Yes","No"]}]},{type:"territory_insights",title:"Territory Insights Report",description:"Territory performance metrics with opportunities and action items",icon:c.jsx(aE,{sx:{fontSize:40}}),basePrice:149,fields:[{name:"territory",label:"Territory",type:"text",required:!0},{name:"period",label:"Time Period",type:"select",options:["Last 30 Days","Last Quarter","YTD","Custom"],required:!0},{name:"focusArea",label:"Focus Area",type:"select",options:["All Products","New Launches","Growth Opportunities","At-Risk Accounts"]}]},{type:"cpt_analysis",title:"CPT Code Analysis",description:"Procedure economics with reimbursement rates and regional variations",icon:c.jsx(i$,{sx:{fontSize:40}}),basePrice:79,fields:[{name:"category",label:"Procedure Category",type:"select",options:["Restorative","Cosmetic","Surgical","Diagnostic","Preventive"],required:!0},{name:"region",label:"Region",type:"select",options:["National Average","Northeast","Southeast","Midwest","West Coast"]},{name:"includeForecasting",label:"Include Forecasting",type:"select",options:["Yes","No"]}]}],l$={basic:{multiplier:1,name:"Basic",features:["Standard content","Email delivery"]},pro:{multiplier:1.5,name:"Professional",features:["Enhanced analytics","Priority delivery","Custom branding"]},enterprise:{multiplier:2,name:"Enterprise",features:["White-label content","API access","Bulk pricing","Custom data"]}},c$=()=>{const[e,t]=ks.useState(null),[r,s]=ks.useState({}),[n,l]=ks.useState(""),[d,u]=ks.useState("basic"),[p,m]=ks.useState(!1),[g,f]=ks.useState(!1),[x,y]=ks.useState(!1),[b,j]=ks.useState(""),w=(e,t)=>{s({...r,[e]:t})},_=()=>e?e.basePrice*l$[d].multiplier:0;return c.jsxs(o,{sx:{p:3},children:[c.jsx(h,{variant:"h4",gutterBottom:!0,children:"Premium Content Generator"}),c.jsx(h,{variant:"body1",color:"text.secondary",sx:{mb:4},children:"Generate and deliver premium market intelligence directly to email"}),x&&c.jsxs(R,{severity:"success",sx:{mb:3},children:["Content generated successfully! Magic link sent to ",n]}),b&&c.jsx(R,{severity:"error",sx:{mb:3},onClose:()=>j(""),children:b}),c.jsx(A,{container:!0,spacing:3,sx:{mb:4},children:o$.map(r=>c.jsx(A,{item:!0,xs:12,sm:6,md:3,children:c.jsx(i,{sx:{cursor:"pointer",border:e?.type===r.type?2:1,borderColor:e?.type===r.type?"primary.main":"divider",transition:"all 0.3s","&:hover":{transform:"translateY(-4px)",boxShadow:3}},onClick:()=>(t(r),s({}),y(!1),void j("")),children:c.jsxs(v,{sx:{textAlign:"center"},children:[c.jsx(o,{sx:{color:"primary.main",mb:2},children:r.icon}),c.jsx(h,{variant:"h6",gutterBottom:!0,children:r.title}),c.jsx(h,{variant:"body2",color:"text.secondary",sx:{mb:2},children:r.description}),c.jsx(H,{label:`From $${r.basePrice}`,color:"primary",size:"small",icon:c.jsx(ai,{})})]})})},r.type))}),e&&c.jsx(i,{sx:{mb:4},children:c.jsxs(v,{children:[c.jsxs(h,{variant:"h6",gutterBottom:!0,children:["Configure ",e.title]}),c.jsxs(A,{container:!0,spacing:3,children:[e.fields.map(e=>c.jsx(A,{item:!0,xs:12,sm:6,children:"select"===e.type?c.jsxs(Rt,{fullWidth:!0,required:e.required,children:[c.jsx(Ot,{children:e.label}),c.jsx(Dt,{value:r[e.name]||"",onChange:t=>w(e.name,t.target.value),label:e.label,children:e.options?.map(e=>c.jsx(zt,{value:e,children:e},e))})]}):c.jsx(Ge,{fullWidth:!0,label:e.label,type:e.type,value:r[e.name]||"",onChange:t=>w(e.name,t.target.value),required:e.required})},e.name)),c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsx(Ge,{fullWidth:!0,label:"Recipient Email",type:"email",value:n,onChange:e=>l(e.target.value),required:!0,helperText:"Email address to receive the content"})}),c.jsx(A,{item:!0,xs:12,sm:6,children:c.jsxs(Rt,{fullWidth:!0,children:[c.jsx(Ot,{children:"Pricing Tier"}),c.jsx(Dt,{value:d,onChange:e=>u(e.target.value),label:"Pricing Tier",children:Object.entries(l$).map(([t,r])=>c.jsxs(zt,{value:t,children:[r.name," - $",(e.basePrice*r.multiplier).toFixed(0)]},t))})]})})]}),c.jsxs(o,{sx:{mt:3,p:2,bgcolor:"background.paper",borderRadius:1},children:[c.jsxs(h,{variant:"subtitle2",gutterBottom:!0,children:[l$[d].name," Features:"]}),c.jsx(o,{sx:{display:"flex",gap:1,flexWrap:"wrap"},children:l$[d].features.map(e=>c.jsx(H,{label:e,size:"small",variant:"outlined"},e))})]}),c.jsxs(o,{sx:{mt:4,display:"flex",justifyContent:"space-between",alignItems:"center"},children:[c.jsxs(h,{variant:"h5",children:["Total: $",_()]}),c.jsx(a,{variant:"contained",size:"large",startIcon:g?c.jsx(B,{size:20}):c.jsx(UI,{}),onClick:()=>{const t=e?.fields.filter(e=>e.required&&!r[e.name]).map(e=>e.label);t?.length?j(`Please fill in required fields: ${t.join(", ")}`):n&&n.includes("@")?m(!0):j("Please enter a valid email address")},disabled:g,children:g?"Generating...":"Generate & Send"})]})]})}),c.jsxs(fe,{open:p,onClose:()=>m(!1),children:[c.jsx(xe,{children:"Confirm Premium Content Generation"}),c.jsxs(ye,{children:[c.jsx(h,{gutterBottom:!0,children:"You are about to generate and send:"}),c.jsxs(o,{sx:{my:2},children:[c.jsxs(h,{variant:"subtitle2",children:["â€¢ Content Type: ",e?.title]}),c.jsxs(h,{variant:"subtitle2",children:["â€¢ Recipient: ",n]}),c.jsxs(h,{variant:"subtitle2",children:["â€¢ Pricing Tier: ",l$[d].name]}),c.jsxs(h,{variant:"subtitle2",sx:{fontWeight:"bold",mt:1},children:["â€¢ Total Price: $",_()]})]}),c.jsx(h,{variant:"body2",color:"text.secondary",children:"A magic link will be sent to the recipient's email. The link will be valid for 48 hours."})]}),c.jsxs(be,{children:[c.jsx(a,{onClick:()=>m(!1),children:"Cancel"}),c.jsx(a,{onClick:async()=>{f(!0),m(!1),j("");try{const{token:t,url:i}=await AI.createMagicLink({email:n,contentType:e.type,contentId:JSON.stringify(r),priceTier:d,price:_(),expiryHours:48});await AI.sendMagicLinkEmail(n,i,e.type,_()),y(!0),s({}),l(""),setTimeout(()=>y(!1),5e3)}catch(t){j("Failed to generate content. Please try again.")}finally{f(!1)}},variant:"contained",autoFocus:!0,children:"Confirm & Send"})]})]})]})};c$.displayName="PremiumContentGenerator";const d$=()=>c.jsx(EE,{children:c.jsx(jk,{children:c.jsx(Ms,{children:c.jsx(Tf,{children:c.jsx(rk,{children:c.jsxs(o,{sx:{minHeight:"100vh",background:"linear-gradient(135deg, #0a0a0a 0%, #1a1a2e 100%)",paddingTop:"120px"},children:[c.jsx(XE,{customLinks:[{href:"/",label:"Market Data",icon:"market"},{href:"https://canvas.repspheres.com/",label:"Canvas",icon:"canvas",external:!0},{href:"#repconnect",label:"RepConnect",icon:"pipeline"},{href:"https://crm.repspheres.com/",label:"CRM",icon:"sphere",external:!0}],logoHref:"/"}),c.jsxs(Rs,{children:[c.jsx(Os,{path:"/",element:c.jsx(_j,{})}),c.jsx(Os,{path:"/procedures",element:c.jsx(KE,{})}),c.jsx(Os,{path:"/login",element:c.jsx(WE,{})}),c.jsx(Os,{path:"/auth/callback",element:c.jsx(UE,{})}),c.jsx(Os,{path:"/auth/manual",element:c.jsx(VE,{})}),c.jsx(Os,{path:"/magic-link/:token",element:c.jsx(BI,{})}),c.jsx(Os,{path:"/dashboard",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(_j,{})})}),c.jsx(Os,{path:"/enhanced",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(Xf,{})})}),c.jsx(Os,{path:"/updated",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(K_,{})})}),c.jsx(Os,{path:"/actionable",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(Ks,{})})}),c.jsx(Os,{path:"/quantum",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(Pf,{})})}),c.jsx(Os,{path:"/workspace",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(SI,{})})}),c.jsx(Os,{path:"/premium-content",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(c$,{})})}),c.jsx(Os,{path:"/sales-dashboard",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(tI,{})})}),c.jsx(Os,{path:"/field-tools",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(nI,{})})}),c.jsx(Os,{path:"/industry-tools",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(cI,{})})}),c.jsx(Os,{path:"/intelligence",element:c.jsx(_k,{redirectTo:"/login",children:c.jsx(mI,{})})}),c.jsx(Os,{path:"/test",element:c.jsx(PI,{})}),c.jsx(Os,{path:"*",element:c.jsx(Ds,{to:"/"})})]})]})})})})})});d$.displayName="App";class h$ extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class u$ extends h${constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class p$ extends h${constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class m$ extends h${constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var g$;!function(e){e.Any="any",e.ApNortheast1="ap-northeast-1",e.ApNortheast2="ap-northeast-2",e.ApSouth1="ap-south-1",e.ApSoutheast1="ap-southeast-1",e.ApSoutheast2="ap-southeast-2",e.CaCentral1="ca-central-1",e.EuCentral1="eu-central-1",e.EuWest1="eu-west-1",e.EuWest2="eu-west-2",e.EuWest3="eu-west-3",e.SaEast1="sa-east-1",e.UsEast1="us-east-1",e.UsWest1="us-west-1",e.UsWest2="us-west-2"}(g$||(g$={}));var f$=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};class x${constructor(e,{headers:t={},customFetch:r,region:s=g$.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zs(async()=>{const{default:e}=await Promise.resolve().then(()=>E$);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return f$(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:n}=t;let a={},{region:o}=t;o||(o=this.region);const l=new URL(`${this.url}/${e}`);let c;o&&"any"!==o&&(a["x-region"]=o,l.searchParams.set("forceFunctionRegion",o)),n&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&n instanceof Blob||n instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=n):"string"==typeof n?(a["Content-Type"]="text/plain",c=n):"undefined"!=typeof FormData&&n instanceof FormData?c=n:(a["Content-Type"]="application/json",c=JSON.stringify(n)));const d=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:c}).catch(e=>{throw new u$(e)}),h=d.headers.get("x-relay-error");if(h&&"true"===h)throw new p$(d);if(!d.ok)throw new m$(d);let u,p=(null!==(r=d.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return u="application/json"===p?yield d.json():"application/octet-stream"===p?yield d.blob():"text/event-stream"===p?d:"multipart/form-data"===p?yield d.formData():yield d.text(),{data:u,error:null,response:d}}catch(s){return{data:null,error:s,response:s instanceof m$||s instanceof p$?s.context:void 0}}})}}var y$={},v$={},b$={},j$={},w$={},_$={},k$=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const C$=k$.fetch,S$=k$.fetch.bind(k$),T$=k$.Headers,P$=k$.Request,A$=k$.Response,E$=Object.freeze(Object.defineProperty({__proto__:null,Headers:T$,Request:P$,Response:A$,default:S$,fetch:C$},Symbol.toStringTag,{value:"Module"})),I$=Ss(E$);var $$={};Object.defineProperty($$,"__esModule",{value:!0});let M$=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};$$.default=M$;var R$=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(_$,"__esModule",{value:!0});const O$=R$(I$),D$=R$($$);_$.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=O$.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let r=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,r,s;let i=null,n=null,a=null,o=e.status,l=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(n="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),c=null===(r=e.headers.get("content-range"))||void 0===r?void 0:r.split("/");s&&c&&c.length>1&&(a=parseInt(c[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(n)&&(n.length>1?(i={code:"PGRST116",details:`Results contain ${n.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},n=null,a=null,o=406,l="Not Acceptable"):n=1===n.length?n[0]:null)}else{const t=await e.text();try{i=JSON.parse(t),Array.isArray(i)&&404===e.status&&(n=[],i=null,o=200,l="OK")}catch(c){404===e.status&&""===t?(o=204,l="No Content"):i={message:t}}if(i&&this.isMaybeSingle&&(null===(s=null==i?void 0:i.details)||void 0===s?void 0:s.includes("0 rows"))&&(i=null,o=200,l="OK"),i&&this.shouldThrowOnError)throw new D$.default(i)}return{error:i,data:n,count:a,status:o,statusText:l}});return this.shouldThrowOnError||(r=r.catch(e=>{var t,r,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,t)}returns(){return this}overrideTypes(){return this}};var z$=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(w$,"__esModule",{value:!0});const L$=z$(_$);let F$=class extends L$.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const n=i?`${i}.order`:"order",a=this.url.searchParams.get(n);return this.url.searchParams.set(n,`${a?`${a},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=void 0===s?"offset":`${s}.offset`,n=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(n,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:n="text"}={}){var a;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),l=null!==(a=this.headers.Accept)&&void 0!==a?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${n}; for="${l}"; options=${o};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};w$.default=F$;var B$=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(j$,"__esModule",{value:!0});const N$=B$(w$);let W$=class extends N$.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";"plain"===s?i="pl":"phrase"===s?i="ph":"websearch"===s&&(i="w");const n=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${n}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};j$.default=W$;var U$=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(b$,"__esModule",{value:!0});const V$=U$(j$);b$.default=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",n),r&&(this.headers.Prefer=`count=${r}`),new V$.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),r||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new V$.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const n=[`resolution=${r?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&n.push(this.headers.Prefer),s&&n.push(`count=${s}`),i||n.push("missing=default"),this.headers.Prefer=n.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new V$.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),t&&r.push(`count=${t}`),this.headers.Prefer=r.join(","),new V$.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new V$.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var q$={},G$={};Object.defineProperty(G$,"__esModule",{value:!0}),G$.version=void 0,G$.version="0.0.0-automated",Object.defineProperty(q$,"__esModule",{value:!0}),q$.DEFAULT_HEADERS=void 0;const H$=G$;q$.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${H$.version}`};var K$=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(v$,"__esModule",{value:!0});const Y$=K$(b$),J$=K$(j$),X$=q$;v$.default=class e{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},X$.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Y$.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){let n;const a=new URL(`${this.url}/rpc/${e}`);let o;r||s?(n=r?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{a.searchParams.append(e,t)})):(n="POST",o=t);const l=Object.assign({},this.headers);return i&&(l.Prefer=`count=${i}`),new J$.default({method:n,url:a,headers:l,schema:this.schemaName,body:o,fetch:this.fetch,allowEmpty:!1})}};var Q$=Ts&&Ts.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(y$,"__esModule",{value:!0}),y$.PostgrestError=y$.PostgrestBuilder=y$.PostgrestTransformBuilder=y$.PostgrestFilterBuilder=y$.PostgrestQueryBuilder=y$.PostgrestClient=void 0;const Z$=Q$(v$);y$.PostgrestClient=Z$.default;const eM=Q$(b$);y$.PostgrestQueryBuilder=eM.default;const tM=Q$(j$);y$.PostgrestFilterBuilder=tM.default;const rM=Q$(w$);y$.PostgrestTransformBuilder=rM.default;const sM=Q$(_$);y$.PostgrestBuilder=sM.default;const iM=Q$($$);y$.PostgrestError=iM.default;var nM=y$.default={PostgrestClient:Z$.default,PostgrestQueryBuilder:eM.default,PostgrestFilterBuilder:tM.default,PostgrestTransformBuilder:rM.default,PostgrestBuilder:sM.default,PostgrestError:iM.default};const{PostgrestClient:aM,PostgrestQueryBuilder:oM,PostgrestFilterBuilder:lM,PostgrestTransformBuilder:cM,PostgrestBuilder:dM,PostgrestError:hM}=nM;const uM=function(){if("undefined"!=typeof WebSocket)return WebSocket;if(void 0!==global.WebSocket)return global.WebSocket;if(void 0!==window.WebSocket)return window.WebSocket;if(void 0!==self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var pM,mM,gM,fM,xM,yM;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(pM||(pM={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(mM||(mM={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(gM||(gM={})),(fM||(fM={})).websocket="websocket",function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(xM||(xM={}));class vM{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let n=this.HEADER_LENGTH+2;const a=r.decode(e.slice(n,n+s));n+=s;const o=r.decode(e.slice(n,n+i));n+=i;return{ref:null,topic:a,event:o,payload:JSON.parse(r.decode(e.slice(n,e.byteLength)))}}}class bM{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(yM||(yM={}));const jM=(e,t,r={})=>{var s;const i=null!==(s=r.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce((r,s)=>(r[s]=wM(s,e,t,i),r),{})},wM=(e,t,r,s)=>{const i=t.find(t=>t.name===e),n=null==i?void 0:i.type,a=r[e];return n&&!s.includes(n)?_M(n,a):kM(a)},_M=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return PM(t,r)}switch(e){case yM.bool:return CM(t);case yM.float4:case yM.float8:case yM.int2:case yM.int4:case yM.int8:case yM.numeric:case yM.oid:return SM(t);case yM.json:case yM.jsonb:return TM(t);case yM.timestamp:return AM(t);case yM.abstime:case yM.date:case yM.daterange:case yM.int4range:case yM.int8range:case yM.money:case yM.reltime:case yM.text:case yM.time:case yM.timestamptz:case yM.timetz:case yM.tsrange:case yM.tstzrange:default:return kM(t)}},kM=e=>e,CM=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},SM=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},TM=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},PM=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,s=e[r];if("{"===e[0]&&"}"===s){let s;const n=e.slice(1,r);try{s=JSON.parse("["+n+"]")}catch(i){s=n?n.split(","):[]}return s.map(e=>_M(t,e))}return e},AM=e=>"string"==typeof e?e.replace(" ","T"):e,EM=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class IM{constructor(e,t,r={},s=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var $M,MM,RM,OM;!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}($M||($M={}));class DM{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=DM.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=DM.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],s()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=DM.syncDiff(this.state,e,t,r),s())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),n=this.transformState(t),a={},o={};return this.map(i,(e,t)=>{n[e]||(o[e]=t)}),this.map(n,(e,t)=>{const r=i[e];if(r){const s=t.map(e=>e.presence_ref),i=r.map(e=>e.presence_ref),n=t.filter(e=>i.indexOf(e.presence_ref)<0),l=r.filter(e=>s.indexOf(e.presence_ref)<0);n.length>0&&(a[e]=n),l.length>0&&(o[e]=l)}else a[e]=t}),this.syncDiff(i,{joins:a,leaves:o},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:n}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(t,s)=>{var i;const n=null!==(i=e[t])&&void 0!==i?i:[];if(e[t]=this.cloneDeep(s),n.length>0){const r=e[t].map(e=>e.presence_ref),s=n.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...s)}r(t,n,s)}),this.map(n,(t,r)=>{let i=e[t];if(!i)return;const n=r.map(e=>e.presence_ref);i=i.filter(e=>n.indexOf(e.presence_ref)<0),e[t]=i,s(t,i,r),0===i.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return t[r]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(MM||(MM={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes",e.SYSTEM="system"}(RM||(RM={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(OM||(OM={}));class zM{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=mM.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new IM(this,gM.join,this.params,this.timeout),this.rejoinTimer=new bM(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=mM.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=mM.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=mM.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=mM.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gM.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new DM(this),this.broadcastEndpointURL=EM(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==mM.closed){const{config:{broadcast:i,presence:n,private:a}}=this.params;this._onError(t=>null==e?void 0:e(OM.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(OM.CLOSED));const o={},l={broadcast:i,presence:n,postgres_changes:null!==(s=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==s?s:[],private:a};this.socket.accessTokenValue&&(o.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:l},o)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const s=this.bindings.postgres_changes,i=null!==(r=null==s?void 0:s.length)&&void 0!==r?r:0,n=[];for(let r=0;r<i;r++){const i=s[r],{filter:{event:a,schema:o,table:l,filter:c}}=i,d=t&&t[r];if(!d||d.event!==a||d.schema!==o||d.table!==l||d.filter!==c)return this.unsubscribe(),this.state=mM.errored,void(null==e||e(OM.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));n.push(Object.assign(Object.assign({},i),{id:d.id}))}return this.bindings.postgres_changes=n,void(e&&e(OM.SUBSCRIBED))}null==e||e(OM.SUBSCRIBED)}).receive("error",t=>{this.state=mM.errored,null==e||e(OM.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(OM.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this._on(e,t,r)}async send(e,t={}){var r,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var s,i,n;const a=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(n=null===(i=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===i?void 0:i.broadcast)||void 0===n?void 0:n.ack)||r("ok"),a.receive("ok",()=>r("ok")),a.receive("error",()=>r("error")),a.receive("timeout",()=>r("timed out"))});{const{event:n,payload:a}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:n,payload:a,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(i){return"AbortError"===i.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=mM.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gM.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new IM(this,gM.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),n=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),n}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new IM(this,e,t,r);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const n=e.toLocaleLowerCase(),{close:a,error:o,leave:l,join:c}=gM;if(r&&[a,o,l,c].indexOf(n)>=0&&r!==this._joinRef())return;let d=this._onMessage(n,t,r);if(t&&!d)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(n)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,r,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===s?void 0:s.toLocaleLowerCase())===n}).map(e=>e.callback(d,r)):null===(i=this.bindings[n])||void 0===i||i.filter(e=>{var r,s,i,a,o,l;if(["broadcast","presence","postgres_changes"].includes(n)){if("id"in e){const n=e.id,a=null===(r=e.filter)||void 0===r?void 0:r.event;return n&&(null===(s=t.ids)||void 0===s?void 0:s.includes(n))&&("*"===a||(null==a?void 0:a.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}{const r=null===(o=null===(a=null==e?void 0:e.filter)||void 0===a?void 0:a.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===n}).map(e=>{if("object"==typeof d&&"ids"in d){const e=d.data,{schema:t,table:r,commit_timestamp:s,type:i,errors:n}=e,a={schema:t,table:r,commit_timestamp:s,eventType:i,new:{},old:{},errors:n};d=Object.assign(Object.assign({},a),this._getPayloadRecords(e))}e.callback(d,r)})}_isClosed(){return this.state===mM.closed}_isJoined(){return this.state===mM.joined}_isJoining(){return this.state===mM.joining}_isLeaving(){return this.state===mM.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]=this.bindings[r].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===r&&zM.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gM.close,{},e)}_onError(e){this._on(gM.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=mM.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=jM(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=jM(e.columns,e.old_record)),t}}const LM=()=>{};class FM{constructor(e,t){var r;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=LM,this.ref=0,this.logger=LM,this.conn=null,this.sendBuffer=[],this.serializer=new vM,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zs(async()=>{const{default:e}=await Promise.resolve().then(()=>E$);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${fM.websocket}`,this.httpEndpoint=EM(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),((null==t?void 0:t.logLevel)||(null==t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new bM(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=uM),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case pM.connecting:return xM.Connecting;case pM.open:return xM.Open;case pM.closing:return xM.Closing;default:return xM.Closed}}isConnected(){return this.connectionState()===xM.Open}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===r);if(s)return s;{const r=new zM(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,n=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?n():this.sendBuffer.push(n)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.11.15"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(gM.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:r,payload:s,ref:i}=e;"phoenix"===t&&"phx_reply"===r&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),i&&i===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${r} ${i&&"("+i+")"||""}`,s),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,s,i)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gM.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class BM extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function NM(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class WM extends BM{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class UM extends BM{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var VM=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const qM=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zs(async()=>{const{default:e}=await Promise.resolve().then(()=>E$);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},GM=e=>{if(Array.isArray(e))return e.map(e=>GM(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const s=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=GM(r)}),t};var HM=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const KM=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),YM=(e,t,r)=>HM(void 0,void 0,void 0,function*(){const s=yield VM(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield zs(()=>Promise.resolve().then(()=>E$),void 0)).Response:Response});e instanceof s&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{const s=e.status||500,i=(null==r?void 0:r.statusCode)||s+"";t(new WM(KM(r),s,i))}).catch(e=>{t(new UM(KM(e),e))}):t(new UM(KM(e),e))}),JM=(e,t,r,s)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&s?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(s)?(i.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),i.body=JSON.stringify(s)):i.body=s,Object.assign(Object.assign({},i),r)):i};function XM(e,t,r,s,i,n){return HM(this,void 0,void 0,function*(){return new Promise((a,o)=>{e(r,JM(t,s,i,n)).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>a(e)).catch(e=>YM(e,o,s))})})}function QM(e,t,r,s){return HM(this,void 0,void 0,function*(){return XM(e,"GET",t,r,s)})}function ZM(e,t,r,s,i){return HM(this,void 0,void 0,function*(){return XM(e,"POST",t,s,i,r)})}function eR(e,t,r,s,i){return HM(this,void 0,void 0,function*(){return XM(e,"PUT",t,s,i,r)})}function tR(e,t,r,s,i){return HM(this,void 0,void 0,function*(){return XM(e,"DELETE",t,s,i,r)})}var rR=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const sR={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},iR={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class nR{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=qM(s)}uploadOrUpdate(e,t,r,s){return rR(this,void 0,void 0,function*(){try{let i;const n=Object.assign(Object.assign({},iR),s);let a=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(n.upsert)});const o=n.metadata;"undefined"!=typeof Blob&&r instanceof Blob?(i=new FormData,i.append("cacheControl",n.cacheControl),o&&i.append("metadata",this.encodeMetadata(o)),i.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(i=r,i.append("cacheControl",n.cacheControl),o&&i.append("metadata",this.encodeMetadata(o))):(i=r,a["cache-control"]=`max-age=${n.cacheControl}`,a["content-type"]=n.contentType,o&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(o)))),(null==s?void 0:s.headers)&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),d=yield("PUT"==e?eR:ZM)(this.fetch,`${this.url}/object/${c}`,i,Object.assign({headers:a},(null==n?void 0:n.duplex)?{duplex:n.duplex}:{}));return{data:{path:l,id:d.Id,fullPath:d.Key},error:null}}catch(i){if(NM(i))return{data:null,error:i};throw i}})}upload(e,t,r){return rR(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return rR(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),n=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${n}`);a.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:iR.upsert},s),n=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,n["cache-control"]=`max-age=${t.cacheControl}`,n["content-type"]=t.contentType);return{data:{path:i,fullPath:(yield eR(this.fetch,a.toString(),e,{headers:n})).Key},error:null}}catch(o){if(NM(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return rR(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");const i=yield ZM(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),n=new URL(this.url+i.url),a=n.searchParams.get("token");if(!a)throw new BM("No token returned by API");return{data:{signedUrl:n.toString(),path:e,token:a},error:null}}catch(r){if(NM(r))return{data:null,error:r};throw r}})}update(e,t,r){return rR(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return rR(this,void 0,void 0,function*(){try{return{data:yield ZM(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(NM(s))return{data:null,error:s};throw s}})}copy(e,t,r){return rR(this,void 0,void 0,function*(){try{return{data:{path:(yield ZM(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(NM(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return rR(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ZM(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const n=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${n}`)},{data:i,error:null}}catch(s){if(NM(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return rR(this,void 0,void 0,function*(){try{const s=yield ZM(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${i}`):null})),error:null}}catch(s){if(NM(s))return{data:null,error:s};throw s}})}download(e,t){return rR(this,void 0,void 0,function*(){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),i=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield QM(this.fetch,`${this.url}/${r}/${t}${i}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(n){if(NM(n))return{data:null,error:n};throw n}})}info(e){return rR(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield QM(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:GM(e),error:null}}catch(r){if(NM(r))return{data:null,error:r};throw r}})}exists(e){return rR(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,s){return HM(this,void 0,void 0,function*(){return XM(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(NM(r)&&r instanceof UM){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==i&&s.push(i);const n=void 0!==(null==t?void 0:t.transform)?"render/image":"object",a=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==a&&s.push(a);let o=s.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${n}/public/${r}${o}`)}}}remove(e){return rR(this,void 0,void 0,function*(){try{return{data:yield tR(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(NM(t))return{data:null,error:t};throw t}})}list(e,t,r){return rR(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},sR),t),{prefix:e||""});return{data:yield ZM(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(NM(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const aR={"X-Client-Info":"storage-js/2.10.4"};var oR=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};class lR{constructor(e,t={},r,s){const i=new URL(e);if(null==s?void 0:s.useNewHostname){/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase."))}this.url=i.href,this.headers=Object.assign(Object.assign({},aR),t),this.fetch=qM(r)}listBuckets(){return oR(this,void 0,void 0,function*(){try{return{data:yield QM(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(NM(e))return{data:null,error:e};throw e}})}getBucket(e){return oR(this,void 0,void 0,function*(){try{return{data:yield QM(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(NM(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return oR(this,void 0,void 0,function*(){try{return{data:yield ZM(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(NM(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return oR(this,void 0,void 0,function*(){try{return{data:yield eR(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(NM(r))return{data:null,error:r};throw r}})}emptyBucket(e){return oR(this,void 0,void 0,function*(){try{return{data:yield ZM(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(NM(t))return{data:null,error:t};throw t}})}deleteBucket(e){return oR(this,void 0,void 0,function*(){try{return{data:yield tR(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(NM(t))return{data:null,error:t};throw t}})}}class cR extends lR{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new nR(this.url,this.headers,e,this.fetch)}}let dR="";dR="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const hR={headers:{"X-Client-Info":`supabase-js-${dR}/2.53.0`}},uR={schema:"public"},pR={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},mR={};var gR=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const fR=(e,t,r)=>{const s=(e=>{let t;return t=e||("undefined"==typeof fetch?S$:fetch),(...e)=>t(...e)})(r),i="undefined"==typeof Headers?T$:Headers;return(r,n)=>gR(void 0,void 0,void 0,function*(){var a;const o=null!==(a=yield t())&&void 0!==a?a:e;let l=new i(null==n?void 0:n.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),s(r,Object.assign(Object.assign({},n),{headers:l}))})};var xR=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};const yR="2.71.1",vR=3e4,bR=9e4,jR={"X-Client-Info":`gotrue-js/${yR}`},wR="X-Supabase-Api-Version",_R={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},kR=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class CR extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function SR(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class TR extends CR{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class PR extends CR{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class AR extends CR{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class ER extends AR{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class IR extends AR{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class $R extends AR{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class MR extends AR{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class RR extends AR{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class OR extends AR{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function DR(e){return SR(e)&&"AuthRetryableFetchError"===e.name}class zR extends AR{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class LR extends AR{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const FR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),BR=" \t\n\r=".split(""),NR=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<BR.length;t+=1)e[BR[t].charCodeAt(0)]=-2;for(let t=0;t<FR.length;t+=1)e[FR[t].charCodeAt(0)]=t;return e})();function WR(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(FR[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(FR[e]),t.queuedBits-=6}}function UR(e,t,r){const s=NR[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function VR(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},i={queue:0,queuedBits:0},n=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,s,r)};for(let a=0;a<e.length;a+=1)UR(e.charCodeAt(a),i,n);return t.join("")}function qR(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function GR(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let i=0;i<e.length;i+=1)UR(e.charCodeAt(i),r,s);return new Uint8Array(t)}function HR(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let s=e.charCodeAt(r);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}qR(s,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function KR(e){const t=[],r={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>WR(e,r,s)),WR(null,r,s),t.join("")}const YR=()=>"undefined"!=typeof window&&"undefined"!=typeof document,JR={tested:!1,writable:!1},XR=()=>{if(!YR())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(JR.tested)return JR.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),JR.tested=!0,JR.writable=!0}catch(t){JR.tested=!0,JR.writable=!1}return JR.writable};const QR=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>zs(async()=>{const{default:e}=await Promise.resolve().then(()=>E$);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},ZR=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},eO=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(s){return r}},tO=async(e,t)=>{await e.removeItem(t)};class rO{constructor(){this.promise=new rO.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function sO(e){const t=e.split(".");if(3!==t.length)throw new LR("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!kR.test(t[r]))throw new LR("JWT not in base64url format");return{header:JSON.parse(VR(t[0])),payload:JSON.parse(VR(t[1])),signature:GR(t[2]),raw:{header:t[0],payload:t[1]}}}function iO(e){return("0"+e.toString(16)).substr(-2)}async function nO(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function aO(e,t,r=!1){const s=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let s=0;s<56;s++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,iO).join("")}();let i=s;r&&(i+="/PASSWORD_RECOVERY"),await ZR(e,`${t}-code-verifier`,i);const n=await nO(s);return[n,s===n?"plain":"s256"]}rO.promiseConstructor=Promise;const oO=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const lO=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function cO(e){if(!lO.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function dO(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function hO(e){return JSON.parse(JSON.stringify(e))}const uO=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),pO=[502,503,504];async function mO(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new OR(uO(e),0);if(pO.includes(e.status))throw new OR(uO(e),e.status);let s,i;try{s=await e.json()}catch(a){throw new PR(uO(a),a)}const n=function(e){const t=e.headers.get(wR);if(!t)return null;if(!t.match(oO))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(a){return null}}(e);if(n&&n.getTime()>=_R.timestamp&&"object"==typeof s&&s&&"string"==typeof s.code?i=s.code:"object"==typeof s&&s&&"string"==typeof s.error_code&&(i=s.error_code),i){if("weak_password"===i)throw new zR(uO(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===i)throw new ER}else if("object"==typeof s&&s&&"object"==typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new zR(uO(s),e.status,s.weak_password.reasons);throw new TR(uO(s),e.status||500,i)}async function gO(e,t,r,s){var i;const n=Object.assign({},null==s?void 0:s.headers);n[wR]||(n[wR]=_R.name),(null==s?void 0:s.jwt)&&(n.Authorization=`Bearer ${s.jwt}`);const a=null!==(i=null==s?void 0:s.query)&&void 0!==i?i:{};(null==s?void 0:s.redirectTo)&&(a.redirect_to=s.redirectTo);const o=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",l=await async function(e,t,r,s,i,n){const a=((e,t,r,s)=>{const i={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),i.body=JSON.stringify(s),Object.assign(Object.assign({},i),r))})(t,s,i,n);let o;try{o=await e(r,Object.assign({},a))}catch(l){throw new OR(uO(l),0)}o.ok||await mO(o);if(null==s?void 0:s.noResolveJson)return o;try{return await o.json()}catch(l){await mO(l)}}(e,t,r+o,{headers:n,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(l):{data:Object.assign({},l),error:null}}function fO(e){var t;let r=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function xO(e){const t=fO(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function yO(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function vO(e){return{data:e,error:null}}function bO(e){const{action_link:t,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n}=e,a=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]])}return r}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:s,redirect_to:i,verification_type:n},user:Object.assign({},a)},error:null}}function jO(e){return e}const wO=["global","local","others"];class _O{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=QR(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=wO[0]){if(wO.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${wO.join(", ")}`);try{return await gO(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(SR(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await gO(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:yO})}catch(r){if(SR(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=function(e,t){var r={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(r[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(s=Object.getOwnPropertySymbols(e);i<s.length;i++)t.indexOf(s[i])<0&&Object.prototype.propertyIsEnumerable.call(e,s[i])&&(r[s[i]]=e[s[i]])}return r}(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=null==r?void 0:r.newEmail,delete s.newEmail),await gO(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:bO,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(SR(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await gO(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:yO})}catch(t){if(SR(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,n,a,o;try{const l={nextPage:null,lastPage:0,total:0},c=await gO(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(i=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==i?i:""},xform:jO});if(c.error)throw c.error;const d=await c.json(),h=null!==(n=c.headers.get("x-total-count"))&&void 0!==n?n:0,u=null!==(o=null===(a=c.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==o?o:[];return u.length>0&&(u.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(h)),{data:Object.assign(Object.assign({},d),l),error:null}}catch(l){if(SR(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){cO(e);try{return await gO(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:yO})}catch(t){if(SR(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){cO(e);try{return await gO(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:yO})}catch(r){if(SR(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){cO(e);try{return await gO(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:yO})}catch(r){if(SR(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){cO(e.userId);try{const{data:t,error:r}=await gO(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(SR(t))return{data:null,error:t};throw t}}async _deleteFactor(e){cO(e.userId),cO(e.id);try{return{data:await gO(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(SR(t))return{data:null,error:t};throw t}}}function kO(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const CO=!!(globalThis&&XR()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class SO extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class TO extends SO{}async function PO(e,t,r){const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw new TO(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(CO)try{await globalThis.navigator.locks.query()}catch(i){}return await r()}try{return await r()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const AO={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:jR,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function EO(e,t,r){return await r()}const IO={};class $O{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=$O.nextInstanceID,$O.nextInstanceID+=1,this.instanceID>0&&YR();const s=Object.assign(Object.assign({},AO),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new _O({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=QR(s.fetch),this.lock=s.lock||EO,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:YR()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=PO:this.lock=EO,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:XR()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=kO(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=kO(this.memoryStorage)),YR()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){}null===(r=this.broadcastChannel)||void 0===r||r.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}get jwks(){var e,t;return null!==(t=null===(e=IO[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){IO[this.storageKey]=Object.assign(Object.assign({},IO[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=IO[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){IO[this.storageKey]=Object.assign(Object.assign({},IO[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${yR}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(s){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),YR()&&this.detectSessionInUrl&&"none"!==r){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),function(e){return SR(e)&&"AuthImplicitGrantRedirectError"===e.name}(i)){const t=null===(e=i.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:i}}return await this._removeSession(),{error:i}}const{session:n,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",n,"redirect type",a),await this._saveSession(n),setTimeout(async()=>{"recovery"===a?await this._notifyAllSubscribers("PASSWORD_RECOVERY",n):await this._notifyAllSubscribers("SIGNED_IN",n)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return SR(t)?{error:t}:{error:new PR("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await gO(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:fO}),{data:n,error:a}=i;if(a||!n)return{data:{user:null,session:null},error:a};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(SR(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:r,password:s,options:n}=e;let a=null,o=null;"pkce"===this.flowType&&([a,o]=await aO(this.storage,this.storageKey)),i=await gO(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==n?void 0:n.emailRedirectTo,body:{email:r,password:s,data:null!==(t=null==n?void 0:n.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},code_challenge:a,code_challenge_method:o},xform:fO})}else{if(!("phone"in e))throw new $R("You must provide either an email or phone number and a password");{const{phone:t,password:n,options:a}=e;i=await gO(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:n,data:null!==(r=null==a?void 0:a.data)&&void 0!==r?r:{},channel:null!==(s=null==a?void 0:a.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:fO})}}const{data:n,error:a}=i;if(a||!n)return{data:{user:null,session:null},error:a};const o=n.session,l=n.user;return n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(i){if(SR(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:s,options:i}=e;t=await gO(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:xO})}else{if(!("phone"in e))throw new $R("You must provide either an email or phone number and a password");{const{phone:r,password:s,options:i}=e;t=await gO(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:xO})}}const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:r&&r.session&&r.user?(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s}):{data:{user:null,session:null},error:new IR}}catch(t){if(SR(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(i=e.options)||void 0===i?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,i,n,a,o,l,c,d,h,u;let p,m;if("message"in e)p=e.message,m=e.signature;else{const{chain:h,wallet:u,statement:g,options:f}=e;let x;if(YR())if("object"==typeof u)x=u;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");x=e.solana}else{if("object"!=typeof u||!(null==f?void 0:f.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");x=u}const y=new URL(null!==(t=null==f?void 0:f.url)&&void 0!==t?t:window.location.href);if("signIn"in x&&x.signIn){const e=await x.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==f?void 0:f.signInWithSolana),{version:"1",domain:y.host,uri:y.href}),g?{statement:g}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),m=t.signature}else{if(!("signMessage"in x&&"function"==typeof x.signMessage&&"publicKey"in x&&"object"==typeof x&&x.publicKey&&"toBase58"in x.publicKey&&"function"==typeof x.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${y.host} wants you to sign in with your Solana account:`,x.publicKey.toBase58(),...g?["",g,""]:[""],"Version: 1",`URI: ${y.href}`,`Issued At: ${null!==(s=null===(r=null==f?void 0:f.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(i=null==f?void 0:f.signInWithSolana)||void 0===i?void 0:i.notBefore)?[`Not Before: ${f.signInWithSolana.notBefore}`]:[],...(null===(n=null==f?void 0:f.signInWithSolana)||void 0===n?void 0:n.expirationTime)?[`Expiration Time: ${f.signInWithSolana.expirationTime}`]:[],...(null===(a=null==f?void 0:f.signInWithSolana)||void 0===a?void 0:a.chainId)?[`Chain ID: ${f.signInWithSolana.chainId}`]:[],...(null===(o=null==f?void 0:f.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${f.signInWithSolana.nonce}`]:[],...(null===(l=null==f?void 0:f.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${f.signInWithSolana.requestId}`]:[],...(null===(d=null===(c=null==f?void 0:f.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===d?void 0:d.length)?["Resources",...f.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await x.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");m=e}}try{const{data:t,error:r}=await gO(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:KR(m)},(null===(h=e.options)||void 0===h?void 0:h.captchaToken)?{gotrue_meta_security:{captcha_token:null===(u=e.options)||void 0===u?void 0:u.captchaToken}}:null),xform:fO});if(r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:r}):{data:{user:null,session:null},error:new IR}}catch(g){if(SR(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const t=await eO(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(null!=t?t:"").split("/");try{const{data:t,error:i}=await gO(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:fO});if(await tO(this.storage,`${this.storageKey}-code-verifier`),i)throw i;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:i}):{data:{user:null,session:null,redirectType:null},error:new IR}}catch(i){if(SR(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:n}=e,a=await gO(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:n,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:fO}),{data:o,error:l}=a;return l?{data:{user:null,session:null},error:l}:o&&o.session&&o.user?(o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:o,error:l}):{data:{user:null,session:null},error:new IR}}catch(t){if(SR(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,n;try{if("email"in e){const{email:s,options:i}=e;let n=null,a=null;"pkce"===this.flowType&&([n,a]=await aO(this.storage,this.storageKey));const{error:o}=await gO(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},create_user:null===(r=null==i?void 0:i.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:n,code_challenge_method:a},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}if("phone"in e){const{phone:t,options:r}=e,{data:a,error:o}=await gO(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==r?void 0:r.data)&&void 0!==s?s:{},create_user:null===(i=null==r?void 0:r.shouldCreateUser)||void 0===i||i,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(n=null==r?void 0:r.channel)&&void 0!==n?n:"sms"}});return{data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:o}}throw new $R("You must provide either an email or phone number.")}catch(a){if(SR(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,i=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:n,error:a}=await gO(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:fO});if(a)throw a;if(!n)throw new Error("An error occurred on token verification.");const o=n.session,l=n.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),{data:{user:l,session:o},error:null}}catch(s){if(SR(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,n=null;return"pkce"===this.flowType&&([i,n]=await aO(this.storage,this.storageKey)),await gO(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:n}),headers:this.headers,xform:vO})}catch(i){if(SR(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new ER;const{error:s}=await gO(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(SR(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:n}=await gO(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},redirectTo:null==i?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:n}}if("phone"in e){const{phone:r,type:s,options:i}=e,{data:n,error:a}=await gO(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:null==n?void 0:n.message_id},error:a}}throw new $R("You must provide either an email or phone number and a type")}catch(t){if(SR(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await eO(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<bR;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await eO(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=dO()}if(this.storage.isServer&&e.user){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,r,s)=>(t||"user"!==r||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,r,s))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await gO(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:yO}):await this._useSession(async e=>{var t,r,s;const{data:i,error:n}=e;if(n)throw n;return(null===(t=i.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await gO(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0,xform:yO}):{data:{user:null},error:new ER}})}catch(t){if(SR(t))return function(e){return SR(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await tO(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new ER;const n=s.session;let a=null,o=null;"pkce"===this.flowType&&null!=e.email&&([a,o]=await aO(this.storage,this.storageKey));const{data:l,error:c}=await gO(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:o}),jwt:n.access_token,xform:yO});if(c)throw c;return n.user=l.user,await this._saveSession(n),await this._notifyAllSubscribers("USER_UPDATED",n),{data:{user:n.user},error:null}})}catch(r){if(SR(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new ER;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:n}=sO(e.access_token);if(n.exp&&(r=n.exp,s=r<=t),s){const{session:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return{data:{user:null,session:null},error:r};if(!t)return{data:{user:null,session:null},error:null};i=t}else{const{data:s,error:n}=await this._getUser(e.access_token);if(n)throw n;i={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(SR(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:s,error:i}=t;if(i)throw i;e=null!==(r=s.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new ER;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(SR(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!YR())throw new MR("No browser detected.");if(e.error||e.error_description||e.error_code)throw new MR(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new RR("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new MR("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new RR("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:n,expires_in:a,expires_at:o,token_type:l}=e;if(!(i&&a&&n&&l))throw new MR("No session defined in URL");const c=Math.round(Date.now()/1e3),d=parseInt(a);let h=c+d;o&&(h=parseInt(o));const{data:u,error:p}=await this._getUser(i);if(p)throw p;const m={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:d,expires_at:h,refresh_token:n,token_type:l,user:u.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:m,redirectType:e.type},error:null}}catch(r){if(SR(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await eO(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const n=null===(r=s.session)||void 0===r?void 0:r.access_token;if(n){const{error:t}=await this.admin.signOut(n,e);if(t&&(!function(e){return SR(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await tO(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:s},error:i}=t;if(i)throw i;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(i){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;"pkce"===this.flowType&&([r,s]=await aO(this.storage,this.storageKey,!0));try{return await gO(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(SR(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(SR(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async t=>{var r,s,i,n,a;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:!0});return await gO(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(a=null===(n=o.session)||void 0===n?void 0:n.access_token)&&void 0!==a?a:void 0})});if(s)throw s;return YR()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),{data:{provider:e.provider,url:null==r?void 0:r.url},error:null}}catch(r){if(SR(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:n}=t;if(n)throw n;return await gO(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(r=i.session)||void 0===r?void 0:r.access_token)&&void 0!==s?s:void 0})})}catch(t){if(SR(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const i=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await gO(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:fO})),s=(e,t)=>{const r=200*Math.pow(2,e);return t&&DR(t)&&Date.now()+r-i<vR},new Promise((e,t)=>{(async()=>{for(let n=0;n<1/0;n++)try{const t=await r(n);if(!s(n,null,t))return void e(t)}catch(i){if(!s(n,i))return void t(i)}})()}))}catch(i){if(this._debug(t,"error",i),SR(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(t,"end")}var r,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),YR()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const i=await eO(this.storage,this.storageKey);if(i&&this.userStorage){let t=await eO(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:i.user},await ZR(this.userStorage,this.storageKey+"-user",t)),i.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:dO()}else if(i&&!i.user&&!i.user){const e=await eO(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(i.user=e.user,await tO(this.storage,this.storageKey+"-user"),await ZR(this.storage,this.storageKey,i)):i.user=dO()}if(this._debug(r,"session from storage",i),!this._isValidSession(i))return this._debug(r,"session is not valid"),void(null!==i&&await this._removeSession());const n=1e3*(null!==(t=i.expires_at)&&void 0!==t?t:1/0)-Date.now()<bR;if(this._debug(r,`session has${n?"":" not"} expired with margin of 90000s`),n){if(this.autoRefreshToken&&i.refresh_token){const{error:e}=await this._callRefreshToken(i.refresh_token);e&&(DR(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(i.user&&!0===i.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(i.access_token);!t&&(null==e?void 0:e.user)?(i.user=e.user,await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(s){this._debug(r,"error getting user data, skipping SIGNED_IN notification",s)}else await this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){return void this._debug(r,"error",i)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new ER;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new rO;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new ER;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(i){if(this._debug(s,"error",i),SR(i)){const e={session:null,error:i};return DR(i)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],i=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(i){s.push(i)}});if(await Promise.all(i),s.length>0){for(let e=0;e<s.length;e+=1);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await ZR(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const s=hO(e);await ZR(this.storage,this.storageKey,s)}else{const e=hO(t);await ZR(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await tO(this.storage,this.storageKey),await tO(this.storage,this.storageKey+"-code-verifier"),await tO(this.storage,this.storageKey+"-user"),this.userStorage&&await tO(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&YR()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),vR);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*r.expires_at-t)/vR);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof SO))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!YR()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await aO(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);s.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await gO(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(SR(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:n}=t;if(n)return{data:null,error:n};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:o,error:l}=await gO(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:null===(r=null==i?void 0:i.session)||void 0===r?void 0:r.access_token});return l?{data:null,error:l}:("totp"===e.factorType&&(null===(s=null==o?void 0:o.totp)||void 0===s?void 0:s.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),{data:o,error:null})})}catch(t){if(SR(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:n,error:a}=await gO(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+n.expires_in},n)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",n),{data:n,error:a})})}catch(t){if(SR(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await gO(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token})})}catch(t){if(SR(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=(null==e?void 0:e.factors)||[],s=r.filter(e=>"totp"===e.factor_type&&"verified"===e.status),i=r.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:n}=sO(s.access_token);let a=null;n.aal&&(a=n.aal);let o=a;(null!==(r=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==r?r:[]).length>0&&(o="aal2");return{data:{currentLevel:a,nextLevel:o,currentAuthenticationMethods:n.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>s)return r;const{data:i,error:n}=await gO(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(n)throw n;return i.keys&&0!==i.keys.length?(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};r=e.session.access_token}const{header:s,payload:i,signature:n,raw:{header:a,payload:o}}=sO(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(i.exp);const l=s.alg&&!s.alg.startsWith("HS")&&s.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(s.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:i,header:s,signature:n},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),d=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,d,n,HR(`${a}.${o}`))))throw new LR("Invalid JWT signature");return{data:{claims:i,header:s,signature:n},error:null}}catch(r){if(SR(r))return{data:null,error:r};throw r}}}$O.nextInstanceID=0;const MO=$O;class RO extends MO{constructor(e){super(e)}}var OO=function(e,t,r,s){return new(r||(r=Promise))(function(i,n){function a(e){try{l(s.next(e))}catch(t){n(t)}}function o(e){try{l(s.throw(e))}catch(t){n(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};class DO{constructor(e,t,r){var s,i,n;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const a=(o=e).endsWith("/")?o:o+"/";var o;const l=new URL(a);this.realtimeUrl=new URL("realtime/v1",l),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",l),this.storageUrl=new URL("storage/v1",l),this.functionsUrl=new URL("functions/v1",l);const c=`sb-${l.hostname.split(".")[0]}-auth-token`,d=function(e,t){var r,s;const{db:i,auth:n,realtime:a,global:o}=e,{db:l,auth:c,realtime:d,global:h}=t,u={db:Object.assign(Object.assign({},l),i),auth:Object.assign(Object.assign({},c),n),realtime:Object.assign(Object.assign({},d),a),storage:{},global:Object.assign(Object.assign(Object.assign({},h),o),{headers:Object.assign(Object.assign({},null!==(r=null==h?void 0:h.headers)&&void 0!==r?r:{}),null!==(s=null==o?void 0:o.headers)&&void 0!==s?s:{})}),accessToken:()=>xR(this,void 0,void 0,function*(){return""})};return e.accessToken?u.accessToken=e.accessToken:delete u.accessToken,u}(null!=r?r:{},{db:uR,realtime:mR,auth:Object.assign(Object.assign({},pR),{storageKey:c}),global:hR});this.storageKey=null!==(s=d.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(i=d.global.headers)&&void 0!==i?i:{},d.accessToken?(this.accessToken=d.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(n=d.auth)&&void 0!==n?n:{},this.headers,d.global.fetch),this.fetch=fR(t,this._getAccessToken.bind(this),d.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},d.realtime)),this.rest=new aM(new URL("rest/v1",l).href,{headers:this.headers,schema:d.db.schema,fetch:this.fetch}),this.storage=new cR(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),d.accessToken||this._listenForAuthEvents()}get functions(){return new x$(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return OO(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:n,lock:a,debug:o},l,c){const d={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new RO({url:this.authUrl.href,headers:Object.assign(Object.assign({},d),l),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:n,lock:a,debug:o,fetch:c,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new FM(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=r}}!function(){if("undefined"!=typeof window||"undefined"==typeof process||void 0===process.version||null===process.version)return!1;const e=process.version.match(/^v(\d+)\./);!!e&&parseInt(e[1],10)}();let zO=null;const LO=e=>(!e.supabaseUrl||e.supabaseAnonKey,zO=((e,t,r)=>new DO(e,t,r))(e.supabaseUrl||"",e.supabaseAnonKey||""),zO);new Proxy({},{get:(e,t)=>(()=>{if(!zO)throw new Error("Supabase not initialized. Call initializeSupabase first.");return zO})()[t]});LO({supabaseUrl:"https://cbopynuvhcymbumjnvay.supabase.co",supabaseAnonKey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImNib3B5bnV2aGN5bWJ1bWpudmF5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM5OTUxNzMsImV4cCI6MjA1OTU3MTE3M30.UZElMkoHugIt984RtYWyfrRuv2rB67opQdCrFVPCfzU"}),document.title="Market Data";const FO=document.getElementById("root");if(!FO)throw new Error("Failed to find the root element");Ls(FO).render(c.jsx(Cs.StrictMode,{children:c.jsx(d$,{})}));
